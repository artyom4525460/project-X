/*! For license information please see editor.js.LICENSE.txt */
(()=>{var t,e={9669:(t,e,i)=>{t.exports=i(1609)},5448:(t,e,i)=>{"use strict";var r=i(4867),n=i(6026),o=i(4372),s=i(5327),a=i(4097),l=i(4109),c=i(7985),u=i(5061);t.exports=function(t){return new Promise((function(e,i){var h=t.data,d=t.headers;r.isFormData(h)&&delete d["Content-Type"];var p=new XMLHttpRequest;if(t.auth){var f=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";d.Authorization="Basic "+btoa(f+":"+m)}var g=a(t.baseURL,t.url);if(p.open(t.method.toUpperCase(),s(g,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?l(p.getAllResponseHeaders()):null,o={data:t.responseType&&"text"!==t.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:t,request:p};n(e,i,o),p=null}},p.onabort=function(){p&&(i(u("Request aborted",t,"ECONNABORTED",p)),p=null)},p.onerror=function(){i(u("Network Error",t,null,p)),p=null},p.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),i(u(e,t,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var _=(t.withCredentials||c(g))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0;_&&(d[t.xsrfHeaderName]=_)}if("setRequestHeader"in p&&r.forEach(d,(function(t,e){void 0===h&&"content-type"===e.toLowerCase()?delete d[e]:p.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),t.responseType)try{p.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){p&&(p.abort(),i(t),p=null)})),h||(h=null),p.send(h)}))}},1609:(t,e,i)=>{"use strict";var r=i(4867),n=i(1849),o=i(321),s=i(7185);function a(t){var e=new o(t),i=n(o.prototype.request,e);return r.extend(i,o.prototype,e),r.extend(i,e),i}var l=a(i(5655));l.Axios=o,l.create=function(t){return a(s(l.defaults,t))},l.Cancel=i(5263),l.CancelToken=i(4972),l.isCancel=i(6502),l.all=function(t){return Promise.all(t)},l.spread=i(8713),l.isAxiosError=i(6268),t.exports=l,t.exports.default=l},5263:t=>{"use strict";function e(t){this.message=t}e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,t.exports=e},4972:(t,e,i)=>{"use strict";var r=i(5263);function n(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var i=this;t((function(t){i.reason||(i.reason=new r(t),e(i.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var t;return{token:new n((function(e){t=e})),cancel:t}},t.exports=n},6502:t=>{"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},321:(t,e,i)=>{"use strict";var r=i(4867),n=i(5327),o=i(782),s=i(3572),a=i(7185);function l(t){this.defaults=t,this.interceptors={request:new o,response:new o}}l.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[s,void 0],i=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)i=i.then(e.shift(),e.shift());return i},l.prototype.getUri=function(t){return t=a(this.defaults,t),n(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(t){l.prototype[t]=function(e,i){return this.request(a(i||{},{method:t,url:e,data:(i||{}).data}))}})),r.forEach(["post","put","patch"],(function(t){l.prototype[t]=function(e,i,r){return this.request(a(r||{},{method:t,url:e,data:i}))}})),t.exports=l},782:(t,e,i)=>{"use strict";var r=i(4867);function n(){this.handlers=[]}n.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=n},4097:(t,e,i)=>{"use strict";var r=i(1793),n=i(7303);t.exports=function(t,e){return t&&!r(e)?n(t,e):e}},5061:(t,e,i)=>{"use strict";var r=i(481);t.exports=function(t,e,i,n,o){var s=new Error(t);return r(s,e,i,n,o)}},3572:(t,e,i)=>{"use strict";var r=i(4867),n=i(8527),o=i(6502),s=i(5655);function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return a(t),t.headers=t.headers||{},t.data=n(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return a(t),e.data=n(e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(a(t),e&&e.response&&(e.response.data=n(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},481:t=>{"use strict";t.exports=function(t,e,i,r,n){return t.config=e,i&&(t.code=i),t.request=r,t.response=n,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},7185:(t,e,i)=>{"use strict";var r=i(4867);t.exports=function(t,e){e=e||{};var i={},n=["url","method","data"],o=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function l(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function c(n){r.isUndefined(e[n])?r.isUndefined(t[n])||(i[n]=l(void 0,t[n])):i[n]=l(t[n],e[n])}r.forEach(n,(function(t){r.isUndefined(e[t])||(i[t]=l(void 0,e[t]))})),r.forEach(o,c),r.forEach(s,(function(n){r.isUndefined(e[n])?r.isUndefined(t[n])||(i[n]=l(void 0,t[n])):i[n]=l(void 0,e[n])})),r.forEach(a,(function(r){r in e?i[r]=l(t[r],e[r]):r in t&&(i[r]=l(void 0,t[r]))}));var u=n.concat(o).concat(s).concat(a),h=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===u.indexOf(t)}));return r.forEach(h,c),i}},6026:(t,e,i)=>{"use strict";var r=i(5061);t.exports=function(t,e,i){var n=i.config.validateStatus;i.status&&n&&!n(i.status)?e(r("Request failed with status code "+i.status,i.config,null,i.request,i)):t(i)}},8527:(t,e,i)=>{"use strict";var r=i(4867);t.exports=function(t,e,i){return r.forEach(i,(function(i){t=i(t,e)})),t}},5655:(t,e,i)=>{"use strict";var r=i(4155),n=i(4867),o=i(6016),s={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var l,c={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==r&&"[object process]"===Object.prototype.toString.call(r))&&(l=i(5448)),l),transformRequest:[function(t,e){return o(e,"Accept"),o(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t)?t:n.isArrayBufferView(t)?t.buffer:n.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):n.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],(function(t){c.headers[t]={}})),n.forEach(["post","put","patch"],(function(t){c.headers[t]=n.merge(s)})),t.exports=c},1849:t=>{"use strict";t.exports=function(t,e){return function(){for(var i=new Array(arguments.length),r=0;r<i.length;r++)i[r]=arguments[r];return t.apply(e,i)}}},5327:(t,e,i)=>{"use strict";var r=i(4867);function n(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,i){if(!e)return t;var o;if(i)o=i(e);else if(r.isURLSearchParams(e))o=e.toString();else{var s=[];r.forEach(e,(function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),s.push(n(e)+"="+n(t))})))})),o=s.join("&")}if(o){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},7303:t=>{"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},4372:(t,e,i)=>{"use strict";var r=i(4867);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,i,n,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),r.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),r.isString(n)&&a.push("path="+n),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:t=>{"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},6268:t=>{"use strict";t.exports=function(t){return"object"==typeof t&&!0===t.isAxiosError}},7985:(t,e,i)=>{"use strict";var r=i(4867);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function n(t){var r=t;return e&&(i.setAttribute("href",r),r=i.href),i.setAttribute("href",r),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return t=n(window.location.href),function(e){var i=r.isString(e)?n(e):e;return i.protocol===t.protocol&&i.host===t.host}}():function(){return!0}},6016:(t,e,i)=>{"use strict";var r=i(4867);t.exports=function(t,e){r.forEach(t,(function(i,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=i,delete t[r])}))}},4109:(t,e,i)=>{"use strict";var r=i(4867),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,i,o,s={};return t?(r.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),i=r.trim(t.substr(o+1)),e){if(s[e]&&n.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([i]):s[e]?s[e]+", "+i:i}})),s):s}},8713:t=>{"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},4867:(t,e,i)=>{"use strict";var r=i(1849),n=Object.prototype.toString;function o(t){return"[object Array]"===n.call(t)}function s(t){return void 0===t}function a(t){return null!==t&&"object"==typeof t}function l(t){if("[object Object]"!==n.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function c(t){return"[object Function]"===n.call(t)}function u(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),o(t))for(var i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===n.call(t)},isBuffer:function(t){return null!==t&&!s(t)&&null!==t.constructor&&!s(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isPlainObject:l,isUndefined:s,isDate:function(t){return"[object Date]"===n.call(t)},isFile:function(t){return"[object File]"===n.call(t)},isBlob:function(t){return"[object Blob]"===n.call(t)},isFunction:c,isStream:function(t){return a(t)&&c(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function t(){var e={};function i(i,r){l(e[r])&&l(i)?e[r]=t(e[r],i):l(i)?e[r]=t({},i):o(i)?e[r]=i.slice():e[r]=i}for(var r=0,n=arguments.length;r<n;r++)u(arguments[r],i);return e},extend:function(t,e,i){return u(e,(function(e,n){t[n]=i&&"function"==typeof e?r(e,i):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},8679:(t,e,i)=>{"use strict";var r=i(9864),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(t){return r.isMemo(t)?s:a[t.$$typeof]||n}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,i,r){if("string"!=typeof i){if(f){var n=p(i);n&&n!==f&&t(e,n,r)}var s=u(i);h&&(s=s.concat(h(i)));for(var a=l(e),m=l(i),g=0;g<s.length;++g){var _=s[g];if(!(o[_]||r&&r[_]||m&&m[_]||a&&a[_])){var y=d(i,_);try{c(e,_,y)}catch(t){}}}}return e}},7418:t=>{"use strict";var e=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,o){for(var s,a,l=n(t),c=1;c<arguments.length;c++){for(var u in s=Object(arguments[c]))i.call(s,u)&&(l[u]=s[u]);if(e){a=e(s);for(var h=0;h<a.length;h++)r.call(s,a[h])&&(l[a[h]]=s[a[h]])}}return l}},8821:(t,e,i)=>{"use strict";i.d(e,{a:()=>n,b:()=>s,c:()=>o,d:()=>c,e:()=>u,f:()=>h,g:()=>ut,h:()=>at,i:()=>d,j:()=>et,k:()=>rt,l:()=>nt,m:()=>ot,n:()=>st,o:()=>wd,p:()=>td,q:()=>Ku,r:()=>eh,s:()=>th,t:()=>Vc,u:()=>Qu,v:()=>m,w:()=>a,y:()=>qh,z:()=>Oh,A:()=>fh,B:()=>Ju,C:()=>yh,D:()=>_,E:()=>l,G:()=>tt,H:()=>mh,J:()=>Kh,K:()=>v,M:()=>Qh,N:()=>b,O:()=>Jh,P:()=>Ih,Q:()=>J,R:()=>w,S:()=>Pc,T:()=>S,U:()=>k,W:()=>wh,X:()=>Eh,Y:()=>kd,Z:()=>T,_:()=>it,$:()=>Id,aa:()=>Ah});var r,n,o,s,a,l,c,u,h,d,p=i(4155),f=Object.create,m=Object.defineProperty,g=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty,y=Object.getOwnPropertyNames,v=Object.getOwnPropertyDescriptor,b=Object.assign,x=t=>m(t,"__esModule",{value:!0}),w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),S=(t,e)=>{for(var i in x(t),e)m(t,i,{get:e[i],enumerable:!0})},k=t=>t&&t.__esModule?t:((t,e,i)=>{if(x(t),"object"==typeof e||"function"==typeof e)for(let r of y(e))!_.call(t,r)&&"default"!==r&&m(t,r,{get:()=>e[r],enumerable:!(i=v(e,r))||i.enumerable});return t})(m(f(g(t)),"default",{value:t,enumerable:!0}),t),C=(t,e,i)=>("symbol"!=typeof e&&(e+=""),e in t?m(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i),T=(t,e,i)=>new Promise(((r,n)=>{var o=t=>{try{a(i.next(t))}catch(t){n(t)}},s=t=>{try{a(i.throw(t))}catch(t){n(t)}},a=t=>t.done?r(t.value):Promise.resolve(t.value).then(o,s);a((i=i.apply(t,e)).next())})),E=w((t=>{S(t,{glGet:()=>e,webUtils:()=>i});const e=t=>{const e={preserveDrawingBuffer:!0};return t.getContext("webgl",e)||t.getContext("experimental-webgl",e)},i={isSupported:()=>Boolean(e(vt())),isCanvas:t=>"Canvas"===t.constructor.name||Boolean(t.tagName&&"CANVAS"===t.tagName.toUpperCase()),isImage:t=>Boolean(t.tagName&&"IMG"===t.tagName.toUpperCase()),Image:window.Image,glMaxTexture:()=>{const t=e(vt()),i=t.getParameter(t.MAX_TEXTURE_SIZE),r=t.getExtension("WEBGL_lose_context");return r&&r.loseContext(),i},glGet:e,createCanvas:vt,glResize:(t,e)=>t,glTexImage:(t,e)=>{if(e instanceof xt)t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,e.data);else{const i=bt(e);t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)}}}})),R=w(((t,e)=>{!function(r){var n="object"==typeof t&&t&&!t.nodeType&&t,o="object"==typeof e&&e&&!e.nodeType&&e,s="object"==typeof i.g&&i.g;(s.global===s||s.window===s||s.self===s)&&(r=s);var a,l,c=2147483647,u=36,h=/^xn--/,d=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,g=String.fromCharCode;function _(t){throw RangeError(f[t])}function y(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function v(t,e){var i=t.split("@"),r="";return i.length>1&&(r=i[0]+"@",t=i[1]),r+y((t=t.replace(p,".")).split("."),e).join(".")}function b(t){for(var e,i,r=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function x(t){return y(t,(function(t){var e="";return t>65535&&(e+=g((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=g(t)})).join("")}function w(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:u}function S(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function k(t,e,i){var r=0;for(t=i?m(t/700):t>>1,t+=m(t/e);t>455;r+=u)t=m(t/35);return m(r+36*t/(t+38))}function C(t){var e,i,r,n,o,s,a,l,h,d,p=[],f=t.length,g=0,y=128,v=72;for((i=t.lastIndexOf("-"))<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&_("not-basic"),p.push(t.charCodeAt(r));for(n=i>0?i+1:0;n<f;){for(o=g,s=1,a=u;n>=f&&_("invalid-input"),((l=w(t.charCodeAt(n++)))>=u||l>m((c-g)/s))&&_("overflow"),g+=l*s,!(l<(h=a<=v?1:a>=v+26?26:a-v));a+=u)s>m(c/(d=u-h))&&_("overflow"),s*=d;v=k(g-o,e=p.length+1,0==o),m(g/e)>c-y&&_("overflow"),y+=m(g/e),g%=e,p.splice(g++,0,y)}return x(p)}function T(t){var e,i,r,n,o,s,a,l,h,d,p,f,y,v,x,w=[];for(f=(t=b(t)).length,e=128,i=0,o=72,s=0;s<f;++s)(p=t[s])<128&&w.push(g(p));for(r=n=w.length,n&&w.push("-");r<f;){for(a=c,s=0;s<f;++s)(p=t[s])>=e&&p<a&&(a=p);for(a-e>m((c-i)/(y=r+1))&&_("overflow"),i+=(a-e)*y,e=a,s=0;s<f;++s)if((p=t[s])<e&&++i>c&&_("overflow"),p==e){for(l=i,h=u;!(l<(d=h<=o?1:h>=o+26?26:h-o));h+=u)x=l-d,v=u-d,w.push(g(S(d+x%v,0))),l=m(x/v);w.push(g(S(l,0))),o=k(i,y,r==n),i=0,++r}++i,++e}return w.join("")}if(a={version:"1.3.2",ucs2:{decode:b,encode:x},decode:C,encode:T,toASCII:function(t){return v(t,(function(t){return d.test(t)?"xn--"+T(t):t}))},toUnicode:function(t){return v(t,(function(t){return h.test(t)?C(t.slice(4).toLowerCase()):t}))}},"function"==typeof define&&i.amdO)define("punycode",(function(){return a}));else if(n&&o)if(e.exports==n)o.exports=a;else for(l in a)a.hasOwnProperty(l)&&(n[l]=a[l]);else r.punycode=a}(t)})),D=w(((t,e)=>{e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}})),I=w(((t,e)=>{function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,r,n){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(e);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var l=t.length;a>0&&l>a&&(l=a);for(var c=0;c<l;++c){var u,h,d,p,f=t[c].replace(s,"%20"),m=f.indexOf(r);m>=0?(u=f.substr(0,m),h=f.substr(m+1)):(u=f,h=""),d=decodeURIComponent(u),p=decodeURIComponent(h),i(o,d)?Array.isArray(o[d])?o[d].push(p):o[d]=[o[d],p]:o[d]=p}return o}})),O=w(((t,e)=>{var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,r,n){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(n){var o=encodeURIComponent(i(n))+r;return Array.isArray(t[n])?t[n].map((function(t){return o+encodeURIComponent(i(t))})).join(e):o+encodeURIComponent(i(t[n]))})).join(e):n?encodeURIComponent(i(n))+r+encodeURIComponent(i(t)):""}})),A=w((t=>{t.decode=t.parse=I(),t.encode=t.stringify=O()})),F=w((t=>{var e=R(),i=D();function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=_,t.resolve=function(t,e){return _(t,!1,!0).resolve(e)},t.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},t.format=function(t){return i.isString(t)&&(t=_(t)),t instanceof r?t.format():r.prototype.format.call(t)},t.Url=r;var n=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,a=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(a),c=["%","/","?",";","#"].concat(l),u=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},f={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=A();function _(t,e,n){if(t&&i.isObject(t)&&t instanceof r)return t;var o=new r;return o.parse(t,e,n),o}r.prototype.parse=function(t,r,o){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var a=t.indexOf("?"),_=-1!==a&&a<t.indexOf("#")?"?":"#",y=t.split(_);y[0]=y[0].replace(/\\/g,"/");var v=t=y.join(_);if(v=v.trim(),!o&&1===t.split("#").length){var b=s.exec(v);if(b)return this.path=v,this.href=v,this.pathname=b[1],b[2]?(this.search=b[2],this.query=r?g.parse(this.search.substr(1)):this.search.substr(1)):r&&(this.search="",this.query={}),this}var x=n.exec(v);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,v=v.substr(x.length)}if(o||x||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===v.substr(0,2);S&&(!x||!f[x])&&(v=v.substr(2),this.slashes=!0)}if(!f[x]&&(S||x&&!m[x])){for(var k=-1,C=0;C<u.length;C++){-1!==(R=v.indexOf(u[C]))&&(-1===k||R<k)&&(k=R)}var T,E;-1!==(E=-1===k?v.lastIndexOf("@"):v.lastIndexOf("@",k))&&(T=v.slice(0,E),v=v.slice(E+1),this.auth=decodeURIComponent(T)),k=-1;for(C=0;C<c.length;C++){var R;-1!==(R=v.indexOf(c[C]))&&(-1===k||R<k)&&(k=R)}-1===k&&(k=v.length),this.host=v.slice(0,k),v=v.slice(k),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var I=this.hostname.split(/\./),O=(C=0,I.length);C<O;C++){var A=I[C];if(A&&!A.match(h)){for(var F="",M=0,P=A.length;M<P;M++)A.charCodeAt(M)>127?F+="x":F+=A[M];if(!F.match(h)){var B=I.slice(0,C),z=I.slice(C+1),L=A.match(d);L&&(B.push(L[1]),z.unshift(L[2])),z.length&&(v="/"+z.join(".")+v),this.hostname=B.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=e.toASCII(this.hostname));var N=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+N,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!p[w])for(C=0,O=l.length;C<O;C++){var j=l[C];if(-1!==v.indexOf(j)){var H=encodeURIComponent(j);H===j&&(H=escape(j)),v=v.split(j).join(H)}}var W=v.indexOf("#");-1!==W&&(this.hash=v.substr(W),v=v.slice(0,W));var G=v.indexOf("?");if(-1!==G?(this.search=v.substr(G),this.query=v.substr(G+1),r&&(this.query=g.parse(this.query)),v=v.slice(0,G)):r&&(this.search="",this.query={}),v&&(this.pathname=v),m[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){N=this.pathname||"";var V=this.search||"";this.path=N+V}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=g.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||m[e])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+n},r.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(i.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var n=new r,o=Object.keys(this),s=0;s<o.length;s++){var a=o[s];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),c=0;c<l.length;c++){var u=l[c];"protocol"!==u&&(n[u]=t[u])}return m[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!m[t.protocol]){for(var h=Object.keys(t),d=0;d<h.length;d++){var p=h[d];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||f[t.protocol])n.pathname=t.pathname;else{for(var g=(t.pathname||"").split("/");g.length&&!(t.host=g.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==g[0]&&g.unshift(""),g.length<2&&g.unshift(""),n.pathname=g.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var _=n.pathname||"",y=n.search||"";n.path=_+y}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=b||v||n.host&&t.pathname,w=x,S=n.pathname&&n.pathname.split("/")||[],k=(g=t.pathname&&t.pathname.split("/")||[],n.protocol&&!m[n.protocol]);if(k&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===g[0]?g[0]=t.host:g.unshift(t.host)),t.host=null),x=x&&(""===g[0]||""===S[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,S=g;else if(g.length)S||(S=[]),S.pop(),S=S.concat(g),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(k)n.hostname=n.host=S.shift(),(D=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=D.shift(),n.host=n.hostname=D.shift());return n.search=t.search,n.query=t.query,(!i.isNull(n.pathname)||!i.isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=S.slice(-1)[0],T=(n.host||t.host||S.length>1)&&("."===C||".."===C)||""===C,E=0,R=S.length;R>=0;R--)"."===(C=S[R])?S.splice(R,1):".."===C?(S.splice(R,1),E++):E&&(S.splice(R,1),E--);if(!x&&!w)for(;E--;E)S.unshift("..");x&&""!==S[0]&&(!S[0]||"/"!==S[0].charAt(0))&&S.unshift(""),T&&"/"!==S.join("/").substr(-1)&&S.push("");var D,I=""===S[0]||S[0]&&"/"===S[0].charAt(0);k&&(n.hostname=n.host=I?"":S.length?S.shift():"",(D=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=D.shift(),n.host=n.hostname=D.shift()));return(x=x||n.host&&S.length)&&!I&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),(!i.isNull(n.pathname)||!i.isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=o.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}})),M=w(((t,e)=>{(function(){var t,i,r,n,o,s;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:null!=p&&p.hrtime?(e.exports=function(){return(t()-o)/1e6},i=p.hrtime,n=(t=function(){var t;return 1e9*(t=i())[0]+t[1]})(),s=1e9*p.uptime(),o=n-s):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(t)})),P=w(((t,e)=>{var i=function(){function t(t){return n.appendChild(t.dom),t}function e(t){for(var e=0;e<n.children.length;e++)n.children[e].style.display=e===t?"block":"none";r=t}var r=0,n=document.createElement("div");n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",(function(t){t.preventDefault(),e(++r%n.children.length)}),!1);var o=(performance||Date).now(),s=o,a=0,l=t(new i.Panel("FPS","#0ff","#002")),c=t(new i.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=t(new i.Panel("MB","#f08","#201"));return e(0),{REVISION:16,dom:n,addPanel:t,showPanel:e,begin:function(){o=(performance||Date).now()},end:function(){a++;var t=(performance||Date).now();if(c.update(t-o,200),t>s+1e3&&(l.update(1e3*a/(t-s),100),s=t,a=0,u)){var e=performance.memory;u.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){o=this.end()},domElement:n,setMode:e}};i.Panel=function(t,e,i){var r=1/0,n=0,o=Math.round,s=o(window.devicePixelRatio||1),a=80*s,l=48*s,c=3*s,u=2*s,h=3*s,d=15*s,p=74*s,f=30*s,m=document.createElement("canvas");m.width=a,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*s+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=i,g.fillRect(0,0,a,l),g.fillStyle=e,g.fillText(t,c,u),g.fillRect(h,d,p,f),g.fillStyle=i,g.globalAlpha=.9,g.fillRect(h,d,p,f),{dom:m,update:function(l,_){r=Math.min(r,l),n=Math.max(n,l),g.fillStyle=i,g.globalAlpha=1,g.fillRect(0,0,a,d),g.fillStyle=e,g.fillText(o(l)+" "+t+" ("+o(r)+"-"+o(n)+")",c,u),g.drawImage(m,h+s,d,p-s,f,h,d,p-s,f),g.fillRect(h+p-s,d,s,f),g.fillStyle=i,g.globalAlpha=.9,g.fillRect(h+p-s,d,s,o((1-l/_)*f))}}},"object"==typeof e&&(e.exports=i)})),B=w(((t,e)=>{e.exports=(t,e=1,i)=>{if(i=b({indent:" ",includeEmptyLines:!1},i),"string"!=typeof t)throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof t}\``);if("number"!=typeof e)throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if("string"!=typeof i.indent)throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof i.indent}\``);if(0===e)return t;const r=i.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return t.replace(r,i.indent.repeat(e))}})),z=w((()=>{})),L=w(((t,e)=>{const i=z(),r=/\s+at.*(?:\(|\s)(.*)\)?/,n=/^(?:(?:(?:node|(?:internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)\.js:\d+:\d+)|native)/,o=void 0===i.homedir?"":i.homedir();e.exports=(t,e)=>(e=Object.assign({pretty:!1},e),t.replace(/\\/g,"/").split("\n").filter((t=>{const e=t.match(r);if(null===e||!e[1])return!0;const i=e[1];return!i.includes(".app/Contents/Resources/electron.asar")&&!i.includes(".app/Contents/Resources/default_app.asar")&&!n.test(i)})).filter((t=>""!==t.trim())).map((t=>e.pretty?t.replace(r,((t,e)=>t.replace(e,e.replace(o,"~")))):t)).join("\n"))})),N=w(((t,e)=>{const i=B(),r=L();class n extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError("Expected input to be an Array, got "+typeof t);let e=(t=[...t].map((t=>t instanceof Error?t:null!==t&&"object"==typeof t?Object.assign(new Error(t.message),t):new Error(t)))).map((t=>"string"==typeof t.stack?(t=>t.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,""))(r(t.stack)):String(t))).join("\n");e="\n"+i(e,4),super(e),this.name="AggregateError",Object.defineProperty(this,"_errors",{value:t})}*[Symbol.iterator](){for(const t of this._errors)yield t}}e.exports=n})),U=w(((t,e)=>{const i=N();e.exports=(e,r,...n)=>T(t,[e,r,...n],(function*(e,r,{concurrency:n=1/0,stopOnError:o=!0}={}){return new Promise(((s,a)=>{if("function"!=typeof r)throw new TypeError("Mapper function is required");if(!Number.isSafeInteger(n)&&n!==1/0||!(n>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${n}\` (${typeof n})`);const l=[],c=[],u=e[Symbol.iterator]();let h=!1,d=!1,p=0,f=0;const m=()=>{if(h)return;const e=u.next(),n=f;if(f++,e.done)return d=!0,void(0===p&&(o||0===c.length?s(l):a(new i(c))));p++,T(t,null,(function*(){try{const t=yield e.value;l[n]=yield r(t,n),p--,m()}catch(t){o?(h=!0,a(t)):(c.push(t),p--,m())}}))};for(let t=0;t<n&&(m(),!d);t++);}))}))})),j=w((t=>{S(t,{default:()=>e});class e{constructor(t){this._editor=t}serialize(...t){return new fu(this._editor).serialize(...t)}deserialize(t){return new du(this._editor,t).deserialize()}}e.version="1.0.0"})),H=w((t=>{S(t,{default:()=>e});class e{constructor(t){this._editor=t}serialize(...t){return new _u(this._editor).serialize(...t)}deserialize(t){return new mu(this._editor,t).deserialize()}}e.version="1.0.1"})),W=w((t=>{S(t,{default:()=>e});class e{constructor(t){this._editor=t}serialize(...t){return new Tu(this._editor).serialize(...t)}deserialize(t){return new Cu(this._editor,t).deserialize()}}e.version="2.0.0"})),G=w((t=>{S(t,{default:()=>e});class e{constructor(t){this._editor=t}serialize(...t){return new Iu(this._editor).serialize(...t)}deserialize(t){return new Ru(this._editor,t).deserialize()}}e.version="3.0.0"})),V=w((t=>{S(t,{default:()=>e});class e{constructor(t){this._editor=t}serialize(...t){return new Au(this._editor).serialize(...t)}deserialize(t){return new Ou(this._editor,t).deserialize()}}e.version="3.1.0"})),$=w((t=>{S(t,{default:()=>e});class e{constructor(t){this._editor=t}serialize(...t){return new Mu(this._editor).serialize(...t)}deserialize(t){return new Fu(this._editor,t).deserialize()}}e.version="3.2.0"})),Z=w((t=>{S(t,{default:()=>e});class e{constructor(t){this._editor=t}serialize(...t){return new Bu(this._editor).serialize(...t)}deserialize(t){return new Pu(this._editor,t).deserialize()}}e.version="3.4.0"})),X=w((t=>{S(t,{default:()=>e});class e{constructor(t){this._editor=t}serialize(...t){return new Lu(this._editor).serialize(...t)}deserialize(t){return new zu(this._editor,t).deserialize()}}e.version="3.5.0"})),Y=w((t=>{S(t,{default:()=>e});class e{constructor(t){this._editor=t}serialize(...t){return new Uu(this._editor).serialize(...t)}deserialize(t){return new Nu(this._editor,t).deserialize()}}e.version="3.6.0"})),q=w((t=>{S(t,{default:()=>e});class e{constructor(t){this._editor=t}serialize(...t){return new Hu(this._editor).serialize(...t)}deserialize(t){return new ju(this._editor,t).deserialize()}}e.version="3.7.0"})),K=w((t=>{S(t,{default:()=>e});class e{constructor(t){this._editor=t}serialize(...t){return new Gu(this._editor).serialize(...t)}deserialize(t){return new Wu(this._editor,t).deserialize()}}e.version="3.8.0"})),Q=w((t=>{S(t,{default:()=>e});class e{constructor(t){this._editor=t}serialize(...t){return new Zu(this._editor).serialize(...t)}deserialize(t){return new Vu(this._editor,t).deserialize()}}e.version="3.9.0"}));(r||(r={})).OBJECT="object",function(t){t.UNDO="undo",t.REDO="redo",t.DELETE="delete",t.BRING_TO_FRONT="bringtofront",t.EDIT="edit",t.DUPLICATE="duplicate",t.ADD="add",t.FLIP="flip",t.INVERT="invert",t.CLOSE="close",t.EXPORT="export"}(n||(n={})),function(t){t.LIBRARY="library",t.ART_FILTER="artFilter",t.TRANSFORM="transform",t.FILTER="filter",t.ADJUSTMENT="adjustment",t.FOCUS="focus",t.STICKER="sticker",t.TEXT="text",t.TEXT_DESIGN="textdesign",t.OVERLAY="overlay",t.FRAME="frame",t.BRUSH="brush"}(o||(o={})),function(t){t.TEXT="text",t.CARD="card"}(s||(s={})),function(t){t.LARGE="large",t.MEDIUM="medium",t.SMALL="small"}(a||(a={})),function(t){t.ERROR="error",t.WARNING="warning",t.INFO="info",t.TEXT_EDIT="textEdit"}(l||(l={})),function(t){t.IMAGE="image",t.DATA_URL="data-url",t.BLOB="blob",t.MSBLOB="ms-blob"}(c||(c={})),function(t){t.PNG="image/png",t.JPEG="image/jpeg"}(u||(u={})),function(t){t.BMP="image/bmp",t.GIF="image/gif",t.ICO="image/x-icon",t.JPEG="image/jpeg",t.PNG="image/png",t.SVG="image/svg+xml",t.TIFF="image/tiff",t.WEBP="image/webp"}(h||(h={}));o.FILTER,o.FOCUS,o.ADJUSTMENT,o.LIBRARY,o.OVERLAY,o.STICKER,o.TEXT,o.TEXT_DESIGN,o.FRAME,o.BRUSH,o.TRANSFORM,function(t){t.BRIGHTNESS="brightness",t.CONTRAST="contrast",t.SATURATION="saturation",t.CLARITY="clarity",t.SHADOWS="shadows",t.HIGHLIGHTS="highlights",t.EXPOSURE="exposure",t.GAMMA="gamma",t.BLACKS="blacks",t.WHITES="whites",t.TEMPERATURE="temperature",t.SHARPNESS="sharpness"}(d||(d={}));const J=Object.values(d).reduce(((t,e)=>(t[e]=!0,t)),{});function tt(t){return void 0!==t.lightColor}var et,it,rt,nt,ot,st,at;function lt(t){return void 0===t.provider||"file"===t.provider}function ct(t){return"google"===t.provider}!function(t){t.Desert="imgly_duotone_desert",t.Peach="imgly_duotone_peach",t.Clash="imgly_duotone_clash",t.Plum="imgly_duotone_plum",t.Breezy="imgly_duotone_breezy",t.DeepBlue="imgly_duotone_deepblue",t.Frog="imgly_duotone_frog",t.Sunset="imgly_duotone_sunset",t.AD1920="imgly_lut_ad1920",t.Greyed="imgly_lut_bw",t.Dusty="imgly_lut_x400",t.Litho="imgly_lut_litho",t.Sepia="imgly_lut_sepiahigh",t.Weathered="imgly_lut_plate",t.HardStuff="imgly_lut_sin",t.Polaroid="imgly_lut_blues",t.Sunny70s="imgly_lut_front",t.Oldtimer="imgly_lut_texas",t.Inferno="imgly_lut_celsius",t.Snappy="imgly_lut_cool",t.Chestnut="imgly_lut_chest",t.Softy="imgly_lut_winter",t.Pebble="imgly_lut_kdynamic",t.Moss="imgly_lut_fall",t.Lemon="imgly_lut_lenin",t.GreenGap="imgly_lut_pola669",t.Colla="imgly_lut_elder",t.Solanus="imgly_lut_orchid",t.Kalmen="imgly_lut_bleached",t.Joran="imgly_lut_bleachedblue",t.Levante="imgly_lut_breeze",t.Zephyr="imgly_lut_blueshadows",t.Golden="imgly_lut_sunset",t.LowFire="imgly_lut_eighties",t.Sunrise="imgly_lut_evening",t.FlatBlack="imgly_lut_k2",t.Pumpkin="imgly_lut_nogreen",t.Ancient="imgly_lut_ancient",t.Candy="imgly_lut_cottoncandy",t.Classic="imgly_lut_classic",t.Colorful="imgly_lut_colorful",t.Creamy="imgly_lut_creamy",t.Fixie="imgly_lut_fixie",t.Food="imgly_lut_food",t.Fridge="imgly_lut_fridge",t.Glam="imgly_lut_glam",t.Gobblin="imgly_lut_gobblin",t.Hicon="imgly_lut_highcontrast",t.HighCarb="imgly_lut_highcarb",t.K1="imgly_lut_k1",t.K6="imgly_lut_k6",t.Keen="imgly_lut_keen",t.Lomo="imgly_lut_lomo",t.Lomo100="imgly_lut_lomo100",t.Lucid="imgly_lut_lucid",t.Mellow="imgly_lut_mellow",t.Neat="imgly_lut_neat",t.Pale="imgly_lut_pale",t.Pitched="imgly_lut_pitched",t.PolaSX="imgly_lut_polasx",t.Pro400="imgly_lut_pro400",t.Quozi="imgly_lut_quozi",t.Settled="imgly_lut_settled",t.Seventies="imgly_lut_seventies",t.Soft="imgly_lut_soft",t.Steel="imgly_lut_steel",t.Summer="imgly_lut_summer",t.Tender="imgly_lut_tender",t.Twilight="imgly_lut_twilight"}(et||(et={})),function(t){t.DuoTone="imgly_filter_category_duotone",t.BW="imgly_filter_category_bw",t.Vintage="imgly_filter_category_vintage",t.Smooth="imgly_filter_category_smooth",t.Cold="imgly_filter_category_cold",t.Warm="imgly_filter_category_warm",t.Legacy="imgly_filter_category_legacy"}(it||(it={})),function(t){t.RADIAL="radial",t.LINEAR="linear",t.MIRRORED="mirrored",t.GAUSSIAN="gaussian"}(rt||(rt={})),function(t){t.NORMAL="normal",t.OVERLAY="overlay",t.SOFT_LIGHT="softLight",t.HARD_LIGHT="hardLight",t.MULTIPLY="multiply",t.DARKEN="darken",t.COLOR_BURN="colorBurn",t.SCREEN="screen",t.LIGHTEN="lighten"}(nt||(nt={})),function(t){t.Bokeh="imgly_overlay_bokeh",t.Chop="imgly_overlay_chop",t.Clouds="imgly_overlay_clouds",t.Golden="imgly_overlay_golden",t.Grain="imgly_overlay_grain",t.Hearts="imgly_overlay_hearts",t.LightLeak1="imgly_overlay_lightleak1",t.LightLeak2="imgly_overlay_lightleak2",t.Metal="imgly_overlay_metal",t.Mosaic="imgly_overlay_mosaic",t.Painting="imgly_overlay_painting",t.Paper="imgly_overlay_paper",t.Rain="imgly_overlay_rain",t.Vintage="imgly_overlay_vintage",t.Wall1="imgly_overlay_wall1",t.Wall2="imgly_overlay_wall2",t.Wood="imgly_overlay_wood"}(ot||(ot={})),function(t){t.CommonCategory="imgly_transforms_common",t.FacebookCategory="imgly_transforms_facebook",t.TwitterCategory="imgly_transforms_twitter",t.InstagramCategory="imgly_transforms_instagram",t.Custom="imgly_transform_common_custom",t.Square="imgly_transform_common_square",t.ThreeByFour="imgly_transform_common_3",t.FourByThree="imgly_transform_common_4",t.NineBySixteen="imgly_transform_common_9",t.SixteenByNine="imgly_transform_common_16",t.FacebookPost="imgly_transform_facebook_post",t.FacebookProfile="imgly_transform_facebook_profile",t.FacebookTitle="imgly_transform_facebook_title",t.InstagramLandscape="imgly_transform_instagram_landscape",t.InstagramPortrait="imgly_transform_instagram_portrait",t.InstagramSquare="imgly_transform_instagram_square",t.InstagramStory="imgly_transform_instagram_story",t.TwitterPost="imgly_transform_twitter_post",t.TwitterProfile="imgly_transform_twitter_profile",t.TwitterTitle="imgly_transform_twitter_title"}(st||(st={})),function(t){t.EXPORT="export",t.CLOSE="close",t.HISTORY_CHANGE="historyChange",t.EDITOR_READY="editorReady",t.ERROR_IMAGE_LOADING="errorImageLoading",t.IMAGE_LOAD="imageLoad",t.TOOL_ENTER="toolEnter",t.STICKER_UPLOAD_ADD="stickerUploadAdd"}(at||(at={}));class ut{constructor(){this.events={}}addListener(t,e){return(this.events[t]||(this.events[t]=[])).push(e),this}removeListener(t,e){const i=this.events[t];if(!i)return this;const r=i.lastIndexOf(e);return-1===r||i.splice(r,1),this}removeAllListeners(t){return this.events[t]=void 0,this}on(t,e){return this.addListener(t,e)}off(t,e){return this.removeListener(t,e)}emit(t,...e){const i=this.events[t];return!(!i||!i.length)&&(i.slice(0).forEach((t=>t.apply(null,e))),!0)}}const ht={};S(ht,{FragmentPrecision:()=>_t,ImageFormat:()=>pt,OptionType:()=>ft,RenderType:()=>dt,RendererType:()=>gt,UniformType:()=>mt});const dt={IMAGE:"image",DATAURL:"data-url",BUFFER:"buffer",BLOB:"blob",MSBLOB:"ms-blob"},pt={PNG:"image/png",JPEG:"image/jpeg",RAW:"raw"};var ft,mt,gt,_t;let yt;!function(t){t.NUMBER="number",t.VECTOR2="vector2",t.COLOR_MATRIX="color-matrix",t.COLOR="color",t.ARRAY="array",t.OBJECT="object",t.STRING="string",t.BOOLEAN="boolean",t.CONFIGURABLE="configurable",t.IMAGE="image",t.FUNCTION="function",t.TEXTURE="texture",t.ALL="*"}(ft||(ft={})),function(t){t.SAMPLER2D="sampler2d",t.INT="i",t.INT1="1i",t.INT2="2i",t.INT3="3i",t.INT4="4i",t.FLOAT="f",t.FLOAT1="1f",t.FLOAT2="2f",t.FLOAT_VECTOR2="2fv",t.FLOAT3="3f",t.FLOAT4="4f",t.MAT3="mat3",t.MAT3FV="mat3fv",t.MAT4="mat4"}(mt||(mt={})),function(t){t.WEBGL="webgl",t.CANVAS="canvas"}(gt||(gt={})),function(t){t.High="highp",t.Medium="mediump",t.Low="lowp"}(_t||(_t={}));const vt=()=>document.createElement("canvas"),bt=(t,e)=>{const i=e||vt();i.width=t.width,i.height=t.height;const r=i.getContext("2d");if(!r)throw new Error("Cannot render context");return r.clearRect(0,0,i.width,i.height),r.drawImage(t,0,0,t.width,t.height),i};class xt{constructor(t,e,i){this.width=t,this.height=e,this.data=i}}yt=E().webUtils;const wt=yt,St=t=>t._type===gt.WEBGL,kt=t=>Boolean(t&&"tagName"in t&&t.tagName&&"CANVAS"===t.tagName.toUpperCase());class Ct{static head(t){return t[0]}static tail(t){return t.slice(1)}static last(t){return t[t.length-1]}static init(t){return t.slice(0,t.length-1)}static remove(t,e){return t.filter(((t,i,r)=>!e(t,i,r)))}static findIndex(t,e){for(let i=0;i<t.length;i++)if(e(t[i]))return i;return-1}static find(t,e){for(let i=0;i<t.length;i++)if(e(t[i]))return t[i]}static flatten(t){return t.reduce((function(t,e){return t.concat(Array.isArray(e)?Ct.flatten(e):e)}),[])}static range(t,e){const i=[];if(e>t)for(let r=t;r<e;r++)i.push(r);return i}static repeat(t,e){const i=[];for(let r=0;r<e;r++)i[r]=t;return i}static zip(t,e){const i=Math.min(t.length,e.length),r=[];for(let n=0;n<i;n++)r[n]=[t[n],e[n]];return r}}var Tt=Ct;const Et="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var Rt={encode(t){let e,i,r,n,o,s,a,l="",c=0;do{e=t[c++],i=t[c++],r=t[c++],n=e>>2,o=(3&e)<<4|i>>4,s=(15&i)<<2|r>>6,a=63&r,isNaN(i)?s=a=64:isNaN(r)&&(a=64),l=l+Et.charAt(n)+Et.charAt(o)+Et.charAt(s)+Et.charAt(a),e=i=r="",n=o=s=a=""}while(c<t.length);return l},decode(t){let e,i,r,n,o,s,a,l=0;const c=[];if(/[^A-Za-z0-9+/=]/g.exec(t))throw new Error("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding.");t=t.replace(/[^A-Za-z0-9+/=]/g,"");do{n=Et.indexOf(t.charAt(l++)),o=Et.indexOf(t.charAt(l++)),s=Et.indexOf(t.charAt(l++)),a=Et.indexOf(t.charAt(l++)),e=n<<2|o>>4,i=(15&o)<<4|s>>2,r=(3&s)<<6|a,c.push(e),64!==s&&c.push(i),64!==a&&c.push(r),e=i=r="",n=o=s=a=""}while(l<t.length);return c}};class Dt{static mapRange(t,e,i){return(t-e.getMin())*i.getLength()/e.getLength()+i.getMin()}static isPlainObject(t){if("object"!=typeof t||!t)return!1;if("function"==typeof Object.getPrototypeOf){const e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}return"[object Object]"===Object.prototype.toString.call(t)}static isMobile(){if("undefined"==typeof navigator)return!1;const t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}static isBrowser(){return"undefined"!=typeof window}static values(t){const e=[];for(const i in t)e.push(t[i]);return e}static generateUUID(){let t=(new Date).getTime();return void 0!==window.performance&&"function"==typeof window.performance.now&&(t+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:3&i|8).toString(16)}))}static resizeVectorToFit(t,e){const i=Math.min(e.x/t.x,e.y/t.y);return t.clone().multiply(i)}static resizeVectorToFill(t,e){const i=t.x/t.y;return i>e.x/e.y?e.clone().set(e.y*i,e.y):e.clone().set(e.x,e.x/i)}static isExtendable(t){return null!=t&&("object"==typeof t||"function"==typeof t)}static defaults(t,...e){const i={};for(const e in t)i[e]=t[e];for(let t=0;t<e.length;t++){const r=e[t];for(const t in r)void 0===i[t]&&(i[t]=r[t])}return i}static deepMerge(t,...e){const i=(t,e)=>{if(void 0===e)return i(null,t);if(Array.isArray(e))return[...e];if(!Dt.isPlainObject(e))return e;if(!Dt.isPlainObject(t))return b({},e);const r=b({},t);return Object.keys(e).forEach((n=>{const o=e[n];void 0!==o&&(r[n]=i(t[n],o))})),r};return e.reduce(i,t)}static deepDefaults(t,...e){const i=[...e].reverse();return Dt.deepMerge(...i,t)}static deepClone(t){const e={};for(const i in t)Dt.isExtendable(t[i])?e[i]=Dt.deepClone(t[i]):e[i]=t[i];return e}static extend(t,...e){const i={};for(const e in t)i[e]=t[e];for(let t=0;t<e.length;t++){const r=e[t];for(const t in r)i[t]=r[t]}return i}static clone(t){return this.extend({},t)}static getUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}static createCanvas(){return wt.createCanvas()}static isPowerOfTwo(t){return 0==(t.x&t.x-1)&&0==(t.y&t.y-1)}static nextLowestPOT(t){for(let e=1;e<32;e<<=1)t|=t>>e;return t-(t>>1)}static nextHighestPOT(t){t--;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}static moveArrayItem(t,e,i){if(i>=t.length){let e=i-t.length;for(;1+e--;)t.push(void 0)}t.splice(i,0,t.splice(e,1)[0])}static ensureCanvasDimensions(t,e){return(t.width!==e.x||t.height!==e.y)&&(t.width=e.x,t.height=e.y,!0)}static byteArrayToString(t){return t.map((t=>String.fromCharCode(t))).join("")}static clamp(t,e,i){return Math.max(e,Math.min(t,i))}static wildCardMatch(t,e){return new RegExp(`^${e.split("*").join(".*")}$`).test(t)}static flipObject(t){const e={};for(const i in t)e[t[i]]=i;return e}static ISODateString(t){function e(t){return t<10?`0${t}`:t}return`${t.getUTCFullYear()}-${e(t.getUTCMonth()+1)}-${e(t.getUTCDate())}T${e(t.getUTCHours())}:${e(t.getUTCMinutes())}:${e(t.getUTCSeconds())}Z`}static getCrossOriginValue(t){return t?"none"===t?void 0:t:"anonymous"}static invariant(t,e){if(!t){throw new Error(e)}}static executePromises(t){const e=t.length;let i=0;const r=[],n=[];return new Promise(((o,s)=>{const a=()=>{i++,i>=e&&(n.length<=0?o(r):s(n))},l=t=>{r.push(t),a()},c=t=>{n.push(t),a()};t.forEach((t=>{t.then(l).catch(c)}))}))}}C(Dt,"Array",Tt);var It=Dt;const Ot=[{name:"trace",type:"trace",background:"#EEEEEE",color:"#AAAAAA"},{name:"info",type:"log",background:"#BDE5F8",color:"#00529B"},{name:"warn",type:"warn",background:"#FEEFB3",color:"#9F6000"},{name:"error",type:"error",background:"#FFBABA",color:"#D8000C"},{name:"log",type:"log",background:"#EEEEEE",color:"#1f4f6b"}],At=()=>console&&console.group&&console.groupCollapsed&&console.groupEnd;const Ft=new class{constructor(t="warn",e=Ot){this._levels=[...e],this._maxLevel=this.getLevelIndexByName(t),this._consoleFuncs={trace:(...t)=>{At()?(console.groupCollapsed(...t),console.trace(),console.groupEnd()):console.trace(...t)}},this._levels.forEach((({name:t})=>{this[t]=(e,...i)=>{this._log(t,e,...i)}}))}getLevelIndexByName(t){return It.Array.findIndex(this._levels,(e=>e.name===t))}getLevelObjectByName(t){return It.Array.find(this._levels,(e=>e.name===t))}canLog(t){const e=this.getLevelIndexByName(t);return!(e<0)&&e>=this._maxLevel}setLevel(t){const e=this.getLevelIndexByName(t);e<0||(this._maxLevel=e)}_log(t,e,...i){const r=this.getLevelObjectByName(t);if(!r||!this.canLog(t))return;const{name:n,type:o,background:s,color:a}=r,l=i.filter((t=>void 0!==t)).map((t=>t.toObject?JSON.parse(JSON.stringify(t.toObject())):t)),c=this._consoleFuncs[o]||console[o]?(...t)=>console[o](...t):(...t)=>console.log(...t),u=l.length,h=((t,e)=>["background: #2D7BFF; line-height: 20px; padding: 4px 0","background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0",`background: ${t}; color: ${e}; line-height: 20px; padding: 4px 0; font-weight: bold`,"background: #2B2B2B; color: white; line-height: 20px; padding: 4px 0","background: #2D7BFF; line-height: 20px; padding: 4px 0"])(s,a);if("undefined"==typeof navigator||!navigator.userAgent.match(/Gecko|WebKit/i)||navigator.userAgent.match(/Trident/)){const t=l.length;return t<=0?void c(`PhotoEditorSDK | ${e} `):1===t&&"string"==typeof l[0]?void c(`PhotoEditorSDK | ${e} | ${l[0]}`):void c(`PhotoEditorSDK | ${e} | `,...l)}u<=0?c(`%c  %c PhotoEditorSDK %c  %c ${e} %c %c  `,...h):1!==u||"string"!=typeof l[0]?At()?(console.groupCollapsed(`%c  %c PhotoEditorSDK %c  %c ${e} %c`,...It.Array.init(h)),c(...l),console.groupEnd()):c(`%c  %c PhotoEditorSDK %c  %c ${e} %c`,...It.Array.init(h),...l):c(`%c  %c PhotoEditorSDK %c  %c ${e} %c  ${l[0]}  %c  `,...h)}image(t="",e){{let i=new window.Image;const r=()=>{const{width:e}=i,{height:r}=i;t&&console.log(t),console.log("%c+",`\n        font-size: 1px;\n        padding: 0px ${Math.floor(e/2)}px;\n        line-height: ${r}px;\n        background: url(${i.src});\n        color: transparent;\n        background-repeat: no-repeat;\n        background-size: ${e}px ${r}px;`)};return i.onload=r,e instanceof window.HTMLCanvasElement?i.src=e.toDataURL():e instanceof window.Image?(i=e,r()):"string"==typeof e?i.src=e:this.log(t,e),i}}texture(t="",e){{if(!e)return void this.log(t,"texture: null or undefined");const i=e.getBaseTexture(),r=i.getRenderers(),n=It.Array.find(r,(t=>t&&"webgl"===t.constructor.type)),{width:o,height:s}=i.getFrame();if(n){const e=n.getContext(),r=i.getGLTextureForRenderer(n);this.logGlTexture(e,r,o,s,t)}else Ft.image(t,i.getSource())}}logGlTexture(t,e,i=150,r=150,n){{t.bindTexture(t.TEXTURE_2D,e);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);const s=new Uint8Array(i*r*4);t.readPixels(0,0,i,r,t.RGBA,t.UNSIGNED_BYTE,s),t.deleteFramebuffer(o);const a=document.createElement("canvas");a.width=i,a.height=r;const l=a.getContext("2d"),c=l.createImageData(i,r);return c.data.set(s),l.putImageData(c,0,0),Ft.image(n,a)}}}("warn");var Mt=Ft;const Pt={};S(Pt,{ImageLoader:()=>Bt,JSONLoader:()=>Nt});var Bt={load(t,e={cors:!0,value:"anonymous"}){return Promise.resolve([t,t]).then((([t,i])=>this._createAndLoadImage(t,i,e)))},loadImage(t,e={cors:!0,value:"anonymous"}){return this._loadWithoutExif(t,e)},_loadWithoutExif:(t,e={cors:!0,value:"anonymous"})=>new Promise(((i,r)=>{const n=new window.Image;n.addEventListener("load",(()=>{i(n)})),n.addEventListener("error",(()=>{r(new Error(`Failed to load image at ${t}`))})),e.cors&&(n.crossOrigin=e.value),n.src=t})),_createAndLoadImage(t,e,i={cors:!0,value:"anonymous"}){return new Promise(((t,r)=>{{const r=this._loadWithoutExif(e,i).then((e=>t(e))),n=new Promise(((t,n)=>{this._loadAsDataURL(e,i).then((e=>{const i=new window.Image;i.addEventListener("load",(()=>{t(i)})),i.src=e,i.rawSource=e})).catch((e=>{r.then((e=>t(e)))}))}));return this._stringEndsWith(e,".svg")?r.then((e=>t(e))):n.then((e=>t(e)))}}))},_stringEndsWith:(t,e,i=t.length)=>((void 0===i||i>t.length)&&(i=t.length),t.substring(i-e.length,i)===e),_loadAsDataURL:(t,e={cors:!0,value:"anonymous"})=>new Promise(((i,r)=>{const n=new XMLHttpRequest;n.onload=function(){const t=new FileReader;t.onloadend=function(){t.error&&r(t.error),i(t.result)},t.readAsDataURL(n.response)},n.open("GET",t),n.responseType="blob",n.withCredentials=e.cors&&"use-credentials"===e.value,n.send()})),loadXHR:(t,e)=>new Promise(((i,r)=>{let n;window.XDomainRequest?(n=new window.XDomainRequest,e&&n.overrideMimeType(e),n.onload=function(){i(n)},n.onerror=function(t){r(t)}):window.XMLHttpRequest&&(n=new window.XMLHttpRequest,e&&n.overrideMimeType(e),n.onreadystatechange=function(t){4===n.readyState&&(200===n.status?i(n):r(new Error(`HTTP Status ${n.status}`)))}),n.open("GET",t,!0),n.send()}))};const zt=k(F()),Lt="undefined"!=typeof window?window:i.g;class Nt{constructor(t){this._url=t,this._parsedUrl=zt.default.parse(this._url,!0)}_isJSONPRequest(){const{query:t}=this._parsedUrl;for(const e in t){if("?"===t[e])return!0}return!1}load(){return this._isJSONPRequest()?this._loadJSONP():this._loadJSON()}_loadJSON(){return new Promise(((t,e)=>{let i;Lt.XDomainRequest?(i=new Lt.XDomainRequest,i.onload=function(){const e=JSON.parse(i.responseText);t(e)},i.onerror=function(t){e(t)},i.open("GET",this._url,!0),i.send()):Lt.XMLHttpRequest&&(i=new XMLHttpRequest,i.onreadystatechange=function(r){if(4===i.readyState)if(200===i.status){const e=JSON.parse(i.responseText);t(e)}else e(new Error(`HTTP Status ${i.status}`))},i.open("GET",this._url,!0),i.send())}))}_loadJSONP(){let t=!1,e=!1;const i=`pesdk${Math.round(99999999999999*Math.random())}`;return new Promise(((r,n)=>{const o=this._createJSONPNode(i);Lt[i]=i=>{this._removeJSONPNode(o),t||(e=!0,r(i))},Lt.setTimeout((()=>{e||(this._removeJSONPNode(o),t=!0,n(new Error("Timeout of 5 seconds exceeded.")))}),5e3)}))}_createJSONPNode(t){const e=this._buildJSONPUrl(t),i=document.querySelector("head"),r=document.createElement("script");return r.src=e,i.appendChild(r),r}_removeJSONPNode(t){t.parentNode.removeChild(t)}_buildJSONPUrl(t){const{query:e}=this._parsedUrl;let i=null;for(const t in e)if("?"===e[t]){i=t;break}return delete this._parsedUrl.search,e[i]=t,zt.default.format(this._parsedUrl)}}class Ut{constructor(t,e,i,r=1){this.r=t,this.g=e,this.b=i,this.a=r}toRGBA(){return`rgba(${[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b),this.a.toFixed(2)].join(",")})`}set(t,e,i,r=this.a){return this.r=t,this.g=e,this.b=i,this.a=r,this}toRGB(){return[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)]}toHex(){return`#${[this._componentToHex(Math.round(255*this.r)),this._componentToHex(Math.round(255*this.g)),this._componentToHex(Math.round(255*this.b))].join("")}`}toGLColor(){return[this.r,this.g,this.b,this.a]}toArray(){return this.toGLColor()}toRGBGLColor(){return[this.r,this.g,this.b]}toHSV(){const t=Math.max(this.r,this.g,this.b),e=Math.min(this.r,this.g,this.b);let i,r;const n=t,o=t-e;if(r=0===t?0:o/t,t===e)i=0;else{switch(t){case this.r:i=(this.g-this.b)/o,this.g<this.b&&(i+=6);break;case this.g:i=(this.b-this.r)/o+2;break;case this.b:i=(this.r-this.g)/o+4}i/=6}return[i,r,n]}fromHSV(t,e,i){return this.copy(Ut.fromHSV(t,e,i)),this}static fromHSV(t,e,i,r=1){let[n,o,s]=[];const a=Math.floor(6*t),l=6*t-a,c=i*(1-e),u=i*(1-l*e),h=i*(1-(1-l)*e);switch(a%6){case 0:n=i,o=h,s=c;break;case 1:n=u,o=i,s=c;break;case 2:n=c,o=i,s=h;break;case 3:n=c,o=u,s=i;break;case 4:n=h,o=c,s=i;break;case 5:n=i,o=c,s=u}return new Ut(n,o,s,r)}static fromArray(t){return new Ut(t[0],t[1],t[2],t[3])}static fromHex(t){const[e,i,r]=t.match(/[0-9A-fa-f]{1,2}/g);return new Ut(parseInt(e,16)/255,parseInt(i,16)/255,parseInt(r,16)/255,1)}clone(){return new Ut(this.r,this.g,this.b,this.a)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this}minus(t){return this.r-=t.r,this.g-=t.g,this.b-=t.b,this.a-=t.a,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this.a*=t,this}divideScalar(t){return this.r/=t,this.g/=t,this.b/=t,this.a/=t,this}clamp(t,e){return this.r=Math.min(Math.max(this.r,t),e),this.g=Math.min(Math.max(this.g,t),e),this.b=Math.min(Math.max(this.b,t),e),this.a=Math.min(Math.max(this.a,t),e),this}mix(t,e){return this.r=(1-e)*this.r+e*t.r,this.g=(1-e)*this.g+e*t.g,this.b=(1-e)*this.b+e*t.b,this.a=(1-e)*this.a+e*t.a,this}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}equals(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}_componentToHex(t){const e=t.toString(16);return 1===e.length?`0${e}`:e}toString(){return`Color(${this.r}, ${this.g}, ${this.b}, ${this.a})`}static get TRANSPARENT(){return new Ut(0,0,0,0)}static get WHITE(){return new Ut(1,1,1,1)}static get BLACK(){return new Ut(0,0,0,1)}static get RED(){return new Ut(1,0,0,1)}static get BLUE(){return new Ut(0,0,1,1)}static get GREEN(){return new Ut(0,1,0,1)}}var jt=Ut;var Ht=class{constructor(){this._maxListeners=12,this._events={},this._pipeDestinations=[]}pipeEvents(t){this._pipeDestinations.push(t)}unpipeEvents(t){const e=this._pipeDestinations.indexOf(t);-1!==e&&this._pipeDestinations.splice(e,1)}on(t,e){if(void 0===t)throw new Error(`Invalid event type: \`${t}\``);if("function"!=typeof e)throw new TypeError;const i=this._events[t]||(this._events[t]=[]);return-1!==i.indexOf(e)||(i.push(e),this._maxListeners&&i.length>this._maxListeners&&(Mt.warn("EventEmitter",`Possible memory leak detected, added ${i.length} \`${t}\` listeners (current limit is ${this._maxListeners})`),"undefined"!=typeof console&&console.trace())),this}once(t,e){if(void 0===t)throw new Error(`Invalid event type: \`${t}\``);const i=this;return this.on(t,(function r(){i.off(t,r),e.apply(null,arguments)}))}off(t,...e){if(void 0===t)throw new Error(`Invalid event type: \`${t}\``);if(0===e.length)return this._events[t]=null,this;const i=e[0];if("function"!=typeof i)throw new TypeError;const r=this._events[t];if(!r||!r.length)return this;const n=r.indexOf(i);return-1===n||r.splice(n,1),this}emit(t,...e){if(void 0===t)throw new Error(`Invalid event type: \`${t}\``);this._pipeDestinations.forEach((i=>{i.emit(t,...e)}));const i=this._events[t];return!(!i||!i.length)&&(i.slice(0).forEach((t=>t.apply(null,e))),!0)}setMaxListeners(t){if(parseInt(t,10)!==t)throw new TypeError;this._maxListeners=t}},Wt={checkFramebufferStatus(t,e){const i=e.checkFramebufferStatus(e.FRAMEBUFFER),r={[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT]:"Incomplete attachment",[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT]:"Missing attachment",[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS]:"Incomplete dimensions",[e.FRAMEBUFFER_UNSUPPORTED]:"Framebuffer unsupported"};i!==e.FRAMEBUFFER_COMPLETE&&Mt.warn(t,`Framebuffer incomplete: ${r[i]}`)},determineGPUName(t){let e=null,i=null;t||(i=document.createElement("canvas"),t=i.getContext("experimental-webgl")||i.getContext("webgl"));const r=t&&t.getExtension("WEBGL_debug_renderer_info");return r&&(e=t.getParameter(r.UNMASKED_RENDERER_WEBGL),i&&i.remove()),e},isGPUBlacklisted:(t,e=null)=>!1};const Gt=t=>"number"==typeof t,Vt=(t,e)=>(t=>t instanceof Zt)(t)?{x:t.x,y:t.y}:{x:t,y:Gt(e)?e:t},$t=(t,e)=>(i,r)=>{const{x:n,y:o}=Vt(i,r);return t.x=e(t.x,n),t.y=e(t.y,o),t};class Zt{constructor(t=0,e=0){this.add=$t(this,((t,e)=>t+e)),this.subtract=$t(this,((t,e)=>t-e)),this.divide=$t(this,((t,e)=>t/e)),this.multiply=$t(this,((t,e)=>t*e)),this.x=t,this.y=e}set(t,e){const{x:i,y:r}=Vt(t,e);return this.x=i,this.y=r,this}clone(){return new Zt(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}clamp(t,e){return Gt(t)&&(t=new Zt(t,t)),Gt(e)&&(e=new Zt(e,e)),t&&(this.x=Math.max(t.x,this.x),this.y=Math.max(t.y,this.y)),e&&(this.x=Math.min(e.x,this.x),this.y=Math.min(e.y,this.y)),this}dot(t,e){const{x:i,y:r}=Vt(t,e);return this.x*i+this.y*r}equals(t,e){const{x:i,y:r}=Vt(t,e);return i===this.x&&r===this.y}flip(){const t=this.x;return this.x=this.y,this.y=t,this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}floor(){return this.x|=0,this.y|=0,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}len(){return Math.sqrt(this.x*this.x+this.y*this.y)}min(){return Math.min(this.x,this.y)}max(){return Math.max(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toString(){return`Vector2({ x: ${this.x}, y: ${this.y} })`}roundDecimal(t){return this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this}asArray(t=!1){return t?[this.y,this.x]:[this.x,this.y]}static fromObject(t){return new Zt(t.x,t.y)}static get NULL(){return new Zt(0,0)}}class Xt{constructor(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.reset()}multiply(t){let e,i,r,n,o,s;return e=this.a*t.a+this.b*t.c,i=this.a*t.b+this.b*t.d,r=this.c*t.a+this.d*t.c,n=this.c*t.b+this.d*t.d,o=this.tx*t.a+this.ty*t.c+t.tx,s=this.tx*t.b+this.ty*t.d+t.ty,this.a=e,this.b=i,this.c=r,this.d=n,this.tx=o,this.ty=s,this}applyToVector(t){const{x:e,y:i}=t;return(t=t.clone()).x=this.a*e+this.c*i+this.tx,t.y=this.b*e+this.d*i+this.tx,t}applyInverseToVector(t){const e=1/(this.a*this.d+this.c*-this.b),{x:i,y:r}=t;return(t=t.clone()).x=this.d*e*i+-this.c*e*r+(this.ty*this.c-this.tx*this.d)*e,t.y=this.a*e*r+-this.b*e*i+(-this.ty*this.a+this.tx*this.b)*e,t}rectangleToCoordinates(t,e=new Zt(0,0)){const i=t.width*(1-e.x),r=t.width*-e.x,n=t.height*(1-e.y),o=t.height*-e.y,s=[];return s.push(new Zt(this.a*r+this.c*o+this.tx,this.d*o+this.b*r+this.ty)),s.push(new Zt(this.a*i+this.c*o+this.tx,this.d*o+this.b*i+this.ty)),s.push(new Zt(this.a*i+this.c*n+this.tx,this.d*n+this.b*i+this.ty)),s.push(new Zt(this.a*r+this.c*n+this.tx,this.d*n+this.b*r+this.ty)),s}reset(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}toArray(){const t=[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1];return"undefined"==typeof Float32Array?t:new Float32Array(t)}toString(){return`Matrix({ a: ${this.a}, b: ${this.b}, c: ${this.c}, d: ${this.d}, tx: ${this.tx}, ty: ${this.ty} })`}static get IDENTITY(){return new Xt}}class Yt{constructor(t=0,e=0,i=0,r=0){this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=e,this.width=i,this.height=r}set(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this}clone(){return new Yt(this.x,this.y,this.width,this.height)}copy(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}equals(t,e,i,r){return t instanceof Yt?t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height:t===this.x&&e===this.y&&i===this.width&&r===this.height}translate(t,e){const{x:i,y:r}=Vt(t,e);return this.x+=i,this.y+=r,this}scale(t,e){const{x:i,y:r}=Vt(t,e);return this.width*=i,this.height*=r,this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.width=Math.round(this.width),this.height=Math.round(this.height),this}getPosition(){return new Zt(this.x,this.y)}getSize(){return new Zt(this.width,this.height)}insetBy(t,e){return this.x+=t,this.y+=e,this.width-=2*t,this.height-=2*e,this}intersects(t){const e=new Zt(this.x,this.y),i=new Zt(this.x+this.width,this.y+this.height),r=new Zt(t.x,t.y),n=new Zt(t.x+t.width,t.y+t.height);return!(r.x>i.x||e.x>n.x||n.y<e.y||i.y<r.y)}toString(){return`Rectangle({ x: ${this.x}, y: ${this.y}, width: ${this.width}, height: ${this.height} })`}static FromDiagonalPoints(t,e){let i=!1;e.x-t.x<0&&(i=!0);const r=i?e:t,n=i?t:e,o=n.x-r.x,s=n.y-r.y;return new Yt(r.x,r.y,o,s)}}const qt=2e3,Kt=20;class Qt{constructor(){this._position=new Zt(0,0),this._scale=new Zt(1,1),this._pivot=new Zt(0,0),this._rotation=0,this._lastRotation=null,this._alpha=1,this._visible=!0,this._worldTransform=new Xt,this._parent=null,this._shaders=[],this._boundsNeedUpdate=!0,this._bounds=new Yt(0,0,1,1),this._localBoundsNeedUpdate=!0,this._localBounds=new Yt(0,0,1,1),this._filterRectangle=new Yt(0,0,0,0)}renderWebGL(t){Mt.warn(this.constructor.name,"`renderWebGL` is abstract and not implemented in inherited class")}renderCanvas(t){Mt.warn(this.constructor.name,"`renderCanvas` is abstract and not implemented in inherited class")}updateTransform(){const t=this._parent?this._parent.getWorldTransform():Xt.IDENTITY,e=this._worldTransform,i=Math.sin(this._rotation),r=Math.cos(this._rotation);e.a=r*this._scale.x,e.b=i*this._scale.x,e.c=-i*this._scale.y,e.d=r*this._scale.y,e.tx=this._position.x,e.ty=this._position.y,(this._pivot.x||this._pivot.y)&&(e.tx-=this._pivot.x*e.a+this._pivot.y*e.c,e.ty-=this._pivot.x*e.b+this._pivot.y*e.d),e.multiply(t),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}addShader(t){this._shaders.push(t)}removeShader(t){const e=this._shaders.indexOf(t);return-1!==e&&(this._shaders.splice(e,1),!0)}removeShaderAt(t){return!!this._shaders[t]&&(this._shaders.splice(t,1),!0)}getBounds(){return this._bounds.clone()}getPosition(){return this._position}setPosition(t,e){this._position.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getScale(){return this._scale}setScale(t,e){this._scale.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getPivot(){return this._pivot}setPivot(t,e){this._pivot.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getRotation(){return this._rotation}setRotation(t){this._rotation=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}getAlpha(){return this._alpha}setAlpha(t){this._alpha=t}getWorldAlpha(){return this._parent?this._parent.getAlpha()*this._alpha:this._alpha}getWorldTransform(){return this._worldTransform}getParent(){return this._parent}setParent(t){this._parent=t}getFilterRectangle(){return this._filterRectangle}setFilterRectangle(t){this._filterRectangle.copy(t)}isVisible(){return this._visible}setVisible(t){this._visible=t}}class Jt extends Qt{constructor(){super(),this._children=[],this._filters=[]}addFilter(t){this._filters.push(t)}removeFilter(t){const e=this._filters.indexOf(t);return-1!==e&&(this._filters.splice(e,1),!0)}setFilters(t){this._filters=t}addChild(t){const e=t.getParent();e instanceof Jt&&e.removeChild(t),t.setParent(this),this._children.push(t)}prependChild(t){const e=t.getParent();e instanceof Jt&&e.removeChild(t),t.setParent(this),this._children.unshift(t)}hasChild(t){return-1!==this._children.indexOf(t)}removeChild(t){const e=this._children.indexOf(t);-1!==e?(this._children.splice(e,1),t.setParent(null)):Mt.info(this.constructor.name,"Tried to remove a child that does not exist")}clearChildren(){this._children=[]}renderWebGL(t){if(!this._visible)return;const e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),t.getCurrentObjectRenderer().start(),this._renderWebGL(t),this._children.forEach((e=>{e.renderWebGL(t)})),t.getCurrentObjectRenderer().flush(),this._filters&&this._filters.length&&e.popFilters(),t.getCurrentObjectRenderer().start()}_renderWebGL(t){}renderCanvas(t){if(!this._visible)return;const e=t.getFilterManager();this._filters&&this._filters.length&&e.pushFilters(this,this._filters),this._renderCanvas(t),this._children.forEach((e=>{e.renderCanvas(t)})),this._filters&&this._filters.length&&e.popFilters()}_renderCanvas(t){}updateTransform(){super.updateTransform(),this._children.forEach((t=>{t.updateTransform()}))}getLocalBounds(){return this._localBoundsNeedUpdate&&(this._localBoundsNeedUpdate=!1),this._localBounds.clone()}getBounds(){return this._boundsNeedUpdate&&(this._boundsNeedUpdate=!1),this._bounds.clone()}getChildren(){return this._children}getFilters(){return this._filters}dispose(){}}const te={};S(te,{ColorOverlayFilter:()=>_e,OverlayFilter:()=>Re,TintFilter:()=>xe,UnpremultiplyFilter:()=>pe});var ee=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],ie=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function re(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}class ne{constructor(t=1,e=0,i=0,r=0,n=0,o=0,s=1,a=0,l=0,c=0,u=0,h=0,d=1,p=0,f=0,m=0,g=0,_=0,y=1,v=0){this.set(t,e,i,r,n,o,s,a,l,c,u,h,d,p,f,m,g,_,y,v)}set(t,e,i,r,n,o,s,a,l,c,u,h,d,p,f,m,g,_,y,v){this.a=t,this.b=e,this.c=i,this.d=r,this.e=n,this.f=o,this.g=s,this.h=a,this.i=l,this.j=c,this.k=u,this.l=h,this.m=d,this.n=p,this.o=f,this.p=m,this.q=g,this.r=_,this.s=y,this.t=v}reset(){this.a=1,this.b=0,this.c=0,this.d=0,this.e=0,this.f=0,this.g=1,this.h=0,this.i=0,this.j=0,this.k=0,this.l=0,this.m=1,this.n=0,this.o=0,this.p=0,this.q=0,this.r=0,this.s=1,this.t=0}apply(t){const e=this.a*t.r+this.b*t.g+this.c*t.b+this.d*t.a+this.e,i=this.f*t.r+this.g*t.g+this.h*t.b+this.i*t.a+this.j,r=this.k*t.r+this.l*t.g+this.m*t.b+this.n*t.a+this.o,n=this.p*t.r+this.q*t.g+this.r*t.b+this.s*t.a+this.t;return new jt(e,i,r,n)}multiply(t){let e,i,r,n,o,s,a,l,c,u,h,d,p,f,m,g,_,y,v,b;const x=t,w=this;return e=x.a*w.a+x.b*w.f+x.c*w.k+x.d*w.p,i=x.a*w.b+x.b*w.g+x.c*w.l+x.d*w.q,r=x.a*w.c+x.b*w.h+x.c*w.m+x.d*w.r,n=x.a*w.d+x.b*w.i+x.c*w.n+x.d*w.s,s=x.f*w.a+x.g*w.f+x.h*w.k+x.i*w.p,a=x.f*w.b+x.g*w.g+x.h*w.l+x.i*w.q,l=x.f*w.c+x.g*w.h+x.h*w.m+x.i*w.r,c=x.f*w.d+x.g*w.i+x.h*w.n+x.i*w.s,h=x.k*w.a+x.l*w.f+x.m*w.k+x.n*w.p,d=x.k*w.b+x.l*w.g+x.m*w.l+x.n*w.q,p=x.k*w.c+x.l*w.h+x.m*w.m+x.n*w.r,f=x.k*w.d+x.l*w.i+x.m*w.n+x.n*w.s,g=x.p*w.a+x.q*w.f+x.r*w.k+x.s*w.p,_=x.p*w.b+x.q*w.g+x.r*w.l+x.s*w.q,y=x.p*w.c+x.q*w.h+x.r*w.m+x.s*w.r,v=x.p*w.d+x.q*w.i+x.r*w.n+x.s*w.s,o=x.a*w.e+x.b*w.j+x.c*w.o+x.d*w.t+x.e,u=x.f*w.e+x.g*w.j+x.h*w.o+x.i*w.t+x.j,m=x.k*w.e+x.l*w.j+x.m*w.o+x.n*w.t+x.o,b=x.p*w.e+x.q*w.j+x.r*w.o+x.s*w.t+x.t,this.a=e,this.b=i,this.c=r,this.d=n,this.e=o,this.f=s,this.g=a,this.h=l,this.i=c,this.j=u,this.k=h,this.l=d,this.m=p,this.n=f,this.o=m,this.p=g,this.q=_,this.r=y,this.s=v,this.t=b,this}clone(){const t=new ne;return t.set(this.a,this.b,this.c,this.d,this.e,this.f,this.g,this.h,this.i,this.j,this.k,this.l,this.m,this.n,this.o,this.p,this.q,this.r,this.s,this.t),t}equals(t){return this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f&&this.g===t.g&&this.h===t.h&&this.i===t.i&&this.j===t.j&&this.k===t.k&&this.l===t.l&&this.m===t.m&&this.n===t.n&&this.o===t.o&&this.p===t.p&&this.q===t.q&&this.r===t.r&&this.s===t.s&&this.t===t.t}getOffsets(){return[this.e,this.j,this.o,this.t]}toString(){return`ColorMatrix( ${this.a}, ${this.b}, ${this.c}, ${this.d}, ${this.e},\n      ${this.f}, ${this.g}, ${this.h}, ${this.i}, ${this.j},\n      ${this.k}, ${this.l}, ${this.m}, ${this.n}, ${this.o},\n      ${this.p}, ${this.q}, ${this.r}, ${this.s}, ${this.t} )`}toArray(){return"abcdefghijklmnopqrst".split("").map((t=>this[t]))}static get IDENTITY(){return new ne}static createBrightnessMatrix(t){const e=new ne;return e.e=t,e.j=t,e.o=t,e}static createContrastMatrix(t){const e=new ne,i=(1-t)/2;return e.a=e.g=e.m=t,e.e=e.j=e.o=i,e}static createSaturationMatrix(t=1){const e=new ne,i=1-t,r=.213*i,n=.715*i,o=.072*i;return e.a=r+t,e.b=n,e.c=o,e.f=r,e.g=n+t,e.h=o,e.k=r,e.l=n,e.m=o+t,e}static createExposureMatrix(t=0){const e=Math.pow(2,t);return new ne(e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0)}static createLinearMatrix(t=1,e=0){const i=new ne;return i.a=i.g=i.m=t,i.e=i.j=i.o=e,i}}var oe=ne;class se extends Ht{constructor(t={},e={}){super(),this.availableOptions=b(b({},Object.getPrototypeOf(this).availableOptions),e),this._onConfigurableUpdate=this._onConfigurableUpdate.bind(this),this._initOptions(t)}_buildConfigError(t){let e="";return this.constructor.name&&(e=`${this.constructor.name}: `),e+=t,new Error(e)}_onOptionsChange(){}validateSettings(){return new Promise(((t,e)=>{for(const t in this.availableOptions){if(this.availableOptions[t].required&&void 0===this._options[t])return e(this._buildConfigError(`Option \`${t}\` is required.`))}t()}))}_initOptions(t={}){let e,i,r;this._options={};const n=this;for(e in this.availableOptions){if(r=e.charAt(0).toUpperCase()+e.slice(1),i=this.availableOptions[e],-1===[ft.STRING,ft.NUMBER,ft.BOOLEAN,ft.OBJECT,ft.VECTOR2,ft.COLOR,ft.CONFIGURABLE,ft.COLOR_MATRIX,ft.ARRAY,ft.IMAGE,ft.FUNCTION,ft.ALL].indexOf(i.type))throw this._buildConfigError(`Unknown option type: \`${i.type}\``);if(function(t){n[`set${r}`]=function(e,i,r){n.setOption(t,e,i,r)},n[`get${r}`]=function(){return n.getOption(t)}}(e),i.type===ft.CONFIGURABLE&&(this._options[e]=new se(void 0,i.structure||{}),this._options[e].on("update",this._onConfigurableUpdate)),!(e in t)||void 0===t[e])if(void 0!==i.default){let t=i.default;"function"==typeof i.default&&(t=i.default()),this[`set${r}`](t,!1,!0)}else i.type!==ft.CONFIGURABLE&&(this._options[e]=void 0)}for(e in t){if(void 0===this.availableOptions[e])throw new Error(`Invalid option: ${e}`);void 0!==t[e]&&(r=e.charAt(0).toUpperCase()+e.slice(1),this[`set${r}`](t[e],!1,!0))}}set(t,e=!0){Object.keys(t).forEach((e=>{this.setOption(e,t[e],!1)})),this._onOptionsChange(),e&&this.emit("update",this,t)}getOption(t){return this._options[t]}hasOption(t){return!!this.availableOptions[t]}getOptionDefault(t){const e=this.availableOptions[t];if(!e)throw new Error(`Invalid option: ${t}`);return e.default}resetOptions(){this.set(this.getDefaultOptions())}getDefaultOptions(){const t={};for(const e in this.availableOptions){const i=this.availableOptions[e].default;void 0!==i&&(t[e]=i)}return t}getOptions(){return b({},this._options)}equals(t){const e=t.getOptions();return this.optionsEqual(e)}optionsEqual(t){for(const e in t){const i=t[e];if(!this._optionEquals(e,i))return!1}return!0}_optionEquals(t,e){if(void 0===this.availableOptions[t])throw new Error(`Invalid option: ${t}`);const i=this.availableOptions[t].type,r=this._options[t];if(r===e)return!0;if(void 0===e||void 0===r)return!1;switch(i){case ft.OBJECT:return"function"==typeof r.optionsEqual?r.optionsEqual(e._options):r===e;case ft.STRING:case ft.NUMBER:case ft.BOOLEAN:case ft.FUNCTION:case"*":return r===e;case ft.VECTOR2:return r.equals(e);case ft.COLOR:case ft.COLOR_MATRIX:return e.equals(r);case ft.CONFIGURABLE:return r.optionsEqual(e);case ft.ARRAY:return this._arrayOptionEquals(t,e);case ft.IMAGE:return r.src===e.src}}_arrayOptionEquals(t,e){const i=this._options[t];if(e.length!==i.length)return!1;let r=!0;for(let t=0;t<i.length;t++){const n=i[t],o=e[t];if(n instanceof se){if(void 0===o||!n.optionsEqual(o)){r=!1;break}}else if(o!==n){r=!1;break}}return r}serializeOptions(t=Object.keys(this._options),e=!1){const i={};return t.forEach((t=>{if(void 0===this.availableOptions[t])return Log.warn(`Trying to serialize a key that does not exist: ${t}`);!1!==this.availableOptions[t].serializable&&(i[t]=this.serializeOption(t,e))})),i}serializeOption(t,e=!1){const i=this.availableOptions[t],r=i.type,n=this._options[t];if(!n)return n;if(!1===i.serializable)throw new Error(`Option \`${t}\` is not serializable.`);switch(r){case ft.STRING:case ft.NUMBER:case ft.BOOLEAN:case ft.OBJECT:case ft.FUNCTION:case ft.ALL:return n;case ft.VECTOR2:return e?n.toObject():n.clone();case ft.COLOR:case ft.COLOR_MATRIX:return e?n.toArray():n.clone();case ft.CONFIGURABLE:return n.serializeOptions(void 0,e);case ft.ARRAY:return n.slice(0);case ft.IMAGE:return e?n.src:n}}setOption(t,e,i=!0,r=!1){const n=this.availableOptions[t];if(!n)throw new Error(`Invalid option: ${t}`);if(void 0!==n.setter&&(e=n.setter.call(this,e,r)),void 0!==n.validation&&n.validation(e),null==e){if(n.required)throw this._buildConfigError(`Option \`${t}\` is required.`);this._options[t]=e}else switch(n.type){case ft.STRING:{if(typeof e!==ft.STRING)throw this._buildConfigError(`Option \`${t}\` has to be a string.`);const{available:i}=n;if(void 0!==i&&-1===i.indexOf(e))throw this._buildConfigError(`Invalid value for \`${t}\` (valid values are: ${n.available.join(", ")})`);this._options[t]=e;break}case ft.NUMBER:if(typeof e!==ft.NUMBER)throw this._buildConfigError(`Option \`${t}\` has to be a number.`);this._options[t]=e;break;case ft.BOOLEAN:if(typeof e!==ft.BOOLEAN)throw this._buildConfigError(`Option \`${t}\` has to be a boolean.`);this._options[t]=e;break;case ft.VECTOR2:if(!(e instanceof Zt||"object"==typeof e&&"x"in e&&"y"in e))throw this._buildConfigError(`Option \`${t}\` has to be an instance of Vector2 or an Object holding x and y values.`);this._options[t]=e instanceof Zt?e.clone():Zt.fromObject(e);break;case ft.COLOR:if(!(e instanceof jt))throw this._buildConfigError(`Option \`${t}\` has to be an instance of Color.`);this._options[t]=e;break;case ft.COLOR_MATRIX:if(!(e instanceof oe))throw this._buildConfigError(`Option \`${t}\` has to be an instance of ColorMatrix.`);this._options[t]=e.clone();break;case ft.FUNCTION:if("function"!=typeof e)throw this._buildConfigError(`Option \`${t}\` has to be a function.`);this._options[t]=e;break;case ft.OBJECT:case"*":this._options[t]=e;break;case ft.IMAGE:{const{Image:i}=wt;if("string"==typeof e){const r=new i;(t=>Boolean("tagName"in t&&"IMG"===t.tagName.toUpperCase()))(r)&&(r.crossOrigin=It.getCrossOriginValue(n.crossOrigin)),r.src=e,this._options[t]=r}else{if(!(e instanceof i||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement))throw this._buildConfigError(`Option \`${t}\` has to be an Image, Canvas or String.`);this._options[t]=e}break}case ft.CONFIGURABLE:e instanceof se?this._options[t]=e:this._options[t].set(e);break;case ft.ARRAY:if(!(e instanceof Array))throw this._buildConfigError(`Option \`${t}\` has to be an Array.`);this._options[t]=e.slice(0);break;default:throw this._buildConfigError(`Unknown option type: \`${n.type}\``)}i&&(this._onOptionsChange(),this.emit("update",this,{[t]:e}))}_onConfigurableUpdate(...t){this.emit("update",...t)}hasChanges(){const t=this.getDefaultOptions();return!this.optionsEqual(t)}}var ae=se;class le{constructor(t,e,i,r={},n=[]){this._program=null,this._renderer=t,this._vertexSource=e,this._fragmentSource=i,this._uniforms=r,this._uniformLocations={},this._attributes=n,this._attributeLocations={},this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._init()}_init(){this._compile();this._renderer.getContext().useProgram(this._program),this._cacheUniformLocations(),this._cacheAttributeLocations()}_onContextChange(){this._init()}setupBuffers(t,e){const i=this._renderer.getContext();i.bindBuffer(i.ARRAY_BUFFER,t),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e),i.vertexAttribPointer(this._attributeLocations.a_position,2,i.FLOAT,!1,Kt,0),i.vertexAttribPointer(this._attributeLocations.a_texCoord,2,i.FLOAT,!1,Kt,8),i.vertexAttribPointer(this._attributeLocations.a_color,4,i.UNSIGNED_BYTE,!0,Kt,16)}syncUniforms(){Object.keys(this._uniforms).forEach((t=>{this.syncUniform(t)}))}syncUniform(t){const e=this._renderer.getContext(),i=this._uniforms[t],r=this._uniformLocations[t];switch(i.type){case mt.SAMPLER2D:e.uniform1i(r,i.value);break;case mt.INT:case mt.INT1:e.uniform1i(r,i.value);break;case mt.INT2:e.uniform2i(r,i.value[0],i.value[1]);break;case mt.INT3:e.uniform3i(r,i.value[0],i.value[1],i.value[2]);break;case mt.INT4:e.uniform4i(r,i.value[0],i.value[1],i.value[2],i.value[3]);break;case mt.FLOAT:case mt.FLOAT1:e.uniform1f(r,i.value);break;case mt.FLOAT2:e.uniform2f(r,i.value[0],i.value[1]);break;case mt.FLOAT3:e.uniform3f(r,i.value[0],i.value[1],i.value[2]);break;case mt.FLOAT4:e.uniform4f(r,i.value[0],i.value[1],i.value[2],i.value[3]);break;case mt.FLOAT_VECTOR2:e.uniform2fv(r,i.value);break;case mt.MAT3:case mt.MAT3FV:e.uniformMatrix3fv(r,!1,i.value);break;case mt.MAT4:e.uniformMatrix4fv(r,!1,i.value);break;default:Mt.warn(this.constructor.name,`Unknown uniform type: ${i.type}`)}}_cacheAttributeLocations(){const t=this._renderer.getContext();this._attributes.forEach((e=>{this._program&&(this._attributeLocations[e]=t.getAttribLocation(this._program,e))}))}_cacheUniformLocations(){const t=this._renderer.getContext();Object.keys(this._uniforms).forEach((e=>{if(this._program){const i=t.getUniformLocation(this._program,e);i&&(this._uniformLocations[e]=i)}}))}_addPrecisionToSource(t){const e=this._renderer.getMaxFloatPrecision();let i=_t.Medium;return It.isMobile()&&e===_t.High&&(i=_t.High),`precision ${i} float;\n${t}`}_compile(){const t=this._renderer.getContext(),e=this._compileShader(t.VERTEX_SHADER,this._vertexSource);this._vertexShader=e;const i=this._addPrecisionToSource(this._fragmentSource),r=this._compileShader(t.FRAGMENT_SHADER,i);this._fragmentShader=r;const n=t.createProgram();if(!n)return;t.attachShader(n,e),t.attachShader(n,r),t.linkProgram(n);if(t.getProgramParameter(n,t.LINK_STATUS))this._program=n;else{let e=t.getProgramInfoLog(n);t.isContextLost()&&(e="WebGL context lost"),t.deleteProgram(n),Mt.error(this.constructor.name,`WebGL program linking error: ${e}`)}}_compileShader(t,e){const i=this._renderer.getContext(),r=i.createShader(t);if(!r)throw new Error(`Cannot create shared: ${JSON.stringify(t)}`);i.shaderSource(r,e),i.compileShader(r);if(!i.getShaderParameter(r,i.COMPILE_STATUS)){let t=i.getShaderInfoLog(r);i.isContextLost()&&(t="WebGL context lost"),i.deleteShader(r),Mt.error(this.constructor.name,`WebGL shader compilation error: ${t}`)}return r}setUniform(t,e,i=!1){this._uniforms[t].value=e,i&&this.syncUniform(t)}setUniforms(t,e=!1){Object.keys(t).forEach((i=>{this._uniforms[i].value=t[i],e&&this.syncUniform(i)}))}getUniforms(){return this._uniforms}getAttributes(){return this._attributes}getAttributeLocations(){return this._attributeLocations}getProgram(){return this._program}dispose(){const t=this._renderer.getContext();t.deleteProgram(this._program),t.deleteShader(this._vertexShader),t.deleteShader(this._fragmentShader),this._renderer.off("context",this._onContextChange)}}const ce=new Xt,ue={vertexSource:"attribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\nuniform mat3 u_projMatrix;\n\nvoid main() {\n  gl_Position = vec4((u_projMatrix * vec3(a_position, 1)).xy, 0, 1);\n  v_texCoord = a_texCoord;\n  v_color = vec4(a_color.rgb * a_color.a, a_color.a);\n}\n",fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_texCoord) * v_color;\n}\n",uniforms:{u_image:{type:mt.SAMPLER2D,value:0},u_projMatrix:{type:mt.MAT3,value:ce.toArray()}},attributes:["a_position","a_texCoord","a_color"]};class he extends le{constructor(t,e=ue.vertexSource,i=ue.fragmentSource){super(t,e,i,ue.uniforms,ue.attributes)}}class de extends ae{constructor(t={},e={}){super(t,e),this._initOptions(t)}_initOptions(t={}){this._shaders=[],this._availableUniforms=ue.uniforms,this._attributes=ue.attributes,this._vertexSource=ue.vertexSource,this._fragmentSource=ue.fragmentSource,this._initUniforms(),super._initOptions(t)}_initUniforms(){this._uniforms={};for(const t in this._availableUniforms){const e=this._availableUniforms[t];this._uniforms[t]={type:e.type,value:e.default||null}}for(const t in this.availableOptions){const e=this.availableOptions[t];e.uniformType?this._uniforms[`u_${t}`]={type:e.uniformType,value:e.default||null}:Mt.trace(this.constructor.name,`Option \`${t}\` is missing a \`uniformType\`!`)}}setOption(t,e,i=!0){super.setOption(t,e,i);let r=e;const n=this.availableOptions[t];if(!n.uniformType)return;const o=`u_${t}`;switch(n.type){case ft.COLOR:n.uniformType===mt.FLOAT4?r=e.toGLColor():n.uniformType===mt.FLOAT3&&(r=e.toRGBGLColor());break;case ft.VECTOR2:r=[e.x,e.y];break;case ft.COLOR_MATRIX:{r=[e.a,e.b,e.c,e.d,e.f,e.g,e.h,e.i,e.k,e.l,e.m,e.n,e.p,e.q,e.r,e.s];const t=[e.e,e.j,e.o,e.t];this._uniforms[`${o}_vec`]={value:t,type:mt.FLOAT4}}}this.setUniform(o,r)}setUniform(t,e,i=!1){this._uniforms[t].value=e}setUniforms(t,e=!1){Object.entries(t).forEach((([t,i])=>{this._uniforms[t].value=i,e&&this.syncUniform(t)}))}syncUniform(t){this._shaders.forEach((e=>{e.syncUniform(t)}))}syncUniforms(){this._shaders.forEach((t=>{t.syncUniforms()}))}getShaderForRenderer(t){const{id:e}=t;this._shaders||(this._shaders=[]);let i=this._shaders[e];return i||(i=new le(t,this._vertexSource,this._fragmentSource,this._uniforms,this._attributes),this._shaders[e]=i),i}apply(t,e,i,r=!1){St(t)?this._applyWebGL(t,e,i,r):this._applyCanvas(t,e,i,r)}_applyWebGL(t,e,i,r=!1){const n=t.getContext(),o=this.getShaderForRenderer(t);t.setRenderTarget(i),r&&i.clear(),t.setShader(o);const s=t.getCurrentRenderTarget().getProjectionMatrix().toArray();o.setUniform("u_projMatrix",s),o.syncUniforms(),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=i.getContext();Mt.warn(this.constructor.name,"`_applyCanvas` is not implemented. Just copying image data from `inputTarget` to `outputTarget`."),o.clearRect(0,0,n.width,n.height),o.drawImage(n,0,0)}dispose(){this._shaders.forEach((t=>t.dispose())),this._shaders=[]}_blurImage(t,e,i){const r=t.getCanvas(),n=Math.min(1,10/(i*Math.min(r.width,r.height))),o=It.createCanvas();o.width=Math.round(r.width*n),o.height=Math.round(r.height*n);const s=o.getContext("2d");s.drawImage(r,0,0,r.width,r.height,0,0,o.width,o.height);const a=i*Math.min(o.width,o.height),l=s.getImageData(0,0,o.width,o.height);(function(t,e,i,r,n,o){if(!(isNaN(o)||o<1)){o|=0;var s,a,l,c,u,h,d,p,f,m,g,_,y,v,b,x,w,S,k,C,T,E,R,D,I,O=t.data,A=o+o+1,F=r-1,M=n-1,P=o+1,B=P*(P+1)/2,z=new re,L=z;for(l=1;l<A;l++)L=L.next=new re,l==P&&(I=L);L.next=z;var N=null,U=null;d=h=0;var j=ee[o],H=ie[o];for(a=0;a<n;a++){for(x=w=S=k=p=f=m=g=0,_=P*(C=O[h]),y=P*(T=O[h+1]),v=P*(E=O[h+2]),b=P*(R=O[h+3]),p+=B*C,f+=B*T,m+=B*E,g+=B*R,L=z,l=0;l<P;l++)L.r=C,L.g=T,L.b=E,L.a=R,L=L.next;for(l=1;l<P;l++)c=h+((F<l?F:l)<<2),p+=(L.r=C=O[c])*(D=P-l),f+=(L.g=T=O[c+1])*D,m+=(L.b=E=O[c+2])*D,g+=(L.a=R=O[c+3])*D,x+=C,w+=T,S+=E,k+=R,L=L.next;for(N=z,U=I,s=0;s<r;s++)O[h+3]=R=g*j>>H,0!==R?(R=255/R,O[h]=(p*j>>H)*R,O[h+1]=(f*j>>H)*R,O[h+2]=(m*j>>H)*R):O[h]=O[h+1]=O[h+2]=0,p-=_,f-=y,m-=v,g-=b,_-=N.r,y-=N.g,v-=N.b,b-=N.a,c=d+((c=s+o+1)<F?c:F)<<2,p+=x+=N.r=O[c],f+=w+=N.g=O[c+1],m+=S+=N.b=O[c+2],g+=k+=N.a=O[c+3],N=N.next,_+=C=U.r,y+=T=U.g,v+=E=U.b,b+=R=U.a,x-=C,w-=T,S-=E,k-=R,U=U.next,h+=4;d+=r}for(s=0;s<r;s++){for(w=S=k=x=f=m=g=p=0,_=P*(C=O[h=s<<2]),y=P*(T=O[h+1]),v=P*(E=O[h+2]),b=P*(R=O[h+3]),p+=B*C,f+=B*T,m+=B*E,g+=B*R,L=z,l=0;l<P;l++)L.r=C,L.g=T,L.b=E,L.a=R,L=L.next;for(u=r,l=1;l<=o;l++)h=u+s<<2,p+=(L.r=C=O[h])*(D=P-l),f+=(L.g=T=O[h+1])*D,m+=(L.b=E=O[h+2])*D,g+=(L.a=R=O[h+3])*D,x+=C,w+=T,S+=E,k+=R,L=L.next,l<M&&(u+=r);for(h=s,N=z,U=I,a=0;a<n;a++)O[3+(c=h<<2)]=R=g*j>>H,R>0?(R=255/R,O[c]=p*j>>H,O[c+1]=f*j>>H,O[c+2]=m*j>>H):O[c]=O[c+1]=O[c+2]=0,p-=_,f-=y,m-=v,g-=b,_-=N.r,y-=N.g,v-=N.b,b-=N.a,c=s+((c=a+P)<M?c:M)*r<<2,p+=x+=N.r=O[c],f+=w+=N.g=O[c+1],m+=S+=N.b=O[c+2],g+=k+=N.a=O[c+3],N=N.next,_+=C=U.r,y+=T=U.g,v+=E=U.b,b+=R=U.a,x-=C,w-=T,S-=E,k-=R,U=U.next,h+=r}}})(l,0,0,o.width,o.height,a),s.putImageData(l,0,0),e.getContext().drawImage(o,0,0,o.width,o.height,0,0,r.width,r.height)}}class pe extends de{constructor(){super(),this._fragmentSource="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nvarying vec4 v_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(color.a > 0. ? color.rgb / color.a : vec3(0), color.a);\n}\n"}}const{OptionType:fe,UniformType:me}=ht;class ge extends de{constructor(...t){super(...t),this._fragmentSource="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),{color:a}=this._options,l=o.getImageData(0,0,n.width,n.height),c=s.getImageData(0,0,n.width,n.height),u=n.width*n.height,h=new jt,d=new jt;for(let t=0;t<4*u;t+=4){h.set(l.data[t]/255,l.data[t+1]/255,l.data[t+2]/255,l.data[t+3]/255),d.set(c.data[t]/255,c.data[t+1]/255,c.data[t+2]/255,c.data[t+3]/255);const e=d.r+h.a*(h.r-d.r);c.data[t]=255*(e+h.a*(a.r-e));const i=d.g+h.a*(h.g-d.g);c.data[t+1]=255*(i+h.a*(a.g-i));const r=d.b+h.a*(h.b-d.b);c.data[t+2]=255*(r+h.a*(a.b-r))}s.putImageData(c,0,0)}}ge.prototype.availableOptions={color:{type:fe.COLOR,default:jt.WHITE,uniformType:me.FLOAT4}};var _e=ge;const{OptionType:ye,UniformType:ve}=ht;class be extends de{constructor(...t){super(...t),this._fragmentSource="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform vec4 u_color;\nuniform int u_mode;\n\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  if (u_mode == 0) {\n    gl_FragColor = color * color.a;\n  } else if (u_mode == 1) {\n    gl_FragColor = vec4(mix(color.rgb, u_color.rgb, u_color.a), color.a) * color.a;\n  } else if (u_mode == 2) {\n    float luminance = dot(color.rgb, W);\n    vec3 colorized = vec3(luminance) * u_color.rgb;\n    gl_FragColor = vec4(mix(color.rgb, colorized, u_color.a), color.a) * color.a;\n  }\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),a=o.getImageData(0,0,n.width,n.height),{mode:l,color:c}=this._options,{r:u,g:h,b:d,a:p}=c,f=[.2125,.7154,.0721];switch(l){case be.MODES.SOLID:for(let t=0;t<n.width*n.height;t++){const e=4*t;a.data[e]+=(255*u-a.data[e])*p,a.data[e+1]+=(255*h-a.data[e+1])*p,a.data[e+2]+=(255*d-a.data[e+2])*p}break;case be.MODES.COLORIZED:for(let t=0;t<n.width*n.height;t++){const e=4*t,i=a.data[e]/255*f[0]+a.data[e+1]/255*f[1]+a.data[e+2]/255*f[2],r=new jt(i*u,i*h,i*d);a.data[e]+=(255*r.r-a.data[e])*p,a.data[e+1]+=(255*r.g-a.data[e+1])*p,a.data[e+2]+=(255*r.b-a.data[e+2])*p}}s.putImageData(a,0,0)}}be.MODES={NONE:0,SOLID:1,COLORIZED:2},be.prototype.availableOptions={color:{type:ye.COLOR,default:jt.WHITE,uniformType:ve.FLOAT4},mode:{type:ye.NUMBER,default:be.MODES.NONE,uniformType:ve.INT}};var xe=be;const{OptionType:we,UniformType:Se}=ht,ke=1e-6;class Ce extends de{constructor(...t){super(...t),this._fragmentSource="uniform sampler2D u_image;\nvarying vec2 v_texCoord;\nuniform sampler2D u_overlayImage;\nuniform int u_blendMode;\nuniform float u_alpha;\n\nconst float EPSILON = 0.000001;\n\nvec4 overlay(vec4 a, vec4 b) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 hardLight(vec4 b, vec4 a) {\n    vec3 result = mix(\n          1.0 - 2.0 * (1.0 - a.rgb) * (1.0 - b.rgb),\n          2.0 * a.rgb * b.rgb,\n          vec3(a.r < 0.5, a.g < 0.5, a.b < 0.5)\n      );\n    return mix(b, vec4(result, b.a), u_alpha * a.a);\n}\n\nvec4 softLight(vec4 a, vec4 b) {\n    vec3 result = mix(\n          2.0 * a.rgb * (1.0 - b.rgb) + (2.0 * b.rgb - 1.0) * sqrt(a.rgb),\n          2.0 * a.rgb * b.rgb + a.rgb * a.rgb * (1.0 - 2.0 * b.rgb),\n          vec3(b.r < 0.5, b.g < 0.5, b.b < 0.5)\n      );\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 multiply(vec4 a, vec4 b) {\n    vec3 result = a.rgb * b.rgb;\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 darken(vec4 a, vec4 b) {\n    vec3 result = min(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 lighten(vec4 a, vec4 b) {\n    vec3 result = max(a.rgb, b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 screen(vec4 a, vec4 b) {\n    vec3 result = 1.0 - (1.0 - a.rgb) * (1.0 - b.rgb);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 colorBurn(vec4 a, vec4 b) {\n    vec3 result = clamp(1.0 - (1.0 - a.rgb) / max(b.rgb, EPSILON), 0.0, 1.0);\n    return mix(a, vec4(result, a.a), u_alpha * b.a);\n}\n\nvec4 normal(vec4 a, vec4 b) {\n    return mix(a, vec4(b.rgb, a.a), u_alpha * b.a);\n}\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 overlayColor = texture2D(u_overlayImage, v_texCoord);\n\n  vec4 resultColor;\n  if (u_blendMode == 0) {\n    resultColor = normal(color, overlayColor);\n  } else if (u_blendMode == 1) {\n    resultColor = overlay(color, overlayColor);\n  } else if (u_blendMode == 2) {\n    resultColor = hardLight(color, overlayColor);\n  } else if (u_blendMode == 3) {\n    resultColor = softLight(color, overlayColor);\n  } else if (u_blendMode == 4) {\n    resultColor = multiply(color, overlayColor);\n  } else if (u_blendMode == 5) {\n    resultColor = darken(color, overlayColor);\n  } else if (u_blendMode == 6) {\n    resultColor = lighten(color, overlayColor);\n  } else if (u_blendMode == 7) {\n    resultColor = screen(color, overlayColor);\n  } else if (u_blendMode == 8) {\n    resultColor = colorBurn(color, overlayColor);\n  }\n  gl_FragColor = vec4(resultColor.rgb * resultColor.a, resultColor.a);\n}\n",this._lastImage=null}_applyCanvas(t,e,i,r=!1){const n=this._options.overlayTexture.getRenderTarget().getContext(),o=e.getCanvas(),s=e.getContext(),a=i.getContext(),l=s.getImageData(0,0,o.width,o.height),c=n.getImageData(0,0,o.width,o.height),{blendMode:u,alpha:h}=this._options,d=new jt,p=new jt,f=new jt;for(let t=0;t<o.width*o.height*4;t+=4){let e,i,r,n,o,s,a,m,g;switch(d.set(l.data[t]/255,l.data[t+1]/255,l.data[t+2]/255,l.data[t+3]/255),p.set(c.data[t]/255,c.data[t+1]/255,c.data[t+2]/255,c.data[t+3]/255),u){case Ce.BLEND_MODES.NORMAL:f.set(d.r+p.a*h*(p.r-d.r),d.g+p.a*h*(p.g-d.g),d.b+p.a*h*(p.b-d.b),d.a);break;case Ce.BLEND_MODES.OVERLAY:e=1-2*(1-d.r)*(1-p.r),i=2*d.r*p.r,r=e+(d.r<.5?1:0)*(i-e),n=1-2*(1-d.g)*(1-p.g),o=2*d.g*p.g,s=n+(d.g<.5?1:0)*(o-n),a=1-2*(1-d.b)*(1-p.b),m=2*d.b*p.b,g=a+(d.b<.5?1:0)*(m-a),f.set(d.r+p.a*h*(r-d.r),d.g+p.a*h*(s-d.g),d.b+p.a*h*(g-d.b),d.a);break;case Ce.BLEND_MODES.HARD_LIGHT:e=1-2*(1-p.r)*(1-d.r),i=2*p.r*d.r,r=e+(p.r<.5?1:0)*(i-e),n=1-2*(1-p.g)*(1-d.g),o=2*p.g*d.g,s=n+(p.g<.5?1:0)*(o-n),a=1-2*(1-p.b)*(1-d.b),m=2*p.b*d.b,g=a+(p.b<.5?1:0)*(m-a),f.set(d.r+p.a*h*(r-d.r),d.g+p.a*h*(s-d.g),d.b+p.a*h*(g-d.b),d.a);break;case Ce.BLEND_MODES.SOFT_LIGHT:e=2*d.r*(1-p.r)+(2*p.r-1)*Math.sqrt(d.r),i=2*d.r*p.r+d.r*d.r*(1-2*p.r),r=e+(p.r<.5?1:0)*(i-e),n=2*d.g*(1-p.g)+(2*p.g-1)*Math.sqrt(d.g),o=2*d.g*p.g+d.g*d.g*(1-2*p.g),s=n+(p.g<.5?1:0)*(o-n),a=2*d.b*(1-p.b)+(2*p.b-1)*Math.sqrt(d.b),m=2*d.b*p.b+d.b*d.b*(1-2*p.b),g=a+(p.b<.5?1:0)*(m-a),f.set(d.r+p.a*h*(r-d.r),d.g+p.a*h*(s-d.g),d.b+p.a*h*(g-d.b),d.a);break;case Ce.BLEND_MODES.MULTIPLY:r=d.r*p.r,s=d.g*p.g,g=d.b*p.b,f.set(d.r+p.a*h*(r-d.r),d.g+p.a*h*(s-d.g),d.b+p.a*h*(g-d.b),d.a);break;case Ce.BLEND_MODES.DARKEN:r=Math.min(d.r,p.r),s=Math.min(d.g,p.g),g=Math.min(d.b,p.b),f.set(d.r+p.a*h*(r-d.r),d.g+p.a*h*(s-d.g),d.b+p.a*h*(g-d.b),d.a);break;case Ce.BLEND_MODES.LIGHTEN:r=Math.max(d.r,p.r),s=Math.max(d.g,p.g),g=Math.max(d.b,p.b),f.set(d.r+p.a*h*(r-d.r),d.g+p.a*h*(s-d.g),d.b+p.a*h*(g-d.b),d.a);break;case Ce.BLEND_MODES.SCREEN:r=1-(1-d.r)*(1-p.r),s=1-(1-d.g)*(1-p.g),g=1-(1-d.b)*(1-p.b),f.set(d.r+p.a*h*(r-d.r),d.g+p.a*h*(s-d.g),d.b+p.a*h*(g-d.b),d.a);break;case Ce.BLEND_MODES.COLOR_BURN:r=Math.max(0,Math.min(1,1-(1-d.r)/Math.max(p.r,ke))),s=Math.max(0,Math.min(1,1-(1-d.g)/Math.max(p.g,ke))),g=Math.max(0,Math.min(1,1-(1-d.b)/Math.max(p.b,ke))),f.set(d.r+p.a*h*(r-d.r),d.g+p.a*h*(s-d.g),d.b+p.a*h*(g-d.b),d.a)}l.data[t]=255*f.r,l.data[t+1]=255*f.g,l.data[t+2]=255*f.b,l.data[t+3]=255*f.a}a.putImageData(l,0,0)}}Ce.BLEND_MODES={NORMAL:0,OVERLAY:1,HARD_LIGHT:2,SOFT_LIGHT:3,MULTIPLY:4,DARKEN:5,LIGHTEN:6,SCREEN:7,COLOR_BURN:8},Ce.prototype.availableOptions={blendMode:{type:we.NUMBER,default:Ce.BLEND_MODES.NORMAL,uniformType:Se.INT},overlayImage:{type:we.NUMBER,required:!0,uniformType:Se.SAMPLER2D},overlayTexture:{type:we.OBJECT,required:!0},alpha:{type:we.NUMBER,default:1,uniformType:Se.FLOAT}};var Te,Ee,Re=Ce;!function(t){t[t.Nearest=0]="Nearest",t[t.Linear=1]="Linear",t[t.Bilinear=2]="Bilinear",t[t.Trilinear=3]="Trilinear"}(Te||(Te={})),function(t){t[t.ClampToEdge=0]="ClampToEdge",t[t.Repeat=1]="Repeat",t[t.MirroredRepeat=2]="MirroredRepeat"}(Ee||(Ee={}));const De={1:"LINEAR",0:"NEAREST",2:"LINEAR_MIPMAP_NEAREST",3:"LINEAR_MIPMAP_LINEAR"};class Ie extends Ht{constructor(t){super(),this._renderers=[],this._glTextures={},this._dirty=!0,this._mipMapping=!1,this._glUnit=0,this._magFilter=Ie.DefaultMagFilter,this._minFilter=Ie.DefaultMinFilter,this._repeatX=0,this._repeatY=0,this._pixelRatio=1,this._loaded=!1,this._frame=new Yt(0,0,100,100),this._onSourceLoaded=this._onSourceLoaded.bind(this),this._source=t,this._loadSource()}resizeTo(t){this._frame.width===t.x&&this._frame.height===t.y||(this._frame.width=t.x,this._frame.height=t.y,this._dirty=!0)}_loadSource(){const t=this._source;if(t)return wt.isCanvas(t)||t.complete?this._onSourceLoaded():void(t.addEventListener&&t.addEventListener("load",this._onSourceLoaded))}_onSourceLoaded(){this._loaded=!0,this.emit("loaded"),this.update()}_updateGLFilters(){if(!this._source)return;const t=new Zt(this._source.width,this._source.height);It.isPowerOfTwo(t)?(Mt.info(this.constructor.name,"Mip-mapping enabled"),this._minFilter=Ie.TrilinearFilter,this._mipMapping=!0):(this._minFilter=Ie.LinearFilter,this._mipMapping=!1)}update(){this._source&&((this._frame.width!==this._source.width||this._frame.height!==this._source.height)&&(this._frame=new Yt(0,0,this._source.width,this._source.height),this._dirty=!0),this._updateGLFilters(),this.emit("update"))}getRenderers(){return[...this._renderers]}getGLFilter(t,e){switch(e){case"min":return t[De[this._minFilter]];case"mag":return t[De[this._magFilter]]}}isLoaded(){return this._loaded}setLoaded(t){this._loaded=t}getSource(){return this._source}setSource(t){this._source=t}getGLTextureForRenderer(t){return this._glTextures[t.id]}setGLTextureForRenderer(t,e){this._renderers[e.id]=e,this._glTextures[e.id]=t}getFrame(){return this._frame}setFrame(t){this._frame=t}getDimensions(){return new Zt(this._frame.width,this._frame.height)}getPixelRatio(){return this._pixelRatio}setPixelRatio(t){this._pixelRatio=t}getGLUnit(){return this._glUnit}setGLUnit(t){this._glUnit=t}setMinFilter(t){this._minFilter=t}getMinFilter(){return this._minFilter}setMagFilter(t){this._magFilter=t}getMagFilter(){return this._magFilter}setRepeatX(t){this._repeatX=t}getRepeatX(){return this._repeatX}setRepeatY(t){this._repeatY=t}getRepeatY(){return this._repeatY}getGLRepeat(t,e){switch("x"===e?this.getRepeatX():this.getRepeatY()){case 0:return t.CLAMP_TO_EDGE;case 1:return t.REPEAT;case 2:return t.MIRRORED_REPEAT;default:return 0}}isDirty(){return this._dirty}setDirty(t){this._dirty=t}disposeGLTextures(){this._renderers.forEach((t=>{St(t)&&this.disposeGLTexturesForRenderer(t)}))}disposeGLTexturesForRenderer(t){if(!this._glTextures[t.id])return;t.getContext().deleteTexture(this._glTextures[t.id]),delete this._glTextures[t.id],this._renderers[t.id]||delete this._renderers[t.id]}isMipMappingEnabled(){return this._mipMapping}setMipMappingEnabled(t){this._mipMapping=t}dispose(){this.disposeGLTextures(),this._source=void 0}}Ie.NearestFilter=0,Ie.LinearFilter=1,Ie.BilinearFilter=2,Ie.TrilinearFilter=3,Ie.DefaultMagFilter=0,Ie.DefaultMinFilter=1,Ie.Repeat=1,Ie._id=0;class Oe{constructor(t,e,i,r=wt.createCanvas(),n){this._width=t,this._height=e,this._pixelRatio=i,this._baseTexture=new Ie,this._canvas=r;const o=n||this._canvas.getContext("2d");if(!o)throw new Error("Cannot get canvas context");this._context=o,this._baseTexture.setSource(this._canvas),this._canvas.width=this._width*this._pixelRatio,this._canvas.height=this._height*this._pixelRatio,this._filterStack=[{renderTarget:this,filters:[]}]}clear(){const t=this._context;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio)}resizeTo(t){this._baseTexture.resizeTo(t),this._width!==t.x&&(this._width=t.x,this._canvas.width=this._width*this._pixelRatio),this._height!==t.y&&(this._height=t.y,this._canvas.height=this._height*this._pixelRatio)}getCanvas(){return this._canvas}getContext(){return this._context}getFilterStack(){return this._filterStack}getWidth(){return this._width}getHeight(){return this._height}getPixelRatio(){return this._pixelRatio}setPixelRatio(t){this._pixelRatio=t}getDimensions(){return new Zt(this._width,this._height)}getBaseTexture(){return this._baseTexture}dispose(){delete this._canvas,delete this._context,this._baseTexture.dispose()}}class Ae{constructor(t){this._renderer=t,this._filterStack=[{renderTarget:t.getCurrentRenderTarget(),filters:[]}],this._textures=[],this._textureFrame=new Yt(0,0,t.getWidth(),t.getHeight())}resizeTo(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._textures.forEach((e=>e.resizeTo(t)))}pushFilters(t,e){this._currentFrame=t.getBounds();const i=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(i),this._filterStack.push({renderTarget:i,filters:e}),i.clear()}popFilters(){const t=this._filterStack.pop();if(!t)return;const{filters:e,renderTarget:i}=t,r=i,n=this._filterStack[this._filterStack.length-1].renderTarget;if(1===e.length){e[0].apply(this._renderer,r,n),this._textures.push(r)}else this._applyFilters(e,r,n);return e}_applyFilters(t,e,i){let r=e,n=this._getOrCreateRenderTarget(!0);const o=t[t.length-1];t.forEach((t=>{if(t===o)t.apply(this._renderer,r,i);else{t.apply(this._renderer,r,n);const e=r;r=n,n=e}})),this._textures.push(r),this._textures.push(n)}_getOrCreateRenderTarget(t=!1){let e=this._textures.pop();return e||(e=new Oe(this._textureFrame.width,this._textureFrame.height,1)),t&&e.clear(),e}setFilterStack(t){this._filterStack=t}dispose(){}}const Fe="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):M();var Me=class{constructor(t){this._context=t,this._tracking=!1;const e=this;for(const i in t){"function"==typeof t[i]?this[i]=function(...r){const n=t[i];if(!e._tracking)return n.apply(t,r);const o=Fe(),s=n.apply(t,r),a=Fe()-o,l={functionName:i,arguments:r,duration:a};return e._trackedCalls.push(l),s}:this._makePropertyWrapper(i)}}_makePropertyWrapper(t){if(-1!==["_context","_trackedCalls","_tracking"].indexOf(t))return;const e=this._context;this.__defineGetter__(t,(()=>e[t])),this.__defineSetter__(t,(i=>{e[t]=i}))}startFrame(){this._tracking=!0,this._trackedCalls=[]}endFrame(){const t="Rendering";Mt.log(t,"Frame rendering results:"),Mt.log(t,`Context calls: ${this._trackedCalls.length}`);const e={};this._trackedCalls.forEach((({functionName:t,duration:i})=>{e[t]=e[t]||{totalDuration:0,calls:0},e[t].totalDuration+=i,e[t].calls++}));let i=[];for(const t in e){const r=e[t];r.averageDuration=r.totalDuration/r.calls,i.push({functionName:t,data:r})}i.sort(((t,e)=>e.data.totalDuration-t.data.totalDuration)),i=i.slice(0,3),i.forEach((e=>{Mt.log(t,`${e.functionName}: ${e.data.calls} calls, ${e.data.totalDuration.toFixed(2)}ms`)}))}};class Pe extends Ht{constructor(t=800,e=600,i){super(),this._maxTextureSize=null,this._options=b(b({debug:!1},i),{pixelRatio:1,transparent:!1,clearColor:jt.BLACK}),this.setMaxListeners(0),this._width=t,this._height=e,this._dimensions=new Zt(this._width,this._height),this._maxTextureSize=null,this._pixelRatio=this._options.pixelRatio,this._canvas=this._options.canvas,this._clearColor=this._options.transparent?jt.TRANSPARENT:this._options.clearColor||jt.BLACK}setCanvas(t){const e=this._canvas;this._canvas=t,e!==t&&(this._createContext(),this._onBeforeContext(),this._setupContext()),this.resizeTo(new Zt(this._width,this._height))}getCanvas(){return this._canvas}_onBeforeContext(){}resizeTo(t,e=!0){this._width=t.x*this._pixelRatio,this._height=t.y*this._pixelRatio,e&&this._canvas&&(this._canvas.width=this._width,this._canvas.height=this._height,"style"in this._canvas&&(this._canvas.style.width=this._width/this._pixelRatio+"px",this._canvas.style.height=this._height/this._pixelRatio+"px")),this._dimensions=t.clone()}_createContext(){Mt.warn(this.constructor.name,"`_createContext` is abstract and not implemented in inherited class")}_setupContext(){Mt.warn(this.constructor.name,"`_setupContext` is abstract and not implemented in inherited class")}render(t){Mt.warn(this.constructor.name,"`render` is abstract and not implemented in inherited class")}getMaxDimensions(){return null}getContext(){return this._context}getWidth(){return this._dimensions.x}getHeight(){return this._dimensions.y}getDimensions(){return this._dimensions}getPixelRatio(){return this._pixelRatio}setPixelRatio(t){this._pixelRatio=t,this._defaultRenderTarget&&this._defaultRenderTarget.setPixelRatio(t)}getMaxTextureSize(){return this._maxTextureSize}getFilterManager(){return this._filterManager}setFilterManager(t){this._filterManager=t}isOfType(t){return this._type===t}dispose(){Mt.warn(this.constructor.name,"`dispose` is abstract and not implemented in inherited class")}}const{RendererType:Be}=ht;class ze extends Pe{constructor(t=800,e=600,i){super(t,e,b({},i)),this.id=0,this.setCanvas((null==i?void 0:i.canvas)||wt.createCanvas()),this._type=Be.CANVAS}_createContext(){let t=this._canvas.getContext("2d");return t?(this._options.debug&&(t=new Me(t)),this.id=ze.contextId++,this._context=t,this.emit("context",t),t):void 0}_setupContext(){const t=this._context;"imageSmoothingEnabled"in t?t.imageSmoothingEnabled=!0:["moz","webkit","ms"].forEach((e=>{t[e]&&(t[e]=!0)})),this._defaultRenderTarget=new Oe(this._width,this._height,this._pixelRatio,this._canvas,this._context),this.setRenderTarget(this._defaultRenderTarget),this._filterManager=new Ae(this)}render(t){const e=this._renderTarget.getContext(),i=t.getParent();t.setParent(new Qt),t.updateTransform(),i&&t.setParent(i),e.setTransform(1,0,0,1,0,0),e.globalAlpha=1;const{width:r,height:n}=this._canvas;e.clearRect(0,0,r,n),0!==this._clearColor.a&&(e.save(),e.fillStyle=this._clearColor.toRGBA(),e.fillRect(0,0,r,n),e.restore()),this.renderDisplayObject(t,this._renderTarget)}renderDisplayObject(t,e){const i=this._renderTarget;this._filterManager.setFilterStack(e.getFilterStack()),this.setRenderTarget(e),t.renderCanvas(this),this.setRenderTarget(i)}getCurrentRenderTarget(){return this._renderTarget}setRenderTarget(t){this._renderTarget=t}getContext(){return this._renderTarget.getContext()}dispose(){this._filterManager.dispose()}}ze.contextId=0,ze.type=Be.CANVAS;class Le{constructor(t){this.vertices=new Float32Array([0,0,100,0,100,100,0,100]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.vertexBuffer=null,this.indexBuffer=null,this.gl=t,this.initBuffers(),this.uploadBuffers()}map(t,e){const{x:i,y:r}=e;this.uvs[2]=e.width/t.width,this.uvs[4]=this.uvs[2],this.uvs[5]=e.height/t.height,this.uvs[7]=this.uvs[5],this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=this.vertices[2],this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=this.vertices[5],this.uploadBuffers()}getVertexBuffer(){return this.vertexBuffer}getIndexBuffer(){return this.indexBuffer}dispose(){this.cleanBuffer()}initBuffers(){const{gl:t}=this;this.cleanBuffer(),this.vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)}uploadBuffers(){const{gl:t}=this;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this.uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this.colors)}cleanBuffer(){const{gl:t}=this;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)}}class Ne{constructor(t,e,i,r,n=!1){this._renderer=t,this._gl=t.getContext(),this._width=e,this._height=i,this._frame=null,this._pixelRatio=r,this._projectionMatrix=new Xt,this._mipMapping=!1,this._baseTexture=new Ie;const o=this._baseTexture.getFrame();o.width=e,o.height=i,this._baseTexture.setPixelRatio(r),this._baseTexture.setLoaded(!0),this._framebuffer=null,this._isRoot=n,this._filterStack=[{renderTarget:this,filters:[]}],n||this._initFrameBuffer()}resizeTo(t){this._width=0|t.x,this._height=0|t.y,this._baseTexture.resizeTo(t),this._isRoot||this._resizeTexture(),this._baseTexture.setMinFilter(this._getMinFilter()),this._baseTexture.setMagFilter(this._getMagFilter()),this._calculateProjectionMatrix()}_getMinFilter(){let t=Ie.DefaultMinFilter;return this._mipMapping&&(t=Ie.TrilinearFilter),t}_getMagFilter(){return Ie.DefaultMagFilter}_resizeTexture(){const t=this._gl,e=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this._texture&&(t.deleteTexture(this._texture),this._texture=null),this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._texture,0),this._texture&&this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this._renderer._options.debug&&Wt.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",t);const r=new Zt(this._width,this._height);It.isPowerOfTwo(r)?(Mt.info("WebGLRenderTarget","Mip-mapping enabled"),this._mipMapping=!0):this._mipMapping=!1,this._baseTexture.setMipMappingEnabled(this._mipMapping)}activate(){const t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),this._calculateProjectionMatrix(),t.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),t.disable(t.STENCIL_TEST)}clear(t=jt.TRANSPARENT){const e=this._gl;e.bindFramebuffer(e.FRAMEBUFFER,this._framebuffer),this._renderer._options.debug&&Wt.checkFramebufferStatus("WebGLRenderTarget#clear",e),e.clearColor.apply(e,t.toGLColor()),e.clear(e.COLOR_BUFFER_BIT)}_calculateProjectionMatrix(){const t=this._projectionMatrix;t.reset();const e=this._frame||new Yt(0,0,this._width,this._height),{x:i,y:r}=e;this._isRoot?(t.a=1/this._width*2,t.d=-1/this._height*2,t.tx=-1-i*t.a,t.ty=1-r*t.d):(t.a=1/this._width*2,t.d=1/this._height*2,t.tx=-1-i*t.a,t.ty=-1-r*t.d)}_initFrameBuffer(){const t=this._gl;this._framebuffer&&(t.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(t.deleteTexture(this._texture),this._texture=null),this._framebuffer=t.createFramebuffer(),this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),t.bindFramebuffer(t.FRAMEBUFFER,this._framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._texture,0),this._texture&&this._baseTexture.setGLTextureForRenderer(this._texture,this._renderer),this.resizeTo(new Zt(this._width,this._height)),this._renderer._options.debug&&Wt.checkFramebufferStatus("WebGLRenderTarget#_initFramebuffer",t)}getProjectionMatrix(){return this._projectionMatrix}getTexture(){return this._texture}getFrame(){return this._frame}setFrame(t){this._frame=t}getFilterStack(){return this._filterStack}getPixelRatio(){return this._pixelRatio}setPixelRatio(t){this._pixelRatio=t,this._isRoot||this._resizeTexture()}getBaseTexture(){return this._baseTexture}dispose(){const t=this._gl;this._baseTexture.dispose(),this._framebuffer&&(t.deleteFramebuffer(this._framebuffer),this._framebuffer=null),this._texture&&(t.deleteTexture(this._texture),this._texture=null)}}class Ue{constructor(t){this._renderer=t,this._filterStack=[],this._currentFrame=null,this._renderTargets=[],this._textureFrame=new Yt(0,0,t.getWidth(),t.getHeight()),this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange),this._onContextChange()}resizeTo(t){this._textureFrame.width=t.x,this._textureFrame.height=t.y,this._renderTargets.forEach((e=>e.resizeTo(t)))}getFilterStack(){return this._filterStack}setFilterStack(t){this._filterStack=t}_getOrCreateRenderTarget(t=!1){let e=this._renderTargets.pop();return e||(e=new Ne(this._renderer,this._textureFrame.width,this._textureFrame.height,1)),this._currentFrame&&e.setFrame(this._currentFrame),t&&e.clear(),e}pushFilters(t,e){const i=t.getBounds();this._currentFrame=i;const r=t.getFilterRectangle();r.width>0&&r.height>0&&(this._currentFrame=r);const n=this._getOrCreateRenderTarget();this._renderer.setRenderTarget(n),n.clear(),this._filterStack.push({renderTarget:n,filters:e})}popFilters(){const t=this._filterStack.pop();if(!t)return;const{filters:e,renderTarget:i}=t,r=i,n=this._filterStack[this._filterStack.length-1].renderTarget,o=r.getFrame();o&&this._quad.map(this._textureFrame,o);const s=e[0].getShaderForRenderer(this._renderer),a=this._quad.getVertexBuffer(),l=this._quad.getIndexBuffer(),c=this._renderer.getContext();c.bindBuffer(c.ARRAY_BUFFER,a),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,l);const u=s.getAttributeLocations();return c.vertexAttribPointer(u.a_position,2,c.FLOAT,!1,0,0),c.vertexAttribPointer(u.a_texCoord,2,c.FLOAT,!1,0,32),c.vertexAttribPointer(u.a_color,4,c.FLOAT,!1,0,64),this._renderer.updateTexture(r.getBaseTexture(),!1),1===e.length?(e[0].apply(this._renderer,r,n),this._renderTargets.push(r)):this._applyFilters(e,r,n),e}_applyFilters(t,e,i){let r=e,n=this._getOrCreateRenderTarget(!0);this._renderer.updateTexture(n.getBaseTexture(),!1);const o=t[t.length-1];t.forEach((t=>{if(t===o)t.apply(this._renderer,r,i,!0);else{t.apply(this._renderer,r,n,!0);const e=r;r=n,n=e}})),this._renderTargets.push(r),this._renderTargets.push(n)}_onContextChange(){this._renderTargets.length=0,St(this._renderer)&&(this._quad&&this._quad.dispose(),this._quad=new Le(this._renderer.getContext()))}dispose(){this._renderer.off("context",this._onContextChange),this._quad&&this._quad.dispose(),this._renderTargets.forEach((t=>{t.dispose()}))}}const je=k(P());class He{constructor(t){this._context=t,this._domAvailable="undefined"!=typeof document,this._hookIntoContext(),this._textures={},this._framebuffers={},this._programs={},this._shaders={},this._buffers={},this._boundTexture=null,this._id=0,this._enums={},this._setupStats(),this._createEnumMap(),this._updateMemoryStats=this._updateMemoryStats.bind(this),this._updateMemoryStats()}_createEnumMap(){for(const t in this._context){const e=this._context[t];"number"==typeof e&&(this._enums[e]=t)}}_enumValueToString(t){const e=this._enums[t];return void 0===e?t:e}_setupStats(){this._domAvailable&&(this._stats=new je.default,this._stats.showPanel(3),this._memPanel=this._stats.addPanel(new je.default.Panel("MB [WebGL]","#43ADEB","#282828")),this._texPanel=this._stats.addPanel(new je.default.Panel("Textures","#43ADEB","#282828")),this._bufPanel=this._stats.addPanel(new je.default.Panel("Buffers","#43ADEB","#282828")),this._fboPanel=this._stats.addPanel(new je.default.Panel("FBOs","#43ADEB","#282828")),this._prgPanel=this._stats.addPanel(new je.default.Panel("Programs","#43ADEB","#282828")),this._shdPanel=this._stats.addPanel(new je.default.Panel("Shaders","#43ADEB","#282828")))}_updatePanel(t){if(this._domAvailable){switch(this._stats.begin(),t){case"tex":this._texPanel.update(this.getTexturesCount(),50);break;case"buf":this._bufPanel.update(this.getBuffersCount(),50);break;case"fbo":this._fboPanel.update(this.getFBOCount(),50);break;case"prg":this._prgPanel.update(this.getProgramCount(),50);break;case"shd":this._shdPanel.update(this.getShaderCount(),50)}this._stats.end()}}getTexturesCount(){return Object.keys(this._textures).length}getBuffersCount(){return Object.keys(this._buffers).length}getFBOCount(){return Object.keys(this._framebuffers).length}getProgramCount(){return Object.keys(this._programs).length}getShaderCount(){return Object.keys(this._shaders).length}_updateMemoryStats(){if(!this._domAvailable)return;const t=this._getMemoryUsage()/1e3/1e3;this._memPanel.update(t,400),setTimeout(this._updateMemoryStats,1e3)}_getMemoryUsage(){let t=0;for(const e in this._textures)t+=this._textures[e].memory;for(const e in this._buffers)t+=this._buffers[e].memory;return t}_hookIntoContext(){for(const t in this._context){"function"==typeof this._context[t]?this[t]=function(...e){const i=this._context[t];return this._trackGLCall(i,t,e)}:this._makePropertyWrapper(t)}}_makePropertyWrapper(t){if(-1!==["_context"].indexOf(t))return;const e=this._context;this.__defineGetter__(t,(()=>e[t])),this.__defineSetter__(t,(i=>{e[t]=i}))}_trackGLCall(t,e,i){let r;r=-1!==["texImage2D","bindTexture","createTexture","deleteTexture","createBuffer","bindBuffer","bufferData","deleteBuffer","createFramebuffer","deleteFramebuffer","createProgram","deleteProgram","createShader","deleteShader"].indexOf(e)?this[`_${e}`](i):t.apply(this._context,i);const n=this._context.getError();if(0!==n){let t=i.join(", ");t.length>100&&(t=`${t.substr(0,100)}...`),console.error(new Error(`WebGL Error ${this._enumValueToString(n)} in ${e}(${t})`))}return r}_createProgram(){const t=this._context.createProgram();return t._wmmId=this._id++,this._programs[t._wmmId]=t,this._updatePanel("prg"),t}_deleteProgram([t]){t&&this._programs[t._wmmId]&&(delete this._programs[t._wmmId],this._context.deleteProgram(t),this._updatePanel("prg"))}_createShader([t]){const e=this._context.createShader(t);return e._wmmId=this._id++,this._shaders[e._wmmId]=e,this._updatePanel("shd"),e}_deleteShader([t]){t&&this._shaders[t._wmmId]&&(delete this._shaders[t._wmmId],this._context.deleteShader(t),this._updatePanel("shd"))}_createFramebuffer(){const t=this._context.createFramebuffer();return t._wmmId=this._id++,this._framebuffers[t._wmmId]=t,this._updatePanel("fbo"),t}_deleteFramebuffer([t]){t&&this._framebuffers[t._wmmId]&&(delete this._framebuffers[t._wmmId],this._context.deleteFramebuffer(t),this._updatePanel("fbo"))}_createBuffer(){const t=this._context.createBuffer();return t._wmmId=this._id++,this._buffers[t._wmmId]={buffer:t,memory:0},this._updatePanel("buf"),t}_bindBuffer([t,e]){this._context.bindBuffer(t,e),this._boundBuffer=e._wmmId}_bufferData([t,e,i]){let r;this._context.bufferData(t,e,i),"number"==typeof e?r=e:"byteLength"in e?r=e.byteLength:"length"in e&&(r=e.length),this._buffers[this._boundBuffer].memory=r}_deleteBuffer([t]){t&&this._buffers[t._wmmId]&&(delete this._buffers[t._wmmId],this._context.deleteBuffer(t),this._updatePanel("buf"))}_createTexture(){const t=this._context.createTexture();return t._wmmId=this._id++,this._textures[t._wmmId]={texture:t,memory:0},this._updatePanel("tex"),t}_deleteTexture([t]){t&&this._textures[t._wmmId]&&(delete this._textures[t._wmmId],this._context.deleteTexture(t),this._updatePanel("tex"))}_bindTexture([t,e]){this._context.bindTexture(t,e),this._boundTexture=e._wmmId}_texImage2D(t){let[,,e,i,r,n,,,o]=t;void 0===o&&(o=n),this._context.texImage2D.apply(this._context,t);const s=this._calculateByteCountForTexture(e,i,r,o);this._textures[this._boundTexture].memory=s}_calculateByteCountForTexture(t,e,i,r){if(null!==r){if(!("width"in r))return r.length;e=r.width,i=r.height}let n=1;switch(t){case this._context.ALPHA:n=1;break;case this._context.RGB:n=3;break;case this._context.RGBA:n=4}return e*i*n}}class We{constructor(t){this._renderer=t,this._onContextChange=this._onContextChange.bind(this),this._renderer.on("context",this._onContextChange)}_onContextChange(){}start(){}stop(){this.flush()}flush(){}dispose(){this._renderer.off("context",this._onContextChange),delete this._renderer}}class Ge extends We{constructor(t){super(t),this._vertexBuffer=null,this._indexBuffer=null,this._maxBatchSize=qt,this._vertices=new ArrayBuffer(16e4),this._positions=new Float32Array(this._vertices),this._colors=new Uint32Array(this._vertices),this._indices=new Uint16Array(6*qt);for(let t=0,e=0;t<6*qt;t+=6,e+=4)this._indices[t+0]=e+0,this._indices[t+1]=e+1,this._indices[t+2]=e+2,this._indices[t+3]=e+0,this._indices[t+4]=e+2,this._indices[t+5]=e+3;this._sprites=[],this._currentBatchSize=0,this._onContextChange()}render(t){const e=t.getTexture();if(!e)return;const i=e.getFrame();e.getBaseTexture();this._currentBatchSize>=this._maxBatchSize&&this.flush();const r=e.getUVs();if(!r)return;const n=this._currentBatchSize*Kt;this._addVertexCoordinates(t,n,i),this._addTextureUVs(t,n,r),this._addColors(t,n),this._sprites[this._currentBatchSize]=t,this._currentBatchSize++}_addColors(t,e){const i=this._colors,r=16777215+(255*t.getWorldAlpha()<<24);i[e+4]=i[e+9]=i[e+14]=i[e+19]=r}_addTextureUVs(t,e,i){const r=this._positions,[n,o,s,a]=i;r[e+2]=n.x,r[e+3]=n.y,r[e+7]=o.x,r[e+8]=o.y,r[e+12]=s.x,r[e+13]=s.y,r[e+17]=a.x,r[e+18]=a.y}_addVertexCoordinates(t,e,i){const r=this._positions,n=t.getWorldTransform(),o=t.getAnchor(),s=n.rectangleToCoordinates(i,o);for(let t=0;t<4;t++)r[e+5*t]=s[t].x,r[e+5*t+1]=s[t].y}_onContextChange(){const t=this._renderer.getContext();this._shader=this._renderer.shaders.default,this._vertexBuffer&&(this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer=null),this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this._vertices,t.DYNAMIC_DRAW)}start(){this._vertexBuffer&&this._indexBuffer&&this._shader.setupBuffers(this._vertexBuffer,this._indexBuffer)}flush(){var t;const e=this._renderer,i=e.getContext();if(0===this._currentBatchSize)return;if(this._currentBatchSize>1e3)i.bufferSubData(i.ARRAY_BUFFER,0,this._vertices);else{const t=this._positions.subarray(0,this._currentBatchSize*Kt);i.bufferSubData(i.ARRAY_BUFFER,0,t)}let r=0,n=null,o=null,s=null,a=null,l=!1,c=!1,u=null,h=0;for(let d=0,p=this._currentBatchSize;d<p;d++){if(u=this._sprites[d],o=null==(t=u.getTexture())?void 0:t.getBaseTexture(),a=u.getShader()||this._shader,l=s!==a,c=n!==o,(c||l)&&(n&&this._renderBatch(n,r,h),h=d,r=0,n=o,l)){s=a,e.setShader(s);const t=e.getCurrentRenderTarget().getProjectionMatrix().toArray();s.setUniform("u_projMatrix",t),s.syncUniforms(),i.activeTexture(i.TEXTURE0)}r++}n&&this._renderBatch(n,r,h),this._currentBatchSize=0,this._sprites=[]}_renderBatch(t,e,i){if(0===e)return;const r=this._renderer,n=r.getContext();let o=t.getGLTextureForRenderer(r);o||(o=r.getOrCreateGLTexture(t)),t.isDirty()&&(r.updateTexture(t),t.setDirty(!1)),n.activeTexture(n.TEXTURE0+t.getGLUnit()),n.bindTexture(n.TEXTURE_2D,o);const s=6*e,a=6*i*2;n.drawElements(n.TRIANGLES,s,n.UNSIGNED_SHORT,a)}dispose(){const t=this._renderer.getContext();this._sprites.forEach((t=>{t.dispose()})),this._vertexBuffer&&(t.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(t.deleteBuffer(this._indexBuffer),this._indexBuffer=null),delete this._vertices,delete this._positions,delete this._colors,delete this._indices,super.dispose()}}class Ve extends Pe{constructor(t=800,e=600,i){super(t,e,i),this.type=gt.WEBGL,this.maxTextureDimensions=null,this._type=gt.WEBGL,this._onContextLost=this._onContextLost.bind(this),this._onContextRestored=this._onContextRestored.bind(this),this.setCanvas(this._options.canvas||wt.createCanvas()),this.shaders={default:new he(this,void 0,void 0)},this.renderers={sprite:new Ge(this)}}_onContextLost(t){t.preventDefault(),Mt.warn(this.constructor.name,"WebGL context has been lost - trying to restore.")}_onContextCreationError(t){t.preventDefault(),Mt.warn(this.constructor.name,`Failed to create WebGL context: ${t.statusMessage||"Unknown error"}`)}_onContextRestored(){Mt.warn(this.constructor.name,"WebGL context has been restored. Clearing all textures."),this._createContext(),this._setupContext(),this.emit("context-restored")}_onBeforeContext(){this._filterManager&&this._filterManager.dispose(),this._filterManager=new Ue(this),this._currentObjectRenderer=new We(this)}setShader(t){this._currentShader=t,this._context.useProgram(t.getProgram()),this._setAttributesForShader(t)}setCanvas(t){this._canvas&&this._removeContextEventListeners(),super.setCanvas(t),this._addContextEventListeners()}_addContextEventListeners(){kt(this._canvas)&&(this._canvas.addEventListener("webglcontextlost",this._onContextLost),this._canvas.addEventListener("webglcontextrestored",this._onContextRestored),this._canvas.addEventListener("webglcontextcreationerror",this._onContextCreationError))}_removeContextEventListeners(){kt(this._canvas)&&(this._canvas.removeEventListener("webglcontextlost",this._onContextLost),this._canvas.removeEventListener("webglcontextrestored",this._onContextRestored),this._canvas.removeEventListener("webglcontextcreationerror",this._onContextCreationError))}_setAttributesForShader(t){if(!this._canvas)return;const e=this._context,i=t.getAttributes(),r=t.getAttributeLocations();i.forEach((t=>{const i=r[t];e.enableVertexAttribArray(i)}))}_createContext(){if(!this._canvas)return;let t=wt.glGet(this._canvas);return this._options.debug&&(t=>{if("undefined"!=typeof window){const{WebGLDebugUtils:e}=window;if(e){const i=(t,i)=>{console.error(`gl.${t}(${e.glFunctionArgsToString(t,i)})`)};t=e.makeDebugContext(t,null,i)}}})(t),this._options.debug&&(t=new Me(t),t=new He(t)),this.id=Ve.contextId++,this._context=t,this._maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.emit("context",t),t}_setupContext(){const t=this._context;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this._defaultRenderTarget=new Ne(this,this._width,this._height,this._pixelRatio,!0),this.setRenderTarget(this._defaultRenderTarget),this._getMaxPrecision()}getContext(){return this._context}_getMaxPrecision(){const t=this._context,e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);this._maxFloatPrecision=0!==(null==e?void 0:e.precision)?_t.High:_t.Medium;const i=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_INT);this._maxIntPrecision=0!==(null==i?void 0:i.rangeMax)?_t.High:_t.Low}resizeTo(t,e=!0){super.resizeTo(t,e),this._currentRenderTarget&&this._currentRenderTarget.resizeTo(t),this._context=wt.glResize(this._context,t)}setRenderTarget(t=this._defaultRenderTarget){this._currentRenderTarget=t,this._currentRenderTarget.activate()}setObjectRenderer(t){this._currentObjectRenderer.stop(),this._currentObjectRenderer=t,this._currentObjectRenderer.start()}render(t){this.setRenderTarget(this._defaultRenderTarget),this._defaultRenderTarget.clear(this._clearColor);const e=t.getParent();t.setParent(new Qt),t.updateTransform(),e&&t.setParent(e),this.renderDisplayObject(t,this._defaultRenderTarget)}renderDisplayObject(t,e){this.setRenderTarget(e),this._filterManager.setFilterStack(e.getFilterStack()),t.renderWebGL(this),this._currentObjectRenderer.flush()}clear(){const t=this._context;t.clearColor.apply(t,this._clearColor.toGLColor),t.clear(t.COLOR_BUFFER_BIT)}save(){return{renderTarget:this._currentRenderTarget,objectRenderer:this._currentObjectRenderer,filterStack:this._filterManager.getFilterStack()}}restore(t){this.setRenderTarget(t.renderTarget),this._filterManager.setFilterStack(t.filterStack),this._currentObjectRenderer=t.objectRenderer}getOrCreateGLTexture(t){const e=this._context;let i=t.getGLTextureForRenderer(this);return i||(i=e.createTexture(),t.setGLTextureForRenderer(i,this)),i}updateTexture(t,e=!0){const i=t.getSource(),r=this._context,n=t.getGLUnit(),o=this.getOrCreateGLTexture(t);r.activeTexture(r.TEXTURE0+n),r.bindTexture(r.TEXTURE_2D,o),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e&&i&&wt.glTexImage(r,i),t.isMipMappingEnabled()?r.generateMipmap(r.TEXTURE_2D):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t.getGLRepeat(r,"x")),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t.getGLRepeat(r,"y"))),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,t.getGLFilter(r,"min")),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t.getGLFilter(r,"mag")),r.activeTexture(r.TEXTURE0)}getMaxDimensions(){return this.maxTextureDimensions||(this.maxTextureDimensions=wt.glMaxTexture(this._context)),this.maxTextureDimensions}getCurrentRenderTarget(){return this._currentRenderTarget}getCurrentObjectRenderer(){return this._currentObjectRenderer}getMaxFloatPrecision(){return this._maxFloatPrecision}getMaxIntPrecision(){return this._maxIntPrecision}dispose(){this._filterManager.dispose(),this._currentObjectRenderer.dispose(),this._defaultRenderTarget.dispose();for(const t in this.shaders)this.shaders[t].dispose(),delete this.shaders[t];this._removeContextEventListeners();const t=this._context.getExtension("WEBGL_lose_context");t&&t.loseContext()}}Ve.contextId=0;const $e=()=>[new Zt(0,0),new Zt(1,0),new Zt(1,1),new Zt(0,1)],Ze=(t,e,i)=>{const[r,n,o,s]=t;return r.x=e.x/i.width,r.y=e.y/i.height,n.x=(e.x+e.width)/i.width,n.y=e.y/i.height,o.x=(e.x+e.width)/i.width,o.y=(e.y+e.height)/i.height,s.x=e.x/i.width,s.y=(e.y+e.height)/i.height,t};class Xe extends Ht{constructor(t,e){if(super(),!(t instanceof Ie))throw new Error("`baseTexture` should be an instance of BaseTexture");this._uvs=$e(),this._frame=e?e.clone():new Yt(0,0,1,1),this._frameLocked=Boolean(e),this._onBaseTextureLoaded=this._onBaseTextureLoaded.bind(this),this._onBaseTextureUpdated=this._onBaseTextureUpdated.bind(this),this.setBaseTexture(t)}static fromImage(t){const e=new Ie(t);return new Xe(e)}static fromCanvas(t){const e=new Ie(t);return new Xe(e)}_onBaseTextureLoaded(){if(!this._frameLocked){const t=this._baseTexture.getFrame().clone();this.setFrame(t)}this._baseTexture.on("update",this._onBaseTextureUpdated)}_onBaseTextureUpdated(){const{width:t,height:e}=this._baseTexture.getFrame();this._frame.width=t,this._frame.height=e,this.emit("update")}_updateUVs(){this._uvs=Ze(this._uvs,this._frame,this._baseTexture.getFrame())}getBaseTexture(){return this._baseTexture}setBaseTexture(t){if(this._baseTexture=t,this._baseTexture.isLoaded()){const{width:e,height:i}=t.getFrame();this._frameLocked||(this._frame=new Yt(0,0,e,i)),this._onBaseTextureLoaded()}else this._baseTexture.once("loaded",this._onBaseTextureLoaded)}getFrame(){return this._frame}setFrame(t){this._frame=t,this._updateUVs()}getWidth(){return this._frame.width}getHeight(){return this._frame.height}getUVs(){return this._uvs}getDimensions(){return new Zt(this._frame.width,this._frame.height)}dispose(t=!0){t&&this._baseTexture.dispose()}}const Ye=t=>t._type===gt.WEBGL;class qe extends Xe{constructor(t,e=100,i=100,r=1){super(new Ie,new Yt(0,0,e,i)),this._loaded=!0,this._width=e,this._height=i,this._pixelRatio=r,this._renderer=t,this._setupFilterManager(),this._setupBuffer(),this.setBaseTexture(this._renderTarget.getBaseTexture()),this._updateUVs()}_setupFilterManager(){this._filterManager&&this._filterManager.dispose(),Ye(this._renderer)?this._filterManager=new Ue(this._renderer):this._filterManager=new Ae(this._renderer),this._filterManager.resizeTo(new Zt(this._width,this._height))}_setupBuffer(){this._renderTarget&&this._renderTarget.dispose(),Ye(this._renderer)?this._renderTarget=new Ne(this._renderer,this._width,this._height,this._pixelRatio):this._renderTarget=new Oe(this._width,this._height,this._pixelRatio)}clear(t){this._renderTarget.clear(t)}resizeTo(t){this._width===t.x&&this._height===t.y||(this._width=t.x,this._height=t.y,this._frame.width=t.x,this._frame.height=t.y,this._renderTarget.resizeTo(t),this._filterManager.resizeTo(t))}render(t){Ye(this._renderer)?this._renderWebGL(t):this._renderCanvas(t)}_renderWebGL(t){if(!Ye(this._renderer))return;this._renderTarget.activate(),t.getWorldTransform().reset(),t.getChildren().forEach((t=>{t.updateTransform()}));const e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)}_renderCanvas(t){if(Ye(this._renderer))return;t.getWorldTransform().reset(),t.getChildren().forEach((t=>{t.updateTransform()}));const e=this._renderer.getFilterManager();this._renderer.setFilterManager(this._filterManager),this._renderer.renderDisplayObject(t,this._renderTarget),this._renderer.setFilterManager(e)}getRenderTarget(){return this._renderTarget}dispose(){this._renderTarget.dispose(),this._filterManager.dispose(),super.dispose()}}const Ke={};S(Ke,{Base64:()=>Rt,Color:()=>jt,ColorMatrix:()=>oe,Configurable:()=>ae,Constants:()=>ht,CubicBezierCurve:()=>ji,Engine:()=>Zi,EventEmitter:()=>Ht,Events:()=>Qe,FreeLicenseChecker:()=>Fi,GLUtils:()=>Wt,LicenseChecker:()=>Mi,Log:()=>Mt,Matrix:()=>Xt,Range:()=>Hi,Rectangle:()=>Yt,Utils:()=>It,Vector2:()=>Zt,Vector3:()=>Gi,cancelAnimationFrame:()=>zi,requestAnimationFrame:()=>Bi});const Qe={EXPORT:"export",CLOSE:"close",OPERATION_CREATED:"operation:created",OPERATION_UPDATED:"operation:updated",OPERATION_REMOVED:"operation:removed",EDITOR_READY:"editor:ready",WINDOW_RESIZE:"window:resize",ZOOM_DONE:"editor:zoom_done",HISTORY_UNDO:"history:undo",HISTORY_UPDATED:"history:update",FEATURES_DISABLED:"editor:features:disabled",FEATURES_ENABLED:"editor:features:enabled",FEATURES_UPDATED:"editor:features:updated",TRANSFORM_REAPPLY_RATIO:"transform:reapply_ratio"};var Je={DEFAULTS:{FILTERS:[{identifier:"imgly_filters_duotone",defaultName:"DuoTone",assetFileName:"duotone",filters:[{identifier:"imgly_duotone_desert",defaultName:"Desert",lightColor:"#e1de9a",darkColor:"#cb2129"},{identifier:"imgly_duotone_peach",defaultName:"Peach",lightColor:"#e9abb8",darkColor:"#0040ff"},{identifier:"imgly_duotone_clash",defaultName:"Clash",lightColor:"#f41a0f",darkColor:"#23007c"},{identifier:"imgly_duotone_plum",defaultName:"Plum",lightColor:"#74d7ff",darkColor:"#23007c"},{identifier:"imgly_duotone_breezy",defaultName:"Breezy",lightColor:"#68fdff",darkColor:"#c20000"},{identifier:"imgly_duotone_deepblue",defaultName:"Deep Blue",lightColor:"#2de9eb",darkColor:"#58007c"},{identifier:"imgly_duotone_frog",defaultName:"Frog",lightColor:"#5bff60",darkColor:"#7f23a9"},{identifier:"imgly_duotone_sunset",defaultName:"Sunset",lightColor:"#f8ea46",darkColor:"#c400be"}]},{identifier:"imgly_filters_bw",assetFileName:"b&w",defaultName:"Black & White",filters:[{identifier:"imgly_lut_ad1920",defaultName:"1920 A.D.",lutImage:"filters/imgly_lut_ad1920_5_5_128.png"},{identifier:"imgly_lut_bw",defaultName:"Greyed",lutImage:"filters/imgly_lut_bw_5_5_128.png"},{identifier:"imgly_lut_x400",defaultName:"Dusty",lutImage:"filters/imgly_lut_dusty_5_5_128.png"},{identifier:"imgly_lut_litho",defaultName:"Litho",lutImage:"filters/imgly_lut_litho_5_5_128.png"},{identifier:"imgly_lut_sepiahigh",defaultName:"Sepia",lutImage:"filters/imgly_lut_sepia_5_5_128.png"},{identifier:"imgly_lut_plate",defaultName:"Weathered",lutImage:"filters/imgly_lut_weathered_5_5_128.png"},{identifier:"imgly_lut_sin",defaultName:"Hard Stuff",lutImage:"filters/imgly_lut_hard_stuff_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8}]},{identifier:"imgly_filters_retro",assetFileName:"vintage",defaultName:"Vintage",filters:[{identifier:"imgly_lut_blues",defaultName:"Polaroid",lutImage:"filters/imgly_lut_polaroid_5_5_128.png"},{identifier:"imgly_lut_front",defaultName:"Sunny 70s",lutImage:"filters/imgly_lut_sunny_70s_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_texas",defaultName:"Oldtimer",lutImage:"filters/imgly_lut_oldtimer_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_celsius",defaultName:"Inferno",lutImage:"filters/imgly_lut_inferno_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_cool",defaultName:"Snappy",lutImage:"filters/imgly_lut_snappy_5_5_128.png"}]},{identifier:"imgly_filters_analog",assetFileName:"smooth",defaultName:"Smooth",filters:[{identifier:"imgly_lut_chest",defaultName:"Chestnut",lutImage:"filters/imgly_lut_chestnut_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_winter",defaultName:"Softly",lutImage:"filters/imgly_lut_softly_5_5_128.png"},{identifier:"imgly_lut_kdynamic",defaultName:"Pebble",lutImage:"filters/imgly_lut_pebble_5_5_128.png"},{identifier:"imgly_lut_fall",defaultName:"Moss",lutImage:"filters/imgly_lut_moss_5_5_128.png"},{identifier:"imgly_lut_lenin",defaultName:"Lemon",lutImage:"filters/imgly_lut_lemon_5_5_128.png"},{identifier:"imgly_lut_pola669",defaultName:"Green Gap",lutImage:"filters/imgly_lut_green_gap_5_5_128.png"}]},{identifier:"imgly_filters_winter",assetFileName:"cold",defaultName:"Cold",filters:[{identifier:"imgly_lut_elder",defaultName:"Colla",lutImage:"filters/imgly_lut_colla_5_5_128.png"},{identifier:"imgly_lut_orchid",defaultName:"Solanus",lutImage:"filters/imgly_lut_solanus_5_5_128.png"},{identifier:"imgly_lut_bleached",defaultName:"Kalmen",lutImage:"filters/imgly_lut_kalmen_5_5_128.png"},{identifier:"imgly_lut_bleachedblue",defaultName:"Joran",lutImage:"filters/imgly_lut_joran_5_5_128.png"},{identifier:"imgly_lut_breeze",defaultName:"Levante",lutImage:"filters/imgly_lut_levante_5_5_128.png"},{identifier:"imgly_lut_blueshadows",defaultName:"Zephyr",lutImage:"filters/imgly_lut_zephyr_5_5_128.png"}]},{identifier:"imgly_filters_summer",assetFileName:"warm",defaultName:"Warm",filters:[{identifier:"imgly_lut_sunset",defaultName:"Golden",lutImage:"filters/imgly_lut_golden_5_5_128.png"},{identifier:"imgly_lut_eighties",defaultName:"Low Fire",lutImage:"filters/imgly_lut_low_fire_5_5_128.png"},{identifier:"imgly_lut_evening",defaultName:"Sunrise",lutImage:"filters/imgly_lut_sunrise_5_5_128.png"},{identifier:"imgly_lut_k2",defaultName:"Flat Black",lutImage:"filters/imgly_lut_flat_black_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_nogreen",defaultName:"Pumpkin",lutImage:"filters/imgly_lut_pumpkin_5_5_128.png"}]},{identifier:"imgly_filters_legacy",defaultName:"Legacy",assetFileName:"legacy",filters:[{identifier:"imgly_lut_ancient",defaultName:"Ancient",lutImage:"filters/imgly_lut_ancient_5_5_128.png"},{identifier:"imgly_lut_cottoncandy",defaultName:"Candy",lutImage:"filters/imgly_lut_cottoncandy_5_5_128.png"},{identifier:"imgly_lut_classic",defaultName:"Classic",lutImage:"filters/imgly_lut_classic_5_5_128.png"},{identifier:"imgly_lut_colorful",defaultName:"Colorful",lutImage:"filters/imgly_lut_colorful_5_5_128.png"},{identifier:"imgly_lut_creamy",defaultName:"Creamy",lutImage:"filters/imgly_lut_creamy_5_5_128.png"},{identifier:"imgly_lut_fixie",defaultName:"Fixie",lutImage:"filters/imgly_lut_fixie_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_food",defaultName:"Food",lutImage:"filters/imgly_lut_food_5_5_128.png"},{identifier:"imgly_lut_fridge",defaultName:"Fridge",lutImage:"filters/imgly_lut_fridge_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_glam",defaultName:"Glam",lutImage:"filters/imgly_lut_glam_5_5_128.png"},{identifier:"imgly_lut_gobblin",defaultName:"Gobblin",lutImage:"filters/imgly_lut_gobblin_5_5_128.png"},{identifier:"imgly_lut_highcontrast",defaultName:"Hicon",lutImage:"filters/imgly_lut_highcontrast_5_5_128.png"},{identifier:"imgly_lut_highcarb",defaultName:"High Carb",lutImage:"filters/imgly_lut_highcarb_5_5_128.png"},{identifier:"imgly_lut_k1",defaultName:"K1",lutImage:"filters/imgly_lut_k1_5_5_128.png"},{identifier:"imgly_lut_k6",defaultName:"K6",lutImage:"filters/imgly_lut_k6_5_5_128.png"},{identifier:"imgly_lut_keen",defaultName:"Keen",lutImage:"filters/imgly_lut_keen_5_5_128.png"},{identifier:"imgly_lut_lomo",defaultName:"Lomo",lutImage:"filters/imgly_lut_lomo_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_lomo100",defaultName:"Lomo 100",lutImage:"filters/imgly_lut_lomo100_5_5_128.png"},{identifier:"imgly_lut_lucid",defaultName:"Lucid",lutImage:"filters/imgly_lut_lucid_5_5_128.png"},{identifier:"imgly_lut_mellow",defaultName:"Mellow",lutImage:"filters/imgly_lut_mellow_8_8_512.png",resolution:512,horizontalTileCount:8,verticalTileCount:8},{identifier:"imgly_lut_neat",defaultName:"Neat",lutImage:"filters/imgly_lut_neat_5_5_128.png"},{identifier:"imgly_lut_pale",defaultName:"Pale",lutImage:"filters/imgly_lut_pale_5_5_128.png"},{identifier:"imgly_lut_pitched",defaultName:"Pitched",lutImage:"filters/imgly_lut_pitched_5_5_128.png"},{identifier:"imgly_lut_polasx",defaultName:"Pola SX",lutImage:"filters/imgly_lut_polasx_5_5_128.png"},{identifier:"imgly_lut_pro400",defaultName:"Pro 400",lutImage:"filters/imgly_lut_pro400_5_5_128.png"},{identifier:"imgly_lut_quozi",defaultName:"Quozi",lutImage:"filters/imgly_lut_quozi_5_5_128.png"},{identifier:"imgly_lut_settled",defaultName:"Settled",lutImage:"filters/imgly_lut_settled_5_5_128.png"},{identifier:"imgly_lut_seventies",defaultName:"Seventies",lutImage:"filters/imgly_lut_seventies_5_5_128.png"},{identifier:"imgly_lut_soft",defaultName:"Soft",lutImage:"filters/imgly_lut_soft_5_5_128.png"},{identifier:"imgly_lut_steel",defaultName:"Steel",lutImage:"filters/imgly_lut_steel_5_5_128.png"},{identifier:"imgly_lut_summer",defaultName:"Summer",lutImage:"filters/imgly_lut_summer_5_5_128.png"},{identifier:"imgly_lut_tender",defaultName:"Tender",lutImage:"filters/imgly_lut_tender_5_5_128.png"},{identifier:"imgly_lut_twilight",defaultName:"Twilight",lutImage:"filters/imgly_lut_twilight_5_5_128.png"}]}],OVERLAYS:[{identifier:"imgly_overlay_golden",defaultName:"Golden",image:"overlays/imgly_overlay_golden.jpg",thumbnail:"overlays/imgly_overlay_golden_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_bokeh",defaultName:"Bokeh",image:"overlays/imgly_overlay_bokeh.jpg",thumbnail:"overlays/imgly_overlay_bokeh_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_hearts",defaultName:"Hearts",image:"overlays/imgly_overlay_hearts.jpg",thumbnail:"overlays/imgly_overlay_hearts_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak1",defaultName:"Light Leak",image:"overlays/imgly_overlay_lightleak1.jpg",thumbnail:"overlays/imgly_overlay_lightleak1_thumb.jpg",blendMode:"screen"},{identifier:"imgly_overlay_lightleak2",defaultName:"Light Leak 2",image:"overlays/imgly_overlay_lightleak2.jpg",thumbnail:"overlays/imgly_overlay_lightleak2_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_rain",defaultName:"Rain",image:"overlays/imgly_overlay_rain.jpg",thumbnail:"overlays/imgly_overlay_rain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_wood",defaultName:"Wood",image:"overlays/imgly_overlay_wood.jpg",thumbnail:"overlays/imgly_overlay_wood_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_mosaic",defaultName:"Mosaic",image:"overlays/imgly_overlay_mosaic.jpg",thumbnail:"overlays/imgly_overlay_mosaic_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_chop",defaultName:"Chop",image:"overlays/imgly_overlay_chop.jpg",thumbnail:"overlays/imgly_overlay_chop_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_vintage",defaultName:"Vintage",image:"overlays/imgly_overlay_vintage.jpg",thumbnail:"overlays/imgly_overlay_vintage_thumb.jpg",blendMode:"darken"},{identifier:"imgly_overlay_metal",defaultName:"Metal",image:"overlays/imgly_overlay_metal.jpg",thumbnail:"overlays/imgly_overlay_metal_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_paper",defaultName:"Paper",image:"overlays/imgly_overlay_paper.jpg",thumbnail:"overlays/imgly_overlay_paper_thumb.jpg",blendMode:"multiply"},{identifier:"imgly_overlay_painting",defaultName:"Painting",image:"overlays/imgly_overlay_painting.jpg",thumbnail:"overlays/imgly_overlay_painting_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_grain",defaultName:"Grain",image:"overlays/imgly_overlay_grain.jpg",thumbnail:"overlays/imgly_overlay_grain_thumb.jpg",blendMode:"overlay"},{identifier:"imgly_overlay_clouds",defaultName:"Clouds",image:"overlays/imgly_overlay_clouds.jpg",thumbnail:"overlays/imgly_overlay_clouds_thumb.jpg",blendMode:"softLight"},{identifier:"imgly_overlay_wall1",defaultName:"Wall",image:"overlays/imgly_overlay_wall1.jpg",thumbnail:"overlays/imgly_overlay_wall1_thumb.jpg",blendMode:"lighten"},{identifier:"imgly_overlay_wall2",defaultName:"Wall 2",image:"overlays/imgly_overlay_wall2.jpg",thumbnail:"overlays/imgly_overlay_wall2_thumb.jpg",blendMode:"overlay"}],FRAME_CATEGORIES:[{identifier:"imgly_frame_generic",defaultName:"Generic",metaData:{backgroundImage:"frames/generic.png"},frames:[{identifier:"imgly_frame_dia",defaultName:"Dia",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_left.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"frames/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"frames/imgly_frame_dia/imgly_frame_dia_right.png",end:"frames/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"frames/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",defaultName:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"frames/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",defaultName:"Black Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",defaultName:"Low Poly",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"frames/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",defaultName:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnail:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"frames/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}}]}],STICKER_CATEGORIES:[{identifier:"imgly_sticker_emoticons",defaultName:"Emoticons",metaData:{backgroundImage:"stickers/emoticons/background.png"},stickers:[{identifier:"imgly_sticker_emoticons_alien",defaultName:"Alien",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_alien.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_alien.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_alien.png"],width:1e3,height:935}}},{identifier:"imgly_sticker_emoticons_angel",defaultName:"Angel",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angel.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angel.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angel.png"]}}},{identifier:"imgly_sticker_emoticons_angry",defaultName:"Angry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_angry.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_angry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_angry.png"]}}},{identifier:"imgly_sticker_emoticons_anxious",defaultName:"Anxious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_anxious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_anxious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_anxious.png"]}}},{identifier:"imgly_sticker_emoticons_asleep",defaultName:"Asleep",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_asleep.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_asleep.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_asleep.png"]}}},{identifier:"imgly_sticker_emoticons_attention",defaultName:"Attention",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_attention.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_attention.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_attention.png"]}}},{identifier:"imgly_sticker_emoticons_baby_chicken",defaultName:"Baby Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_baby_chicken.png"],width:61,height:42},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_baby_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_baby_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_batman",defaultName:"Batman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_batman.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_batman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_batman.png"]}}},{identifier:"imgly_sticker_emoticons_beer",defaultName:"Beer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_beer.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_beer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_beer.png"]}}},{identifier:"imgly_sticker_emoticons_blush",defaultName:"Blush",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_blush.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_blush.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_blush.png"]}}},{identifier:"imgly_sticker_emoticons_boxer",defaultName:"Boxer",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_boxer.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_boxer.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_boxer.png"]}}},{identifier:"imgly_sticker_emoticons_business",defaultName:"Business",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_business.png"],width:60,height:63},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_business.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_business.png"]}}},{identifier:"imgly_sticker_emoticons_chicken",defaultName:"Chicken",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_chicken.png"],width:63,height:55},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_chicken.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_chicken.png"]}}},{identifier:"imgly_sticker_emoticons_cool",defaultName:"Cool",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cool.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cool.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cool.png"]}}},{identifier:"imgly_sticker_emoticons_cry",defaultName:"Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_cry.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_cry.png"]}}},{identifier:"imgly_sticker_emoticons_deceased",defaultName:"Deceased",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_deceased.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_deceased.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_deceased.png"]}}},{identifier:"imgly_sticker_emoticons_devil",defaultName:"Devil",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_devil.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_devil.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_devil.png"]}}},{identifier:"imgly_sticker_emoticons_duckface",defaultName:"Duckface",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_duckface.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_duckface.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_duckface.png"]}}},{identifier:"imgly_sticker_emoticons_furious",defaultName:"Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_furious.png"],width:62,height:61},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_furious.png"]}}},{identifier:"imgly_sticker_emoticons_grin",defaultName:"Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_grin.png"]}}},{identifier:"imgly_sticker_emoticons_guitar",defaultName:"Guitar",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_guitar.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_guitar.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_guitar.png"]}}},{identifier:"imgly_sticker_emoticons_harry_potter",defaultName:"Harry Potter",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_harry_potter.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_harry_potter.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_harry_potter.png"]}}},{identifier:"imgly_sticker_emoticons_hippie",defaultName:"Hippie",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hippie.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hippie.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hippie.png"]}}},{identifier:"imgly_sticker_emoticons_hitman",defaultName:"Hitman",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_hitman.png"],width:64,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_hitman.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_hitman.png"]}}},{identifier:"imgly_sticker_emoticons_humourous",defaultName:"Humourous",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_humourous.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_humourous.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_humourous.png"]}}},{identifier:"imgly_sticker_emoticons_idea",defaultName:"Idea",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_idea.png"],width:64,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_idea.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_idea.png"]}}},{identifier:"imgly_sticker_emoticons_impatient",defaultName:"Impatient",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_impatient.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_impatient.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_impatient.png"]}}},{identifier:"imgly_sticker_emoticons_kiss",defaultName:"Kiss",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kiss.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kiss.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kiss.png"]}}},{identifier:"imgly_sticker_emoticons_kisses",defaultName:"Kisses",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_kisses.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_kisses.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_kisses.png"]}}},{identifier:"imgly_sticker_emoticons_laugh",defaultName:"Laugh",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_laugh.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_laugh.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_laugh.png"]}}},{identifier:"imgly_sticker_emoticons_loud_cry",defaultName:"Loud Cry",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loud_cry.png"],width:64,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loud_cry.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loud_cry.png"]}}},{identifier:"imgly_sticker_emoticons_loving",defaultName:"Loving",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_loving.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_loving.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_loving.png"]}}},{identifier:"imgly_sticker_emoticons_masked",defaultName:"Masked",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_masked.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_masked.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_masked.png"]}}},{identifier:"imgly_sticker_emoticons_music",defaultName:"Music",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_music.png"],width:62,height:54},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_music.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_music.png"]}}},{identifier:"imgly_sticker_emoticons_nerd",defaultName:"Nerd",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_nerd.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_nerd.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_nerd.png"]}}},{identifier:"imgly_sticker_emoticons_ninja",defaultName:"Ninja",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_ninja.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_ninja.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_ninja.png"]}}},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",defaultName:"Not Speaking To You",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_not_speaking_to_you.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_not_speaking_to_you.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_not_speaking_to_you.png"]}}},{identifier:"imgly_sticker_emoticons_pig",defaultName:"Pig",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pig.png"],width:63,height:41},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pig.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pig.png"]}}},{identifier:"imgly_sticker_emoticons_pumpkin",defaultName:"Pumpkin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_pumpkin.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_pumpkin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_pumpkin.png"]}}},{identifier:"imgly_sticker_emoticons_question",defaultName:"Question",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_question.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_question.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_question.png"]}}},{identifier:"imgly_sticker_emoticons_rabbit",defaultName:"Rabbit",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_rabbit.png"],width:65,height:47},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_rabbit.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_rabbit.png"]}}},{identifier:"imgly_sticker_emoticons_sad",defaultName:"Sad",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sad.png"]},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sad.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sad.png"]}}},{identifier:"imgly_sticker_emoticons_sick",defaultName:"Sick",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sick.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sick.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sick.png"]}}},{identifier:"imgly_sticker_emoticons_skateboard",defaultName:"Skateboard",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skateboard.png"],width:62,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skateboard.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skateboard.png"]}}},{identifier:"imgly_sticker_emoticons_skull",defaultName:"Skull",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_skull.png"],width:62,height:62},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_skull.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_skull.png"]}}},{identifier:"imgly_sticker_emoticons_sleepy",defaultName:"Sleepy",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sleepy.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sleepy.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sleepy.png"]}}},{identifier:"imgly_sticker_emoticons_smile",defaultName:"Smile",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smile.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smile.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smile.png"]}}},{identifier:"imgly_sticker_emoticons_smoking",defaultName:"Smoking",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_smoking.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_smoking.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_smoking.png"]}}},{identifier:"imgly_sticker_emoticons_sobbing",defaultName:"Sobbing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sobbing.png"],width:62,height:59},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sobbing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sobbing.png"]}}},{identifier:"imgly_sticker_emoticons_star",defaultName:"Star",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_star.png"],width:64,height:64},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_star.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_star.png"]}}},{identifier:"imgly_sticker_emoticons_steaming_furious",defaultName:"Steaming Furious",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_steaming_furious.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_steaming_furious.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_steaming_furious.png"]}}},{identifier:"imgly_sticker_emoticons_sunbathing",defaultName:"Sunbathing",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_sunbathing.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_sunbathing.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_sunbathing.png"]}}},{identifier:"imgly_sticker_emoticons_tired",defaultName:"Tired",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tired.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tired.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tired.png"]}}},{identifier:"imgly_sticker_emoticons_tongue_out_wink",defaultName:"Tongue Out Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_tongue_out_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_tongue_out_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_tongue_out_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wave",defaultName:"Wave",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wave.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wave.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wave.png"]}}},{identifier:"imgly_sticker_emoticons_wide_grin",defaultName:"Wide Grin",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wide_grin.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wide_grin.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wide_grin.png"]}}},{identifier:"imgly_sticker_emoticons_wink",defaultName:"Wink",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wink.png"],width:62,height:58},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wink.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wink.png"]}}},{identifier:"imgly_sticker_emoticons_wrestler",defaultName:"Wrestler",images:{mediaThumb:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/thumbs/imgly_sticker_emoticons_wrestler.png"],width:62,height:60},mediaBase:{uris:["stickers/emoticons/stickers/imgly_sticker_emoticons_wrestler.svg","stickers/emoticons/stickers/base/imgly_sticker_emoticons_wrestler.png"]}}}]},{identifier:"imgly_sticker_shapes",defaultName:"Shapes",metaData:{backgroundImage:"stickers/shapes/background.png"},stickers:[{identifier:"imgly_sticker_shapes_arrow_02",defaultName:"Arrow 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_02.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_02.png"],width:2e3,height:1236}}},{identifier:"imgly_sticker_shapes_arrow_03",defaultName:"Arrow 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_arrow_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_arrow_03.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_01",defaultName:"Badge 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_01.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_04",defaultName:"Badge 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_04.png"],width:2e3,height:1589}}},{identifier:"imgly_sticker_shapes_badge_06",defaultName:"Badge 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_06.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_06.png"],width:2e3,height:1733}}},{identifier:"imgly_sticker_shapes_badge_08",defaultName:"Badge 4",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_08.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_08.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_11",defaultName:"Badge 5",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_11.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_11.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_12",defaultName:"Badge 6",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_12.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_12.png"],width:2001,height:1903}}},{identifier:"imgly_sticker_shapes_badge_13",defaultName:"Badge 7",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_13.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_13.png"],width:2e3,height:1718}}},{identifier:"imgly_sticker_shapes_badge_15",defaultName:"Badge 8",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_15.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_15.png"],width:1618,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_18",defaultName:"Badge 9",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_18.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_18.png"],width:1198,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_19",defaultName:"Badge 10",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_19.png"],width:2127,height:481},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_19.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_19.png"],width:2127,height:481}}},{identifier:"imgly_sticker_shapes_badge_20",defaultName:"Badge 11",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_20.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_20.png"],width:2e3,height:1404}}},{identifier:"imgly_sticker_shapes_badge_28",defaultName:"Badge 12",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_28.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_28.png"],width:2e3,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_32",defaultName:"Badge 13",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_32.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_32.png"],width:1960,height:2e3}}},{identifier:"imgly_sticker_shapes_badge_35",defaultName:"Badge 14",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_35.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_35.png"],width:2e3,height:2002}}},{identifier:"imgly_sticker_shapes_badge_36",defaultName:"Badge 15",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_badge_36.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_badge_36.png"],width:2e3,height:1668}}},{identifier:"imgly_sticker_shapes_spray_01",defaultName:"Spray 1",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_01.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_01.png"],width:1912,height:2039}}},{identifier:"imgly_sticker_shapes_spray_03",defaultName:"Spray 2",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_03.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_03.png"],width:1681,height:1779}}},{identifier:"imgly_sticker_shapes_spray_04",defaultName:"Spray 3",tintMode:"solid",images:{mediaThumb:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/thumbs/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248},mediaBase:{uris:["stickers/shapes/stickers/imgly_sticker_shapes_spray_04.svg","stickers/shapes/stickers/base/imgly_sticker_shapes_spray_04.png"],width:1407,height:2248}}}]}]}};let ti={};ti=window.navigator;var ei;function ii(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function ri(){return new ii(null)}"Microsoft Internet Explorer"==ti.appName?(ii.prototype.am=function(t,e,i,r,n,o){for(var s=32767&e,a=e>>15;--o>=0;){var l=32767&this[t],c=this[t++]>>15,u=a*l+c*s;n=((l=s*l+((32767&u)<<15)+i[r]+(1073741823&n))>>>30)+(u>>>15)+a*c+(n>>>30),i[r++]=1073741823&l}return n},ei=30):"Netscape"!=ti.appName?(ii.prototype.am=function(t,e,i,r,n,o){for(;--o>=0;){var s=e*this[t++]+i[r]+n;n=Math.floor(s/67108864),i[r++]=67108863&s}return n},ei=26):(ii.prototype.am=function(t,e,i,r,n,o){for(var s=16383&e,a=e>>14;--o>=0;){var l=16383&this[t],c=this[t++]>>14,u=a*l+c*s;n=((l=s*l+((16383&u)<<14)+i[r]+n)>>28)+(u>>14)+a*c,i[r++]=268435455&l}return n},ei=28),ii.prototype.DB=ei,ii.prototype.DM=(1<<ei)-1,ii.prototype.DV=1<<ei;ii.prototype.FV=Math.pow(2,52),ii.prototype.F1=52-ei,ii.prototype.F2=2*ei-52;var ni,oi,si=new Array;for(ni="0".charCodeAt(0),oi=0;oi<=9;++oi)si[ni++]=oi;for(ni="a".charCodeAt(0),oi=10;oi<36;++oi)si[ni++]=oi;for(ni="A".charCodeAt(0),oi=10;oi<36;++oi)si[ni++]=oi;function ai(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function li(t,e){var i=si[t.charCodeAt(e)];return null==i?-1:i}function ci(t){var e=ri();return e.fromInt(t),e}function ui(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function hi(t){this.m=t}function di(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function pi(t,e){return t&e}function fi(t,e){return t|e}function mi(t,e){return t^e}function gi(t,e){return t&~e}function _i(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function yi(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function vi(){}function bi(t){return t}function xi(t){this.r2=ri(),this.q3=ri(),ii.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}hi.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},hi.prototype.revert=function(t){return t},hi.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},hi.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},hi.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},di.prototype.convert=function(t){var e=ri();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(ii.ZERO)>0&&this.m.subTo(e,e),e},di.prototype.revert=function(t){var e=ri();return t.copyTo(e),this.reduce(e),e},di.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],r=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[i=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},di.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},di.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},ii.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},ii.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},ii.prototype.fromString=function(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void this.fromRadix(t,e);i=2}this.t=0,this.s=0;for(var r=t.length,n=!1,o=0;--r>=0;){var s=8==i?255&t[r]:li(t,r);s<0?"-"==t.charAt(r)&&(n=!0):(n=!1,0==o?this[this.t++]=s:o+i>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=i)>=this.DB&&(o-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),n&&ii.ZERO.subTo(this,this)},ii.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},ii.prototype.dlShiftTo=function(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s},ii.prototype.drShiftTo=function(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s},ii.prototype.lShiftTo=function(t,e){var i,r=t%this.DB,n=this.DB-r,o=(1<<n)-1,s=Math.floor(t/this.DB),a=this.s<<r&this.DM;for(i=this.t-1;i>=0;--i)e[i+s+1]=this[i]>>n|a,a=(this[i]&o)<<r;for(i=s-1;i>=0;--i)e[i]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()},ii.prototype.rShiftTo=function(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)e.t=0;else{var r=t%this.DB,n=this.DB-r,o=(1<<r)-1;e[0]=this[i]>>r;for(var s=i+1;s<this.t;++s)e[s-i-1]|=(this[s]&o)<<n,e[s-i]=this[s]>>r;r>0&&(e[this.t-i-1]|=(this.s&o)<<n),e.t=this.t-i,e.clamp()}},ii.prototype.subTo=function(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this[i]-t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r-=t[i],e[i++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[i++]=this.DV+r:r>0&&(e[i++]=r),e.t=i,e.clamp()},ii.prototype.multiplyTo=function(t,e){var i=this.abs(),r=t.abs(),n=i.t;for(e.t=n+r.t;--n>=0;)e[n]=0;for(n=0;n<r.t;++n)e[n+i.t]=i.am(0,r[n],e,n,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&ii.ZERO.subTo(e,e)},ii.prototype.squareTo=function(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var r=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,r,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()},ii.prototype.divRemTo=function(t,e,i){var r=t.abs();if(!(r.t<=0)){var n=this.abs();if(n.t<r.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=ri());var o=ri(),s=this.s,a=t.s,l=this.DB-ui(r[r.t-1]);l>0?(r.lShiftTo(l,o),n.lShiftTo(l,i)):(r.copyTo(o),n.copyTo(i));var c=o.t,u=o[c-1];if(0!=u){var h=u*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),d=this.FV/h,p=(1<<this.F1)/h,f=1<<this.F2,m=i.t,g=m-c,_=null==e?ri():e;for(o.dlShiftTo(g,_),i.compareTo(_)>=0&&(i[i.t++]=1,i.subTo(_,i)),ii.ONE.dlShiftTo(c,_),_.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--g>=0;){var y=i[--m]==u?this.DM:Math.floor(i[m]*d+(i[m-1]+f)*p);if((i[m]+=o.am(0,y,i,g,0,c))<y)for(o.dlShiftTo(g,_),i.subTo(_,i);i[m]<--y;)i.subTo(_,i)}null!=e&&(i.drShiftTo(c,e),s!=a&&ii.ZERO.subTo(e,e)),i.t=c,i.clamp(),l>0&&i.rShiftTo(l,i),s<0&&ii.ZERO.subTo(i,i)}}},ii.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},ii.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},ii.prototype.exp=function(t,e){if(t>4294967295||t<1)return ii.ONE;var i=ri(),r=ri(),n=e.convert(this),o=ui(t)-1;for(n.copyTo(i);--o>=0;)if(e.sqrTo(i,r),(t&1<<o)>0)e.mulTo(r,n,i);else{var s=i;i=r,r=s}return e.revert(i)},ii.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,r=(1<<e)-1,n=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(i=this[s]>>a)>0&&(n=!0,o=ai(i));s>=0;)a<e?(i=(this[s]&(1<<a)-1)<<e-a,i|=this[--s]>>(a+=this.DB-e)):(i=this[s]>>(a-=e)&r,a<=0&&(a+=this.DB,--s)),i>0&&(n=!0),n&&(o+=ai(i));return n?o:"0"},ii.prototype.negate=function(){var t=ri();return ii.ZERO.subTo(this,t),t},ii.prototype.abs=function(){return this.s<0?this.negate():this},ii.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0},ii.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+ui(this[this.t-1]^this.s&this.DM)},ii.prototype.mod=function(t){var e=ri();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(ii.ZERO)>0&&t.subTo(e,e),e},ii.prototype.modPowInt=function(t,e){var i;return i=t<256||e.isEven()?new hi(e):new di(e),this.exp(t,i)},ii.ZERO=ci(0),ii.ONE=ci(1),vi.prototype.convert=bi,vi.prototype.revert=bi,vi.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i)},vi.prototype.sqrTo=function(t,e){t.squareTo(e)},xi.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=ri();return t.copyTo(e),this.reduce(e),e},xi.prototype.revert=function(t){return t},xi.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},xi.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},xi.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var wi=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Si=(1<<26)/wi[wi.length-1];ii.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},ii.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),r=ci(i),n=ri(),o=ri(),s="";for(this.divRemTo(r,n,o);n.signum()>0;)s=(i+o.intValue()).toString(t).substr(1)+s,n.divRemTo(r,n,o);return o.intValue().toString(t)+s},ii.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var i=this.chunkSize(e),r=Math.pow(e,i),n=!1,o=0,s=0,a=0;a<t.length;++a){var l=li(t,a);l<0?"-"==t.charAt(a)&&0==this.signum()&&(n=!0):(s=e*s+l,++o>=i&&(this.dMultiply(r),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),n&&ii.ZERO.subTo(this,this)},ii.prototype.fromNumber=function(t,e,i){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(ii.ONE.shiftLeft(t-1),fi,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(ii.ONE.shiftLeft(t-1),this);else{var r=new Array,n=7&t;r.length=1+(t>>3),e.nextBytes(r),n>0?r[0]&=(1<<n)-1:r[0]=0,this.fromString(r,256)}},ii.prototype.bitwiseTo=function(t,e,i){var r,n,o=Math.min(t.t,this.t);for(r=0;r<o;++r)i[r]=e(this[r],t[r]);if(t.t<this.t){for(n=t.s&this.DM,r=o;r<this.t;++r)i[r]=e(this[r],n);i.t=this.t}else{for(n=this.s&this.DM,r=o;r<t.t;++r)i[r]=e(n,t[r]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()},ii.prototype.changeBit=function(t,e){var i=ii.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i},ii.prototype.addTo=function(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this[i]+t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r+=t[i],e[i++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[i++]=r:r<-1&&(e[i++]=this.DV+r),e.t=i,e.clamp()},ii.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},ii.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},ii.prototype.multiplyLowerTo=function(t,e,i){var r,n=Math.min(this.t+t.t,e);for(i.s=0,i.t=n;n>0;)i[--n]=0;for(r=i.t-this.t;n<r;++n)i[n+this.t]=this.am(0,t[n],i,n,0,this.t);for(r=Math.min(t.t,e);n<r;++n)this.am(0,t[n],i,n,0,e-n);i.clamp()},ii.prototype.multiplyUpperTo=function(t,e,i){--e;var r=i.t=this.t+t.t-e;for(i.s=0;--r>=0;)i[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)i[this.t+r-e]=this.am(e-r,t[r],i,0,0,this.t+r-e);i.clamp(),i.drShiftTo(1,i)},ii.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var r=this.t-1;r>=0;--r)i=(e*i+this[r])%t;return i},ii.prototype.millerRabin=function(t){var e=this.subtract(ii.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var r=e.shiftRight(i);(t=t+1>>1)>wi.length&&(t=wi.length);for(var n=ri(),o=0;o<t;++o){n.fromInt(wi[Math.floor(Math.random()*wi.length)]);var s=n.modPow(r,this);if(0!=s.compareTo(ii.ONE)&&0!=s.compareTo(e)){for(var a=1;a++<i&&0!=s.compareTo(e);)if(0==(s=s.modPowInt(2,this)).compareTo(ii.ONE))return!1;if(0!=s.compareTo(e))return!1}}return!0},ii.prototype.clone=function(){var t=ri();return this.copyTo(t),t},ii.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},ii.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},ii.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},ii.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},ii.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var i,r=this.DB-t*this.DB%8,n=0;if(t-- >0)for(r<this.DB&&(i=this[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this[t]&(1<<r)-1)<<8-r,i|=this[--t]>>(r+=this.DB-8)):(i=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==n&&(128&this.s)!=(128&i)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e},ii.prototype.equals=function(t){return 0==this.compareTo(t)},ii.prototype.min=function(t){return this.compareTo(t)<0?this:t},ii.prototype.max=function(t){return this.compareTo(t)>0?this:t},ii.prototype.and=function(t){var e=ri();return this.bitwiseTo(t,pi,e),e},ii.prototype.or=function(t){var e=ri();return this.bitwiseTo(t,fi,e),e},ii.prototype.xor=function(t){var e=ri();return this.bitwiseTo(t,mi,e),e},ii.prototype.andNot=function(t){var e=ri();return this.bitwiseTo(t,gi,e),e},ii.prototype.not=function(){for(var t=ri(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},ii.prototype.shiftLeft=function(t){var e=ri();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},ii.prototype.shiftRight=function(t){var e=ri();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},ii.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+_i(this[t]);return this.s<0?this.t*this.DB:-1},ii.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=yi(this[i]^e);return t},ii.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},ii.prototype.setBit=function(t){return this.changeBit(t,fi)},ii.prototype.clearBit=function(t){return this.changeBit(t,gi)},ii.prototype.flipBit=function(t){return this.changeBit(t,mi)},ii.prototype.add=function(t){var e=ri();return this.addTo(t,e),e},ii.prototype.subtract=function(t){var e=ri();return this.subTo(t,e),e},ii.prototype.multiply=function(t){var e=ri();return this.multiplyTo(t,e),e},ii.prototype.divide=function(t){var e=ri();return this.divRemTo(t,e,null),e},ii.prototype.remainder=function(t){var e=ri();return this.divRemTo(t,null,e),e},ii.prototype.divideAndRemainder=function(t){var e=ri(),i=ri();return this.divRemTo(t,e,i),new Array(e,i)},ii.prototype.modPow=function(t,e){var i,r,n=t.bitLength(),o=ci(1);if(n<=0)return o;i=n<18?1:n<48?3:n<144?4:n<768?5:6,r=n<8?new hi(e):e.isEven()?new xi(e):new di(e);var s=new Array,a=3,l=i-1,c=(1<<i)-1;if(s[1]=r.convert(this),i>1){var u=ri();for(r.sqrTo(s[1],u);a<=c;)s[a]=ri(),r.mulTo(u,s[a-2],s[a]),a+=2}var h,d,p=t.t-1,f=!0,m=ri();for(n=ui(t[p])-1;p>=0;){for(n>=l?h=t[p]>>n-l&c:(h=(t[p]&(1<<n+1)-1)<<l-n,p>0&&(h|=t[p-1]>>this.DB+n-l)),a=i;0==(1&h);)h>>=1,--a;if((n-=a)<0&&(n+=this.DB,--p),f)s[h].copyTo(o),f=!1;else{for(;a>1;)r.sqrTo(o,m),r.sqrTo(m,o),a-=2;a>0?r.sqrTo(o,m):(d=o,o=m,m=d),r.mulTo(m,s[h],o)}for(;p>=0&&0==(t[p]&1<<n);)r.sqrTo(o,m),d=o,o=m,m=d,--n<0&&(n=this.DB-1,--p)}return r.revert(o)},ii.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return ii.ZERO;for(var i=t.clone(),r=this.clone(),n=ci(1),o=ci(0),s=ci(0),a=ci(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),e?((!n.isEven()||!o.isEven())&&(n.addTo(this,n),o.subTo(t,o)),n.rShiftTo(1,n)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),e?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(t,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);i.compareTo(r)>=0?(i.subTo(r,i),e&&n.subTo(s,n),o.subTo(a,o)):(r.subTo(i,r),e&&s.subTo(n,s),a.subTo(o,a))}return 0!=r.compareTo(ii.ONE)?ii.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a},ii.prototype.pow=function(t){return this.exp(t,new vi)},ii.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var r=e;e=i,i=r}var n=e.getLowestSetBit(),o=i.getLowestSetBit();if(o<0)return e;for(n<o&&(o=n),o>0&&(e.rShiftTo(o,e),i.rShiftTo(o,i));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=i.getLowestSetBit())>0&&i.rShiftTo(n,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return o>0&&i.lShiftTo(o,i),i},ii.prototype.isProbablePrime=function(t){var e,i=this.abs();if(1==i.t&&i[0]<=wi[wi.length-1]){for(e=0;e<wi.length;++e)if(i[0]==wi[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<wi.length;){for(var r=wi[e],n=e+1;n<wi.length&&r<Si;)r*=wi[n++];for(r=i.modInt(r);e<n;)if(r%wi[e++]==0)return!1}return i.millerRabin(t)},ii.prototype.square=function(){var t=ri();return this.squareTo(t),t};var ki=ii;const Ci=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g,Ti=/^(0|[1-9]\d*)\.(0|[1-9]\d*)(\.(0|[1-9]\d*))?(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/g;class Ei{get major(){return this._major}get minor(){return this._minor}get patch(){return this._patch}constructor(t,e=!1){const i=e?Ti:Ci,r=i.exec(t);i.lastIndex=0,this._major=r[1],this._minor=r[2],this._patch=r[3]||0}equals(t){return this._major===t._major&&this._minor===t._minor&&this._patch===t._patch}isMoreRecentThan(t){return!(this._major<t.major)&&(this._major>t.major||!(this._minor<t.minor)&&(this._minor>t.minor||!(this._patch<=t.patch)&&(this._patch>t.patch||void 0)))}}const Ri=t=>It.byteArrayToString(Rt.decode(t));const Di="YXBwX2lkZW50aWZpZXJz",Ii="ZmVhdHVyZXM=",Oi="ZXhwaXJlc19hdA==",Ai="c2lnbmF0dXJl";class Fi{v(){return!0}c(){return Promise.resolve()}isToolAllowed(t){return!0}isWhiteLabel(){return!1}areCustomAssetsAllowed(){return!0}t(){return Promise.resolve()}isENT(){return!1}exp(){return!1}dl(){return 0}isExp(t=Date.now()){return!1}}var Mi=class{constructor(t){this._version="2.4",this._l="string"==typeof t?t.trim():t,this._e=this._parseBigInt("65537",10),this._n=this._parseBigInt("681984042382424091378806337544846672160292647422517223678775230983366046720611873368204040735766698395282492937192783016867164773742859209434481353888637963692711665138989982680829529436715362566735813634679619274059040232728883894511099669775400556584329435375723951309340934658571478665059403241851229195311069345899870108307225910988692123234379186643268583453907260879685992156955936561142314233983397819356937109343127504441076920088455337597736475086676246750168976219763398350254797168313954762459542746440628077261880980924552698138857743609502132632199713575442848784271304503226045319991689413234228439044522583790713890093165912455428688507463773064216328753265963237930998706891042679105987175588970202082466871461192706070321938250462103821558100761330890228135620208935801286878657384108721268761878694436895194628411397454202904351577771506916746612289964053490210990342857409030179406810634136188751670648983222653319056818302012063874664196648868156305696644664362171542503665321455971335955948698828939948786720193132672749776162913092000667953299803216404664087988046584107737900256954976744353601826341965438148646041640662195744770544094748295945844184507459808803114917301124088082458306086473490516969815873631",10),this._parseLicense()}v(){return this._sigValid()&&!this.isExp()}_jsonValid(){try{this._decLic=JSON.parse(this._l)}catch(t){return this._decLic={},!1}return!0}_hostnameValid(){if("undefined"==typeof window)return!0;if(!this._decLic[Ri(Di)].length)return!0;const{hostname:t}=window.location;let e=!1;return this._decLic[Ri(Di)].forEach((i=>{It.wildCardMatch(t,i)&&(e=!0)})),e}_platformValid(){return"HTML5"===this._decLic[Ri("cGxhdGZvcm0=")]}c(){return new Promise(((t,e)=>{const i=this._validateError();null!==i&&e(i),t()}))}validate(){return!(null!==this._validateError())}_validateError(){if("string"!==typeof this._l||!this._jsonValid()){const t=new Error;return t.code="ELICINVFMT",t}if(!this._sigValid()){const t=new Error;return t.code="ELICINV",t}if(!this._hostnameValid()){const t=new Error;return t.code="ELICINVHOST",t}if(!this._platformValid()){const t=new Error;return t.code="ELICINVPLAT",t}if(this.isExp()){const t=new Error;return t.code="ELICEXP",t}return null}isToolAllowed(t){return this._includesFeature(t)}isWhiteLabel(){return this._includesFeature("whitelabel",new Ei("2.4",!0))}areCustomAssetsAllowed(){return this._includesFeature("customassets",new Ei("2.4",!0))}t(){if(this._decLic.enterprise_license)return Promise.resolve();if(this._includesFeature("noexporttracking",new Ei("2.4",!0)))return Promise.resolve();const t=this._decLic[Ri("ZG9tYWlucw==")][0]+Ri(Ri("TDNSeVlXTnJQMkZ3YVV0bGVUMD0="))+this._decLic[Ri("YXBpX3Rva2Vu")];return new Nt(t).load()}isENT(){return!!this._decLic&&this._decLic[Ri("ZW50ZXJwcmlzZV9saWNlbnNl")]}_sigValid(){return this._verify(this._message,this._sig)}exp(){return!!this._decLic[Ri(Oi)]}dl(){return Math.ceil((this._expAt()-Date.now())/864e5)}isExp(t=Date.now()){return null!==this._decLic[Ri(Oi)]&&t>this._expAt()}_expAt(){return 1e3*this._decLic[Ri(Oi)]}_verify(t,e){let i,r;r=this._encodeMessage(t),i=this._decodeSignature(e),i=i.substr(-64);return r===i}_encodeMessage(t){return function(t){function e(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function i(t,e){return t>>>e|t<<32-e}function r(t,e){return t>>>e}function n(t,e,i){return t&e^~t&i}function o(t,e,i){return t&e^t&i^e&i}function s(t){return i(t,2)^i(t,13)^i(t,22)}function a(t){return i(t,6)^i(t,11)^i(t,25)}function l(t){return i(t,7)^i(t,18)^r(t,3)}function c(t){return i(t,17)^i(t,19)^r(t,10)}return function(t){for(var e="0123456789abcdef",i="",r=0;r<4*t.length;r++)i+=e.charAt(t[r>>2]>>8*(3-r%4)+4&15)+e.charAt(t[r>>2]>>8*(3-r%4)&15);return i}(function(t,i){var r,u,h,d,p,f,m,g,_,y,v=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),b=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),x=new Array(64);t[i>>5]|=128<<24-i%32,t[15+(i+64>>9<<4)]=i;for(var w=0;w<t.length;w+=16){r=b[0],u=b[1],h=b[2],d=b[3],p=b[4],f=b[5],m=b[6],g=b[7];for(var S=0;S<64;S++)x[S]=S<16?t[S+w]:e(e(e(c(x[S-2]),x[S-7]),l(x[S-15])),x[S-16]),_=e(e(e(e(g,a(p)),n(p,f,m)),v[S]),x[S]),y=e(s(r),o(r,u,h)),g=m,m=f,f=p,p=e(d,_),d=h,h=u,u=r,r=e(_,y);b[0]=e(r,b[0]),b[1]=e(u,b[1]),b[2]=e(h,b[2]),b[3]=e(d,b[3]),b[4]=e(p,b[4]),b[5]=e(f,b[5]),b[6]=e(m,b[6]),b[7]=e(g,b[7])}return b}(function(t){for(var e=Array(),i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<24-i%32;return e}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t)),8*t.length))}(t)}_decodeSignature(t){let e;return t=function(t){return t.map((t=>`0${(255&t).toString(16)}`.slice(-2))).join("")}(t=Rt.decode(t)),e=(t=this._parseBigInt(t,16)).modPowInt(this._e,this._n),e=e.toString(16),e}_parseBigInt(t,e){return new ki(t,e)}_parseLicense(){"string"==typeof this._l&&this._jsonValid()&&(this._sig=this._decLic[Ri(Ai)]||"",delete this._decLic[Ri(Ai)],this._sig=this._sig.replace(/[^A-Za-z0-9+/=]/g,""),this._message=this._l.replace(new RegExp(`,"${Ri(Ai)}":"([^"]*)"`),""))}_includesFeature(t,e=new Ei("1.0",!0)){const i=new Ei(this._decLic[Ri("dmVyc2lvbg==")],!0);return!!e.isMoreRecentThan(i)||this._decLic[Ri(Ii)]&&-1!==this._decLic[Ri(Ii)].indexOf(t)}};const Pi="undefined"==typeof window?i.g:window;let Bi=Pi.requestAnimationFrame,zi=Pi.cancelAnimationFrame,Li=0;const Ni=["ms","moz","webkit","o"];for(let t=0;t<Ni.length&&!Bi;++t)Bi=Pi[`${Ni[t]}RequestAnimationFrame`],zi=Pi[`${Ni[t]}CancelAnimationFrame`]||Pi[`${Ni[t]}CancelRequestAnimationFrame`];Bi&&(Bi=Bi.bind(Pi)),zi&&(zi=zi.bind(Pi)),Bi||(Bi=function(t,e){const i=(new Date).getTime(),r=Math.max(0,16-(i-Li)),n=setTimeout((function(){t(i+r)}),r);return Li=i+r,n}),zi||(zi=function(t){clearTimeout(t)});const Ui={};S(Ui,{ColorMatrix:()=>oe,CubicBezierCurve:()=>ji,Matrix:()=>Xt,Range:()=>Hi,Rectangle:()=>Yt,Vector2:()=>Zt,Vector3:()=>Gi});var ji=class{constructor(t=new Zt(0,0),e=new Zt(1,1),i=new Zt(2,-1),r=new Zt(2,0)){this._p0=t.clone(),this._p1=e.clone(),this._p2=i.clone(),this._p3=r.clone(),this._segments=[],this._length=-1,this._sample=[]}set(t=new Zt(0,0),e=new Zt(1,1),i=new Zt(2,1),r=new Zt(2,0)){this._p0=t.clone(),this._p1=e.clone(),this._p2=i.clone(),this._p3=r.clone()}getLength(){return this._length}calculateSegments(t=100){let e=0,i=0;const r=[],n=1/t;let o=this._p0.clone();for(let s=1;s<=t;s++){const t=[];t.push({t:e,s:i,point:o}),e+=n,e=Math.min(e,1);const s=this.evalAt(e);i+=s.clone().subtract(o).len(),t.push({t:e,s:i,point:s}),r.push(t),o=s}return this._segments=r,this._length=i,i}evalAt(t){t=this.normalizeParameter(t);const e=this._p0.clone().multiply((1-t)**3),i=this._p1.clone().multiply(3*(1-t)*(1-t)*t),r=this._p2.clone().multiply(3*(1-t)*t*t),n=this._p3.clone().multiply(t*t*t);return e.add(i).add(r).add(n)}isInSegment(t,e){return(t=this.normalizeArcLength(t))>=e[0].s&&t<=e[1].s}getArcLengthSegment(t){t=this.normalizeArcLength(t);for(let e=0;e<this._segments.length;e++){const i=this._segments[e];if(this.isInSegment(t,i))return i}return null}normalizeArcLength(t){return Math.max(Math.min(this._length,t),0)}normalizeParameter(t){return Math.max(Math.min(1,t),0)}getParameterForArcLength(t){const e=this.normalizeArcLength(t),i=this.getArcLengthSegment(e);if(!i)return Mt.warn("CubicBezierCurve#getParameterForArcLength","Segment not found."),-1;const r=(e-i[1].s)/(i[0].s-i[1].s);return r*i[0].t+(1-r)*i[1].t}evalAtArcLength(t){return this.evalAt(this.getParameterForArcLength(t))}approximateAtArcLength(t){const e=this.normalizeArcLength(t),i=this.getArcLengthSegment(e);if(!i)return-1;const r=(e-i[1].s)/(i[0].s-i[1].s);return i[0].point.clone().multiply(r).add(i[1].point.clone().multiply(1-r))}parameterSample(t=100){const e=1/t,i=[];let r=0;for(let n=0;n<=t+1;n++)i.push(this.evalAt(r)),r+=e;return this._sample=i,[...i]}arcLengthApproxSample(t=100,e=!1,i=!1){const r=this._length/t,n=[];let o=0;for(let i=e?1:0;i<t+1;i++)n.push(this.approximateAtArcLength(o)),o+=r;return i&&n.pop(),this._sample=n,[...n]}};var Hi=class{constructor(t,e){this.min=t,this.max=e}getMin(){return this.min}getMax(){return this.max}getLength(){return this.max-this.min}contains(t){return this.min<=t&&t<=this.max}};class Wi{constructor(t,e,i){this.x=t,this.y=e,this.z=i,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0),void 0===this.z&&(this.z=0)}set(t,e,i){return this.x=t,this.y=e,this.z=i,this}clone(){return new Wi(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}clamp(t,e){const i=null!=t,r=null!=e;return!(t instanceof Wi)&&i&&(t=new Wi(t,t,t)),!(e instanceof Wi)&&r&&(e=new Wi(e,e,e)),i&&(this.x=Math.max(t.x,this.x),this.y=Math.max(t.y,this.y),this.z=Math.max(t.z,this.z)),r&&(this.x=Math.min(e.x,this.x),this.y=Math.min(e.y,this.y),this.z=Math.min(e.z,this.z)),this}divide(t){return t instanceof Wi?(this.x/=t.x,this.y/=t.y,this.z/=t.z):(this.x/=t,this.y/=t,this.z/=t),this}subtract(t){return t instanceof Wi?(this.x-=t.x,this.y-=t.y,this.z-=t.z):(this.x-=t,this.y-=t,this.z-=t),this}multiply(t){return t instanceof Wi?(this.x*=t.x,this.y*=t.y,this.z*=t.z):(this.x*=t,this.y*=t,this.z*=t),this}add(t){return t instanceof Wi?(this.x+=t.x,this.y+=t.y,this.z+=t.z):(this.x+=t,this.y+=t,this.z+=t),this}equals(t){return t instanceof Wi?t.x===this.x&&t.y===this.y&&t.z===this.z:t===this.x&&t===this.y&&t===this.z}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}fract(){return this.x%=1,this.y%=1,this.z%=1,this}toInt(){return this.x|=0,this.y|=0,this.z|=0,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this}len(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}min(){return Math.min(Math.min(this.x,this.y),this.z)}max(){return Math.max(Math.max(this.x,this.y),this.z)}toObject(){return{x:this.x,y:this.y,z:this.z}}toString(){return`Vector3({ x: ${this.x}, y: ${this.y}, z: ${this.z} })`}roundDecimal(t){return this.x=parseFloat(this.x.toFixed(t)),this.y=parseFloat(this.y.toFixed(t)),this.z=parseFloat(this.z.toFixed(t)),this}static fromObject(t){return new Wi(t.x,t.y,t.z)}static get NULL(){return new Wi(0,0,0)}}var Gi=Wi;class Vi{constructor(){this._container=new Jt,this._sprite=new $i,this._container.addChild(this._sprite)}render(t,e,i){const r=i.getDimensions(),n=this._getNextHighestPOT(r);this._renderTexture?this._renderTexture.resizeTo(n):this._renderTexture=new qe(t,n.x,n.y);const o=this._renderTexture.getDimensions();this._sprite.setTexture(i),this._sprite.updateTransform(),this._renderTexture.clear(),this._renderTexture.render(this._container),this._updateSprite(t,e,r,o)}_updateSprite(t,e,i,r){e.setTexture(this._renderTexture),this._renderTexture.setFrame(new Yt(0,0,i.x,i.y))}_getNextHighestPOT(t){return new Zt(It.nextHighestPOT(t.x),It.nextHighestPOT(t.y))}getRenderTexture(){return this._renderTexture}dispose(){this._renderTexture&&(this._renderTexture.dispose(),delete this._renderTexture)}}class $i extends Jt{constructor(t){super(),this._shader=null,this._width=0,this._height=0,this._anchor=new Zt(0,0),this._canvasSmoothingEnabled=!0,this._smoothDownscaling=!1,this._onTextureUpdate=this._onTextureUpdate.bind(this),this.setTexture(t)}_onTextureUpdate(){this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}_renderWebGL(t){const e=t.save();this._smoothDownscaling&&(this._potRenderer||(this._potRenderer=new Vi),this._texture&&this._potRenderer.render(t,this,this._texture)),t.restore(e),t.setObjectRenderer(t.renderers.sprite),t.renderers.sprite.render(this)}_renderCanvas(t){if(!this._texture)return;const e=this._worldTransform,i=this._texture.getFrame(),{width:r,height:n}=i,o=t.getCurrentRenderTarget().getPixelRatio(),s=this._anchor.x*-r|0,a=this._anchor.y*-n|0,l=t.getContext();if(l.setTransform(e.a,e.b,e.c,e.d,e.tx*o,e.ty*o),l.globalAlpha=this.getWorldAlpha(),!this._texture)return;const c=this._texture.getBaseTexture(),u=c.getPixelRatio(),h=c.getSource();l.imageSmoothingEnabled=this._canvasSmoothingEnabled,"beforeDraw"in t&&t.beforeDraw(l),l.drawImage(h,0,0,(h.naturalWidth||r)*u,(h.naturalHeight||n)*u,s*o,a*o,r*o,n*o)}isAtPosition(t){if(!this._texture)return;const e=this._worldTransform.applyInverseToVector(t),i=this._texture.getFrame(),{width:r,height:n}=i,o=new Zt(-r,-n);o.multiply(this._anchor);const s=o.clone().add(r,n);return!(e.x<o.x||e.x>s.x||e.y<o.y||e.y>s.y)}getLocalBounds(){if(this._localBoundsNeedUpdate&&this._texture){const t=this._localBounds,e=this._texture.getFrame();t.x=-e.width*this._anchor.x,t.y=-e.height*this._anchor.y,t.width=e.width,t.height=e.height,this._localBoundsNeedUpdate=!1}return this._localBounds.clone()}getBounds(){if(this._boundsNeedUpdate&&this._texture){const t=this._bounds,e=this._texture.getFrame(),i=this._worldTransform,r=this._anchor,n=i.rectangleToCoordinates(e,r);let o=n[0].x,s=n[0].y,a=o,l=s;n.forEach((({x:t,y:e})=>{o=Math.min(o,t),s=Math.min(s,e),a=Math.max(a,t),l=Math.max(l,e)})),t.x=o,t.width=Math.abs(a-o),t.y=s,t.height=Math.abs(l-s),this._boundsNeedUpdate=!1}return this._bounds.clone()}getTexture(){return this._texture}clearTexture(t=!0){this._texture&&(this._texture.off("update",this._onTextureUpdate),t&&this._texture.dispose(),this._texture=null,this._potRenderer&&(t&&this._potRenderer.dispose(),delete this._potRenderer))}setTexture(t){t&&(this._texture&&this._texture.off("update",this._onTextureUpdate),this._potRenderer&&this._potRenderer.getRenderTexture().getBaseTexture().setDirty(!0),this._texture=t,t.getBaseTexture().isLoaded()&&this._onTextureUpdate(),t.on("update",this._onTextureUpdate))}getShader(){return this._shader}setShader(t){this._shader=t}getWidth(){return this._width}setWidth(t){this._texture&&(this._scale.x=t/this._texture.getFrame().width,this._width=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0)}getHeight(){return this._height}setHeight(t){this._texture&&(this._scale.y=t/this._texture.getFrame().height,this._height=t,this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0)}getDimensions(){return new Zt(this._width,this._height)}getAnchor(){return this._anchor}setAnchor(t,e){this._anchor.set(t,e),this._boundsNeedUpdate=!0,this._localBoundsNeedUpdate=!0}isSmoothDownscaling(){return this._smoothDownscaling}setSmoothDownscaling(t){this._smoothDownscaling=t}dispose(t=!1,e=!1){this._texture&&this._texture.off("update",this._onTextureUpdate),(t||e)&&this._texture&&this._texture.dispose(e),this._potRenderer&&this._potRenderer.dispose()}}var Zi={CanvasFilterManager:Ae,Container:Jt,BaseTexture:Ie,Texture:Xe,RenderTexture:qe,WebGLRenderTarget:Ne,CanvasRenderTarget:Oe,Sprite:$i,Filter:de,Filters:te,PixelArrayImage:xt,autoDetectRenderer:(t,e,i={})=>wt.isSupported()?new Ve(t,e,i):new ze(t,e,i),canvasRenderer:(t,e,i={})=>new ze(t,e,i)};var Xi=class{static current(){return p.env.ENV}static isTest(){return"test"===p.env.ENV}static isDevelopment(){return"development"===p.env.ENV}static isProduction(){return"production"===p.env.ENV||!this.isTest()&&!this.isDevelopment()}};var Yi=class{constructor(t){this._head=0,this._buf=t}peekInt8(){return this._buf[this._head]}peekInt16(t=!1){const e=this._buf[this._head],i=this._buf[this._head+1];return t?(i<<8)+e:(e<<8)+i}peekInt24(t=!1){const e=this._buf[this._head],i=this._buf[this._head+1],r=this._buf[this._head+2];return t?(r<<16)+(i<<8)+e:(e<<16)+(i<<8)+r}peekInt32(t=!1){const e=this._buf[this._head],i=this._buf[this._head+1],r=this._buf[this._head+2],n=this._buf[this._head+3];return t?(n<<32)+(r<<16)+(i<<8)+e:(e<<32)+(i<<16)+(r<<8)+n}writeInt8(t){this._buf[this._head]=255&t}writeInt16(t){this._buf[this._head]=t>>8,this._buf[this._head+1]=255&t}readInt8(){const t=this.peekInt8();return this._head+=1,t}readInt16(t=!1){const e=this.peekInt16(t);return this._head+=2,e}readInt24(t=!1){const e=this.peekInt24(t);return this._head+=3,e}readInt32(t=!1){const e=this.peekInt32(t);return this._head+=4,e}readString(t){let e="";for(let i=0;i<t;i++){const t=this.readInt8();e+=String.fromCharCode(t)}return e}getHead(){return this._head}setHead(t){this._head=t}};var qi={MARKERS:{SOI:65496,SOS:65498,APP0:65504,APP1:65505,JFIF:65504,EXIF:65505},EXIF_TAGS:{256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"}};const{invariant:Ki}=It,{MARKERS:Qi,EXIF_TAGS:Ji}=qi;var tr=class{constructor(t){this._buf=t,this._stream=new Yi(this._buf),this._stream.setHead(0),this._parse(),this._bigEndian=!1}isValid(){this._stream.setHead(0);if(this._stream.readInt16()!==Qi.EXIF)return!1;if(!(this._stream.readInt16()>0))return!1;return!("Exif"!==this._stream.readString(4))}_parse(){if(!this.isValid())return;this._stream.setHead(10);const t=this._stream.getHead();this._bigEndian=!1;const e=this._stream.readInt16();18761===e?this._bigEndian=!1:19789===e?this._bigEndian=!0:Ki(!1,"Invalid TIFF data: No endian type found"),Ki(42===this._stream.readInt16(!this._bigEndian),"Invalid TIFF data: No 0x002A");const i=this._stream.readInt32(!this._bigEndian);Ki(i>=8,"Invalid TIFF data: First IFD offset < 8");const r=t+i,n=this._readTags(this._stream,t,r,this._bigEndian);this._tags=n.tags,this._tagData=n.tagData}getTags(){return this._tags}getTagData(){return this._tagData}setOrientation(t){if(this._tagData.Orientation){const{entryOffset:e}=this._tagData.Orientation;this._stream.setHead(e+8),this._stream.writeInt16(this._bigEndian?t:(255&t)<<8|t>>8&255)}}_readTags(t,e,i,r){t.setHead(i);const n=t.readInt16(!r),o={},s=[];for(let a=0;a<n;a++){const n=i+12*a+2;t.setHead(n);let l,c,u,h=t.readInt16(!r);if(Ji[h]){h=Ji[h],l=t.readInt16(!r),c=t.readInt32(!r),u=t.readInt32(!r)+e;let i=null;switch(l){case 1:case 7:if(1===c)i=t.readInt8(!r);else{i=[];for(let e=0;e<c;e++)i.push(t.readInt8(!r))}break;case 2:t.setHead(c>4?u:n+8),i=t.readString(c);break;case 3:if(t.setHead(c>2?u:n+8),1===c)i=t.readInt16(!r);else{i=[];for(let e=0;e<c;e++)i.push(t.readInt16(!r))}break;case 4:case 9:if(t.setHead(c>1?u:n+8),1===c)i=t.readInt32(!r);else{i=[];for(let e=0;e<c;e++)i.push(t.readInt32(!r))}break;case 5:case 10:if(t.setHead(u),1===c){i=t.readInt32(!r)/t.readInt32(!r)}else{i=[];for(let e=0;e<c;e++){const e=t.readInt32(!r)/t.readInt32(!r);i.push(e)}}}o[h]=i,s[h]={value:i,numValues:c,entryOffset:n,valueOffset:u,type:l}}}return{tags:o,tagData:s}}getBuffer(){return this._buf}};const{MARKERS:er}=qi;var ir=class{constructor(t){this._buf=t,this._stream=new Yi(this._buf),this._stream.setHead(0)}isValid(){this._stream.setHead(0);if(this._stream.readInt16()!==er.APP0)return!1;if(!(this._stream.readInt16()>=16))return!1;const t=this._stream.readString(4),e=this._stream.readInt8();return"JFIF"===t&&0===e}setUnitDensity(t){this._stream.setHead(11),this._stream.writeInt8(t)}setDensityX(t){this._stream.setHead(12),this._stream.writeInt16(t)}setDensityY(t){this._stream.setHead(14),this._stream.writeInt16(t)}getUnitDensity(){return this._stream.setHead(11),this._stream.readInt8()}getDensityX(){return this._stream.setHead(12),this._stream.readInt16()}getDensityY(){return this._stream.setHead(14),this._stream.readInt16()}getBuffer(){return this._buf}};const{invariant:rr}=It,{MARKERS:nr}=qi,or="data:image/jpeg;base64,",sr=new RegExp(`^${or}`,"i");class ar{constructor(t){this._buf=t,this._stream=new Yi(this._buf),this._stream.setHead(0),this._segments=this._sliceIntoSegments(this._buf),this._exifData=new tr(this._getMarkerBuffer(nr.EXIF)),this._jfifData=new ir(this._getMarkerBuffer(nr.JFIF))}static toDataURL(t){return or+Rt.encode(t)}static fromDataURL(t){const e=t.replace(or,"");return Rt.decode(e)}restoreSegmentsInArray(t){return t=this.restoreExifTagsToImageData(t),this.restoreJfifSegmentToImageData(t)}restoreSegments(t){let e=ar.fromDataURL(t);return e=this.restoreSegmentsInArray(e),ar.toDataURL(e)}restoreExifTagsToImageData(t){if(!this._exifData.isValid())return t;const e=this._sliceIntoSegments(t)[1][0],i=t.slice(0,e),r=t.slice(e);let n=i.concat(this._exifData.getBuffer());return n=n.concat(r),n}restoreJfifSegmentToImageData(t){if(!this._jfifData.isValid())return t;const e=this._sliceIntoSegments(t),i=this._findSegment(nr.JFIF,e);let r=[];if(!i)return t;{const e=i[0],n=i[1],o=t.slice(0,e),s=t.slice(e,n),a=t.slice(n),l=new ir(s);l.setDensityX(this._jfifData.getDensityX()),l.setDensityY(this._jfifData.getDensityY()),l.setUnitDensity(this._jfifData.getUnitDensity()),r=o.concat(s).concat(a)}return r}restoreExifTags(t){const e=ar.fromDataURL(t),i=this.restoreExifTagsToImageData(e);return ar.toDataURL(i)}restoreJfifSegment(t){if(!this._jfifData.isValid())return t;const e=ar.fromDataURL(t),i=this.restoreJfifSegmentToImageData(e);return ar.toDataURL(i)}setOrientation(t){return this._exifData.setOrientation(t)}static isJPEG(t){return sr.test(t)}static bufferIsJPEG(t){return 255===t[0]&&216===t[1]&&255===t[2]}static fromBase64String(t){const e=t.replace(or,""),i=Rt.decode(e);return new ar(i)}_findSegment(t,e=this._segments){for(let i=0;i<e.length;i++){const r=e[i][0],n=e[i][1];this._stream.setHead(r);if(this._stream.peekInt16()===t)return[r,n]}return!1}_getLastSegment(t=this._segments){return t[t.length-1]}_getMarkerBuffer(t,e=this._segments){const i=this._findSegment(t,e);if(i){const t=i[0],e=i[1];return this._buf.slice(t,e)}return!1}_sliceIntoSegments(t){const e=new Yi(t),i=[];for(;e.getHead()<t.length;){const t=e.readInt16();if(t!==nr.SOI){if(t===nr.SOS)break;if(!(t>=65280&&t<=65535))throw new Error(`Invalid marker: 0x${t.toString(16)}`);{const t=e.readInt16(),r=e.getHead()+t-2;i.push([e.getHead()-4,r]),e.setHead(r)}}}return this._stream.setHead(0),i}getTags(){return this._exifData.getTags()}getTagData(){return this._exifData.getTagData()}dispose(){this._buf=[],this._segments=[]}}var lr=ar;let cr;cr=window.Image;var ur=cr;class hr extends Ht{constructor(t=[]){super(),this._onOperationUpdate=this._onOperationUpdate.bind(this),this._cacheEnabled=!0,this._stack=t,this._stack.forEach((t=>{t.on("update",this._onOperationUpdate)}))}clear(){this.forEach((t=>this.remove(t))),this._stack=[]}hasChanges(){return this._stack.filter((t=>!!t)).some((t=>t.hasChanges()))}_onOperationUpdate(t,e){this.emit(Qe.OPERATION_UPDATED,t,e)}enableCache(){this._cacheEnabled=!0}disableCache(){this._cacheEnabled=!1}forEach(t){return this._stack.filter((t=>!!t)).forEach(t)}render(t,e){const i=e,r=this._stack.filter((t=>!!t)).filter((t=>t.getEnabled()));r.reverse();const n=r.filter((e=>!e.isDirtyForRenderer(t.getRenderer())))[0],o=r.indexOf(n);r.reverse();let s=0;-1!==o&&(s=r.length-o-1);for(let t=0;t<s;t++)Mt.info(this.constructor.name,`Skipping ${r[t].constructor.name}`);let a=Promise.resolve(i);for(let t=s;t<r.length;t++){const e=r[t];let i,n;a=a.then((t=>e.render(t).then((t=>(i&&t!==i&&!this._cacheEnabled&&n.disposeRenderTextures(),i=t,n=e,t)))))}return a.then((e=>({outputTexture:e,renderDone:!r.some((e=>e.isDirtyForRenderer(t.getRenderer())))})))}validateSettings(){return Promise.all(this._stack.filter((t=>!!t)).map((t=>t.validateSettings())))}setAllToDirty(t=!1){this.forEach((e=>e.setDirty(!0,t)))}updateDirtinessForRenderer(t){let e=!1;for(let i=0;i<this._stack.length;i++){const r=this._stack[i];r&&(r.isDirtyForRenderer(t)&&(e=!0),e&&r.setDirtyForRenderer(!0,t))}}push(t){this._stack.push(t),t.on("update",this._onOperationUpdate)}pop(){const t=this._stack.pop();t&&(t.off("update",this._onOperationUpdate),t.dispose())}unshift(t){this._stack.unshift(t),t.on("update",this._onOperationUpdate)}clone(){return new hr(this._stack.slice(0))}get(t){return this._stack[t]}getByIdentifier(t){return It.Array.find(this._stack,(e=>e&&e.constructor.identifier===t))}getIndexByIdentifier(t){return It.Array.findIndex(this._stack,(e=>e&&e.constructor.identifier===t))}moveToTop(t){const e=It.Array.findIndex(this._stack,(e=>e&&e.constructor.identifier===t));if(e<0||e===this._stack.length-1)return;const i=this.getByIdentifier(t);this._stack.splice(e,1),this._stack[this._stack.length]=i}set(t,e){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),this._stack[t]=e,e.on("update",this._onOperationUpdate)}remove(t){const e=this._stack.indexOf(t);-1!==e&&(this._stack[e]&&(this._stack[e].off("update",this._onOperationUpdate),this._stack[e].dispose()),this._stack.splice(e,1))}removeAt(t){this._stack[t]&&(this._stack[t].off("update",this._onOperationUpdate),this._stack[t].dispose()),delete this._stack[t]}getStack(){return this._stack}dispose(){this.forEach((t=>{t.dispose()}))}}var dr=hr;const pr={};S(pr,{ExifOrientationOperation:()=>br});const fr="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):M();var mr=class{constructor(t,e){this._tag=t,this._name=e,this._start=fr()}stop(){const t=fr()-this._start,e=Math.round(1e3/t);Mt.info(this._tag,`${this._name} took ${t.toFixed(2)}ms (${e} FPS)`)}};class gr extends ae{constructor(t,e={}){super(e,{enabled:{type:ft.BOOLEAN,default:!0,serializable:!1}}),this._sdk=t,this._cacheEnabled=!1,this._dirtiness={},this._sprite=new Zi.Sprite,this._container=new Zi.Container,this._container.addChild(this._sprite)}_onOptionsChange(){this.setDirty(!0)}render(t){if(!this.getEnabled())return Mt.info(this.constructor.name,"Disabled - skipping"),Promise.resolve(t);if(!this._renderTexture){const e=t.getDimensions().floor();this._renderTexture=new Zi.RenderTexture(this._sdk.getRenderer(),e.x,e.y)}const e=this._sdk.getRenderer();let i,r;if(Mt.canLog("info")&&(r=new mr(this.constructor.name,"Rendering")),this.isDirtyForRenderer(e)){this._sprite.setTexture(t);const r=this.getNewDimensions(t.getDimensions()).floor();this._renderTexture.resizeTo(r),this._renderTexture.clear(),i=this._render(t).then(((t=!1)=>(this.setDirtyForRenderer(t,e),this._renderTexture)))}else Mt.info(this.constructor.name,"Rendering from cache"),i=Promise.resolve(this._renderTexture);return i.then((t=>(r&&r.stop(),t)))}_render(t){let e;return e=this._sdk.getRenderer().isOfType(gt.WEBGL)?this._renderWebGL.bind(this):this._renderCanvas.bind(this),e(t)}_renderWebGL(t){throw new Error("Operation#_renderWebGL is abstract and not implemented in inherited class.")}_renderCanvas(t){throw new Error("Operation#_renderCanvas is abstract and not implemented in inherited class.")}getNewDimensions(t){return t.clone()}onBeforeExport(){this.transform&&this._tempTransformChange&&this.transform(this._tempTransformChange),this._onBeforeExport()}onAfterExport(){this.transform&&this._tempInverseTransformChange&&this.transform(this._tempInverseTransformChange),this._onAfterExport()}_onBeforeExport(){}_onAfterExport(){}setTemporaryTransformChange(t,e){this._tempTransformChange=t,this._tempInverseTransformChange=e}reset(){this._dirty=!0,this._glslPrograms={}}isDirtyForRenderer(t){const e=this._dirtiness[t.id];return void 0===e||e}setDirtyForRenderer(t,e,i=!1){this._dirtiness[e.id]=t}setDirty(t,e=!1){for(const i in this._dirtiness)this.setDirtyForRenderer(t,{id:i},e)}getSDK(){return this._sdk}getInputDimensions(t=!0){let e,i=this._sdk.getInputDimensions();return t&&i.multiply(this._sdk.getZoom()).floor(),this._sdk.getOperationsStack().forEach((t=>{e||(t!==this?i=t.getNewDimensions(i):e=!0)})),i.floor()}clone(){return new(0,this.constructor)(this._sdk,this.serializeOptions())}disposeRenderTextures(){this._renderTexture&&this._renderTexture.dispose(),this._renderTexture=null}dispose(){this.disposeRenderTextures(),this._sprite.dispose()}}gr.identifier=null;var _r=gr;const{OptionType:yr}=ht;class vr extends _r{getRotation(){let t=0;switch(this.getTags().Orientation){case 7:case 8:t=-90;break;case 3:case 4:t=-180;break;case 5:case 6:t=90}return t}_getFlipVertically(){const{Orientation:t}=this.getTags();return-1!==[5,7].indexOf(t)}_getFlipHorizontally(){const{Orientation:t}=this.getTags();return-1!==[2,4].indexOf(t)}_getFinalOptions(){return{rotation:this.getRotation(),flipVertically:this._getFlipVertically(),flipHorizontally:this._getFlipHorizontally()}}_render(t){const e=this._getFinalOptions(),i=e.rotation%360*(Math.PI/180);this._sprite.setScale(e.flipHorizontally?-1:1,e.flipVertically?-1:1),this._sprite.setRotation(i),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();const r=this._sprite.getBounds();return this._renderTexture.resizeTo(new Zt(r.width,r.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2)),this._renderTexture.render(this._container),Promise.resolve()}getNewDimensions(t){const e=this._getFinalOptions();return t=t.clone(),e.rotation%180&&t.flip(),t}applyTo(t){const e=this._getFinalOptions(),i=It.createCanvas();90===Math.abs(e.rotation%180)?(i.width=t.height,i.height=t.width):(i.width=t.width,i.height=t.height);const r=i.getContext("2d"),n=e.rotation*Math.PI/180,o=.5*(i.width-t.width),s=.5*(i.height-t.height);return r.translate(o,s),r.translate(.5*t.width,.5*t.height),r.rotate(n),r.translate(-.5*t.width,-.5*t.height),e.flipVertically&&(r.translate(0,t.height),r.scale(1,-1)),e.flipHorizontally&&(r.translate(t.width,0),r.scale(-1,1)),r.drawImage(t,0,0),i}}vr.identifier="exif-orientation",vr.prototype.availableOptions={tags:{type:yr.OBJECT,default:{}}};var br=vr;class xr extends ae{constructor(t,e={}){super(e),this._sdk=t}export(){const{imageFormat:t}=this._options,e=t=>t.renderDone?t:this._sdk.render().then((t=>e(t)));return this.validateSettings().then((()=>this._prepareSDK().then((t=>e(t))))).then((t=>{const{outputTexture:e,renderDone:i}=t,r=this._sdk.getRenderer();let n=r.getCanvas();return r.isOfType(gt.WEBGL)&&(n=this._createCanvasFromTexture(e)),this._encodeImageFormat(n)})).then((e=>this._restoreExifMetadata(e,t))).then((t=>this._restoreSDK().then((()=>t))))}_restoreExifMetadata(t,e,i){if(e===pt.JPEG){const e=this._sdk.getExif();e&&"string"==typeof t&&(t=e.restoreSegments(t))}return Promise.resolve(t)}_encodeAsDataURL(t,e,i){return It.isBrowser?Promise.resolve(t.toDataURL(e,i)):new Promise(((r,n)=>{t.toDataURL(e,i,((t,e)=>{t?n(t):r(e)}))}))}_encodeAsHTMLImage(t,e,i){return this._encodeAsDataURL(t,e,i).then((t=>{const e=new ur;return e.src=t,Promise.resolve(e)}))}_encodeAsBuffer(t,e,i){return Promise.reject(new Error("Unsupported platform for RenderType"))}_encodeAsMSBlob(t,e,i){return Promise.resolve(t.msToBlob())}_encodeAsBLOB(t,e,i){return new Promise(((r,n)=>{t.toBlob((t=>{r(t)}),e,i)}))}_encodeImageFormat(t){const{imageFormat:e,quality:i}=this._options;let{renderType:r}=this._options;switch(r===dt.BLOB&&t.msToBlob&&!t.toBlob&&(r=dt.MSBLOB),r){case dt.IMAGE:return this._encodeAsHTMLImage(t,e,i);case dt.DATAURL:return this._encodeAsDataURL(t,e,i);case dt.BUFFER:return this._encodeAsBuffer(t,e,i);case dt.MSBLOB:return this._encodeAsMSBlob(t,e,i);case dt.BLOB:return this._encodeAsBLOB(t,e,i)}return Promise.reject(new Error(`Unsupported RenderType: ${r}!`))}_prepareSDK(){const t=this._sdk.getRenderer();this._sdkSettings={dimensions:t.getDimensions().clone(),textureQuality:this._sdk.getTextureQuality(),pixelRatio:this._sdk.getPixelRatio(),renderMode:this._sdk.getRenderMode()},this._sdk.setRenderMode("export"),this._sdk.setTextureQuality(1);const e=t.isOfType(gt.CANVAS);t.setPixelRatio(1),t.resizeTo(this._sdk.getFinalDimensions(),e),this._sdk.setAllOperationsToDirty(!0);const i=this._sdk.getOperationsStack();return i.forEach((t=>{t.disposeRenderTextures()})),i.disableCache(),this._sdk.render()}_restoreSDK(){this._sdk.getOperationsStack().enableCache(),this._sdk.setRenderMode(this._sdkSettings.renderMode);const t=this._sdk.getRenderer(),e=t.isOfType(gt.CANVAS);return t.setPixelRatio(this._sdkSettings.pixelRatio),t.resizeTo(this._sdkSettings.dimensions,e),this._sdk.setTextureQuality(this._sdkSettings.textureQuality),this._sdk.setAllOperationsToDirty(!0),this._sdk.render()}_createCanvasFromTexture(t){const e=this._sdk.getRenderer(),i=this._sdk.getFinalDimensions(),r=this._sdk.getRenderer().getContext(),n=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,n);const o=t.getBaseTexture().getGLTextureForRenderer(e);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0);const s=new Uint8Array(i.x*i.y*4);r.readPixels(0,0,i.x,i.y,r.RGBA,r.UNSIGNED_BYTE,s);let a;if(this._checkPixelsForTransparency(s)){const n=new Zi.Sprite(t);n.setFilters([new Zi.Filters.UnpremultiplyFilter]);const o=new Zi.Container;o.addChild(n),a=new Zi.RenderTexture(e,i.x,i.y),a.render(o);const l=a.getBaseTexture().getGLTextureForRenderer(e);r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,l,0),r.readPixels(0,0,i.x,i.y,r.RGBA,r.UNSIGNED_BYTE,s),e.setRenderTarget(),a.dispose()}const l=It.createCanvas();l.width=i.x,l.height=i.y;const c=l.getContext("2d"),u=c.createImageData(i.x,i.y);return u.data.set(s),c.putImageData(u,0,0),r.deleteFramebuffer(n),l}_checkPixelsForTransparency(t){const e=this._sdk.getFinalDimensions(),i=e.x*e.y*4;let r;for(let e=3;e<i;e+=4)if(r=t[e],255!==r)return!0;return!1}}xr.prototype.availableOptions={renderType:{type:ft.STRING,available:It.values(dt),default:dt.IMAGE},imageFormat:{type:ft.STRING,available:It.values(pt),default:pt.PNG},quality:{type:ft.NUMBER,default:.8}};var wr=xr;const{Rectangle:Sr,Constants:kr,Engine:Cr,Utils:Tr,EventEmitter:Er,Events:Rr,Vector2:Dr,Log:Ir,Base64:Or,Color:Ar}=Ke,Fr=t=>Tr.byteArrayToString(Or.decode(t)),{RenderType:Mr,ImageFormat:Pr,RendererType:Br}=kr;var zr=class extends Er{constructor(t,e={}){if(super(),this._onOperationUpdate=this._onOperationUpdate.bind(this),this._onContextRestored=this._onContextRestored.bind(this),this.version="3.9.0",this[Fr("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!0,this._preferredRenderer=t,this._options=b(b({},e),{extensions:{},renderMode:"dynamic",versionCheck:!0,displayWelcomeMessage:!0,image:null,canvas:null,transparent:!1,clearColor:Ar.TRANSPARENT,textureQuality:1,zoom:1,spriteScale:1,rotation:0,smoothDownscaling:!1,smoothUpscaling:!1,crossOrigin:"anonymous",logLevel:"warn",pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),this._options.smoothUpscaling&&(Cr.BaseTexture.DefaultMagFilter=Cr.BaseTexture.LinearFilter),this._options.extensions=Object.assign(this._options.extensions,{operations:[],controls:[],languages:[]}),Ir.setLevel(this._options.logLevel),this[Fr("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!1,this[Fr("X29wdGlvbnM=")][Fr("bGljZW5zZQ==")]){if(!this._v())return;const t=Ke[Fr("TGljZW5zZUNoZWNrZXI=")];this._l=new t(this[Fr("X29wdGlvbnM=")][Fr("bGljZW5zZQ==")]),this._cv(!0).then((()=>{this._ct()})).catch((t=>{Ir.error(Fr("TGljZW5zaW5n"),t.message)}))}else this[Fr("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]=!0,this._l=new(Ke[Fr("RnJlZUxpY2Vuc2VDaGVja2Vy")]);this._defaultRenderMode=this._options.renderMode,this._renderMode=this._options.renderMode,this._textureQuality=this._options.textureQuality,this._offset=new Dr,this._zoom=this._options.zoom,this._spriteScale=this._options.spriteScale,this._rotation=this._options.rotation,this._operations={},this._operationsStack=null,this.setOperationsStack(new dr),this._container=new Cr.Container,this._sprite=new Cr.Sprite,this._container.addChild(this._sprite),this._inputTexture=this._options.inputTexture,this._currentInputTexture=null,this._currentTexture=null,this._resizedTexture=null,this._resizedContainer=new Cr.Container,this._resizedSprite=new Cr.Sprite,this._resizedContainer.addChild(this._resizedSprite),this._texturesToDispose=[],this.setSmoothDownscaling(this._options.smoothDownscaling),this._registerOperations(),this._initRenderer();this._renderer.constructor.type;this._options.displayWelcomeMessage,this[Fr("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]&&Ir.log(Fr("VGhlIFBob3RvRWRpdG9yIFNESyBpcyBhIGNvbW1lcmNpYWwgcHJvZHVjdC4gQmVmb3JlIGJlaW5nIGFibGUgdG8gdXNlIGl0IHdpdGhvdXQgbGltaXRhdGlvbnMsIHlvdSBuZWVkIHRvIHVubG9jayB0aGUgU0RLIHdpdGggYSBsaWNlbnNlIGZpbGUuIFlvdSBjYW4gb2J0YWluIGEgdGltZS1saW1pdGVkIGV2YWx1YXRpb24gbGljZW5zZSBieSBzdGFydGluZyBhIHRyaWFsIGF0IGh0dHBzOi8vd3d3LnBob3RvZWRpdG9yc2RrLmNvbS91c2Vycy9uZXcgb3IgeW91IGNhbiBwdXJjaGFzZSBhIGxpY2Vuc2UgYnkgcmVxdWVzdGluZyBhIHF1b3RlIGF0IGh0dHBzOi8vd3d3LnBob3RvZWRpdG9yc2RrLmNvbS9wcmljaW5nLgoKQmVjYXVzZSB5b3UgZGlkIG5vdCBzcGVjaWZ5IGEgbGljZW5zZSBmaWxlIHlldCwgdGhlIFNESyB3aWxsIG5vdyBkaXNwbGF5IGEgd2F0ZXJtYXJrIGltYWdlIG9uIHRvcCBvZiBhbnkgcGhvdG9zIHlvdSBkaXNwbGF5IG9yIGV4cG9ydCB3aXRoIGl0LiBGb3IgaW5zdHJ1Y3Rpb25zIGZvciBob3cgdG8gdW5sb2NrIHRoZSBTREssIHBsZWFzZSB2aXNpdCBodHRwczovL2RvY3MucGhvdG9lZGl0b3JzZGsuY29tL2d1aWRlcy9odG1sNS92NC9pbnRyb2R1Y3Rpb24vZ2V0dGluZ19zdGFydGVkLg==")),this._options.image&&this.setImage(this._options.image,this._options.exif)}_v(){return!!this[Fr("X29wdGlvbnM=")][Fr("bGljZW5zZQ==")]||(Ir.error(Fr("TGljZW5zaW5n"),Fr("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbi4=")),Ir.error(Fr("TGljZW5zaW5n"),Fr("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}_ct(){if(this._l.exp()){this._l.isExp()?Ir.error(Fr("TGljZW5zaW5n"),Fr("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4=")):Ir.warn(Fr("TGljZW5zaW5n"),Fr("WW91ciB0cmlhbCBsaWNlbnNlIHdpbGwgZXhwaXJlIGluICVkIGRheXMu").replace("%d",this._l.dl()))}}_cv(t=!1){return this._l.c().catch((e=>{this[Fr("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")]=!1;let i=Fr("SW52YWxpZCBsaWNlbnNlLg==");throw t&&(i="ELICEXP"===e.code?Fr("WW91ciB0cmlhbCBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgY29udGFjdCB1cyBhdCBzYWxlc0BwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZS4="):"ELICINVHOST"===e.code?`${Fr("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGhvc3RuYW1lIA==")+window.location.hostname}.`:"ELICINVPLAT"===e.code?Fr("VGhpcyBsaWNlbnNlIGlzIG5vdCB2YWxpZCBmb3IgdGhlIGN1cnJlbnQgcGxhdGZvcm0u"):"ELICINVFMT"===e.code?Fr("SW52YWxpZCBsaWNlbnNlIGZvcm1hdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UncmUgcGFzc2luZyB5b3VyIGxpY2Vuc2UgYXMgYSBzdHJpbmcsIG5vdCBhcyBgJGZvcm1hdGAu").replace("$format",typeof this._options.license):"ELICINV"===e.code?Fr("SW52YWxpZCBsaWNlbnNlISBQbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc3VwcG9ydEBwaG90b2VkaXRvcnNkay5jb20gdG8gb2J0YWluIGEgbGljZW5zZSBvciBsb2cgaW4gdG8geW91ciBjdXN0b21lciBkYXNoYm9hcmQu"):Fr("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),e.message=i,new Error(e)}))}_t(){this._l.t()}_fl(){return this[Fr("Wm5KbFpVeHBZMlZ1YzAxdlpHVT0=")]}_onOperationUpdate(...t){this.emit(Rr.OPERATION_UPDATED,...t)}_onContextRestored(){Ir.warn(this.constructor.name,"Trying to re-render after WebGL context has been restored."),this.setAllOperationsToDirty(),this._operationsStack.forEach((t=>{t.disposeRenderTextures()})),this.render()}export(t=Mr.DATAURL,e=Pr.PNG,i=.8){return this._cv(!0).then((()=>{this.hasChanges()&&this._t(),this._operationsStack.forEach((t=>{t.onBeforeExport()}));return new wr(this,{renderType:t,imageFormat:e,quality:i}).export().then((t=>(this._operationsStack.forEach((t=>{t.onAfterExport()})),Promise.resolve(t))))}))}render(t=!0){if(!this._inputTexture)throw new Error("You need to set an image before calling PhotoEditorSDK#render.");const e=this._renderer.getContext();let i;e.startFrame&&e.startFrame(),Ir.canLog("info")&&(i=new mr("⚡⚡⚡","Frame rendering")),Ir.info("⚡⚡⚡","Rendering starts");const r=this._operationsStack;return r.updateDirtinessForRenderer(this._renderer),this._prepareTexture().then((t=>{"export"===this._renderMode&&(t=this._inputTexture),this._currentTexture=t,this._sprite.setTexture(t),this._container.updateTransform()})).then((()=>r.validateSettings())).then((()=>((this._fl()||!this[Fr("VG04Z1lHRndhVXRsZVdBZ2IzQjBhVzl1SUdkcGRtVnU=")])&&(r.getByIdentifier("license-watermark")?r.moveToTop("license-watermark"):this.createOperation("license-watermark")),r.render(this,this._currentTexture)))).then((e=>{const{outputTexture:i}=e;switch(this._currentTexture=i,this._sprite.setTexture(this._currentTexture),this._renderMode){case"dynamic":{const t=this._renderer.getDimensions().clone().divide(2).add(this._offset);this._container.setScale(this._zoom/this.getTextureScale(),this._zoom/this.getTextureScale()),this._container.setPosition(t),this._sprite.setAnchor(.5,.5),this._sprite.setScale(this._spriteScale,this._spriteScale),this._sprite.setRotation(this._rotation);break}case"export":this._container.setScale(1,1),this._container.setPosition(0,0),this._sprite.setAnchor(0,0),this._sprite.setPosition(0,0),this._sprite.setScale(this._spriteScale,this._spriteScale),this._sprite.setRotation(0);break;case"adapter":this._container.setScale(1,1),this._container.setPosition(0,0),this._sprite.setAnchor(0,0),this._sprite.setPosition(0,0),this._sprite.setScale(1,1),this._sprite.setRotation(0)}return t&&this._renderer.render(this._container),e})).then((t=>(i&&i.stop(),e.endFrame&&e.endFrame(),this._disposeTextures(),t)))}getTextureScale(){return Math.min(1,this._textureQuality*this._options.pixelRatio)}_prepareTexture(){return new Promise(((t,e)=>{const i=this.getTextureScale();if(1===this._textureQuality)return t(this._inputTexture);const r=this.getInputDimensions().multiply(i).floor();let n;this._resizedTexture?this._resizedTexture.getDimensions().equals(r)||(this._resizedTexture.resizeTo(r),n=!0):(this._resizedTexture=new Cr.RenderTexture(this._renderer,r.x,r.y),n=!0),n&&(this._resizedSprite.setScale(i,i),this._resizedSprite.setTexture(this._inputTexture),this._resizedTexture.render(this._resizedContainer)),t(this._resizedTexture)}))}_registerOperations(){this._operations={};for(const t in pr){const e=pr[t];this._operations[e.identifier]=e}this._operations=b(b({},this._operations),this._options.extensions.operations)}registerOperations(t){t.forEach((t=>{this._operations[t.identifier]=t}))}setAllOperationsToDirty(t=!1){this._operationsStack.setAllToDirty(t)}createOperation(t,e={},i=!0){const r=this._operations[t];if(!r)throw new Error(`No operation with identifier \`${t}\` found.`);const n=new r(this,e);return i&&this.addOperation(n),n}addOperation(t){this._operationsStack.push(t)}removeOperation(t){this._operationsStack.remove(t)}getInputDimensions(){const t=this._inputTexture.getFrame();return new Dr(t.width,t.height)}getFinalDimensions(t=!1){let e=this.getInputDimensions();return this._operationsStack.forEach((t=>{t.getEnabled()&&(e=t.getNewDimensions(e))})),t&&e.multiply(this._spriteScale),e.floor()}getOutputDimensions(t=!1){return this.getFinalDimensions(t).clone().multiply(this._zoom).floor()}getOutputTextureDimensions(t=!1){const e=this.getTextureScale();let i=this.getInputDimensions().multiply(e).floor();return this._operationsStack.forEach((t=>{i=t.getNewDimensions(i)})),i}getCrossOrigin(){return Tr.getCrossOrigin(this._options.crossOrigin||"Anonymous")}_initRenderer(){const t={canvas:this._options.canvas,pixelRatio:this._options.pixelRatio,debug:this._options.debug,transparent:this._options.transparent,clearColor:this._options.clearColor};let e,i;if("export"!==this._renderMode&&this._options.canvas){const{canvas:t}=this._options;e=t.width,i=t.height}else if(this._inputTexture){const t=this.getFinalDimensions();e=t.x,i=t.y}else e=1,i=1;switch(this._preferredRenderer){case Br.WEBGL:this._renderer=Cr.autoDetectRenderer(e,i,t),this._renderer.on("context-restored",this._onContextRestored);break;case Br.CANVAS:this._renderer=Cr.canvasRenderer(e,i,t),this._renderer.on("context-restored",this._onContextRestored);break;default:Ir.warn("PhotoEditorSDK",`PhotoEditorSDK Error: Renderer \`${this._preferredRenderer}\` not supported. Falling back to automatically detected renderer.`),this._renderer=Cr.autoDetectRenderer(e,i,t)}}resizeTo(t){this._renderer.resizeTo(t,!0)}reset(){this._operationsStack.clear()}parseExif(t){if(!t)return;let{src:e}=t,i=!1,r=null;if(i=lr.isJPEG(e),r=e,i){let t=null;try{t=lr.fromBase64String(r)}catch(t){}return t||void 0}}_handleExifOrientation(){const t=this._exif.getTags();if(t&&t.Orientation){const e=1!==t.Orientation&&2!==t.Orientation,i=-1!==[2,4,5,7].indexOf(t.Orientation);if(e||i){if("undefined"==typeof navigator)this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(t);else{const e=window&&window.navigator&&window.navigator.userAgent||"";(e.match(/msie|trident/i)||-1!==e.indexOf("Edge")||!CSS.supports("image-orientation","from-image"))&&(this._exifOperation||(this._exifOperation=this.createOperation("exif-orientation")),this._exifOperation.setTags(t))}this._exif.setOrientation(1)}}}correctExifOrientation(t){const e=this.parseExif(t);if(!e)return t;const i=e.getTags();if(i&&i.Orientation){const r=1!==i.Orientation&&2!==i.Orientation,n=-1!==[2,4,5,7].indexOf(i.Orientation);if(r||n){if("undefined"==typeof navigator){const e=this.createOperation("exif-orientation",{},!1);e.setTags(i),t=e.applyTo(t)}else{const e=window&&window.navigator&&window.navigator.userAgent||"";if(e.match(/msie|trident/i)||-1!==e.indexOf("Edge")||!CSS.supports("image-orientation","from-image")){const e=this.createOperation("exif-orientation",{},!1);e.setTags(i),t=e.applyTo(t)}}return e.setOrientation(1),i.Orientation=1,t}}return t}hasImage(){return null!==this._image&&void 0!==this._image}getImage(){return this._image}disposeTexture(t){this._texturesToDispose.push(t)}_disposeTextures(){for(let t=0;t<this._texturesToDispose.length;t++)this._texturesToDispose[t].dispose();this._texturesToDispose=[]}setImage(t,e=null,i=null){this._disposeTextures(),this._exifOperation&&(this.removeOperation(this._exifOperation),this._exifOperation=null),this._options.image=t,this._image=t,this._exif=e||this.parseExif(t),this._exif&&this._handleExifOrientation();const r=new Cr.BaseTexture(this._image),n=new Sr(0,0,this._image.naturalWidth||this._image.width,this._image.naturalHeight||this._image.height);i&&(n.width=i.x,n.height=i.y),this._resizedTexture&&this._resizedTexture.dispose(),this._resizedTexture=null,this._inputTexture&&this.disposeTexture(this._inputTexture.getBaseTexture()),this._inputTexture=new Cr.Texture(r,n),this._currentTexture=this._inputTexture,this._sprite.clearTexture(!1),this._sprite.setTexture(this._inputTexture),this.emit("new-image"),this.setAllOperationsToDirty(!0)}setInputTexture(t){this._inputTexture=t}getCanvas(){return this._renderer.getCanvas()}setCanvas(t){this._renderer.setCanvas(t)}getSprite(){return this._sprite}getContainer(){return this._container}getOperationsStack(){return this._operationsStack}setOperationsStack(t){this._operationsStack&&this._operationsStack.off(Rr.OPERATION_UPDATED,this._onOperationUpdate),this._operationsStack=t,this._operationsStack.on(Rr.OPERATION_UPDATED,this._onOperationUpdate)}getOperations(){return this._operations}getRenderer(){return this._renderer}getOffset(){return this._offset}setOffset(t,e){t instanceof Dr?this._offset.copy(t):this._offset.set(t,e)}getRenderMode(){return this._renderMode}setRenderMode(t){this._renderMode=t}getZoom(){return this._zoom}setZoom(t){this._zoom=t,this._container.setScale(this._zoom,this._zoom),this._container.updateTransform()}getTextureQuality(){return"export"===this._renderMode?1:this._textureQuality}setTextureQuality(t){t!==this._textureQuality&&this.setAllOperationsToDirty(!0),this._textureQuality=Math.min(1,t),1===this._textureQuality&&this._resizedTexture&&(this._resizedTexture.dispose(),this._resizedTexture=null)}getSpriteScale(){return this._spriteScale}setSpriteScale(t){this._spriteScale=t,this._sprite.setScale(t,t),this._sprite.updateTransform()}getPixelRatio(){return this._options.pixelRatio}getExif(){return this._exif}getOptions(){return this._options}getInputTexture(){return this._inputTexture}setSmoothDownscaling(t){this._options.smoothDownscaling=t,this._sprite.setSmoothDownscaling(t),this._resizedSprite.setSmoothDownscaling(t)}setRotation(t){this._rotation=t}getRotation(){return this._rotation}hasChanges(){return this.getOperationsStack().hasChanges()}dispose(){this._operationsStack.dispose(),this._renderer.dispose(),this._exif&&this._exif.dispose(),this._resizedTexture&&this._resizedTexture.dispose()}};zr.version="3.9.0",zr.Math=Ui,zr.Operations=pr,zr.Engine=Zi,zr.Color=jt,zr.LicenseChecker=Mi,zr.Operation=_r,zr.EventEmitter=Ht,zr.Utils=It,zr.Env=Xi,zr.OperationsStack=dr,zr.EXIF=lr,zr.Image=ur,zr.Configurable=ae,zr.Log=Mt,zr.Loaders=Pt,zr.RenderType=dt,zr.ImageFormat=pt,zr.OptionType=ft,zr.RendererType=gt,zr.UniformType=mt,zr.Base64=Rt;zr.UI={};var Lr=zr;const{ColorMatrix:Nr}=Ui,Ur=1e-7;function jr(t,e,i,r,n){return(t-e)*(n-r)/(i-e)+r}const Hr=t=>(Math.max(t.r,t.g,t.b)+Math.min(t.r,t.g,t.b))/2;class Wr extends Zi.Filter{constructor(){super(),this._fragmentSource="precision highp float;\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform float u_gamma;\nuniform float u_shadows;\nuniform float u_highlights;\nuniform float u_whites;\nuniform float u_blacks;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.0000001;\n\nfloat calculateLuminance(vec3 rgb) {\n    // This is the luminance calculation part of the RGB to HSL formular.\n    vec4 p = mix(\n        vec4(rgb.gb, 0.0, -1.0 / 3.0),\n        vec4(rgb.bg, -1.0, 2.0 / 3.0),\n        vec4(rgb.g < rgb.b)\n    );\n\n    vec4 q = mix(\n        vec4(rgb.r, p.yzx),\n        vec4(p.xyw, rgb.r),\n        vec4(rgb.r < p.x)\n    );\n\n    float croma = q.x - min(q.w, q.y);\n    float luminance = q.x - croma * 0.5;\n    return luminance;\n}\n\nvec3 map(vec3 x, float in_min, float in_max, float out_min, float out_max){\n  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;\n}\n\nvoid main() {\n\n  vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON); // Revert premultiplied alpha\n\n  // Apply gamma\n  if (u_gamma != 1.0) {\n    color.rgb = pow(color.rgb, vec3(1.0 / max(u_gamma, EPSILON)));\n  }\n\n  // Apply shadows and highlights\n  float luminance = calculateLuminance(color.rgb);\n\n  float shadow = u_shadows >= 0.0\n    ? clamp(\n          pow(luminance, 1.0 / (u_shadows + 1.0))\n          + pow(luminance, 2.0 / (u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(u_shadows, 1.0))\n    : -clamp(\n          pow(luminance, 1.0 / (-u_shadows + 1.0))\n          + pow(luminance, 2.0 / (-u_shadows + 1.0)) * -0.76\n          - luminance\n    , 0.0, max(-u_shadows, 1.0));\n\n  float highlight = u_highlights < 0.0\n    ? clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 - u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 - u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0)\n    : -clamp(\n          1.0\n          - pow(1.0 - luminance, 1.0 / (1.0 + u_highlights))\n          - pow(1.0 - luminance, 2.0 / (1.0 + u_highlights)) * -0.8\n          - luminance\n     , -1.0, 0.0);\n\n  // Bright color need more contrast and dark color need more brightness.\n  // This is to keep saturatation because the color information of a dark colors is lost.\n  float shadowContrast   = shadow * luminance * luminance;\n  float shadowBrightness = shadow - shadowContrast;\n\n  float offset = luminance + shadowContrast + highlight;\n  color.rgb = clamp(offset * ((color.rgb + shadowBrightness) / max(luminance, EPSILON)), 0.0, 1.0);\n  \n  // Apply Color Matrix\n  color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n  color.rgb = map(color.rgb, 0.0, 1.0, u_blacks / 2.0, 1.0 + u_whites / 2.0);\n  color = clamp(color, 0.0, 1.0);\n  color.rgb *= color.a; // Reset premultiplied alpha\n\n  gl_FragColor = color;\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),a=o.getImageData(0,0,n.width,n.height),{colorMatrix:l,gamma:c,shadows:u,highlights:h,whites:d,blacks:p}=this._options,f=1!==c,m=0!==u||0!==h;let g=new jt(0,0,0,0);for(let t=0;t<n.width*n.height;t++){const e=4*t;if(g.r=a.data[e]/255,g.g=a.data[e+1]/255,g.b=a.data[e+2]/255,f&&(g.r=Math.pow(g.r,1/Math.max(c,Ur)),g.g=Math.pow(g.g,1/Math.max(c,Ur)),g.b=Math.pow(g.b,1/Math.max(c,Ur))),m){const t=Hr(g),e=u>=0?It.clamp(Math.pow(t,1/(u+1))+-.76*Math.pow(t,2/(u+1))-t,0,Math.max(u,1)):-It.clamp(Math.pow(t,1/(1-u))+-.76*Math.pow(t,2/(1-u))-t,0,Math.max(-u,1)),i=e*t*t,r=e-i,n=t+i+(h<0?It.clamp(1-Math.pow(1-t,1/(1-h))- -.8*Math.pow(1-t,2/(1-h))-t,-1,0):-It.clamp(1-Math.pow(1-t,1/(1+h))- -.8*Math.pow(1-t,2/(1+h))-t,-1,0));g.r=It.clamp(n*((g.r+r)/Math.max(t,Ur)),0,1),g.g=It.clamp(n*((g.g+r)/Math.max(t,Ur)),0,1),g.b=It.clamp(n*((g.b+r)/Math.max(t,Ur)),0,1)}g=l.apply(g).clamp(0,1),g.r=jr(g.r,0,1,p/2,1+d/2),g.g=jr(g.g,0,1,p/2,1+d/2),g.b=jr(g.b,0,1,p/2,1+d/2),a.data[e]=255*g.r,a.data[e+1]=255*g.g,a.data[e+2]=255*g.b}s.putImageData(a,0,0)}}Wr.prototype.availableOptions={gamma:{type:ft.NUMBER,default:1,uniformType:mt.FLOAT},shadows:{type:ft.NUMBER,default:0,uniformType:mt.FLOAT},highlights:{type:ft.NUMBER,default:1,uniformType:mt.FLOAT},whites:{type:ft.NUMBER,default:0,uniformType:mt.FLOAT},blacks:{type:ft.NUMBER,default:0,uniformType:mt.FLOAT},colorMatrix:{type:ft.COLOR_MATRIX,default:new Nr,uniformType:mt.MAT4},colorOffset:{type:ft.ARRAY,default:[],uniformType:mt.FLOAT4}};var Gr=Wr;const{Vector2:Vr,ColorMatrix:$r}=Ui;class Zr extends Zi.Filter{constructor(){super(),this._fragmentSource="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Size of one pixel == vec2(1.0 / u_image.width, 1.0 / u_image.height)\nuniform vec2 u_pixelDimension;\n\n// Range (-1.0 - 1.0)\nuniform float u_clarity;\n\nvarying vec2 v_texCoord;\n\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorOffset;\n\nconst float EPSILON = 0.000001;\n\nvec4 unpremultiply(vec4 col) {\n    col.rgb /= max(col.a, EPSILON);\n    return col;\n}\n\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord);\n    color = unpremultiply(color);\n\n    // L = Left, R = Right, C = Center, T = Top, B = Bottom\n    vec4 colLB = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colLC = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,                 0.0));\n    vec4 colLT = texture2D(u_image, v_texCoord + vec2(-u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 colCL = texture2D(u_image, v_texCoord + vec2(                0.0, -u_pixelDimension.y));\n    vec4 colCR = texture2D(u_image, v_texCoord + vec2(                0.0,  u_pixelDimension.y));\n    \n    vec4 colRB = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x, -u_pixelDimension.y));\n    vec4 colRC = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,                 0.0));\n    vec4 colRT = texture2D(u_image, v_texCoord + vec2( u_pixelDimension.x,  u_pixelDimension.y));\n\n    vec4 mergedColor = color;\n    mergedColor.rgb += unpremultiply(colLB).rgb + unpremultiply(colLC).rgb + unpremultiply(colLT).rgb;\n    mergedColor.rgb += unpremultiply(colCL).rgb + unpremultiply(colCR).rgb;\n    mergedColor.rgb += unpremultiply(colRB).rgb + unpremultiply(colRC).rgb + unpremultiply(colRT).rgb;\n\n    mergedColor /= 9.0;\n\n    float grayValue = clamp(color.r * 0.3 + color.g * 0.59 + color.b * 0.1, 0.111111, 0.999999);\n    // 1.0 and 0.0 result in white not black, therefore we clamp\n\n    // Here we create a function that will map values below 0.1 to 0. Values above 0.2 will be mapped to 1,\n    // and for values between 0.1 and 0.2 it will produce a gradient.\n    // The funtion is mirror at 0.5, meaning values between 0.8 and 0.9 will result in a decending gradient.\n    // And values above 0.9 will be mapped to 0.\n    float frequenceFactor = min(smoothstep(1.0 - grayValue, 0.0, 0.11), smoothstep(grayValue, 0.0, 0.11));\n\n    // here we apply the high pass filter. Its strength is determined by the uniform ,\n    // and the frequence factor. That means the only the mid tones are affected by this filter.\n    // Clarity input is ranging from -1 to 1. But we want to strengthen the effect.\n    // Therefore we see this little magic number '3.7'.\n    color.rgb = clamp(color + clamp((color - mergedColor) * u_clarity * 3.7 * frequenceFactor, 0.0, 10.0), 0.0, 1.0).rgb;\n\n    // apply exposure but only to the mid tones.\n    color.rgb = color.rgb * pow(2.0, u_clarity * 0.27 * frequenceFactor);\n\n    // apply contrast and desaturation matrix\n    color.rgb = clamp(color * u_colorMatrix + u_colorOffset, 0.0, 1.0).rgb;\n\n    color.rgb *= color.a; // Premultiply alpha\n\n    gl_FragColor = clamp(color, 0.0, 1.0);\n}\n"}_applyCanvas(t,e,i,r=!1){const n=i.getContext(),o=e.getCanvas(),s=e.getContext(),{clarity:a}=this._options,{colorMatrix:l}=this._options,c=new jt(this._options.colorOffset[0],this._options.colorOffset[1],this._options.colorOffset[2],this._options.colorOffset[3]),{width:u}=o,{height:h}=o,d=s.getImageData(0,0,u,h),p=n.createImageData(u,h);this.canvasShader(d,p,a,l,c),n.putImageData(p,0,0)}canvasShader(t,e,i,r,n){const o=(t,e,i)=>Math.min(Math.max(t,e),i),s=(t,e,i)=>{const r=o((i-t)/(e-t),0,1);return r*r*(3-2*r)},a=4*t.width,{length:l}=t.data,c=l-1,u=t.data,h=e.data,d=new jt,p=2295,f=t=>u[t=(t=t<0?0:t)>c?c:t];for(let t=0;t<l;t+=4){let e=f(t+0),n=f(t+1),l=f(t+2),c=f(t+3);const u=(e+f(t-4-a+0)+f(t-4+0)+f(t-4+a+0)+f(t-a+0)+f(t+a+0)+f(t+4-a+0)+f(t+4+0)+f(t+4+a))/p,m=(n+f(t-4-a+1)+f(t-4+1)+f(t-4+a+1)+f(t-a+1)+f(t+a+1)+f(t+4-a+1)+f(t+4+1)+f(t+4+a+1))/p,g=(l+f(t-4-a+2)+f(t-4+2)+f(t-4+a+2)+f(t-a+2)+f(t+a+2)+f(t+4-a+2)+f(t+4+2)+f(t+4+a+2))/p,_=(c+f(t-4-a+3)+f(t-4+3)+f(t-4+a+3)+f(t-a+3)+f(t+a+3)+f(t+4-a+3)+f(t+4+3)+f(t+4+a+3))/p;e/=255,n/=255,l/=255,c/=255;const y=o(.3*e+.59*n+.1*l,.111111,.999999),v=Math.min(s(1-y,0,.11),s(y,0,.11)),b=3.7*i*v,x=Math.pow(2,.27*i*v),w=o(e+o((e-u)*b,0,10),0,1)*x,S=o(n+o((n-m)*b,0,10),0,1)*x,k=o(l+o((l-g)*b,0,10),0,1)*x,C=o(c+o((c-_)*b,0,10),0,1);d.set(w,S,k,C);const T=r.apply(d).clamp(0,1);h[t+0]=255*T.r,h[t+1]=255*T.g,h[t+2]=255*T.b,h[t+3]=255*T.a}}}Zr.prototype.availableOptions={clarity:{type:ft.NUMBER,default:0,uniformType:mt.FLOAT},pixelDimension:{type:ft.VECTOR2,default:new Vr(100,100),uniformType:mt.FLOAT2},colorMatrix:{type:ft.COLOR_MATRIX,default:new $r,uniformType:mt.MAT4},colorOffset:{type:ft.ARRAY,default:[],uniformType:mt.FLOAT4}};var Xr=Zr;const{Vector2:Yr}=Ui;class qr extends Zi.Filter{constructor(){super(),this._fragmentSource="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec2 u_pixelDimension;\nuniform float u_sharpness;\n \nconst float EPSILON = 0.000001;\n \nvoid main() {\n    vec4 color = clamp(texture2D(u_image, v_texCoord), 0.0, 1.0);\n\n    float factor        = mix(0.2, -1.0, float(u_sharpness > 0.0));\n    vec4 sharpenedColor = mix(0.2,  5.0, float(u_sharpness > 0.0)) * color;\n \n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2(-1.0,  0.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0, -1.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 0.0,  1.0)), 0.0, 1.0);\n    sharpenedColor += factor * clamp(texture2D(u_image, v_texCoord + u_pixelDimension * vec2( 1.0,  0.0)), 0.0, 1.0);\n \n    color.rgb /= max(color.a, EPSILON); // unpremultiply\n    sharpenedColor.rgb /= max(sharpenedColor.a, EPSILON); // unpremultiply\n \n    sharpenedColor = clamp(sharpenedColor, 0.0, 1.0);\n \n    color = clamp(mix(color, sharpenedColor, abs(u_sharpness)), 0.0, 1.0);\n      \n    gl_FragColor = vec4(color.rgb * color.a, color.a); // premultiply\n}"}_applyCanvas(t,e,i,r=!1){const n=i.getContext(),o=e.getCanvas(),s=e.getContext(),{sharpness:a}=this._options,{width:l}=o,{height:c}=o,u=s.getImageData(0,0,l,c),h=n.createImageData(l,c);this.canvasShader(u,h,a),n.putImageData(h,0,0)}canvasShader(t,e,i){const r=(t,e,i)=>Math.min(Math.max(t,e),i),{width:n}=t,{height:o}=t,s=t.data,a=e.data,l=(t,e,i)=>t*(1-i)+e*i,c=t=>r(s[t]/255,0,1),u=(t,e)=>{const i=r(t,0,n-1),s=r(e,0,o-1);return 4*(i+n*s)},h=[],d=[],p=[-1,0,0,1],f=[0,-1,1,0],m=i>0?-1:.2,g=i>0?5:.2,_=Math.abs(i);for(let t=0;t<n;t++)for(let e=0;e<o;e++){const i=u(t,e);h[0]=c(i+0),h[1]=c(i+1),h[2]=c(i+2),h[3]=c(i+3),d[0]=g*h[0]*h[3],d[1]=g*h[1]*h[3],d[2]=g*h[2]*h[3],d[3]=g*h[3];for(let i=0;i<4;i++){const r=u(t+p[i],e+f[i]),n=c(r+3);d[3]+=m*n;for(let t=0;t<3;t++)d[t]+=m*c(r+t)*n}for(let t=0;t<3;t++)d[t]/=Math.max(d[3],1e-6),d[t]=r(d[t],0,1);d[3]=r(d[3],0,1);for(let t=0;t<4;t++)h[t]=r(l(h[t],d[t],_),0,1),a[i+t]=255*h[t]}}}qr.prototype.availableOptions={sharpness:{type:ft.NUMBER,default:0,uniformType:mt.FLOAT},pixelDimension:{type:ft.VECTOR2,default:new Yr(100,100),uniformType:mt.FLOAT2}};var Kr=qr;const{Vector3:Qr}=Ui;class Jr extends Zi.Filter{constructor(){super(),this._fragmentSource="precision mediump float;\n\n// Input Image with config WRAP_S and WRAP_T: CLAMP_TO_EDGE\nuniform sampler2D u_image;\n\n// Range (-1.0 - 1.0)\nuniform float u_temperature;\n\nconst lowp vec3 warmFilter = vec3(0.93, 0.54, 0.0);\n\nconst mediump mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.596, -0.274, -0.322, 0.212, -0.523, 0.311);\nconst mediump mat3 YIQtoRGB = mat3(1.0, 0.956, 0.621, 1.0, -0.272, -0.647, 1.0, -1.105, 1.702);\n\nconst float EPSILON = 0.0000001;\n\nvarying vec2 v_texCoord;\nvoid main() {\n  float temperature = u_temperature;\n  const float tint = 0.0;\n  vec4 source = texture2D(u_image, v_texCoord);\n\n  source.rgb /= max(source.a, EPSILON);   // Revert premultiplied alpha\n\n  vec3 yiq = RGBtoYIQ * source.rgb;\n  yiq.b = clamp(yiq.b + tint*0.5226*0.1, -0.5226, 0.5226);\n  vec3 rgb = YIQtoRGB * yiq;\n\n  vec3 processed = mix(\n    (1.0 - 2.0 * (1.0 - rgb) * (1.0 - warmFilter)),\n    (2.0 * rgb * warmFilter),\n    vec3(rgb.r < 0.5, rgb.g < 0.5, rgb.b < 0.5)\n  );\n\n  vec4 color = vec4(mix(rgb, processed, temperature), source.a);\n\n  color.rgb *= color.a;   // Premultiply alpha again\n\n  gl_FragColor = color;\n}\n"}_applyCanvas(t,e,i,r=!1){const n=i.getContext(),o=e.getCanvas(),s=e.getContext(),{temperature:a}=this._options,{width:l}=o,{height:c}=o,u=s.getImageData(0,0,l,c),h=n.createImageData(l,c);this.canvasShader(u,h,a),n.putImageData(h,0,0)}canvasShader(t,e,i){const r=(t,e,i)=>Math.min(Math.max(t,e),i),n=(t,e,i)=>t*(1-i)+e*i,o=(t,e)=>[t[0]*e[0]+t[3]*e[1]+t[6]*e[2],t[1]*e[0]+t[4]*e[1]+t[7]*e[2],t[2]*e[0]+t[5]*e[1]+t[8]*e[2]],{length:s}=t.data,a=s-1,l=t.data,c=e.data,u=t=>l[t=(t=t<0?0:t)>a?a:t],h=[.93,.54,0],d=[.299,.587,.114,.596,-.274,-.322,.212,-.523,.311],p=[1,.956,.621,1,-.272,-.647,1,-1.105,1.702];for(let t=0;t<s;t+=4){const e=u(t+0)/255,s=u(t+1)/255,a=u(t+2)/255,l=u(t+3)/255,f=o(d,[e,s,a]);f.z=r(f.z+0,-.5226,.5226);const m=o(p,f),g=[m[0]<.5?2*m[0]*h[0]:1-2*(1-m[0])*(1-h[0]),m[1]<.5?2*m[1]*h[1]:1-2*(1-m[1])*(1-h[1]),m[2]<.5?2*m[2]*h[2]:1-2*(1-m[2])*(1-h[2])];c[t+0]=255*n(m[0],g[0],i),c[t+1]=255*n(m[1],g[1],i),c[t+2]=255*n(m[2],g[2],i),c[t+3]=255*l}}}Jr.prototype.availableOptions={temperature:{type:ft.NUMBER,default:0,uniformType:mt.FLOAT}};var tn=Jr;const{ColorMatrix:en}=Ui;class rn extends _r{constructor(...t){super(...t),this._clarityFilter=new Xr,this._temperatureFilter=new tn,this._sharpnessFilter=new Kr,this._filter=new Gr,this._sprite.setFilters([this._clarityFilter,this._temperatureFilter,this._filter])}_render(t){const e=t.getDimensions();e.x=1/e.x,e.y=1/e.y;const i=new en;i.multiply(en.createSaturationMatrix(-.3*this._options.clarity+1)),i.multiply(en.createContrastMatrix(.1*this._options.clarity+1)),this._clarityFilter.set({clarity:this._options.clarity,pixelDimension:e,colorMatrix:i,colorOffset:i.getOffsets()}),this._temperatureFilter.set({temperature:this._options.temperature}),this._sharpnessFilter.set({sharpness:this._options.sharpness,pixelDimension:e});const r=new en;r.multiply(en.createExposureMatrix(this._options.exposure)),r.multiply(en.createSaturationMatrix(this._options.saturation+1)),r.multiply(en.createContrastMatrix((this._options.contrast>0?2*this._options.contrast:this._options.contrast)+1)),r.multiply(en.createBrightnessMatrix(this._options.brightness)),this._filter.set({gamma:this._options.gamma,shadows:this._options.shadows,highlights:this._options.highlights,whites:this._options.whites,blacks:this._options.blacks,colorMatrix:r,colorOffset:r.getOffsets()});const n=[];return 0!==this._options.clarity&&n.push(this._clarityFilter),0!==this._options.sharpness&&n.push(this._sharpnessFilter),0!==this._options.temperature&&n.push(this._temperatureFilter),n.push(this._filter),this._sprite.setFilters(n),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._filter.dispose(),this._clarityFilter.dispose(),this._temperatureFilter.dispose(),this._sharpnessFilter.dispose()}}rn.identifier="adjustments",rn.prototype.availableOptions={brightness:{type:ft.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},saturation:{type:ft.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},contrast:{type:ft.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},gamma:{type:ft.NUMBER,default:1,minValue:.5,midValue:1,maxValue:2},exposure:{type:ft.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},shadows:{type:ft.NUMBER,default:0,minValue:-2,midValue:0,maxValue:2},highlights:{type:ft.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},clarity:{type:ft.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},whites:{type:ft.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},blacks:{type:ft.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},temperature:{type:ft.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1},sharpness:{type:ft.NUMBER,default:0,minValue:-1,midValue:0,maxValue:1}},Lr.Operations.AdjustmentsOperation=rn;var nn=rn;const{Vector2:on}=Ui;class sn extends Zi.Filter{constructor(...t){super(...t),this._fragmentSource="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n    float radius = u_blurRadius;\n\n    const float steps = 30.0;\n\n    for (float t = -steps; t <= steps; t++) {\n        float percent = (t + offset - 0.5) / steps;\n        float weight = 1.0 - abs(percent);\n\n        // Somehow `sample` is a keyword in headless-gl\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n",this._lastBlurRadius=null,this._lastDimensions=new on(0,0),this._blurredRenderTarget=new Zi.CanvasRenderTarget(100,100,1)}_applyCanvas(t,e,i,r=!1,n=null){if("low"===this._options.blurQuality)return void this._renderLQBlur(t,e,i,r);const o=e.getCanvas(),s=e.getContext(),a=i.getContext();this._lastBlurRadius===this._options.blurRadius&&a.drawImage(o,0,0);const l=s.getImageData(0,0,o.width,o.height),c=a.getImageData(0,0,o.width,o.height);let u=this._options.blurRadius;const{delta:h}=this._options;for(let t=0;t<o.width;t++)for(let e=0;e<o.height;e++){const i=4*(t+e*o.width);let r=0,s=0,a=0,d=0,p=0;n&&(u=n(t/o.width,e/o.height));const f=this._random(t,1-e/o.height);for(let i=-30;i<=30;i++){const n=(i+f-.5)/30,c=1-Math.abs(n),m=h.x*n*u,g=h.y*n*u,_=Math.max(Math.min(t+m,o.width-1),0),y=Math.max(Math.min(e+g,o.height-1),0),v=4*(Math.round(y)*o.width+Math.round(_)),b=l.data[v+3],x=b*l.data[v],w=b*l.data[v+1],S=b*l.data[v+2];r+=x*c,s+=w*c,a+=S*c,d+=b*c,p+=c}r/=p,s/=p,a/=p,d/=p,c.data[i]=r/d,c.data[i+1]=s/d,c.data[i+2]=a/d,c.data[i+3]=d}a.putImageData(c,0,0),this._lastDimensions.copy(new on(o.width,o.height))}_renderLQBlur(t,e,i,r){const n=e.getDimensions(),o=!this._lastDimensions.equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),i.setPixelRatio(e.getPixelRatio()),i.resizeTo(e.getDimensions()),(this._lastBlurRadius!==this._options.blurRadius||o)&&(this._blurImage(e,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius);i.getContext().drawImage(this._blurredRenderTarget.getCanvas(),0,0),this._lastDimensions.copy(n)}_random(t,e){const i=12.9898*t+78.233*e,r=i-3.14*Math.floor(i/3.14),n=43758.5453*Math.sin(r);return n-Math.floor(n)}}sn.prototype.availableOptions={blurRadius:{type:ft.NUMBER,default:30,uniformType:mt.FLOAT},delta:{type:ft.VECTOR2,default:new on(1,1),uniformType:mt.FLOAT2},texSize:{type:ft.VECTOR2,default:new on(100,100),uniformType:mt.FLOAT2},blurQuality:{type:ft.STRING,default:"low"}};var an=sn;const{Vector2:ln}=Ui;class cn extends _r{constructor(...t){super(...t),this._lastBlurRadius=this._options.blurRadius;const e={blurQuality:{type:ft.STRING}};this._horizontalFilter=new an({},e),this._verticalFilter=new an({},e),this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new ln(.5,.5)),this._verticalFilter.setDelta(new ln(-.5,.5)),this._filter=new an({},e)}_renderWebGL(t){return this._renderBlur(t)}_renderCanvas(t){return this._options.highQualityCanvasBlur?this._renderBlur(t):this._renderLQCanvasBlur(t)}_renderBlur(t){const e=t.getDimensions(),i=e.min(),{blurRadius:r}=this._options,n={blurRadius:r*i,texSize:e,blurQuality:"high"};return this._horizontalFilter.set(n),this._verticalFilter.set(n),this._renderTexture.render(this._container),Promise.resolve()}_renderLQCanvasBlur(t){const{blurRadius:e}=this._options,i=t.getDimensions();return this._filter.set({blurRadius:e,texSize:i,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}transform(t){const e=this.getBlurRadius(),i=t.applyToRelativeSize(e);this.set({blurRadius:i},!1)}dispose(){super.dispose(),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}hasChanges(){return!0}}cn.identifier="blur",cn.prototype.availableOptions={blurRadius:{type:ft.NUMBER,default:.025},highQualityCanvasBlur:{type:ft.BOOLEAN,default:!1}},Lr.Operations.BlurOperation=cn;var un=cn;const hn={};S(hn,{A15Filter:()=>mo,BWFilter:()=>vo,BWHardFilter:()=>xo,BreezeFilter:()=>_o,CelsiusFilter:()=>So,ChestFilter:()=>Co,DuoToneFilter:()=>Eo,FixieFilter:()=>Do,FoodFilter:()=>Oo,FridgeFilter:()=>Fo,FrontFilter:()=>Po,GlamFilter:()=>zo,GobblinFilter:()=>No,IdentityFilter:()=>po,K1Filter:()=>jo,K2Filter:()=>Wo,K6Filter:()=>Vo,KDynamicFilter:()=>Zo,LUTFilter:()=>ws,LeninFilter:()=>Yo,LomoFilter:()=>Ko,MellowFilter:()=>Jo,MetalFilter:()=>is,MorningFilter:()=>ns,OrchidFilter:()=>ss,Pola669Filter:()=>us,PolaFilter:()=>ls,QuoziFilter:()=>ds,SemiredFilter:()=>fs,SunnyFilter:()=>gs,TexasFilter:()=>ys,ThreeDLUTFilter:()=>ks,X400Filter:()=>bs});class dn extends Zi.Filter{constructor(){super(),this._fragmentSource="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filteredImage;\nuniform float u_intensity;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filteredImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, u_intensity);\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=i.getContext(),{filteredCanvas:s}=this._options;o.save(),o.globalAlpha=1-this._options.intensity,o.drawImage(n,0,0),o.globalAlpha=this._options.intensity,o.drawImage(s,0,0),o.restore()}}dn.prototype.availableOptions={filteredImage:{type:ft.NUMBER,default:1,uniformType:mt.INT},filteredCanvas:{type:ft.OBJECT,default:null},intensity:{type:ft.NUMBER,default:1,uniformType:mt.FLOAT}};var pn=class{constructor(t=1){this._intensity=t,this._stack=[],this._dirtiness={},this._renderTextures={},this._container=new Zi.Container,this._sprite=new Zi.Sprite,this._container.addChild(this._sprite),this._blendFilter=new dn}push(t){this._stack.push(t)}clear(){this._stack=[]}render(t,e,i){if(this.isEmpty())return Promise.resolve();const r=t.getRenderer();this._sprite.setTexture(e);let n=this._renderTextures[r.id];if(!n){const e=t.getSprite().getTexture().getFrame();n=new Zi.RenderTexture(t.getRenderer(),e.width,e.height),this._renderTextures[r.id]=n}const o=i.getDimensions();n.resizeTo(o);const s=this.isDirtyForRenderer(r);if(s){this._stack.forEach((e=>{e.update(t)}));const e=this._stack.map((t=>t.getFilter()));this._sprite.setFilters(e),n.render(this._container),this.setDirtyForRenderer(!1,r)}if(this._blendFilter.setIntensity(this._intensity),r.isOfType(gt.CANVAS))this._blendFilter.setFilteredCanvas(n.getRenderTarget().getCanvas());else if(r.isOfType(gt.WEBGL)){const t=n.getBaseTexture();t.setGLUnit(this._blendFilter.getFilteredImage()),r.updateTexture(t,!1)}return this._sprite.setFilters([this._blendFilter]),i.clear(jt.TRANSPARENT),i.render(this._container),s&&this.disposeRenderTextures(),Promise.resolve()}setIntensity(t){this._intensity=t}isEmpty(){return 0===this._stack.length}isDirtyForRenderer(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]}setDirtyForRenderer(t,e){this._dirtiness[e.id]=t}setDirty(t){for(const e in this._dirtiness)this._dirtiness[e]=t}disposeRenderTextures(){for(const t in this._renderTextures)this._renderTextures[t].dispose(),delete this._renderTextures[t]}dispose(){this.disposeRenderTextures(),this._stack.forEach((t=>t.dispose())),this._stack=[],this._blendFilter.dispose(),this._sprite.dispose()}};class fn extends ae{constructor(t={},e={}){super(t,b({intensity:{type:ft.NUMBER,default:1,setter(t){return this._stack&&this._stack.setIntensity(t),t}},dirty:{type:ft.BOOLEAN,default:!0}},e)),this._stack=new pn(this._options.intensity)}render(t,e,i){return this._stack.render(t,e,i).then((t=>(this.setDirty(!1),t)))}setDirtyForRenderer(t,e){this._stack.setDirtyForRenderer(t,e)}disposeRenderTextures(){this._stack.disposeRenderTextures()}dispose(){this._stack.dispose()}}fn.identifier=null,fn.isIdentity=!1,fn.displayName=null,fn.PrimitivesStack=pn;var mn=fn;const gn={};S(gn,{Brightness:()=>bn,ColorMatrixPrimitive:()=>En,Contrast:()=>Sn,Desaturation:()=>In,DuoTone:()=>Fn,Gamma:()=>Bn,Glow:()=>Nn,Gobblin:()=>jn,Grayscale:()=>Wn,LookupTable:()=>Vn,LookupTableImage:()=>Yn,Saturation:()=>Qn,SoftColorOverlay:()=>eo,ThreeDLookupTableImage:()=>uo,ToneCurve:()=>ro,X400:()=>oo});var _n=class extends ae{update(){}getFilter(){return this._filter}dispose(){this._filter&&(this._filter.dispose(),this._filter=null)}};class yn extends Zi.Filter{constructor(){super(),this._fragmentSource="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_brightness;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4((texColor.rgb + vec3(u_brightness) * texColor.a), texColor.a);;\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),a=o.getImageData(0,0,n.width,n.height);let{brightness:l}=this._options;if(0!==l){l*=255;for(let t=0;t<n.width*n.height;t++){const e=4*t;a.data[e]+=l,a.data[e+1]+=l,a.data[e+2]+=l}s.putImageData(a,0,0)}else s.putImageData(a,0,0)}}yn.prototype.availableOptions={brightness:{type:ft.NUMBER,default:0,uniformType:mt.FLOAT}};class vn extends _n{constructor(...t){super(...t),this._filter=new yn}update(){this._filter.setBrightness(this._options.brightness)}}vn.prototype.availableOptions=yn.prototype.availableOptions;var bn=vn;class xn extends Zi.Filter{constructor(){super(),this._fragmentSource="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_contrast;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = vec4(((texColor.rgb - vec3(0.5)) * u_contrast + vec3(0.5) * texColor.a), texColor.a);\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),a=o.getImageData(0,0,n.width,n.height),{contrast:l}=this._options;if(1!==l){for(let t=0;t<n.width*n.height;t++){const e=4*t;a.data[e]=(a.data[e]-127)*l+127,a.data[e+1]=(a.data[e+1]-127)*l+127,a.data[e+2]=(a.data[e+2]-127)*l+127}s.putImageData(a,0,0)}}}xn.prototype.availableOptions={contrast:{type:ft.NUMBER,default:1,uniformType:mt.FLOAT}};class wn extends _n{constructor(...t){super(...t),this._filter=new xn}update(){this._filter.setContrast(this._options.contrast)}}wn.prototype.availableOptions=xn.prototype.availableOptions;var Sn=wn;const{ColorMatrix:kn}=Ui;class Cn extends Zi.Filter{constructor(){super(),this._fragmentSource="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform mat4 u_colorMatrix;\nuniform vec4 u_colorMatrixOffset;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = texColor * u_colorMatrix + u_colorMatrixOffset;\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),a=o.getImageData(0,0,n.width,n.height),{colorMatrix:l}=this._options;let c=new jt(0,0,0,0);for(let t=0;t<n.width*n.height;t++){const e=4*t;c.r=a.data[e]/255,c.g=a.data[e+1]/255,c.b=a.data[e+2]/255,c=l.apply(c),a.data[e]=255*c.r,a.data[e+1]=255*c.g,a.data[e+2]=255*c.b}s.putImageData(a,0,0)}}Cn.prototype.availableOptions={colorMatrix:{type:ft.COLOR_MATRIX,default:new kn,uniformType:mt.MAT4},colorMatrixOffset:{type:ft.ARRAY,default:[],uniformType:mt.FLOAT4}};class Tn extends _n{constructor(...t){super(...t),this._filter=new Cn}update(){this._filter.setColorMatrix(this._options.colorMatrix)}}Tn.prototype.availableOptions=Cn.prototype.availableOptions;var En=Tn;class Rn extends Zi.Filter{constructor(){super(),this._fragmentSource="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_desaturation;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = vec3(dot(grayXfer, texColor.xyz));\n  gl_FragColor = vec4(mix(texColor.xyz, gray, u_desaturation) * texColor.a, texColor.a);\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),a=o.getImageData(0,0,n.width,n.height),l=[.3,.59,.11],{desaturation:c}=this._options;for(let t=0;t<n.width*n.height;t++){const e=4*t,i=l[0]*a.data[e]/255+l[1]*a.data[e+1]/255+l[2]*a.data[e+2]/255;a.data[e]+=(255*i-a.data[e])*c,a.data[e+1]+=(255*i-a.data[e+1])*c,a.data[e+2]+=(255*i-a.data[e+2])*c}s.putImageData(a,0,0)}}Rn.prototype.availableOptions={desaturation:{type:ft.NUMBER,default:1,uniformType:mt.FLOAT}};class Dn extends _n{constructor(...t){super(...t),this._filter=new Rn}update(){this._filter.setDesaturation(this._options.desaturation)}}Dn.prototype.availableOptions=Rn.prototype.availableOptions;var In=Dn;class On extends Zi.Filter{constructor(){super(),this._fragmentSource='precision highp float;\n\nuniform sampler2D u_image;\nuniform vec4 u_lightColor;\nuniform vec4 u_darkColor;\nuniform float u_intensity;\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.0000001;\nconst vec3 GRAYSCALE_WEIGHTS = vec3(0.2126, 0.7152, 0.0722);\n\nvec4 duotoneKernel(vec4 sampledCol, vec4 light, vec4 dark, float intensity) {\n  vec4 color = clamp(sampledCol, 0.0, 1.0);\n  color.rgb /= max(color.a, EPSILON);\n  color = clamp(color, 0.0, 1.0); // necessary to get rid of all extended sRGB issues with OpenGL ES\n \n  // Apply intensity as "symmetric gamma"\n  if (intensity > 0.0) {\n    color.rgb = 1.0 - pow(1.0 - color.rgb, vec3(max(intensity + 1.0, EPSILON)));\n  } else {\n    color.rgb = pow(color.rgb, vec3(max(-intensity + 1.0, EPSILON)));\n  }\n \n  // Colorimetric (perceptual luminance-preserving) RGB to grayscale conversion\n  // https://en.wikipedia.org/wiki/Grayscale#Colorimetric_(perceptual_luminance-preserving)_conversion_to_grayscale\n  float luminance = dot(GRAYSCALE_WEIGHTS, color.rgb);\n \n  // Apply DuoTone\n  vec4 duotone = mix(dark, light, clamp(luminance, 0.0, 1.0));\n  duotone.a *= color.a;\n  \n  duotone.rgb *= duotone.a;\n\n  return duotone;\n}\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor = duotoneKernel(texColor, u_lightColor, u_darkColor, u_intensity);\n}'}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),a=o.getImageData(0,0,n.width,n.height),{lightColor:l,darkColor:c,intensity:u}=this._options;for(let t=0;t<n.width*n.height;t++){const e=4*t,i=a.data[e]/255,r=a.data[e+1]/255,n=a.data[e+2]/255,o=a.data[e+3]/255,s=new jt(i,r,n,o),h=this._duoToneKernel(s,l,c,u);a.data[e]=255*h.r,a.data[e+1]=255*h.g,a.data[e+2]=255*h.b,a.data[e+3]=255*h.a}s.putImageData(a,0,0)}_duoToneKernel(t,e,i,r){if(t.clone().clamp(0,1),r>0){const e=Math.max(r+1,1e-7);t.r=1-Math.pow(1-t.r,e),t.g=1-Math.pow(1-t.g,e),t.b=1-Math.pow(1-t.b,e)}else{const e=Math.max(1-r,1e-7);t.r=Math.pow(t.r,e),t.g=Math.pow(t.g,e),t.b=Math.pow(t.b,e)}const n=.2126*t.r+.7152*t.g+.0722*t.b,o=Math.min(Math.max(n,0),1),s=i.clone().mix(e,o);return s.a*=t.a,s}}On.prototype.availableOptions={lightColor:{type:ft.COLOR,default:jt.RED,uniformType:mt.FLOAT4},darkColor:{type:ft.COLOR,default:jt.BLACK,uniformType:mt.FLOAT4},intensity:{type:ft.NUMBER,default:.5,uniformType:mt.FLOAT}};class An extends _n{constructor(...t){super(...t),this._filter=new On}update(){this._filter.setLightColor(this._options.lightColor),this._filter.setDarkColor(this._options.darkColor);const t=2*this._options.intensity-1;this._filter.setIntensity(t)}}An.prototype.availableOptions=On.prototype.availableOptions;var Fn=An;class Mn extends Zi.Filter{constructor(){super(),this._fragmentSource="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_gamma;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec3 rgb = vec3(texColor.r, texColor.g, texColor.b);\n  rgb = pow(rgb, u_gamma);\n  gl_FragColor = vec4(rgb * texColor.a, texColor.a);;\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),a=o.getImageData(0,0,n.width,n.height),{gamma:l}=this._options,c=new Float32Array(256);for(let t=0;t<256;t++)c[t]=255*Math.pow(t/255,l.r);const u=new Float32Array(256);for(let t=0;t<256;t++)u[t]=255*Math.pow(t/255,l.g);const h=new Float32Array(256);for(let t=0;t<256;t++)h[t]=255*Math.pow(t/255,l.b);for(let t=0;t<n.width*n.height;t++){const e=4*t;a.data[e]=c[a.data[e]],a.data[e+1]=u[a.data[e+1]],a.data[e+2]=h[a.data[e+2]]}s.putImageData(a,0,0)}}Mn.prototype.availableOptions={gamma:{type:ft.COLOR,default:jt.WHITE,uniformType:mt.FLOAT3}};class Pn extends _n{constructor(...t){super(...t),this._filter=new Mn}update(){this._filter.setGamma(this._options.gamma)}}Pn.prototype.availableOptions=Mn.prototype.availableOptions;var Bn=Pn;class zn extends Zi.Filter{constructor(){super(),this._fragmentSource="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n\n  vec2 textureCoord = v_texCoord - vec2(0.5, 0.5);\n  textureCoord /= 0.75;\n\n  float d = 1.0 - dot(textureCoord, textureCoord);\n  d = clamp(d, 0.2, 1.0);\n  vec3 newColor = texColor.rgb * d * u_color.rgb;\n  gl_FragColor = vec4(vec3(newColor) * texColor.a, texColor.a);\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),a=o.getImageData(0,0,n.width,n.height),{color:l}=this._options;let c;for(let t=0;t<n.width;t++)for(let e=0;e<n.height;e++){const i=4*(n.width*e+t),r=(t/n.width-.5)/.75,o=(e/n.height-.5)/.75;c=1-(r*r+o*o),c=Math.min(Math.max(c,.1),1),a.data[i]*=c*l.r,a.data[i+1]=a.data[i+1]*(c*l.g),a.data[i+2]=a.data[i+2]*(c*l.b),a.data[i+3]=255}s.putImageData(a,0,0)}}zn.prototype.availableOptions={color:{type:ft.COLOR,default:jt.WHITE,uniformType:mt.FLOAT3}};class Ln extends _n{constructor(...t){super(...t),this._filter=new zn}update(){this._filter.setColor(this._options.color)}}Ln.prototype.availableOptions=zn.prototype.availableOptions;var Nn=Ln;class Un extends Zi.Filter{constructor(){super(),this._fragmentSource="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  texColor.b = texColor.g * 0.33;\n  texColor.r = texColor.r * 0.6;\n  texColor.b += texColor.r * 0.33;\n  texColor.g = texColor.g * 0.7;\n  gl_FragColor = texColor;\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),a=o.getImageData(0,0,n.width,n.height);for(let t=0;t<n.width;t++)for(let e=0;e<n.height;e++){const i=4*(n.width*e+t);a.data[i+2]=.33*a.data[i+1],a.data[i]*=.6,a.data[i+2]+=.33*a.data[i],a.data[i+1]=.7*a.data[i+1],a.data[i+3]=255}s.putImageData(a,0,0)}}var jn=class extends _n{constructor(...t){super(...t),this._filter=new Un}};class Hn extends Zi.Filter{constructor(){super(),this._fragmentSource="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nvec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, W);\n  gl_FragColor = vec4(vec3(luminance) * texColor.a, texColor.a);\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),a=o.getImageData(0,0,n.width,n.height);for(let t=0;t<n.width;t++)for(let e=0;e<n.height;e++){const i=4*(n.width*e+t),r=.2125*a.data[i]+.7154*a.data[i+1]+.0721*a.data[i+2];a.data[i]=r,a.data[i+1]=r,a.data[i+2]=r}s.putImageData(a,0,0)}}var Wn=class extends _n{constructor(...t){super(...t),this._filter=new Hn}};class Gn extends Zi.Filter{constructor(...t){super(...t),this._fragmentSource="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float r = texture2D(u_lookupTable, vec2(texColor.r, 0.0)).r;\n  float g = texture2D(u_lookupTable, vec2(texColor.g, 0.0)).g;\n  float b = texture2D(u_lookupTable, vec2(texColor.b, 0.0)).b;\n\n  gl_FragColor = vec4(vec3(r, g, b) * texColor.a, texColor.a);\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),a=o.getImageData(0,0,n.width,n.height),l=this._options.lookupTableData;for(let t=0;t<n.width*n.height;t++){const e=4*t,i=a.data[e];a.data[e]=l[4*i];const r=a.data[e+1];a.data[e+1]=l[1+4*r];const n=a.data[e+2];a.data[e+2]=l[2+4*n]}s.putImageData(a,0,0)}}Gn.prototype.availableOptions={lookupTable:{type:ft.NUMBER,default:1,uniformType:mt.INT},lookupTableData:{type:ft.ARRAY,default:[]}};var Vn=class extends _n{constructor(...t){super(...t),this._filter=new Gn({lookupTable:this._options.textureGLUnit}),this._textures={},this._renderers={}}update(t){const e=t.getRenderer();e.isOfType(gt.WEBGL)?this._updateWebGLTexture(t):e.isOfType(gt.CANVAS)&&this._filter.setLookupTableData(this._options.data)}_updateWebGLTexture(t){if(void 0===this._options.data)throw new Error("LookupTable: No data specified.");const e=new Uint8Array(this._options.data),i=t.getRenderer(),{id:r}=i;this._renderers[r]=i,this._textures[r]||(this._textures[r]=new Zi.BaseTexture);const n=this._textures[r],o=new Zi.PixelArrayImage(256,1,e);n.setSource(o),n.setGLUnit(this._options.textureGLUnit),i.isOfType(gt.WEBGL)&&i.updateTexture(n)}dispose(){super.dispose();for(const t in this._textures)this._textures[t].dispose(),delete this._textures[t];delete this._options.data}};const{Vector2:$n}=Ui;class Zn extends Zi.Filter{constructor(){super(),this._precomputeQuads(),this._fragmentSource="/**\n * Based off of GPUImage's LookupFilter:\n * https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageLookupFilter.m\n */\n\nvarying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_lookupTable;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float blueColor = texColor.b * 63.0;\n\n  vec2 quad1;\n  quad1.y = floor(floor(blueColor) / 8.0);\n  quad1.x = floor(blueColor) - (quad1.y * 8.0);\n\n  vec2 quad2;\n  quad2.y = floor(ceil(blueColor) / 8.0);\n  quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n\n  vec2 texCoord1;\n  texCoord1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec2 texCoord2;\n  texCoord2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.r);\n  texCoord2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * texColor.g);\n\n  vec4 newColor1 = texture2D(u_lookupTable, texCoord1);\n  vec4 newColor2 = texture2D(u_lookupTable, texCoord2);\n\n  vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n  gl_FragColor = mix(texColor, vec4(newColor.rgb, texColor.w), texColor.a);\n}\n"}_precomputeQuads(){this._quads=[];for(let t=0;t<256;t++){const e=t/255*63,i=new $n;i.y=.125*(0|e)|0,i.x=(0|e)-8*i.y,this._quads.push(i)}}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),a=this._options.lookupTableImage,l=this._createImageCanvas(a).getContext("2d"),c=o.getImageData(0,0,n.width,n.height),u=l.getImageData(0,0,a.width,a.height),h=new $n;for(let t=0;t<n.width*n.height*4;t+=4){const e=c.data[t],i=c.data[t+1],r=c.data[t+2],n=c.data[t+3]/255,o=this._quads[r],s=64;h.x=o.x*s,h.y=o.y*s,h.x+=Math.floor(e/4),h.y+=Math.floor(i/4);const l=4*(a.width*h.y+h.x)|0;let d=u.data[l];d=e*(1-n)+d*n;let p=u.data[l+1];p=i*(1-n)+p*n;let f=u.data[l+2];f=r*(1-n)+f*n,c.data[t]=d,c.data[t+1]=p,c.data[t+2]=f}s.putImageData(c,0,0)}_createImageCanvas(t){const e=It.createCanvas();e.width=t.width,e.height=t.height;return e.getContext("2d").drawImage(t,0,0),e}}Zn.prototype.availableOptions={lookupTable:{type:ft.NUMBER,default:3,uniformType:mt.INT},lookupTableImage:{type:ft.IMAGE,uniformType:null}};class Xn extends _n{constructor(...t){super(...t),this._filter=new Zn,this._textures={}}update(t){const e=t.getRenderer();e.isOfType(gt.WEBGL)?this._updateWebGLTexture(t):e.isOfType(gt.CANVAS)&&this._filter.setLookupTableImage(this._options.image)}_updateWebGLTexture(t){const e=t.getRenderer(),{id:i}=e;this._textures[i]||(this._textures[i]=new Zi.BaseTexture);const r=this._textures[i];r.setSource(this._options.image),r.setGLUnit(3),e.updateTexture(r)}dispose(){super.dispose();for(const t in this._textures)delete this._textures[t]}}Xn.prototype.availableOptions={image:{type:ft.IMAGE}};var Yn=Xn;class qn extends Zi.Filter{constructor(){super(),this._fragmentSource="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform float u_saturation;\n\nconst vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float luminance = dot(texColor.rgb, luminanceWeighting);\n\n  vec3 greyScaleColor = vec3(luminance);\n\n  gl_FragColor = vec4(mix(greyScaleColor, texColor.rgb, u_saturation) * texColor.a, texColor.a);\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),a=o.getImageData(0,0,n.width,n.height),{saturation:l}=this._options;for(let t=0;t<n.width;t++)for(let e=0;e<n.height;e++){const i=4*(n.width*e+t),r=.2125*a.data[i]+.7154*a.data[i+1]+.0721*a.data[i+2];a.data[i]=r*(1-l)+a.data[i]*l,a.data[i+1]=r*(1-l)+a.data[i+1]*l,a.data[i+2]=r*(1-l)+a.data[i+2]*l}s.putImageData(a,0,0)}}qn.prototype.availableOptions={saturation:{type:ft.NUMBER,default:0,uniformType:mt.FLOAT}};class Kn extends _n{constructor(...t){super(...t),this._filter=new qn}update(){this._filter.setSaturation(this._options.saturation)}}Kn.prototype.availableOptions=qn.prototype.availableOptions;var Qn=Kn;class Jn extends Zi.Filter{constructor(){super(),this._fragmentSource="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform vec3 u_color;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  vec4 overlayVec4 = vec4(u_color, texColor.a);\n  gl_FragColor = max(overlayVec4 * texColor.a, texColor);\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),a=o.getImageData(0,0,n.width,n.height);for(let t=0;t<n.width;t++)for(let e=0;e<n.height;e++){const i=4*(n.width*e+t);a.data[i]=Math.max(255*this._options.color.r,a.data[i]),a.data[i+1]=Math.max(255*this._options.color.g,a.data[i+1]),a.data[i+2]=Math.max(255*this._options.color.b,a.data[i+2])}s.putImageData(a,0,0)}}Jn.prototype.availableOptions={color:{type:ft.COLOR,default:jt.WHITE,uniformType:mt.FLOAT3}};class to extends _n{constructor(...t){super(...t),this._filter=new Jn}update(){this._filter.setColor(this._options.color)}}to.prototype.availableOptions=Jn.prototype.availableOptions;var eo=to;class io extends Vn{constructor(...t){super(...t),this._options.rgbControlPoints||(this._options.rgbControlPoints={red:this._options.controlPoints,green:this._options.controlPoints,blue:this._options.controlPoints}),this._updateLookupTable()}_updateLookupTable(){const t=this._calculateSplineCurve(this._options.rgbControlPoints.red),e=this._calculateSplineCurve(this._options.rgbControlPoints.green),i=this._calculateSplineCurve(this._options.rgbControlPoints.blue);this._options.data=this._buildLookupTable(t,e,i)}_buildLookupTable(t,e,i){const r=[];for(let n=0;n<256;n++)r.push(Math.min(Math.max(n+t[n],0),255)),r.push(Math.min(Math.max(n+e[n],0),255)),r.push(Math.min(Math.max(n+i[n],0),255)),r.push(255);return r}_calculateSplineCurve(t){t=t.sort((function(t,e){return t[0]>e[0]}));const e=this._getSplineCurve(t),i=e[0];let r;if(i[0]>0)for(r=0;r<i[0];r++)e.unshift([0,0]);const n=[];for(r=0;r<e.length;r++){const t=e[r],i=[t[0],t[0]];let o=Math.sqrt(Math.pow(i[0]-t[0],2)+Math.pow(i[1]-t[1],2));i[1]>t[1]&&(o=-o),n.push(o)}return n}_getSplineCurve(t){const e=this._secondDerivative(t),i=e.length,r=[];let n;for(n=0;n<i;n++)r[n]=e[n];const o=[];for(n=0;n<i-1;n++){const e=t[n],i=t[n+1];for(let t=e[0];t<i[0];t++){const s=(t-e[0])/(i[0]-e[0]),a=1-s,l=s,c=i[0]-e[0];let u=a*e[1]+l*i[1]+c*c/6*((a*a*a-a)*r[n]+(l*l*l-l)*r[n+1]);u>255?u=255:u<0&&(u=0),o.push([t,u])}}return 255===o.length&&o.push(t[t.length-1]),o}_secondDerivative(t){const e=t.length;if(e<=0||1===e)return null;const i=[],r=[];let n,o;for(i[0]=[0,1,0],n=1;n<e-1;n++){const e=t[n-1],o=t[n],s=t[n+1];i[n]=i[n]||[],i[n][0]=(o[0]-e[0])/6,i[n][1]=(s[0]-e[0])/3,i[n][2]=(s[0]-o[0])/6,r[n]=(s[1]-o[1])/(s[0]-o[0])-(o[1]-e[1])/(o[0]-e[0])}for(r[0]=0,r[e-1]=0,i[e-1]=[0,1,0],n=1;n<e;n++)o=i[1][0]/i[n-1][1],i[n][1]-=o*i[n-1][2],i[n][0]=0,r[n]-=o*r[n-1];for(n=e-2;n>0;n--)o=i[n][2]/i[n+1][1],i[n][1]-=o*i[n+1][0],i[n][2]=0,r[n]-=o*r[n+1];const s=[];for(n=0;n<e;n++)s[n]=r[n]/i[n][1];return s}}io.prototype.availableOptions={rgbControlPoints:{type:ft.OBJECT},controlPoints:{type:ft.ARRAY,default:[]},textureGLUnit:{type:ft.NUMBER,default:1}};var ro=io;class no extends Zi.Filter{constructor(){super(),this._fragmentSource="varying vec2 v_texCoord;\nuniform sampler2D u_image;\n\nvoid main() {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  float gray = texColor.r * 0.3 + texColor.g * 0.3 + texColor.b * 0.3;\n  gray -= 0.2;\n  gray = clamp(gray, 0.0, 1.0);\n  gray += 0.15;\n  gray *= 1.4;\n  gl_FragColor = vec4(vec3(gray) * texColor.a, texColor.a);\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),a=o.getImageData(0,0,n.width,n.height);for(let t=0;t<n.width;t++)for(let e=0;e<n.height;e++){const i=4*(n.width*e+t);let r=a.data[i]/255*.3+a.data[i+1]/255*.3+a.data[i+2]/255*.3;r-=.2,r=Math.max(0,Math.min(1,r)),r+=.15,r*=1.4,r*=255,a.data[i]=r,a.data[i+1]=r,a.data[i+2]=r}s.putImageData(a,0,0)}}var oo=class extends _n{constructor(...t){super(...t),this._filter=new no}};const{Vector2:so,Vector3:ao}=Ui;class lo extends Zi.Filter{constructor(){super(),this._precomputeQuads(),this._fragmentSource="precision highp float;\n\nuniform sampler2D u_image;\n\nuniform sampler2D u_lookupTable;\n\nuniform float u_resolution;     // Texture-Resolution, must be power of 2: 64, 128, 256, 512, 1024, 2048, 4096\nuniform float u_horizontalTileCount; // Horizontal Blue Tiles\nuniform float u_verticalTileCount; // Vertical Blue Tiles\n\nvarying vec2 v_texCoord;\n\nconst float EPSILON = 0.000001;\n\n// Try to get the exact pixel of the lut map image\nvec3 lutColor(int texPosX, int texPosY) {\n    return texture2D(u_lookupTable, (0.5 / u_resolution) + vec2(float(texPosX), float(texPosY)) / u_resolution).rgb;\n}\n\nvec3 bilinearInterpolate(vec3 cRfGf, vec3 cRfGc, vec3 cRcGf, vec3 cRcGc, float redFract, float greenFract) {\n    return mix(mix(cRfGf, cRcGf, redFract), mix(cRfGc, cRcGc, redFract), greenFract);\n}\n\nvoid main() {\n    vec4 inputColor = clamp(texture2D(u_image, v_texCoord.xy), 0.0, 1.0);\n\n    vec3 sourceColor = vec3(inputColor.rgb / max(inputColor.a, EPSILON)); \n\n    vec3 ranges = vec3(\n        floor(u_resolution / u_horizontalTileCount - 1.0),\n        floor(u_resolution / u_verticalTileCount - 1.0),\n        floor(u_horizontalTileCount * u_horizontalTileCount - 1.0)\n    );\n    \n    vec3 tmp = sourceColor * ranges;\n    ivec3 floors = ivec3(tmp);\n    ivec3 ceils = ivec3(ceil(tmp));\n    vec3 fracts = fract(tmp);\n\n    // Map tile index to tile pixel pos.\n    ivec2 pixelsPerTile = ivec2(\n        u_resolution / u_horizontalTileCount, \n        u_resolution / u_verticalTileCount\n      );\n\n    ivec2 tileFloor; // Blue tile index\n    tileFloor.y = floors.z / int(u_horizontalTileCount);\n    tileFloor.x = (floors.z - (tileFloor.y * int(u_horizontalTileCount)));\n\n    ivec2 tileCeil; // Blue tile index\n    tileCeil.y = ceils.z / int(u_horizontalTileCount);\n    tileCeil.x = (ceils.z - (tileCeil.y * int(u_horizontalTileCount)));\n    \n    tileFloor *= pixelsPerTile;\n    tileCeil *= pixelsPerTile; \n    \n    \n    // Interpolate between red and green\n    vec3 lutColorFB = bilinearInterpolate(\n        lutColor(tileFloor.x + floors.x, tileFloor.y + floors.y),\n        lutColor(tileFloor.x + floors.x, tileFloor.y + ceils.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + floors.y),\n        lutColor(tileFloor.x + ceils.x,  tileFloor.y + ceils.y),\n        fracts.x, fracts.y\n    );\n    vec3 lutColorCB = bilinearInterpolate(\n        lutColor(tileCeil.x + floors.x, tileCeil.y + floors.y),\n        lutColor(tileCeil.x + floors.x, tileCeil.y + ceils.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + floors.y),\n        lutColor(tileCeil.x + ceils.x,  tileCeil.y + ceils.y),\n        fracts.x, fracts.y\n    );\n\n    // Interpolate between the blue values\n    vec3 interpolation = mix(lutColorFB, lutColorCB, fracts.z);\n\n    // Round Color Values to prevent that for ex. 254.999999 is cutting to 254 instead of 255;\n    interpolation = clamp(floor(interpolation * 255. + .5) / 255., 0.0, 1.0);\n\n    gl_FragColor = vec4(interpolation.rgb * inputColor.a, inputColor.a);\n}\n"}_precomputeQuads(){this._quads=[];for(let t=0;t<256;t++){const e=t/255*63,i=new so;i.y=.125*(0|e)|0,i.x=(0|e)-8*i.y,this._quads.push(i)}}_applyCanvas(t,e,i,r=!1){const{resolution:n,horizontalTileCount:o,verticalTileCount:s}=this._options,a=e.getCanvas(),l=e.getContext(),c=i.getContext(),u=this._options.lookupTableImage,h=this._createImageCanvas(u).getContext("2d");let d={width:128,height:128};n?d={width:n,height:n}:u.width&&u.height&&(d={width:u.width,height:u.height});const p=l.getImageData(0,0,a.width,a.height),f=h.getImageData(0,0,d.width,d.height),m=new ao(d.width/o-1|0,d.height/s-1|0,o*s-1|0),g=new jt,_=new jt,y=new jt,v=new jt,b=new jt,x=new jt,w=new jt,S=new jt,k=new so,C=new so,T=(t,e,i,r)=>{t.r=e.r*(1-r)+i.r*r,t.g=e.g*(1-r)+i.g*r,t.b=e.b*(1-r)+i.b*r},E=(t,e,i)=>{e=.5+e|0;const r=4*((i=.5+i|0)*d.width+e);t.r=f.data[r]/255,t.g=f.data[r+1]/255,t.b=f.data[r+2]/255,t.a=f.data[r+3]/255},R=new jt,D=new jt,I=(t,e,i,r,n,o,s)=>{T(R,e,r,o),T(D,i,n,o),T(t,R,D,s)},O=new so(d.width,d.height).divide(o,s).floor();for(let t=0;t<a.width*a.height*4;t+=4){g.set(p.data[t]/255,p.data[t+1]/255,p.data[t+2]/255,p.data[t+3]/255);const e=new ao(g.r*m.x,g.g*m.y,g.b*m.z),i=e.clone().floor().toInt(),r=e.clone().ceil().toInt(),n=e.clone().fract();k.y=i.z/o|0,k.x=i.z-k.y*o|0,C.y=r.z/o|0,C.x=r.z-C.y*o|0,k.multiply(O),C.multiply(O),E(b,k.x+i.x,k.y+i.y),E(x,k.x+i.x,k.y+r.y),E(w,k.x+r.x,k.y+i.y),E(S,k.x+r.x,k.y+r.y),I(y,b,x,w,S,n.x,n.y),E(b,C.x+i.x,C.y+i.y),E(x,C.x+i.x,C.y+r.y),E(w,C.x+r.x,C.y+i.y),E(S,C.x+r.x,C.y+r.y),I(v,b,x,w,S,n.x,n.y),T(_,y,v,n.z),p.data[t]=Math.ceil(255*_.r),p.data[t+1]=Math.ceil(255*_.g),p.data[t+2]=Math.ceil(255*_.b)}c.putImageData(p,0,0)}_createImageCanvas(t){const e=It.createCanvas();e.width=t.width,e.height=t.height;return e.getContext("2d").drawImage(t,0,0),e}}lo.prototype.availableOptions={lookupTable:{type:ft.NUMBER,default:3,uniformType:mt.INT},lookupTableImage:{type:ft.IMAGE,uniformType:null},resolution:{type:ft.NUMBER,uniformType:mt.FLOAT},horizontalTileCount:{type:ft.NUMBER,default:5,uniformType:mt.FLOAT},verticalTileCount:{type:ft.NUMBER,default:5,uniformType:mt.FLOAT}};class co extends _n{constructor(...t){super(...t),this._filter=new lo,this._textures={}}update(t){const e=t.getRenderer();e.isOfType(gt.WEBGL)?this._updateWebGLTexture(t):e.isOfType(gt.CANVAS)&&this._filter.setLookupTableImage(this._options.image);const{resolution:i,verticalTileCount:r,horizontalTileCount:n,image:o}=this._options;this._filter.set({resolution:i||o.width,verticalTileCount:r,horizontalTileCount:n})}_updateWebGLTexture(t){const e=t.getRenderer(),{id:i}=e;this._textures[i]||(this._textures[i]=new Zi.BaseTexture);const r=this._textures[i];r.setSource(this._options.image),r.setGLUnit(3),r.setMinFilter(Zi.BaseTexture.NearestFilter),e.updateTexture(r)}dispose(){super.dispose();for(const t in this._textures)delete this._textures[t]}}co.prototype.availableOptions={image:{type:ft.IMAGE},resolution:{type:ft.NUMBER},horizontalTileCount:{type:ft.NUMBER,default:5},verticalTileCount:{type:ft.NUMBER,default:5}};var uo=co;class ho extends mn{constructor(...t){super(...t),this._stack.push(new bn({brightness:0}))}render(t,e,i){return this._stack.isEmpty()&&this._stack.push(new bn({brightness:0})),super.render(t,e,i)}}ho.isIdentity=!0,ho.identifier="identity";var po=ho;class fo extends mn{constructor(...t){super(...t),this._stack.push(new Sn({contrast:.63})),this._stack.push(new bn({brightness:.12})),this._stack.push(new ro({rgbControlPoints:{red:[[0,38],[94,94],[148,142],[175,187],[255,255]],green:[[0,0],[77,53],[171,190],[255,255]],blue:[[0,10],[48,85],[174,228],[255,255]]}}))}}fo.identifier="a15";var mo=fo;class go extends mn{constructor(...t){super(...t),this._stack.push(new In({desaturation:.5})),this._stack.push(new ro({rgbControlPoints:{red:[[0,0],[170,170],[212,219],[234,242],[255,255]],green:[[0,0],[170,168],[234,231],[255,255]],blue:[[0,0],[170,170],[212,208],[255,255]]}}))}}go.identifier="breeze";var _o=go;class yo extends mn{constructor(...t){super(...t),this._stack.push(new Wn)}}yo.identifier="bw";var vo=yo;class bo extends mn{constructor(...t){super(...t),this._stack.push(new Wn),this._stack.push(new Sn({contrast:1.5}))}}bo.identifier="bwhard";var xo=bo;class wo extends mn{constructor(...t){super(...t),this._stack.push(new ro({rgbControlPoints:{red:[[0,69],[55,110],[202,230],[255,255]],green:[[0,44],[89,93],[185,141],[255,189]],blue:[[0,76],[39,82],[218,138],[255,171]]}}))}}wo.identifier="celsius";var So=wo;class ko extends mn{constructor(...t){super(...t),this._stack.push(new ro({rgbControlPoints:{red:[[0,0],[44,44],[124,143],[221,204],[255,255]],green:[[0,0],[130,127],[213,199],[255,255]],blue:[[0,0],[51,52],[219,204],[255,255]]}}))}}ko.identifier="chest";var Co=ko;class To extends mn{constructor(...t){super(...t,{intensity:{type:ft.NUMBER,default:.5,required:!0,setter(t){return this._filterPrimitive&&(this._filterPrimitive.setIntensity(t),this._stack.setIntensity(1)),this._dirty=!0,t}}}),this._filterPrimitive=new Fn({lightColor:this._options.lightColor||jt.WHITE,darkColor:this._options.darkColor||jt.BLACK,intensity:this._options.intensity||.5}),this._stack.push(this._filterPrimitive)}}To.prototype.availableOptions={lightColor:{type:ft.COLOR,default:jt.WHITE,required:!0,setter(t){return this._filterPrimitive&&this._filterPrimitive.setLightColor(t),this.setDirty&&this.setDirty(!0),t}},darkColor:{type:ft.COLOR,default:jt.BLACK,required:!0,setter(t){return this._filterPrimitive&&this._filterPrimitive.setDarkColor(t),this.setDirty&&this.setDirty(!0),t}},intensity:{type:ft.NUMBER,default:.5,required:!0}},To.identifier="duotone";var Eo=To;class Ro extends mn{constructor(...t){super(...t),this._stack.push(new ro({rgbControlPoints:{red:[[0,0],[44,28],[63,48],[128,132],[235,248],[255,255]],green:[[0,0],[20,10],[60,45],[190,209],[211,231],[255,255]],blue:[[0,31],[41,62],[150,142],[234,212],[255,224]]}}))}}Ro.identifier="fixie";var Do=Ro;class Io extends mn{constructor(...t){super(...t),this._stack.push(new Qn({saturation:1.35})),this._stack.push(new Sn({contrast:1.1}))}}Io.identifier="food";var Oo=Io;class Ao extends mn{constructor(...t){super(...t),this._stack.push(new ro({rgbControlPoints:{red:[[0,9],[21,11],[45,24],[255,220]],green:[[0,12],[21,21],[42,42],[150,150],[170,173],[255,210]],blue:[[0,28],[43,72],[128,185],[255,220]]}}))}}Ao.identifier="fridge";var Fo=Ao;class Mo extends mn{constructor(...t){super(...t),this._stack.push(new ro({rgbControlPoints:{red:[[0,65],[28,67],[67,113],[125,183],[187,217],[255,229]],green:[[0,52],[42,59],[104,134],[169,209],[255,240]],blue:[[0,52],[65,68],[93,104],[150,153],[255,198]]}}))}}Mo.identifier="front";var Po=Mo;class Bo extends mn{constructor(...t){super(...t),this._stack.push(new Sn({contrast:1.1})),this._stack.push(new ro({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[127,127],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}}))}}Bo.identifier="glam";var zo=Bo;class Lo extends mn{constructor(...t){super(...t),this._stack.push(new jn)}}Lo.identifier="gobblin";var No=Lo;class Uo extends mn{constructor(...t){super(...t),this._stack.push(new ro({controlPoints:[[0,0],[53,32],[91,80],[176,205],[255,255]]})),this._stack.push(new Qn({saturation:.9}))}}Uo.identifier="k1";var jo=Uo;class Ho extends mn{constructor(...t){super(...t),this._stack.push(new ro({controlPoints:[[0,0],[54,33],[77,82],[94,103],[122,126],[177,193],[229,232],[255,255]]})),this._stack.push(new eo({color:new jt(40/255,40/255,40/255)}))}}Ho.identifier="k2";var Wo=Ho;class Go extends mn{constructor(...t){super(...t),this._stack.push(new Qn({saturation:.5}))}}Go.identifier="k6";var Vo=Go;class $o extends mn{constructor(...t){super(...t),this._stack.push(new ro({controlPoints:[[0,0],[17,27],[46,69],[90,112],[156,200],[203,243],[255,255]]})),this._stack.push(new Qn({saturation:.7}))}}$o.identifier="kdynamic";var Zo=$o;class Xo extends mn{constructor(...t){super(...t),this._stack.push(new In({desaturation:.4})),this._stack.push(new ro({rgbControlPoints:{red:[[0,20],[40,20],[106,111],[129,153],[190,223],[255,255]],green:[[0,20],[40,20],[62,41],[106,108],[132,159],[203,237],[255,255]],blue:[[0,40],[40,40],[73,60],[133,160],[191,297],[203,237],[237,239],[255,255]]}}))}}Xo.identifier="lenin";var Yo=Xo;class qo extends mn{constructor(...t){super(...t),this._stack.push(new ro({controlPoints:[[0,0],[87,20],[131,156],[183,205],[255,200]]}))}}qo.identifier="lomo";var Ko=qo;class Qo extends mn{constructor(...t){super(...t),this._stack.push(new ro({rgbControlPoints:{red:[[0,0],[41,84],[87,134],[255,255]],green:[[0,0],[255,216]],blue:[[0,0],[255,131]]}}))}}Qo.identifier="mellow";var Jo=Qo;const{ColorMatrix:ts}=Ui;class es extends mn{constructor(...t){super(...t);const e=new ts(.8158218291630716,0,0,0,-.01779810181190647,0,.8098360655737704,0,0,.0916393442622953,0,0,.4596336773932402,0,.12760574782432707,0,0,0,1,0);this._stack.push(new En({colorMatrix:e}));const i=new jt(.8,.6,.9);this._stack.push(new Bn({gamma:i}))}}es.identifier="metal";var is=es;class rs extends mn{constructor(...t){super(...t),this._stack.push(new ro({rgbControlPoints:{red:[[0,40],[255,230]],green:[[0,10],[255,225]],blue:[[0,20],[255,181]]}})),this._stack.push(new Nn)}}rs.identifier="morning";var ns=rs;class os extends mn{constructor(...t){super(...t),this._stack.push(new ro({rgbControlPoints:{red:[[0,0],[115,130],[195,215],[255,255]],green:[[0,0],[148,153],[172,215],[255,255]],blue:[[0,46],[58,75],[178,205],[255,255]]},textureGLUnit:2})),this._stack.push(new ro({controlPoints:[[0,0],[117,151],[189,217],[255,255]],textureGLUnit:3})),this._stack.push(new In({desaturation:.65}))}}os.identifier="orchid";var ss=os;class as extends mn{constructor(...t){super(...t),this._stack.push(new ro({rgbControlPoints:{red:[[0,0],[94,74],[181,205],[255,255]],green:[[0,0],[34,34],[99,76],[176,190],[255,255]],blue:[[0,0],[102,73],[227,213],[255,255]]}})),this._stack.push(new Qn({saturation:.8})),this._stack.push(new Sn({contrast:1.5}))}}as.identifier="pola";var ls=as;class cs extends mn{constructor(...t){super(...t),this._stack.push(new ro({rgbControlPoints:{red:[[0,0],[56,18],[196,209],[255,255]],green:[[0,38],[71,84],[255,255]],blue:[[0,0],[131,133],[204,211],[255,255]]}})),this._stack.push(new Qn({saturation:.8})),this._stack.push(new Sn({contrast:1.5}))}}cs.identifier="pola669";var us=cs;class hs extends mn{constructor(...t){super(...t),this._stack.push(new In({desaturation:.65})),this._stack.push(new ro({rgbControlPoints:{red:[[0,50],[40,78],[118,170],[181,211],[255,255]],green:[[0,27],[28,45],[109,157],[157,195],[179,208],[206,212],[255,240]],blue:[[0,50],[12,55],[46,103],[103,162],[194,182],[241,201],[255,219]]}}))}}hs.identifier="quozi";var ds=hs;class ps extends mn{constructor(...t){super(...t),this._stack.push(new ro({rgbControlPoints:{red:[[0,129],[75,153],[181,227],[255,255]],green:[[0,8],[111,85],[212,158],[255,226]],blue:[[0,5],[75,22],[193,90],[255,229]]}})),this._stack.push(new Nn)}}ps.identifier="semired";var fs=ps;class ms extends mn{constructor(...t){super(...t),this._stack.push(new ro({rgbControlPoints:{red:[[0,0],[62,82],[141,154],[255,255]],green:[[0,39],[56,96],[192,176],[255,255]],blue:[[0,0],[174,99],[255,235]]},textureGLUnit:2})),this._stack.push(new ro({controlPoints:[[0,0],[55,20],[158,191],[255,255]],textureGLUnit:3}))}}ms.identifier="sunny";var gs=ms;class _s extends mn{constructor(...t){super(...t),this._stack.push(new ro({rgbControlPoints:{red:[[0,72],[89,99],[176,212],[255,237]],green:[[0,49],[255,192]],blue:[[0,72],[255,151]]}}))}}_s.identifier="texas";var ys=_s;class vs extends mn{constructor(...t){super(...t),this._stack.push(new oo)}}vs.identifier="x400";var bs=vs;class xs extends mn{constructor(...t){super(...t),this._lutPrimitive=new Yn({image:this._options.image}),this._stack.push(this._lutPrimitive)}}xs.prototype.availableOptions={image:{type:ft.IMAGE,required:!0,setter(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}}},xs.identifier="lut";var ws=xs;class Ss extends mn{constructor(...t){super(...t);const{image:e,resolution:i,verticalTileCount:r,horizontalTileCount:n}=this._options;this._lutPrimitive=new uo({image:e,resolution:i,verticalTileCount:r,horizontalTileCount:n}),this._stack.push(this._lutPrimitive)}}Ss.prototype.availableOptions={image:{type:ft.IMAGE,required:!0,setter(t){return this._lutPrimitive&&this._lutPrimitive.setImage(t),this.setDirty(!0),t}},resolution:{type:ft.NUMBER},horizontalTileCount:{type:ft.NUMBER,default:5},verticalTileCount:{type:ft.NUMBER,default:5}},Ss.identifier="3d-lut";var ks=Ss;class Cs extends _r{_render(t){return this._selectedFilter.render(this._sdk,t,this._renderTexture)}render(t){return this._selectedFilter.getDirty()&&this.setDirty(!0),this.getEnabled()?super.render(t):(this.setDirtyForRenderer(!1,this._sdk.getRenderer()),Promise.resolve(t))}setDirtyForRenderer(t,e){super.setDirtyForRenderer(t,e),this._selectedFilter.setDirtyForRenderer(t,e)}disposeRenderTextures(){super.disposeRenderTextures(),this._selectedFilter&&this._selectedFilter.disposeRenderTextures()}dispose(){super.dispose(),this._selectedFilter&&this._selectedFilter.dispose()}restoreSnapshot(t){const e=b({},t);if(delete e.filter,t.filter){const e=t.filter.constructor;"3d-lut"===e.identifier?this.setFilter(new e({image:t.filter.getImage(),resolution:t.filter.getResolution(),horizontalTileCount:t.filter.getHorizontalTileCount(),verticalTileCount:t.filter.getVerticalTileCount()})):"duotone"===e.identifier?this.setFilter(new e({lightColor:t.filter.getLightColor(),darkColor:t.filter.getDarkColor(),intensity:t.filter.getIntensity()})):this.setFilter(new e)}this.set(e)}resetToDefaultFilterIntensity(){const t=this._selectedFilter&&this._selectedFilter.availableOptions,e=t&&t.intensity.default;this.setIntensity(e||1)}}Cs.identifier="filter",Cs.prototype.availableOptions={identifier:{type:ft.STRING,default:"identity"},intensity:{type:ft.NUMBER,default:1,setter(t){return this._selectedFilter&&this._selectedFilter.setIntensity(t),t}},filter:{type:ft.OBJECT,default:new po,setter(t){return this._selectedFilter&&(this._selectedFilter.dispose(),this._selectedFilter=null),this._selectedFilter=t,void 0!==this._options.intensity&&this._selectedFilter.set({intensity:this._options.intensity}),t}}},Cs.FilterPrimitives=gn,Cs.Filters=hn,Cs.Filter=mn,Lr.Operations.FilterOperation=Cs;var Ts=Cs;const{Vector2:Es}=Ui;class Rs extends _r{constructor(...t){super(...t),this._flipContainer=new Zi.Container}_render(t){const{outputResolution:e,flipHorizontally:i,flipVertically:r}=this._options;if(i||r){const e=t.getDimensions();this._flipRenderTexture?this._flipRenderTexture.resizeTo(e):(this._flipRenderTexture=new Zi.RenderTexture(this._sdk.getRenderer(),e.x,e.y),this._flipSprite=new Zi.Sprite(this._flipRenderTexture),this._flipContainer.addChild(this._flipSprite));const n=i?-1:1,o=r?-1:1;this._flipSprite.setScale(n,o),this._flipSprite.setPivot(0,0),this._flipSprite.setPosition(e.x*(1-n)*.5,e.y*(1-o)*.5),this._flipRenderTexture.clear(),this._flipRenderTexture.render(this._container),this._renderTexture.render(this._flipContainer)}else this._renderTexture.render(this._container);return Promise.resolve()}}Rs.identifier="flip",Rs.prototype.availableOptions={flipHorizontally:{type:ft.BOOLEAN,default:!1},flipVertically:{type:ft.BOOLEAN,default:!1}},Lr.Operations.FlipOperation=Rs;var Ds=Rs;const{Vector2:Is}=Ui;class Os extends _r{constructor(...t){super(...t),this._colorOverlayFilter=new Zi.Filters.ColorOverlayFilter({color:this.getTintColor()}),this._frameContainer=new Zi.Container,this._resetSprites(),this._options.frame&&this._createSpritesForFrame(this._options.frame)}_resetSprites(){this._spriteGroups={top:{},left:{},right:{},bottom:{}},this._sprites=[],this._repeatSprites={top:[],left:[],right:[],bottom:[]}}_createSpritesForFrame(t){if(!t)return this._disposeSprites();const{imageGroups:e,layoutMode:i}=t;this._layoutMode=i||"horizontal-inside",this._disposeSprites(),["top","left","right","bottom"].forEach((t=>{void 0!==e[t]&&["start","mid","end"].forEach((i=>{if(void 0===e[t][i])return;let r=e[t][i];"image"in r&&(r=r.image);const n=Zi.Texture.fromImage(r),o=new Zi.Sprite(n);this._spriteGroups[t][i]=o,this._sprites.push(o),this._frameContainer.addChild(o)}))}))}_render(t){const e=this._renderTexture.getDimensions();return this._options.frame&&(this._colorOverlayFilter.setColor(this.getTintColor()),this._updateSprites(t)),this._frameRenderTexture?this._frameRenderTexture.resizeTo(e):(this._frameRenderTexture=new Zi.RenderTexture(this._sdk.getRenderer(),e.x,e.y),this._frameSprite=new Zi.Sprite(this._frameRenderTexture),this._container.addChild(this._frameSprite)),this._frameSprite.setAlpha(this._options.alpha),this._options.frame&&this._options.frame.tintable?this._frameSprite.setFilters([this._colorOverlayFilter]):this._frameSprite.setFilters([]),this._frameRenderTexture.clear(),this._frameRenderTexture.render(this._frameContainer),this._renderTexture.render(this._container),Promise.resolve()}_updateSprites(t){const e=t.getDimensions();this._frameWidth=Math.ceil(t.getDimensions().min()*this._options.scale),this._updateHorizontalSpriteGroup(t,"top",0),this._updateHorizontalSpriteGroup(t,"bottom",e.y-this._frameWidth),this._updateVerticalSpriteGroup(t,"left",0),this._updateVerticalSpriteGroup(t,"right",e.x-this._frameWidth)}_updateHorizontalSpriteGroup(t,e,i=0){const r=t.getDimensions(),n="vertical-inside"===this._layoutMode,o=this._spriteGroups[e].start,s=this._spriteGroups[e].mid,a=this._spriteGroups[e].end;let l,c,u=0,h=0;if(o){l=o.getTexture().getDimensions(),c=l.y/l.x,u=Math.floor(this._frameWidth/c);const t=new Is(0,i);t.x=n?this._frameWidth:0,o.setPosition(t),o.setHeight(this._frameWidth),o.setWidth(u)}if(a){l=a.getTexture().getDimensions(),c=l.y/l.x,h=Math.floor(this._frameWidth*c);const t=new Is(r.x-h,i);t.x-=n?this._frameWidth:0,a.setPosition(t),a.setHeight(this._frameWidth),a.setWidth(h)}if(s){l=s.getTexture().getDimensions(),c=l.y/l.x;const t=new Is(u,i);let o=r.x-u-h;if(n&&(t.x+=this._frameWidth,o-=2*this._frameWidth),s.setPosition(t),s.setWidth(o),s.setHeight(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){const i=this._frameWidth/c,r=Math.ceil(o/i);let n=0;if(-1!==r){let i=Math.round(o/r);s.setWidth(i),n+=i,this._ensureRepeatSpritesExist(r-1,e,s);for(let s=0;s<r-1;s++){i=Math.round((o-n)/(r-s-1));const a=this._repeatSprites[e][s],l=t.clone().add(n,0).floor();a.setPosition(l),a.setWidth(i),a.setHeight(this._frameWidth),n+=i}}}}}_ensureRepeatSpritesExist(t,e,i){i.getTexture().setMaxListeners(t+1);const r=this._repeatSprites[e].length;if(t>r){const n=t-r;for(let t=0;t<n;t++){const t=new Zi.Sprite(i.getTexture());this._repeatSprites[e].push(t),this._frameContainer.addChild(t),this._sprites.push(t)}}else if(t<r){this._repeatSprites[e].splice(t).forEach((t=>{const e=this._sprites.indexOf(t);-1!==e&&(this._sprites.splice(e,1),this._frameContainer.removeChild(t),t.dispose())}))}}_updateVerticalSpriteGroup(t,e,i=0){const r=t.getDimensions(),n="horizontal-inside"===this._layoutMode,o=this._spriteGroups[e].start,s=this._spriteGroups[e].mid,a=this._spriteGroups[e].end;let l,c,u=0,h=0;if(o){l=o.getTexture().getDimensions(),c=l.y/l.x,u=Math.floor(this._frameWidth*c);const t=new Is(i,0);t.y=n?this._frameWidth:0,o.setPosition(t),o.setWidth(this._frameWidth),o.setHeight(u)}if(a){l=a.getTexture().getDimensions(),c=l.y/l.x,h=Math.floor(this._frameWidth*c);const t=new Is(i,r.y-h);t.y-=n?this._frameWidth:0,a.setPosition(t),a.setWidth(this._frameWidth),a.setHeight(h)}if(s){l=s.getTexture().getDimensions(),c=l.y/l.x;const t=new Is(i,u);let o=r.y-u-h;if(n&&(t.y+=this._frameWidth,o-=2*this._frameWidth),s.setPosition(t),s.setHeight(o),s.setWidth(this._frameWidth),"repeat"===this._options.frame.imageGroups[e].mid.mode){const i=this._frameWidth*c,r=Math.ceil(o/i);let n=0;if(-1!==r){let i=Math.round(o/r);s.setHeight(i),n+=i,this._ensureRepeatSpritesExist(r-1,e,s);for(let s=0;s<r-1;s++){i=Math.round((o-n)/(r-s-1));const a=this._repeatSprites[e][s],l=t.clone().add(0,n).floor();a.setPosition(l),a.setHeight(i),a.setWidth(this._frameWidth),n+=i}}}}}_disposeSprites(){this._sprites.forEach((t=>{this._frameContainer.removeChild(t),t.getTexture().dispose(),t.dispose()})),this._resetSprites()}dispose(){super.dispose(),this._disposeSprites(),this._colorOverlayFilter&&this._colorOverlayFilter.dispose(),this._frameRenderTexture&&this._frameRenderTexture.dispose()}static validateFrame(t){if(!t)return;const{imageGroups:e,layoutMode:i}=t;if("string"!=typeof t.identifier)throw new Error("Frame needs a property `identifier` of type String.");if("object"!=typeof t.imageGroups)throw new Error("Frame needs a property `imageGroups` of type Object.");const r=t=>{const{start:i,end:r,mid:n}=e[t];if(void 0!==e[t]){if("object"!=typeof e[t])throw new Error(`Frame: \`imageGroups.${t}\` needs to be of type Object.`);if(void 0!==i&&!(i instanceof ur||"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement))throw new Error(`Frame: \`imageGroups.${t}.start\` needs to be of type Image.`);if(void 0!==n&&!(i instanceof ur||"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement)&&"object"!=typeof n)throw new Error(`Frame: \`imageGroups.${t}.mid\` needs to be of type Image or Object.`);if(void 0!==r&&!(r instanceof ur||"undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement))throw new Error(`Frame: \`imageGroups.${t}.end\` needs to be of type Image.`)}};if(void 0!==i&&-1===["vertical-inside","horizontal-inside"].indexOf(i))throw new Error("Frame: `layoutMode` must be one of vertical-inside, horizontal-inside");if("undefined"!=typeof tintable&&"boolean"!=typeof tintable)throw new Error("Frame: `tintable` needs to be of type Boolean.");r("top"),r("left"),r("right"),r("bottom")}}Os.identifier="frame",Os.prototype.availableOptions={frame:{type:ft.OBJECT,validation:Os.validateFrame,setter(t,e){return e||this._createSpritesForFrame(t),t},default:null},alpha:{type:ft.NUMBER,default:1},tintColor:{type:ft.COLOR,default:new jt(1,1,1,0)},scale:{type:ft.NUMBER,default:.1}},Lr.Operations.FrameOperation=Os;var As=Os;class Fs extends Zi.Filter{constructor(...t){super(...t),this._fragmentSource="uniform sampler2D u_image;\nuniform sampler2D u_watermarkTex;\n\nvarying vec2 v_texCoord;\n\n\nvoid main() {\n  vec4 color = texture2D(u_image, v_texCoord);\n  vec4 watermarkColor = texture2D(u_watermarkTex, v_texCoord);\n\n  if (watermarkColor.r > 0.8) {\n    gl_FragColor = mix(color, watermarkColor, 0.3);\n  } else {\n    gl_FragColor = color;\n  }\n}\n"}_applyWebGL(t,e,i,r=!1){const n=t.getContext(),{canvas:o}=n,s=this.getShaderForRenderer(t),a=e.getFrame(),l=this._watermarkCanvas;(!l||a.width!==l.width||a.height!==l.height)&&this._createWatermarkCanvas(a.width,a.height);const c=Zi.Texture.fromCanvas(this._watermarkCanvas),u=c.getBaseTexture();t.updateTexture(u),u.setGLUnit(1),t.setRenderTarget(i),r&&i.clear(),t.setShader(s);const h=t.getCurrentRenderTarget().getProjectionMatrix().toArray();s.setUniform("u_projMatrix",h),s.syncUniforms(),n.uniform1i(n.getUniformLocation(s.getProgram(),"u_watermarkTex"),1),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,u.getGLTextureForRenderer(t)),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0),c.dispose()}_createWatermarkCanvas(t,e){const i=this._options.watermarkImage,r=It.createCanvas();r.width=t,r.height=e;const n=r.getContext("2d");let o,s,a;t>e?(o=t/i.width,a=(e-i.height*o)/2,s=0):(o=e/i.height,a=0,s=(t-i.width*o)/2),n.drawImage(i,0,0,i.width,i.height,s,a,i.width*o,i.height*o),this._watermarkCanvas=r,this._watermarkContext=n}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext();this._options.watermarkImage;this._createWatermarkCanvas(n.width,n.height);const a=o.getImageData(0,0,n.width,n.height),l=this._watermarkContext.getImageData(0,0,n.width,n.height),c=new jt,u=new jt,h=new jt;for(let t=0;t<n.width*n.height*4;t+=4)c.set(a.data[t]/255,a.data[t+1]/255,a.data[t+2]/255,a.data[t+3]/255),u.set(l.data[t]/255,l.data[t+1]/255,l.data[t+2]/255,l.data[t+3]/255),u.r>.8?h.copy(c.clone().mix(u,.3)):h.copy(c),a.data[t]=255*h.r,a.data[t+1]=255*h.g,a.data[t+2]=255*h.b,a.data[t+3]=255*h.a;s.putImageData(a,0,0)}}Fs.prototype.availableOptions={watermarkImage:{type:ft.OBJECT,required:!0}};var Ms=Fs;class Ps extends _r{constructor(...t){super(...t),C(this,"_applyWatermarkFilter",(()=>(this._watermarkFilter||(this._watermarkFilter=new Ms({watermarkImage:this._watermarkImage})),this._sprite.setFilters([this._watermarkFilter]),this._renderTexture.render(this._container),Promise.resolve()))),C(this,"_loadWatermarkImage",(()=>this._watermarkImage?Promise.resolve():new Promise(((t,e)=>{this._watermarkImage=new ur,this._watermarkImage.onload=t,this._watermarkImage.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDA4NDFGODc4N0ZCMTFFOEFCRjZEQ0E4MkRCQzYyNjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDA4NDFGODg4N0ZCMTFFOEFCRjZEQ0E4MkRCQzYyNjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMDg0MUY4NTg3RkIxMUU4QUJGNkRDQTgyREJDNjI2MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMDg0MUY4Njg3RkIxMUU4QUJGNkRDQTgyREJDNjI2MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ppk6b2UAAAASUExURQAAAP///8zMzDMzM2ZmZpmZmer1GSkAABunSURBVHja7F3rgt6mDlzr8v6v3O5ukqaJbQSS0GDjn+c0+9lomBkJEB8fD3tEPvbz5ocO3oPw6vgfx+aA9z56HBsBL37k+H50D8UrHz6OjYAd/42ANxvAjYC3G8BfD+0ReacB3AjYBmAj4IXPcfJQVVFQaFuQSgNYiwBW2uxTbADrEMDyA4p7RaLUABYhgP8D4i5H1xrAAgT8mvzbgWIYgLkI4D9VaGtAuQGYiAD5G4NbAxAEYAoCvmz/rkJAVQAmxoKvCGhrAIABSEeAXP/81oDiDDAfASx36NvFQAgDkIcA1kLh2U+HAKTMx1b4twlAyADTEMBUgLn9DAtAcDyYCo3HfroywAQEiFl2tgbgCEAYAuzh34lgUQaokheRnvBvE1BjAOiuNiATw79NQE0GyB9JCOgN/zYBJQIgd/+nIybcH/5tAgoEQO/hMYqAofBvDZgvANTOEAYWh1mPYwNgCQFgQ45Is8K/TcB0ARBTlaAPAY7wbxNQJgD3oevIz+3WX8+YYmtAlQDEIMAcfhI+p6WtAVUCcI8AEzWzPfyXvLQBME8A1F4ssiDA7P1Ibn5tV4PnCUBPubA9NcUafr79N9sEFArALY3flwOs4q/ceDPaGhD+aJev44Fk0Mr+ym2+2QCYIwDUSxg38iyD4T8FwK4EzHGA/BGFAKP3V7ZBZ5uAUgG4n9EyXPhTtmJtA2CGA6RBR89j5k+5g562CZggADJEG395dHaGf5uAIgfYrraoJRUQb/i3CUh/OkpAtoKQ9k1/5W6F2gBId4AmkqWGEZTOqp/domwTkOwA1fFvf8bHMv1NRb3tAqFKAFYEGKY/yShH7fWgXAcovn/+ObMNub+Mk9Q2AakOkLwAOgK83wZAnQNk91+IEf9tApAdYCsVCBD/XQoqcYAU8UdC9/XKdoHfbCs8gwAk5K9EiP82AX9NNSJhxiKATiNIEgPUF5qAX8NAGgMCiTp4I3nsv13gxTwg8usBhTVg0Azvf//35eUACGACCTx6SVnsf/mqLzQB5wEbBgEHUrTJCGog9l8JALo9QxVD2xQYoqjpf/7tGwBOIuDgo9eS2ttpu0CDzvYRgUaHSdOm//kffx0ALDJL5iJLNAHcAtRfttu1QHPBzSgGGt96gbOm/3aBvdWWthhwRvcdyWvtuAHQu+7awACl9F7RvKY+2wX2L7rdYCCFAD6MXWY2ACYB4AYDlDRROU0EZBeDx9oqnmIgiwDMjYZCoPWyNICP4cdy5D6KUTVJBLYLdADgz/oAZ3n1a6LShL+7ATAqBZrZf5OTROD1LlAO9/OjIpNKAGki8HoA0BHwfElBKgF8jJ4232nADAB80UAuAWSJwOvTgCgA5BXrGmql4QCglwOAhKJQoTPAKuED8B86fnvkt+f3//15ScDn97MQHAEMNh0acYGi9P1YtO/7UZUl8XAtgcxKWATgPnM8QwO/0SDLYIFvx9OJgfghoPjf0TQD9BMJqwHgj25c42KgU17X9UMBNGcGwjJ1II4aJZ7zvqO/xHFm14oDQBhYd0UOYCAnm4o5dzg7+L/DAAsDHZXQXgzwLM3q9IFTaH/6uGRkwT4M0DzO6vixoPzWQwEfCwOgBwNpFXXHr5VH/wEA+DDe0ZD3naOHT4uZH3OpabASbiBSmQlaw+8JRPThLMD4UkgLAzz1pVuvDRN+tIuJXIuhd5yauqTae/wIJ/xwFoCd3H05tDz5rW9GFin8cJsN2B26cxpIxrnYKQAr/HD7zSTgDaXA6lopgMHC/0gAaMFnim1sFS38cLuNAhokcInQWXRH4KY/3n7DgE3RFQpgoQD2Tf9f+3z+t//r/4+IdmwdgtxxHAAAquE5akwvGY770HaeH4jQFhoYHgC9weOie9hPA+yY/t+r9THx+cLCKRDgNhwHAKAK5nRDsNIZ+5yNGitcSeMHgFbBXK5toHbEXvM26axwHYEfAFQGc7rgHnPuTzK9XsmPA0DhV8q5DbTRf+bMv34/OAvgPxdV+JV8utamtujXMJQ+DwCVXzmY6CuX4ZMXAIC6ASCFb1+t+68DQO1XDnS4mze2uoAFcG8HKDY6ghv+Re6kcwOg9isZN/yLXEjl3g9S3GGnQwNmG/A1bqPxAqC6vYZZA+ZvxaQNACAKEISRRWw+5QVA+X0LBJT4N7mJnweA8iZ7Ajn9V0kCHwAAhpz+H8tcTC7hAKD6gUYY9VVuJXYCAKDHnmKew1pEARIAoABTDWDxbYWVwBwACBAA6kR3kSTQDQCpFzqGPIari1gAbwQB7t1UyBMYtIgF8AKgvtc+Qx7AWEYB4gGAkgUK2rCC3kKxOgAEswvHMgqwPAAwT+CuowCrA0AxD+CuowCLA4Ax47+QAiwOAELk/6UUYG0ABDYOf2cV6MO9HFwLAALtwLGQAiwNAFQCWEkBVgYAAxaAllOAlQGgmA5wLQVYGACwBLCUAngX9AsBQKgEsJQCrAsAVAe4mAJ493TVLQejpoBFXROrAFC2IWQpAgBWAO+23qotYbAO8LxtzQfw41NxLgIAbAq4mgIsCgBcAlhNARIAIEWjjEEADGpNJwJgwufiOsDFigABmXxJIQA2BTzdogZtAd2ZfAUAzveBQYymLKcArUz+99sRQAAA7ADXs4CnmP3tGgz6+woN+r5CI4ZAnpUCrlcE+BhrtvnzYo1/cTC/FMjA93DoakWAz/tfD9cznwGAHeDHsZACfM7ejquOeloxvzUFXMYCfoX+SHto+iRDGWV8C3h1k9E6AAB2gOAW8Cv2x5Rn9r3xKD4L1gJOjH02AGgxAqhXAD6/2zv1yUM9sgO8UCcpfLvJE3/CjEROAT+gGlUmG/0iAEATgMD0Kq1g/SkhgXaA9x1L50GAEW5MT4oJcgrYbFo9AwJVmj+JAhYmgAkQqOf9dF+GnALa1tT00byfTQHQDtB4hWXKtVVQUz9xYkKngOZF9WAIMGT0U6T5CQTwDQFeg/h/bglSVZHPPUKnm4Sun1c5wL5dNUFuUJOCLtcbAH/SDkt7K4FOmGIwS21aYZI1NvByG/SBaiNvAsi1AhwTehVmnw7RBB9IjyKAICtA3tAzx8xS1mwKwHaAg1PRbQWkatbPV2jkfWAOMZbpwPua9utVaYGPAvm02KkDhBD7CRyN7QDP4WnN0V06YL85O39fSmadDtsB8tXbMaXrAFVP/CkUwNAO8DwI329ng4BDB7Q98bl0HAidXBIJoAMCEjs3ZrH+JKGWZQnADoFhEiCM4GemgoydAkr7q00Q0Lifr7owK4kCsFPAJgF8h8li1sZGCokdU7h6xRTwhPYsENCoFyCo2aAJfxM7BTzHvOaQAD+cAlZ0gBeQZ00hAUJySPHTldZzgNfwNLjBfhKAooBwwX4QAVitgEa8RJlHCk4FV3SADXhqeE1AoLKk2KRdF3SALXgarID6x7xskoRyNjgBjDqetg70kQBUJhjq2lbcBybj/3QU5Qw1TQKX7lbcB2aEZzsf0GUpIE63sVNA8sGzqQMdMoDVmyZMuBWaADRl3g7+McKngKMOSBPNbt9XchgJCNZUiaFu6BSQYzZ2aJQXxKKAEPO2YjeI/iFvkoA+hwJo/t+YrHJDIy4xMoDllwNm74r9wMboqUkCsiAF+PUbeR+YBJ+FlAAZ4IdRAPI+MA4/Dd0iAYsMKBYFOBkc2QFyxjm/VjrAq1GAMxUEdoCccxi+RQLyKgoAPgp0GSj326nTCCxBATSDPkriH3EAhnxGAIwCODilgSCAy/jHoFNdCECjgOFU8GKdleufy3wtyp6IywgsQQHqnQeQD6dTjGX0GMw6DzI5rxd/ySZOYzjBKGDQy9Fy8dcJ88YEADQKGMrmZLn4R4/w3bZhHqAPAaMAehgBxM8wHfYaa1CAPIsABCf+eBTQvaazoAOMvhhOPVBDo4DuVd0FU8CvL2KM+ONRQO/x2WPVJ6otizP+eMsofT6QjuPdEFC31VCwgnCXD5Rj6ccPAfLXGuAooGdJgI7j1RAIiD/edvoOCtBj/cdjB0Pif2G80Sjg7IX4eMQzCgEOir+lcyHmkoAeD3mkNP4XA46fCvLxmGeg3RsHrjXBbaixpYJ0POhRros/3pY6kw+U41lPwDmo4bgtmQqef720n3N+kZyn455WLYs/3rZ6AwWMZ6+T4W6/q9d3ut/F23AHa5q2xPPG0ysfZgw43t+p27qED9QYzqqAu/VGqKL4412y0KAAX+JSkvbYaKAtA5QR/+VSQWfeUpT2mGiAR8s/zg9Yygd64VoGd0sHeBlL/70AFjQRuNkd5hfxOrizp+mnRNeT29oCeVDIb+Mr0x4e7veXGn9fJ9OpPjAieqWL4E0IaK/9D8GuFs6KLp6O4O/iygcPHO7Pjv8qIsAxlbzqtKcBAe2x/1HAFTQROJ/qQTlc+QrY/cFe7fiPw2CLJgIdK/4cxS/1LucMAXLMiP/VgIO1D4wCKUDl41YH1DYOofe+womAdR0tvNSEQAJqiv8E1S0UAckSgEapCcMJSFv+o00LnAhQGgF8oLSX1XsEyDEx/ldvUycCnEcAMCtgcvdlk+N/NeXq1gRy7s9FSQWbKKcjP/03vYwAU0B4qWn+Rw7tcJapU67MBkjmOMCcixtAAM99F7CbJYNeDGczZO8xJ+LZpKugFMAJ4/4BjwAteBWBpADN+OOKjgAtGfEqG8CZSgi0GVKr7V9rxMtsgGZOBaDNkAoS/8s3ITgKoKw/XqN3VGz/miNeZQRl+k6oIqwbEECV411mBClxMJAoIPaW+Iy8S6AogBP/eI3l5XL5b1kRBqIAyhz0Irnj6tFvkhDSzJBMxDMU2VXbv3J7pJM9QF3OI6jyXzwwaRRAaI63MAlXhDrkZKsmaEi/hKRU/TAIAmhiJbCWArjGfnFKP6PsYeE0AsBb/aAS2OEgIMMHMiDVXcNS5/8k0tBkpIKKmPNWpKbdfXcVZlQyaQ9tHxTBxH9OVcKUCmr4MANvhtWZcMNDQHQqaNC9MgqQeSJwb/8FSSGDU0HYlHeqCHBjmgsQQcamgibhqzsWN2nM22ePBGh+RKaCtsQX7lgcT4y/NP+b2UYgMhU0Oh+09gg0L/5s4UqIA/WZlS+0HjmhI25tPaE42UCYDzSnPnA9cubEX+1+SespgGO5D1sEdH78GwggqaYAiplcinZ7Tmrrvj5lV5SqUIwPvEgn0LqmZ/Zv7e08pyiFwYhU8BJFaF3T01r33ZX/LmLZ7HDL61DAZZzhbs+hHB94G//hytkkCPh5+uYvrHGXsibGXz3OeY4QuK3azR+Ao4CM+5yGL54w5E4zMoLUG0PgLtCa1RjFBHVL+YyESyiAfN8v4aWmVLhLSfytW0ezzYCPpxsyv+hdyiHx59Hhm00DHqvWRM+CF6nGlECNDs5aRE3FgMMbN+P7aB8YsbRrP0GQh4Fxnjb8S7RUMNCWSMyyZ8cmUkp6hn/MwB2rXaQaEv++z5OhfaS4T9aAg/nAyM1d+qT4Sx7nZvpALoz/aIdjyIfyOBch7THkf2MO9zE6wOm5d1LaI6Xxf4wOaHruneUDqTj+tuuwVyQApDbSd5wkxfF/BAQ0vNQ0zwdSefwfAIHs3BuBAm4ce4SsLQ0BmbQGk5QKOsATaWvWhQAl597ZqaBAxP9zuBZNCjk394agAHUt/z67LqDTlmGzKEBh4v8x2GkClQBW2R3Gw/Gfe9R8LQeIuSQgA++jARsA/Lnmcg5wpVSQxyelvDv+7e9HSwX7KaCRn+mrDQANglpWooBppzovf4cAnmETrMtTQNOaSeKbFXumADe3BgWMF4K/xiGCBHhaqhHHTjwObMaigDEvExokQo6/axov0TPCUQyK+R5Fjr9PyJ9BAS0j4DzSycj679VxtFSQxl6ntYdTw2kJJf7eCKL5QBl9nQYCHAmhQsffzeH6DAow9HiJFQDCiL9/bxfaQaFhCmgu1gySwHiZpS4FnMshKBTQPsyhYSOMEv8QBacFKIBd0XKQACMngEEenh9DAYY1e40YYRQDGMXeYD7QQwFtGeirCQi0AYwib7RUkFxf1SYBdo4MigGIs29gB4XE91kcd1uWQhuAwAQOTOi8b9Pcxm80g4wtAIHSDZYKipeQ2vs3TXgiaAEIVW6sJQF2f1lbBmh0iQlFAGJjBuYD1f9pAZ1/CVoAgllb8Smg89sMTV6UJ44waAq4EAVkdHqSKR57AQJAwzuHvIyBBK6tgEILQMKExVoSoJiXMZDAhRVgbAeYAE8sCpCg0pSl3ZuaLxHSBxMAmumlqA+0NHdQ4whjO0BCRFUoBYx9oYUE/rIC+i4HCGd7+PzUH0eO1x0EPB1r1ksBwSjg3+BT9L4+6oSArucAI/Sp3gfeBN83B03dHX5BgN+WAkKkgq3g+77S1unrBwT0bSlgufdlIdMBfM9n2ro8fUJgRQIIClJBKvg58e3dFzh86pxAQN+XAtb4QLZO/Cg9ctwC8NRVQNskgYh9SByGu/3BEED2GlX6Ghj3cf6cakcy86SngOkME3JDmjP0YeUOWpgAJmj01fCQMo9HXvyhD6x30LIEMMGl3zXEo08UcE/gP+d8bIc1zeM5fAKYUqprb6omEvkMLp/H/N/5/jnhKaW1XtAF7n0d4J92FGicAv6GgqllXVTwIy9r7YHAqwgA9bYsCr+13ewGUQhg2jZFekH0e9wgyirAtPV6rMbolHlTuwUC2ASQgk56+tTvgsCjukGE+8BVp74dAigEMHW3hr4l+AYIQBNAVoWK3xP8JgT4hQRQB4CK4N9DAKQKPHvDJtUYvtLZJgRMALO3bNP8ic+QLEvvJICJpQCqnvj3qAd+tVRw8stif/XNIAQwf8M+vyv2lzIrwASg838yKPQCF/tLzDMsNLPfjRIi37edBIFmH3EpSBgAnKv9uKFHt4Alp3blbDT4azf3IBDAAYBrAWvOa/Ed53xt+1I9u8VS9Wu3mCwHAFwLWNO5g32CyMsBAFYBis5ssw90jLuqZudZDAtYtUJB7wKAohJAWSv3cADoagRAqC82ZzKFA4CQASCoFrCudxv5KJHWAgCqBSxsV6dvAgCsAhQ27ZE3AQBVASrbdvGbAECYBFDauO9NAEAtApS27nwTAATTAtZ27nSWcpYCAKgC1LbvfhEAQBWguHGrs5anC60GgZaBi6/weBEAMBWgunPzewDAkEWA+t7tPhVfaEcIpgLU397wGgBAKgDA5Q1vAQCkAiDcW/0WACBWgQRgX63TBK4DAEAFEIST6m8BAKACXPVn+dgAeIUCEEavGmcpeBkAoCnAZfvK2W/lXA1cBQBoCiAwJ6vkHQAAUwDF6Van7wCAIinAXffi6W9F7wAAAa0EC9ThWueC/iIAYCAFUKiOtd6THYsAAEcBms3rdQPgyQrQbstG5S8kzqkFCACUJNB0d8Xc8fMGcA0AgCSBtq6Mc5FJrwAARBnQenXN1Ddzn+6lFQBwNvTTFcDemp/XBgDgtnCAJLDnEkuphaU+DwDlSWDfNbYz383N4EsAoDgJ7L7FmBfixhUAUKsAAzfZz0OnuPlnBQBIHcuyDHXb5HW4cQUAlCWBpmtrqdIG+tOjRQEgM6Jvmvxc2bYmQBwXAECBBWBj9A/i872BkyggID1aAACTLYA5+D/jXHiFkd8CrNAncGIS2BP87+n/+ZTZwABuXKFT6BQL8NlWvbO/vt4Q8ZxpFKAACwCAL641oa9+9+yP/NfdCv0Xq8j9G/Ia3LhAs2hp3nDzfb1RDxz4+yaF4Us1/hhoqqGAiF0SC9wX0BOi/12I8eP5N9I/nv+uzjicD0kbo1yhAN2/+jAATHrU8o4Vd4X0/yj+lkCGCz+xTaakQBvleQAQtPCfjnHFqnBI53T8HWEEzv5lFHBOjequBG8A3IWfu3LV6Rbwm6Ie1SqYVwj/VTikaGBINgDitf+eXKdfGSKet10IAIps/ZovqoXSaMMAPAAInfuLKEBssOX+t6atAGOmSqb6QIp5e/i1IF4k+le1gCwfyEHfAL8WJLW2j/3vmiMCGoRj+KUACVi5GQp+XzZ9Q8sEQoznH7REd4CBvRrzg39NAVJPANcYWOm2gO+NG9lAEM8Wk/OXQ3JGf+aGtA4AfgeC5gGB4wMTb6sljOAWuzn4DyD83NQTCQZJoOZwEYgray4MgL/BIPrfhqDWjiH93CnEEj5djxk+UOKczkMAcAGJkye7DiYzRCDQ7h5PBUDZWhjli0BubURfDgCvCeYEb2kgAO060ZJngjYALnwgJRMAfww1MjjWywLT7ZQkgCp0Yt3gK4IG3gWAjMWw5Iuk9P6Ps24A+ABAOSGKEoH25kN2ScG7koCcPJgz7bVp76EDAxsAARwoef7avPt41A5sAESIoKbJa8/m4yEM6MsAICkTlbNmV+/xg34MyMsAkLQpMutKUeqPWScGeAMgRAUpZX4N7jvtwcDbAJCzHHbdW5bjYWX6k9a84G0eMMcFStIA+zaef26o2gCw2GrvcpAmueyAoydNMXgfAML3hEiazdaQiN2LgbwOAMEu0FCK5zoC+PmXromANwBcAJBEn0WhinLhCN4HgEgXyJlOO+Hc0QkINgAco6Cp5VbKKdz+HwTv84BxLjD5VilNPHPyubv+vQCIMQGd+zA44C1jPfunMaTXLQVdDS0H0EgsAuacO+UXWoAIEzCw/YIiAPbKcE0BQBe1ju3C6yPbXbWb6wJ7hnZ0E6a6f2MTAIALNLA/uVOBWYeOtwb0Ti5L+PnDjYBZbQc2ADrX2MlG9OxMBeY1HnnpM3YBt8n7yW2SSDacbQcIaAJM4f/VjkU8ySBtB4hXCtLOgq+OpwKyHSCcCTAVfv7fjYlGEXBhIHbQkgGgzvD/2VyaR9eFaDtArFKQreyr1pnciqVsB1jkAtkRfmJzKBsImNBvZD92E2Bc9JFO48hbAAABIKPhv75boB8BWwBgTID5ZI10G7rrgtAWABQTYF7xlZGU7nJO0y4BQJgAc/h14IKWGwRsAYCoBJjDb6nsS8fuAN5ndwBMgNjv5hn9oSsEbAGoNQFHT/jt81KtCNDtAKsTQXtbhZ4Le40I2AJQDoAjI/x3P6VbAKBMQKD360fAFgAAExDo/Yy/JQ08bgEA0wCSYLTJ7X+wBQALADQ8IaWBANoCgG8CSFJ+Ta4NwBYAIBNAkoU32QKArwEkiYxzUX3aawDJj84M/0f/mcJtAEA0gGQ64rYATAEATQ1/JwK2AECYAIo14roFYKlEkLgAczsDRDEByjWsswUAQQNIefpv7oNgMIkgSQnqtgHA0ABKFWBD8rEzwEoN0Ozp10TANgB1GkAygX1bCNgCUKUBOmno7xGwM8CJAKAJvr8TAdsAlJgA5TLkbQNQ+Mg85TciYBuA2SaAtGTMeXcCwMgDykb8FAHbALy7CrENwLsRsOP/cgRsA/g+C7IN4EbANoAbAdsAbATs+L/2kW0ANwK2AXz1w4+L/z8CDADebzi4XHs84QAAAABJRU5ErkJggg=="})))),this._watermarkFilter=null,this._watermarkImage=null}_render(t){return this._loadWatermarkImage().then(this._applyWatermarkFilter)}dispose(){this._watermarkFilter&&this._watermarkFilter.dispose(),super.dispose()}}Ps.identifier="license-watermark",Ps.prototype.availableOptions={},Lr.Operations.LicenseWatermarkOperation=Ps;var Bs=Ps;const{Vector2:zs}=Ui;class Ls extends Zi.Filter{constructor(...t){super(...t),this._fragmentSource="/*!\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform vec2 u_controlPoint1;\nuniform vec2 u_controlPoint2;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 vector = u_controlPoint2 - u_controlPoint1;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    float radius = smoothstep(0.0, 1.0,\n      abs(\n        clamp(dot(v_texCoord - u_controlPoint1, vector) / dot(vector, vector), 0.0, 1.0)\n      )\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n      color += _sample * weight;\n      total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n",this._lastBlurRadius=null,this._lastControlPoint1=new zs,this._lastControlPoint2=new zs,this._blurFilter=new an,this._blurredRenderTarget=new Zi.CanvasRenderTarget(100,100,1),this._maskRenderTarget=new Zi.CanvasRenderTarget(100,100,1)}_applyCanvas(t,e,i,r=!1){if("low"===this._options.blurQuality)return void this._renderLQBlur(t,e,i,r);const n=e.getDimensions(),o=!i.getDimensions().equals(n);if(e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||o){const o=new zs(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(o);const s={blurRadius:this._options.blurRadius,texSize:n},a=(t,e,i)=>Math.min(Math.max(t,e),i),l=(t,e,i)=>{const r=a((i-t)/(e-t),0,1);return r*r*(3-2*r)},c=this._options.controlPoint2.clone().subtract(this._options.controlPoint1.clone()),{blurRadius:u}=this._options,h=(t,e)=>l(0,1,Math.abs(a(new zs(t,e).subtract(this._options.controlPoint1).dot(c)/c.dot(c),0,1)))*u;this._blurFilter.set(s),this._blurFilter._applyCanvas(t,e,i,r,h),this._lastBlurRadius=this._options.blurRadius}}_renderLQBlur(t,e,i,r=!1){const n=e.getDimensions(),o=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions());const s=!this._lastControlPoint1.equals(this._options.controlPoint1)||!this._lastControlPoint2.equals(this._options.controlPoint2)||o,a=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||o;s&&(this._renderMask(),this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone()),a&&(this._blurImage(e,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,i)}_renderMask(){const t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),i=new zs(t.width,t.height),r=this._options.controlPoint1.clone().multiply(i),n=this._options.controlPoint2.clone().multiply(i),o=e.createLinearGradient(r.x,r.y,n.x,n.y);o.addColorStop(0,"#FFFFFF"),o.addColorStop(1,"#000000"),e.fillStyle=o,e.fillRect(0,0,t.width,t.height)}_applyMask(t,e){const i=e.getContext(),r=t.getCanvas(),n=t.getContext(),o=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),a=n.getImageData(0,0,r.width,r.height),l=a.data,c=o.getImageData(0,0,r.width,r.height).data,u=s.getImageData(0,0,r.width,r.height).data;let h;for(let t=0;t<r.width*r.height*4;t+=4)h=u[t]/255,l[t]=h*l[t]+(1-h)*c[t],l[t+1]=h*l[t+1]+(1-h)*c[t+1],l[t+2]=h*l[t+2]+(1-h)*c[t+2];i.putImageData(a,0,0)}dispose(){super.dispose(),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}}Ls.prototype.availableOptions={blurRadius:{type:ft.NUMBER,default:30,uniformType:mt.FLOAT},controlPoint1:{type:ft.VECTOR2,default:new zs(0,.5),uniformType:mt.FLOAT2},controlPoint2:{type:ft.VECTOR2,default:new zs(1,.5),uniformType:mt.FLOAT2},delta:{type:ft.VECTOR2,default:new zs(1,1),uniformType:mt.FLOAT2},texSize:{type:ft.VECTOR2,default:new zs(100,100),uniformType:mt.FLOAT2}};var Ns=Ls;const{Vector2:Us}=Ui;class js extends _r{constructor(...t){super(...t),this._lastBlurRadius=this._options.blurRadius,this._lastControlPoint1=this._options.controlPoint1.clone(),this._lastControlPoint2=this._options.controlPoint2.clone();const e={blurQuality:{type:ft.STRING}};this._horizontalFilter=new Ns({},e),this._verticalFilter=new Ns({},e),this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new Us(.5,.5)),this._verticalFilter.setDelta(new Us(-.5,.5)),this._filter=new Ns({},e)}rotate(t){const{controlPoint1:e}=this._options,{controlPoint2:i}=this._options;90===t?(e.flip(),e.x=1-e.x,i.flip(),i.x=1-i.x):-90===t&&(e.flip(),e.y=1-e.y,i.flip(),i.y=1-i.y),this.set({controlPoint1:e,controlPoint2:i})}flip(t){const{controlPoint1:e}=this._options,{controlPoint2:i}=this._options;switch(t){case"horizontal":e.x=1-e.x,i.x=1-i.x;break;case"vertical":e.y=1-e.y,i.y=1-i.y}this.set({controlPoint1:e,controlPoint2:i})}transform(t){const e={};["controlPoint1","controlPoint2"].forEach((i=>{const r=this.getOption(i);e[i]=t.applyToRelativePoint(r)})),["blurRadius"].forEach((i=>{const r=this.getOption(i);e[i]=t.applyToRelativeSize(r)})),this.set(e,!1)}_renderWebGL(t){return this._renderBlur(t)}_renderCanvas(t){return this._options.highQualityCanvasBlur?this._renderBlur(t):this._renderLQCanvasBlur(t)}_renderBlur(t){const e=t.getDimensions(),i=e.min(),{blurRadius:r,controlPoint1:n,controlPoint2:o}=this._options,s={blurRadius:r*i,controlPoint1:n.clone(),controlPoint2:o.clone(),texSize:e,blurQuality:"high"};return this._horizontalFilter.set(s),this._verticalFilter.set(s),this._renderTexture.render(this._container),Promise.resolve()}_renderLQCanvasBlur(t){const e=t.getDimensions(),{blurRadius:i,controlPoint1:r,controlPoint2:n}=this._options;return this._filter.set({blurRadius:i,controlPoint1:r.clone(),controlPoint2:n.clone(),texSize:e,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}hasChanges(){return!0}}js.identifier="linear-focus",js.prototype.availableOptions={controlPoint1:{type:ft.VECTOR2,default:new Us(0,.5)},controlPoint2:{type:ft.VECTOR2,default:new Us(1,.5)},blurRadius:{type:ft.NUMBER,default:.025},highQualityCanvasBlur:{type:ft.BOOLEAN,default:!1}},Lr.Operations.LinearFocusOperation=js;var Hs=js;const{Vector2:Ws}=Ui;class Gs extends Zi.Filter{constructor(...t){super(...t),this._fragmentSource="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_blurRadius;\nuniform float u_gradientSize;\nuniform float u_size;\nuniform vec2 u_start;\nuniform vec2 u_end;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    vec2 normal = normalize(vec2(u_start.y - u_end.y, u_end.x - u_start.x));\n    float radius = smoothstep(0.0, 1.0,\n      (abs(\n        dot(v_texCoord * u_texSize - u_start, normal)\n      ) - u_size) / u_gradientSize\n    ) * u_blurRadius;\n\n    for (float t = -30.0; t <= 30.0; t++) {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n}\n",this._lastBlurRadius=null,this._lastGradientRadius=null,this._lastStart=new Ws,this._lastEnd=new Ws,this._blurFilter=new an,this._blurredRenderTarget=new Zi.CanvasRenderTarget(100,100,1),this._maskRenderTarget=new Zi.CanvasRenderTarget(100,100,1)}_applyCanvas(t,e,i,r=!1){if("low"===this._options.blurQuality)return void this._renderLQBlur(t,e,i,r);const n=e.getDimensions(),o=!i.getDimensions().equals(n);if(e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||o){const o=new Ws(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(o);const s={blurRadius:this._options.blurRadius,texSize:n},a=(t,e,i)=>Math.min(Math.max(t,e),i),l=(t,e,i)=>{const r=a((i-t)/(e-t),0,1);return r*r*(3-2*r)},{blurRadius:c,gradientSize:u,size:h,start:d,end:p,texSize:f}=this._options,m=new Ws(d.y-p.y,p.x-d.x);m.divide(m.len());const g=(t,e)=>l(0,1,(Math.abs(f.clone().multiply(t,e).subtract(d).dot(m))-h)/u)*c;this._blurFilter.set(s),this._blurFilter._applyCanvas(t,e,i,r,g),this._lastBlurRadius=this._options.blurRadius}}_renderLQBlur(t,e,i,r=!1){const n=e.getDimensions(),o=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions());const s=!this._lastStart.equals(this._options.start)||!this._lastEnd.equals(this._options.end)||this._lastGradientRadius!==this._options.size||o,a=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||o;s&&(this._renderMask(),this._lastStart=this._options.start.clone(),this._lastEnd=this._options.end.clone(),this._lastGradientRadius=this._options.size),a&&(this._blurImage(e,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,i)}_renderMask(){const t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),i=this._maskRenderTarget.getPixelRatio(),r=new Ws(t.width,t.height),n=this._options.size*r.min()*i,o=this._options.gradientSize*r.min()*i,s=this._options.start.clone().multiply(r),a=this._options.end.clone().multiply(r).clone().subtract(s),l=s.clone().add(a.clone().divide(2)),c=a.len(),u=a.clone().divide(c),h=l.clone().add((n+o)*u.y,-(n+o)*u.x),d=l.clone().add(-(n+o)*u.y,(n+o)*u.x),p=e.createLinearGradient(h.x,h.y,d.x,d.y),f=d.clone().subtract(h).len();p.addColorStop(0,"#000000"),p.addColorStop(o/2/f,"#FFFFFF"),p.addColorStop(1-o/2/f,"#FFFFFF"),p.addColorStop(1,"#000000"),e.fillStyle=p,e.fillRect(0,0,t.width,t.height)}_applyMask(t,e){const i=e.getContext(),r=t.getCanvas(),n=t.getContext(),o=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),a=n.getImageData(0,0,r.width,r.height),l=a.data,c=o.getImageData(0,0,r.width,r.height).data,u=s.getImageData(0,0,r.width,r.height).data;let h;for(let t=0;t<r.width*r.height*4;t+=4)h=u[t]/255,l[t]=h*l[t]+(1-h)*c[t],l[t+1]=h*l[t+1]+(1-h)*c[t+1],l[t+2]=h*l[t+2]+(1-h)*c[t+2];i.putImageData(a,0,0)}dispose(){super.dispose(),this._blurFilter.dispose()}}Gs.prototype.availableOptions={blurRadius:{type:ft.NUMBER,default:30,uniformType:mt.FLOAT},size:{type:ft.NUMBER,default:50,uniformType:mt.FLOAT},gradientSize:{type:ft.NUMBER,default:50,uniformType:mt.FLOAT},start:{type:ft.VECTOR2,default:new Ws(0,.5),uniformType:mt.FLOAT2},end:{type:ft.VECTOR2,default:new Ws(1,.5),uniformType:mt.FLOAT2},delta:{type:ft.VECTOR2,default:new Ws(1,1),uniformType:mt.FLOAT2},texSize:{type:ft.VECTOR2,default:new Ws(100,100),uniformType:mt.FLOAT2}};var Vs=Gs;const{Vector2:$s}=Ui;class Zs extends _r{constructor(...t){super(...t),this._lastBlurRadius=this._options.blurRadius,this._lastSize=this._options.size,this._lastGradientSize=this._options.gradientSize;const e={blurQuality:{type:ft.STRING}};this._horizontalFilter=new Vs({},e),this._verticalFilter=new Vs({},e),this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new $s(.5,.5)),this._verticalFilter.setDelta(new $s(-.5,.5)),this._filter=new Vs({},e),this._renderBlur.bind(this)}rotate(t){const{start:e}=this._options,{end:i}=this._options;90===t?(e.flip(),e.x=1-e.x,i.flip(),i.x=1-i.x):-90===t&&(e.flip(),e.y=1-e.y,i.flip(),i.y=1-i.y),this.set({start:e,end:i})}flip(t){const{start:e}=this._options,{end:i}=this._options;switch(t){case"horizontal":e.x=1-e.x,i.x=1-i.x;break;case"vertical":e.y=1-e.y,i.y=1-i.y}this.set({start:e,end:i})}transform(t){const e={};["start","end"].forEach((i=>{const r=this.getOption(i);e[i]=t.applyToRelativePoint(r)})),["blurRadius","size","gradientSize"].forEach((i=>{const r=this.getOption(i);e[i]=t.applyToRelativeSize(r)})),this.set(e,!1)}_renderWebGL(t){return this._renderBlur(t)}_renderCanvas(t){return this._options.highQualityCanvasBlur?this._renderBlur(t):this._renderLQCanvasBlur(t)}_renderBlur(t){const e=t.getDimensions(),i=e.min(),r=this._options.start.clone(),n=this._options.end.clone(),{blurRadius:o,size:s,gradientSize:a}=this._options,l={blurRadius:o*i,size:s*i,gradientSize:a*i,start:r.clone().multiply(e),end:n.clone().multiply(e),texSize:e,blurQuality:"high"};return this._horizontalFilter.set(l),this._verticalFilter.set(l),this._renderTexture.render(this._container),Promise.resolve()}_renderLQCanvasBlur(t){const e=t.getDimensions(),{blurRadius:i,size:r,gradientSize:n,start:o,end:s}=this._options;return this._filter.set({blurRadius:i,gradientSize:n,size:r,start:o.clone(),end:s.clone(),texSize:e,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}hasChanges(){return!0}}Zs.identifier="mirrored-focus",Zs.prototype.availableOptions={start:{type:ft.VECTOR2,default:new $s(0,.5)},end:{type:ft.VECTOR2,default:new $s(1,.5)},blurRadius:{type:ft.NUMBER,default:.025},size:{type:ft.NUMBER,default:.1},gradientSize:{type:ft.NUMBER,default:.1},highQualityCanvasBlur:{type:ft.BOOLEAN,default:!1}},Lr.Operations.MirroredFocusOperation=Zs;var Xs=Zs;const{Vector2:Ys}=Ui;class qs extends _r{_render(t){const e=this._options.rotation%360,i=e*(Math.PI/180),r=90===e||270===e,n=this._options.flipHorizontally!==this._options.flipVertically,o=r&&n?!this._options.flipVertically:this._options.flipVertically,s=r&&n?!this._options.flipHorizontally:this._options.flipHorizontally;this._sprite.setScale(s?-1:1,o?-1:1),this._sprite.setRotation(i),this._sprite.setAnchor(.5,.5),this._sprite.updateTransform();const a=this._sprite.getBounds();return this._renderTexture.resizeTo(new Ys(a.width,a.height)),this._sprite.setPosition(this._renderTexture.getDimensions().divide(2).round()),this._renderTexture.render(this._container),Promise.resolve()}getNewDimensions(t){return t=t.clone(),this._options.rotation%180&&t.flip(),t}flip(t){const{rotation:e}=this._options;switch((90===e||270===e)&&(t="vertical"===t?"horizontal":"vertical"),t){case"vertical":this.setFlipVertically(!this.getFlipVertically());break;case"horizontal":this.setFlipHorizontally(!this.getFlipHorizontally())}}}qs.identifier="orientation",qs.prototype.availableOptions={rotation:{type:ft.NUMBER,default:0,validation(t){if(t%90!=0)throw new Error("OrientationOperation: `rotation` has to be a multiple of 90.")},setter:t=>(t+360)%360},flipVertically:{type:ft.BOOLEAN,default:!1},flipHorizontally:{type:ft.BOOLEAN,default:!1}},Lr.Operations.OrientationOperation=qs;var Ks=qs;const{Vector2:Qs}=Ui;class Js extends _r{constructor(...t){super(...t),this._flipContainer=new Zi.Container}_render(t){const{position:e,rotation:i,scale:r,pivot:n,outputResolution:o}=this._options,s=this._sdk.getTextureScale(),a=o.clone().multiply(s).ceil();return this._renderTexture.resizeTo(a),this._sprite.setRotation(i),this._sprite.setPosition(e),this._sprite.setPivot(n),this._sprite.setScale(r),this._renderTexture.render(this._container),Promise.resolve()}getNewDimensions(t){const e=this._sdk.getTextureScale();return this._options.outputResolution.clone().multiply(e).ceil()}}Js.identifier="output",Js.prototype.availableOptions={position:{type:ft.VECTOR2,default:new Qs(0,0)},rotation:{type:ft.NUMBER,default:0},scale:{type:ft.VECTOR2,default:new Qs(1,1)},pivot:{type:ft.VECTOR2,default:new Qs(0,0)},outputResolution:{type:ft.VECTOR2,default:new Qs(100,100)}},Lr.Operations.OutputOperation=Js;var ta=Js;const{OverlayFilter:ea}=Zi.Filters,{Vector2:ia}=Ui;class ra extends _r{constructor(...t){super(...t),this._overlayTexture=Zi.Texture.fromImage(this._options.image),this._overlayContainer=new Zi.Container,this._overlaySprite=new Zi.Sprite,this._overlaySprite.setTexture(this._overlayTexture),this._overlaySprite.setAnchor(0,0),this._overlayContainer.addChild(this._overlaySprite),this._overlayFilter=new Zi.Filters.OverlayFilter({overlayImage:this._overlayTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayTexture}),this._sprite.setFilters([this._overlayFilter]),this._renderedOverlaySprite=new Zi.Sprite,this._renderedOverlayContainer=new Zi.Container,this._renderedOverlayContainer.addChild(this._renderedOverlaySprite),this._overlayRendered=!1,this._lastInputDimensions=new ia(0,0)}setOption(t,e){if(super.setOption(t,e),"image"===t&&e&&this._sdk){const t=this._sdk.getRenderer(),i=this._overlayTexture.getBaseTexture();i.setSource(e),t.isOfType(gt.WEBGL)&&t.updateTexture(i),this._overlayRendered=!1}}_render(t){const e=t.getDimensions(),{image:i,alpha:r,blendMode:n}=this._options;return i?((!this._overlayRendered||!this._lastInputDimensions.equals(e))&&(this._renderOverlayToRenderTexture(t),this._overlayRendered=!0,this._lastInputDimensions.copy(e)),this._overlayFilter.set({blendMode:n,overlayImage:this._overlayRenderTexture.getBaseTexture().getGLUnit(),overlayTexture:this._overlayRenderTexture,alpha:r}),this._sprite.setFilters([this._overlayFilter]),this._renderTexture.render(this._container),Promise.resolve()):(this._sprite.setFilters([]),this._renderTexture.render(this._container),Promise.resolve())}_renderOverlayToRenderTexture(t){const e=this._sdk.getRenderer(),i=t.getDimensions();this._overlayRenderTexture||(this._overlayRenderTexture=new Zi.RenderTexture(e,i.x,i.y),this._renderedOverlaySprite.setTexture(this._overlayRenderTexture));const{width:r,height:n}=this._options.image,o=It.resizeVectorToFill(new ia(r,n),i),{flipHorizontally:s,flipVertically:a}=this._options,l=s?-1:1,c=a?-1:1;this._overlaySprite.setWidth(o.x*l),this._overlaySprite.setHeight(o.y*c),this._overlaySprite.setPosition(i.x*(1-l)*.5,i.y*(1-c)*.5);const u=this._overlayRenderTexture.getBaseTexture();this._overlayRenderTexture.resizeTo(i),e.isOfType(gt.WEBGL)&&(u.setGLUnit(4),e.updateTexture(u,!1)),this._overlayRenderTexture.render(this._overlayContainer)}dispose(){super.dispose(),this._overlaySprite&&this._overlaySprite.dispose(),this._overlayRenderTexture&&this._renderedOverlaySprite.dispose(),this._overlayFilter&&this._overlayFilter.dispose(),this._overlayTexture&&this._overlayTexture.dispose(),this._overlayRenderTexture&&this._overlayRenderTexture.dispose(),this._renderedOverlaySprite&&this._renderedOverlaySprite.dispose()}}ra.identifier="overlay",ra.BLEND_MODES=ea.BLEND_MODES,ra.prototype.availableOptions={identifier:{type:ft.STRING},image:{type:ft.IMAGE},blendMode:{type:ft.NUMBER,default:ea.BLEND_MODES.MULTIPLY,available:Object.keys(ea.BLEND_MODES).map((t=>ea.BLEND_MODES[t]))},alpha:{type:ft.NUMBER,default:1},flipHorizontally:{type:ft.BOOLEAN,default:!1},flipVertically:{type:ft.BOOLEAN,default:!1}},Lr.Operations.OverlayOperation=ra;var na=ra;const{Vector2:oa}=Ui;class sa extends Zi.Filter{constructor(...t){super(...t),this._fragmentSource="/*\n * Based on evanw's glfx.js tilt shift shader:\n * https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js\n * @license\n */\n\nuniform sampler2D u_image;\nuniform float u_radius;\nuniform float u_blurRadius;\nuniform float u_gradientRadius;\nuniform vec2 u_position;\nuniform vec2 u_delta;\nuniform vec2 u_texSize;\nvarying vec2 v_texCoord;\n\nconst float blurSteps = 30.0;\nconst float EPSILON = 0.000000001;\n\nfloat random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt = dot(co.xy,vec2(a,b));\n    highp float sn = mod(dt, 3.14);\n    return fract(sin(sn) * c);\n}\n\nvoid main() {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    vec2 coord = v_texCoord * u_texSize;\n    vec2 diff = coord - u_position;\n    float dist = sqrt(diff.x * diff.x + diff.y * diff.y);\n\n    float blurPercentage = smoothstep( \n      0.0, 1.0,\n      (abs(dist) - u_radius) / u_gradientRadius\n    );\n\n    float radius = blurPercentage * u_blurRadius;\n    float offset = random(gl_FragCoord.xy / u_texSize.xy);\n\n    for (float t = -blurSteps; t <= blurSteps; t++) {\n        float percent = (t + offset - 0.5) / blurSteps;\n        float weight = 1.0 - abs(percent);\n        vec4 _sample = texture2D(u_image, v_texCoord + u_delta * percent * radius / u_texSize);\n\n        color += _sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / max(total, EPSILON);\n}\n",this._lastBlurRadius=null,this._lastGradientRadius=null,this._lastPosition=new oa,this._blurFilter=new an,this._blurredRenderTarget=new Zi.CanvasRenderTarget(100,100,1),this._maskRenderTarget=new Zi.CanvasRenderTarget(100,100,1)}_applyCanvas(t,e,i,r=!1){if("low"===this._options.blurQuality)return void this._renderLQBlur(t,e,i,r);const n=e.getDimensions(),o=!i.getDimensions().equals(n),{blurRadius:s,position:a,texSize:l,gradientRadius:c}=this._options;if(e.getBaseTexture().isDirty()||this._lastBlurRadius!==s||o){const o=new oa(this._options.delta.x,this._options.delta.y);this._blurFilter.setDelta(o);const u={blurRadius:s,texSize:n},h=(t,e,i)=>Math.min(Math.max(t,e),i),d=(t,e,i)=>{const r=h((i-t)/(e-t),0,1);return r*r*(3-2*r)},p=(t,e)=>d(0,1,(Math.abs(l.clone().multiply(t,e).subtract(a).len())-this._options.radius)/(2*c))*s;this._blurFilter.set(u),this._blurFilter._applyCanvas(t,e,i,r,p),this._lastBlurRadius=s}}_renderLQBlur(t,e,i,r=!1){const n=e.getDimensions(),o=!this._blurredRenderTarget.getDimensions().equals(n);this._blurredRenderTarget.setPixelRatio(e.getPixelRatio()),this._blurredRenderTarget.resizeTo(e.getDimensions()),this._maskRenderTarget.setPixelRatio(e.getPixelRatio()),this._maskRenderTarget.resizeTo(e.getDimensions());const s=!this._lastPosition.equals(this._options.position)||this._lastGradientRadius!==this._options.gradientRadius||o,a=e.getBaseTexture().isDirty()||this._lastBlurRadius!==this._options.blurRadius||o;s&&(this._renderMask(),this._lastPosition=this._options.position.clone(),this._lastGradientRadius=this._options.gradientRadius),a&&(this._blurImage(e,this._blurredRenderTarget,this._options.blurRadius),this._lastBlurRadius=this._options.blurRadius),this._applyMask(e,i)}_renderMask(){const t=this._maskRenderTarget.getCanvas(),e=this._maskRenderTarget.getContext(),i=new oa(t.width,t.height),r=this._maskRenderTarget.getPixelRatio(),n=this._options.position.clone().multiply(i);let{radius:o,gradientRadius:s}=this._options;o*=t.height,s*=t.height;const a=e.createRadialGradient(n.x,n.y,0,n.x,n.y,(o+s)*r);a.addColorStop(0,"#FFFFFF"),a.addColorStop(o/(o+s),"#FFFFFF"),a.addColorStop(1,"#000000"),e.fillStyle=a,e.fillRect(0,0,i.x,i.y)}_applyMask(t,e){const i=e.getContext(),r=t.getCanvas(),n=t.getContext(),o=this._blurredRenderTarget.getContext(),s=this._maskRenderTarget.getContext(),a=n.getImageData(0,0,r.width,r.height),l=a.data,c=o.getImageData(0,0,r.width,r.height).data,u=s.getImageData(0,0,r.width,r.height).data;let h;for(let t=0;t<r.width*r.height*4;t+=4)h=u[t]/255,l[t]=h*l[t]+(1-h)*c[t],l[t+1]=h*l[t+1]+(1-h)*c[t+1],l[t+2]=h*l[t+2]+(1-h)*c[t+2];i.putImageData(a,0,0)}dispose(){super.dispose(),this._blurFilter.dispose(),this._blurredRenderTarget.dispose(),this._maskRenderTarget.dispose()}}sa.prototype.availableOptions={blurRadius:{type:ft.NUMBER,default:30,uniformType:mt.FLOAT},radius:{type:ft.NUMBER,default:50,uniformType:mt.FLOAT},gradientRadius:{type:ft.NUMBER,default:25,uniformType:mt.FLOAT},position:{type:ft.VECTOR2,default:new oa(.5,.5),uniformType:mt.FLOAT2},delta:{type:ft.VECTOR2,default:new oa(1,1),uniformType:mt.FLOAT2},texSize:{type:ft.VECTOR2,default:new oa(100,100),uniformType:mt.FLOAT2}};var aa=sa;const{Vector2:la}=Ui;class ca extends _r{constructor(...t){super(...t),this._lastBlurRadius=this._options.blurRadius,this._lastGradientRadius=this._options.gradientRadius;const e={blurQuality:{type:ft.STRING}};this._horizontalFilter=new aa({},e),this._verticalFilter=new aa({},e),this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new la(.5,.5)),this._verticalFilter.setDelta(new la(-.5,.5)),this._filter=new aa({},e)}rotate(t){const{position:e}=this._options;90===t?(e.flip(),e.x=1-e.x):-90===t&&(e.flip(),e.y=1-e.y),this.set({position:e})}flip(t){const{position:e}=this._options;switch(t){case"horizontal":e.x=1-e.x;break;case"vertical":e.y=1-e.y}this.set({position:e})}transform(t){const e={},i=this.getPosition();e.position=t.applyToRelativePoint(i),["radius","blurRadius","gradientRadius"].forEach((i=>{const r=this.getOption(i);e[i]=t.applyToRelativeSize(r)})),this.set(e,!1)}_renderWebGL(t){return this._renderBlur(t)}_renderCanvas(t){return this._options.highQualityCanvasBlur?this._renderBlur(t):this._renderLQCanvasBlur(t)}_renderBlur(t){const e=t.getDimensions(),i=e.min(),{position:r,blurRadius:n,radius:o,gradientRadius:s}=this._options,a={blurRadius:n*i,radius:o*i,gradientRadius:s*i,position:r.clone().multiply(e),texSize:e,blurQuality:"high"};return this._horizontalFilter.set(a),this._verticalFilter.set(a),this._renderTexture.render(this._container),Promise.resolve()}_renderLQCanvasBlur(t){const{blurRadius:e,radius:i,gradientRadius:r,position:n}=this._options,o=t.getDimensions();return this._filter.set({blurRadius:e,radius:i,gradientRadius:r,position:n,texSize:o,blurQuality:"low"}),this._sprite.setFilters([this._filter]),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._filter.dispose(),this._verticalFilter.dispose(),this._horizontalFilter.dispose()}hasChanges(){return!0}}ca.identifier="radial-focus",ca.prototype.availableOptions={position:{type:ft.VECTOR2,default:new la(.5,.5)},radius:{type:ft.NUMBER,default:.25},gradientRadius:{type:ft.NUMBER,default:.125},blurRadius:{type:ft.NUMBER,default:.025},highQualityCanvasBlur:{type:ft.BOOLEAN,default:!1}},Lr.Operations.RadialFocusOperation=ca;var ua=ca;class ha extends Zi.Filter{constructor(){super(),this._fragmentSource="varying vec2 v_texCoord;\nuniform sampler2D u_image;\nuniform sampler2D u_filterImage;\nuniform sampler2D u_maskImage;\n\nvoid main() {\n  vec4 color0 = texture2D(u_image, v_texCoord);\n  vec4 color1 = texture2D(u_filterImage, v_texCoord);\n  vec4 mask = texture2D(u_maskImage, v_texCoord);\n  gl_FragColor = mix(color0, color1, mask);\n}\n"}_applyCanvas(t,e,i,r=!1){const n=e.getCanvas(),o=e.getContext(),s=i.getContext(),{maskCanvas:a,filterCanvas:l}=this._options,c=a.getContext("2d"),u=l.getContext("2d"),h=c.getImageData(0,0,n.width,n.height).data,d=o.getImageData(0,0,n.width,n.height),p=d.data,f=u.getImageData(0,0,n.width,n.height).data;let m;for(let t=0;t<n.width*n.height*4;t+=4)m=h[t]/255,p[t]=m*f[t]+(1-m)*p[t],p[t+1]=m*f[t+1]+(1-m)*p[t+1],p[t+2]=m*f[t+2]+(1-m)*p[t+2];s.putImageData(d,0,0)}}ha.prototype.availableOptions={maskImage:{type:ft.NUMBER,default:1,uniformType:mt.INT},maskCanvas:{type:ft.OBJECT,default:null},filterImage:{type:ft.NUMBER,default:2,uniformType:mt.INT},filterCanvas:{type:ft.OBJECT,default:null}};var da=ha;const{Vector2:pa}=Ui;var fa=class extends ae{constructor(t,e){super(e),this._isDisposed=!1,this._operation=t,this._dirtiness={},this.id=It.getUUID(),this._renderTextures={},this._identitySprite=new Zi.Sprite,this._sprite=new Zi.Sprite,this._hitTestSprite=new Zi.Sprite,this._renderers=[]}applyScale(t){}applyRotation(t){const e=this._operation.getInputDimensions();let i=180*this.getRotation()/Math.PI;i+=t,this.setRotation(i*Math.PI/180);const r=(t+360)%360*Math.PI/180,n=Math.cos(r),o=Math.sin(r),s=this._options.position.clone().subtract(.5).multiply(e),a=new pa(s.x*n-s.y*o,s.x*o+s.y*n).divide(e.clone().flip());this.setPosition(new pa(.5,.5).add(a))}applyFlip(t){const e=this.getPosition().clone();switch(t){case"horizontal":e.x=1-this._options.position.x;break;case"vertical":e.y=1-this._options.position.y}this.setPosition(e)}applyTransform(t){const e={};e.rotation=t.applyToRotation(this.getRotation()),e.position=t.applyToRelativePoint(this.getPosition()),this._options.dimensions&&(e.dimensions=t.applyToDimensions(this.getDimensions())),this.set(e,!1)}getDisplayObject(){return this._sprite}getHitTestDisplayObject(){return this._sprite}_getTexture(){throw new Error("Sprite#_getTexture is abstract and not implemented in child class.")}_prepareRenderTexture(t){if(this._renderTexture)this._renderTexture.clear();else{const e=this._getTexture();this._renderTextureContainer=new Zi.Container,this._renderTextureSprite=new Zi.Sprite(e),this._renderTextureContainer.addChild(this._renderTextureSprite),this._renderTexture=this._getRenderTexture(t.getRenderer(),e.getDimensions())}}_rendersToRenderTexture(t){return t.getOptions().smoothDownscaling&&t.getRenderer().isOfType(gt.WEBGL)}_optionEquals(t,e){return"type"===t||super._optionEquals(t,e)}update(t,e){this._isDisposed||(this._rendersToRenderTexture(t)&&(this._prepareRenderTexture(t),this._renderToRenderTexture(t)),this._updateSprite(e))}_updateSprite(t){[this._sprite,this._hitTestSprite].forEach((e=>{if(!e.getTexture())return;e.setAnchor(this._options.anchor),e.setPosition(this._options.position.clone().multiply(t)),void 0!==this._options.alpha&&e.setAlpha(this._options.alpha);let{dimensions:i}=this._options;i&&(i=i.clone().multiply(this._operation.getSDK().getTextureScale()),e.setWidth(i.x),e.setHeight(i.y)),e.updateTransform();const r=e.getTexture().getFrame(),n=new pa(r.width,r.height);e.setPivot(this._options.pivot.clone().multiply(n)),e.setRotation(this._options.rotation),e.updateTransform()}))}_renderToRenderTexture(t){const e=this._getTexture().getDimensions(),i=this._getRenderTexture(t.getRenderer(),e),r=e.clone();if(this._options.smoothDownscaling&&(r.x=It.nextHighestPOT(r.x),r.y=It.nextHighestPOT(r.y)),this._renderTexture.resizeTo(r),this._renderTexture.render(this._renderTextureContainer),this._options.smoothDownscaling){const t=r.clone().subtract(e.x,e.y).divide(r),n=i.getUVs().getUVs();n[0].x=n[3].x=0,n[1].x=n[2].x=1-t.x,n[0].y=n[1].y=0,n[2].y=n[3].y=1-t.y}this._sprite.setTexture(i)}isDirtyForRenderer(t){return t.id in this._dirtiness||(this._dirtiness[t.id]=!0),this._dirtiness[t.id]}setDirtyForRenderer(t,e){this._renderers[e.id]=e,this._dirtiness[e.id]=t}setDirty(t){for(const e in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[e])}_getRenderTexture(t,e=new pa(100,100)){return this._renderTextures[t.id]||(this._renderTextures[t.id]=new Zi.RenderTexture(t,e.x,e.y,1)),this._renderTextures[t.id]}dispose(){this._isDisposed=!0;for(const t in this._renderTextures)this._renderTextures[t].dispose()}canBeDuplicated(){return!0}canBeDeleted(){return!0}canMaskCanvas(){return!1}canAdjustPadding(){return!1}canBeTakenToFront(){return!0}canBeFlippedHorizontally(){return!0}};const{Vector2:ma}=Ui;class ga extends ae{constructor(...t){super(...t),this._lastOptions={},this._lastInputDimensions=new ma(0,0),this._brush=null}getBrushImage(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions))return this._brush;const{image:e,size:i}=this._options;e.width=e.height=Math.ceil(i*t.min());const r=It.createCanvas();r.width=e.width,r.height=e.height;const n=r.getContext("2d");n.drawImage(e,0,0,r.width,r.height);const o=this._tintImageData(n.getImageData(0,0,r.width,r.height),r.width,r.height);return n.putImageData(o,0,0),this._lastOptions=this.serializeOptions(["size","color"]),this._brush=r,this._lastInputDimensions=t.clone(),r}_tintImageData(t){const{color:e}=this._options;for(let i=0;i<t.data.length;i+=4)t.data[i]+=(255*e.r-t.data[i])*e.a,t.data[i+1]+=(255*e.g-t.data[i+1])*e.a,t.data[i+2]+=(255*e.b-t.data[i+2])*e.a;return t}clone(){return new(0,this.constructor)(this._options)}}ga.prototype.availableOptions={identifier:{type:ft.STRING},image:{type:ft.IMAGE},size:{type:ft.NUMBER,default:.05},color:{type:ft.COLOR,default:jt.RED}};class _a extends ga{getBrushImage(t){if(this._brush&&this.optionsEqual(this._lastOptions)&&t.equals(this._lastInputDimensions))return this._brush;let{size:e,hardness:i,color:r}=this._options;const n=It.createCanvas();n.width=n.height=Math.ceil(e*t.min());const o=n.getContext("2d");if(r=r.clone(),r.a=1,1===n.width)o.fillStyle=r.toRGBA(),o.fillRect(0,0,1,1);else{const t=o.createRadialGradient(n.width/2,n.height/2,Math.min(n.width/2-1,n.width/2*i),n.width/2,n.height/2,n.width/2);t.addColorStop(0,r.toRGBA());const e=r.clone();e.a=0,t.addColorStop(1,e.toRGBA()),o.fillStyle=t,o.fillRect(0,0,n.width,n.height)}return this._lastOptions=this.serializeOptions(["size","color","hardness"]),this._brush=n,this._lastInputDimensions=t.clone(),n}}_a.identifier="imgly_brush_radial",_a.prototype.availableOptions=b(b({},ga.prototype.availableOptions),{hardness:{type:ft.NUMBER,default:1}});const{Vector2:ya,CubicBezierCurve:va}=Ui;var ba=class{constructor(t,e,i=3){this._path=t,this._drawnCanvases=[],this._position=e,this._smooth=i}getBezierCurve(t,e,i,r){if(!e)return null;let n,o,s,a;r?(n=(r.x-e.x)/this._smooth,o=(r.y-e.y)/this._smooth):(n=(i.x-e.x)/this._smooth,o=(i.y-e.y)/this._smooth),t?(s=(i.x-t.x)/this._smooth,a=(i.y-t.y)/this._smooth):(s=(i.x-e.x)/this._smooth,a=(i.y-e.y)/this._smooth);const l=e.clone().add(s,a),c=i.clone().subtract(n,o);return new va(e,l,c,i)}renderToCanvas(t,e,i,r,n,o=1){if(-1!==this._drawnCanvases.indexOf(e))return;const s=new ya(e.width,e.height),a=e.getContext("2d"),l=this._position.clone().multiply(s),c=r?r.getPosition().clone().multiply(s):null,u=i?i.getPosition().clone().multiply(s):null,h=n?n.getPosition().clone().multiply(s):null,d=(l.clone().subtract(c).len(),t.width/10),p=this.getBezierCurve(u,c,l,h);let f;if(p){p.calculateSegments(20);const t=p.getLength();f=p.arcLengthApproxSample(Math.ceil(t/d))}else f=[l];for(let e=0;e<f.length;e++){const i=f[e];let r=.5*t.width/(2*d);r*=1-o,r=1/(1+r),a.globalAlpha=r,a.drawImage(t,i.x-t.width/2,i.y-t.height/2,t.width,t.height)}a.globalAlpha=1,this._drawnCanvases.push(e)}setPosition(t){this._position=t}getPosition(){return this._position.clone()}setDirty(){this._drawnCanvases=[]}};class xa extends ae{constructor(t,e,i){super(e),this._operation=t,this._canvas=i||It.createCanvas(),this._context=this._canvas.getContext("2d")}serializeOption(t,e=!1){return"controlPoints"===t?this._options.controlPoints.map((t=>{const i=t.getPosition();return e?i.toObject():i.clone()})):super.serializeOption(t,e)}_optionEquals(t,e){if("controlPoints"===t){const{controlPoints:t}=this._options;for(let i=0,r=t.length;i<r;i++)if(!t[i].getPosition().equals(e[i]))return!1;return!0}return super._optionEquals(t,e)}render(t){const{controlPoints:e,size:i}=this._options;if(e.length<2)return;const r=this.getBrush(),n=r&&r.getHardness?r.getHardness():1;let o,s,a,l;It.ensureCanvasDimensions(this._canvas,t),(!this._brush||this._lastBrushSize!==i||!t.equals(this._brushInputDimensions))&&(this._brushInputDimensions=t.clone(),this._lastBrushSize=i);for(let i=0;i<e.length;i++)o=e[i-2],s=e[i-1],a=e[i],l=e[i+1],a.renderToCanvas(this._options.brush.getBrushImage(t),this._canvas,o,s,l,n)}_createBrush(t){let{size:e,hardness:i,color:r}=this._options;const n=It.createCanvas();n.width=n.height=Math.ceil(e*t.min());const o=n.getContext("2d");if(r=r.clone(),r.a=1,1===n.width)o.fillStyle=r.toRGBA(),o.fillRect(0,0,1,1);else{const t=o.createRadialGradient(n.width/2,n.height/2,Math.min(n.width/2-1,n.width/2*i),n.width/2,n.height/2,n.width/2);t.addColorStop(0,r.toRGBA());const e=r.clone();e.a=0,t.addColorStop(1,e.toRGBA()),o.fillStyle=t,o.fillRect(0,0,n.width,n.height)}return n}addControlPoint(t){const e=new ba(this,t);this._options.controlPoints.push(e),this.emit("update",this)}getCanvas(){return this._canvas}setCanvas(t){this._canvas=t,this._context=t.getContext("2d")}setDirty(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._options.controlPoints.forEach((t=>{t.setDirty()}))}forEachControlPoint(t){this._options.controlPoints.forEach(t)}renderToCanvas(t){const e=t.getContext("2d");e.save(),e.globalAlpha=this._options.brush.getColor().a,e.drawImage(this._canvas,0,0),e.restore()}getCanvasDimensions(){return this._canvasDimensions}}xa.prototype.availableOptions={id:{type:ft.STRING,default:()=>It.getUUID()},brush:{type:ft.OBJECT,required:!0},controlPoints:{type:ft.ARRAY,default:[]},closed:{type:ft.BOOLEAN,default:!1}};var wa=xa;const{Vector2:Sa}=Ui;class ka extends fa{constructor(...t){super(...t),this._persistedPaths=[],this._outputCanvasDirty=!0,this._outputCanvas=It.createCanvas(),this._outputContext=this._outputCanvas.getContext("2d"),this._persistCanvas=It.createCanvas(),this._persistContext=this._persistCanvas.getContext("2d"),this._nextCanvas=It.createCanvas(),this._texture=Zi.Texture.fromCanvas(this._outputCanvas),this._sprite.setTexture(this._texture),this._onPathUpdate=this._onPathUpdate.bind(this)}applyFlip(t){this._options.paths.forEach((e=>{e.forEachControlPoint((e=>{const i=e.getPosition().clone();switch(t){case"horizontal":i.x=1-i.x;break;case"vertical":i.y=1-i.y}e.setPosition(i)})),e.setDirty(!0)})),this._reset()}applyRotation(t){this._options.paths.forEach((e=>{e.forEachControlPoint((e=>{const i=e.getPosition().clone();90===t?(i.flip(),i.x=1-i.x):-90===t&&(i.flip(),i.y=1-i.y),e.setPosition(i)})),e.setDirty(!0)})),this._reset()}applyTransform(t){let e=null;this._options.paths.forEach((i=>{i.forEachControlPoint((e=>{e.setPosition(t.applyToRelativePoint(e.getPosition()))}));const r=i.getBrush();r!==e&&(r.setSize(t.applyToRelativeSize(r.getSize())),e=r),i.setDirty(!0)})),this._reset()}clearCanvas(){if(!this._outputCanvas)return;this._outputCanvasDirty=!0;const{width:t,height:e}=this._outputCanvas;this._outputContext.clearRect(0,0,t,e)}clearPersistCanvas(){if(!this._persistCanvas)return;const{width:t,height:e}=this._persistCanvas;this._persistContext.clearRect(0,0,t,e)}serializeOptions(t,e=!1){const i=super.serializeOptions(t,e);return t||(i.type="brush"),i}serializeOption(t,e=!1){return"paths"===t?this._options.paths.map((t=>t.serializeOptions(void 0,e))):super.serializeOption(t,e)}createPath(t){const e=new wa(this._operation,{brush:t},this._nextCanvas);return e.on("update",this._onPathUpdate),this._options.paths.push(e),this.setDirty(!0),e}_onPathUpdate(){this._operation.setDirty(!0),this.setDirty(!0)}_onPathPersist(t){t.renderToCanvas(this._persistCanvas),this._nextCanvas=t.getCanvas();this._nextCanvas.getContext("2d").clearRect(0,0,this._nextCanvas.width,this._nextCanvas.height),this._persistedPaths.push(t)}_getTexture(){return this._texture}setDirtyForRenderer(t,e,i=!1){super.setDirtyForRenderer(t,e,i),t&&i&&(this._persistedPaths=[],this.clearPersistCanvas(),this._options.paths.forEach((t=>{t.setDirty(!0)})))}setDirty(t,e=!1){for(const i in this._dirtiness)this.setDirtyForRenderer(t,this._renderers[i],e)}render(t){const e=this._operation.getSDK().getRenderer();this.isDirtyForRenderer(e)&&(It.ensureCanvasDimensions(this._outputCanvas,t),It.ensureCanvasDimensions(this._persistCanvas,t),this._options.paths.forEach((e=>{e.render(t),e.getClosed()&&-1===this._persistedPaths.indexOf(e)&&this._onPathPersist(e)})),this.clearCanvas(),this._outputContext.drawImage(this._persistCanvas,0,0),this._options.paths.forEach((t=>{t.getClosed()||t.renderToCanvas(this._outputCanvas)})),this.setDirtyForRenderer(!1,e))}update(t,e){e&&(It.ensureCanvasDimensions(this._outputCanvas,e),It.ensureCanvasDimensions(this._persistCanvas,e),this._texture.getBaseTexture().update()),this.render(e);const i=t.getRenderer();i.isOfType(gt.WEBGL)&&i.updateTexture(this._texture.getBaseTexture()),super.update(t,e)}_reset(){this._persistedPaths=[],this._operation&&this._operation.setDirty(!0),this.setDirty(!0),this.clearCanvas(),this.clearPersistCanvas()}getCanvas(){return this._outputCanvas}_createRadialBrush(){return new _a}_getTempCanvas(){return this._nextCanvas}dispose(){super.dispose(),this._texture&&this._texture.getBaseTexture().dispose()}}ka.prototype.availableOptions={id:{type:ft.STRING,default:()=>It.getUUID()},position:{type:ft.VECTOR2,default:new Sa(0,0)},scale:{type:ft.VECTOR2,default:new Sa(1,1)},anchor:{type:ft.VECTOR2,default:new Sa(0,0)},pivot:{type:ft.VECTOR2,default:new Sa(0,0)},rotation:{type:ft.NUMBER,default:0},paths:{type:ft.ARRAY,default:[],setter(t){return t=t.map((t=>{if(t instanceof wa)return t;const{brush:e,closed:i}=t,r=new wa(this._operation,{brush:e,closed:i},this._nextCanvas);return t.controlPoints.forEach((t=>{r.addControlPoint(t)})),r})),this._reset(),t}}},ka.type="brush",ka.Brush=ga,ka.Path=wa,ka.Brushes={RadialBrush:_a};var Ca=ka;const{Vector2:Ta}=Ui;class Ea extends _r{constructor(...t){super(...t);const e=this._sdk.getRenderer();this._lastBlurRadius=null,this._blurredRenderTexture=new Zi.RenderTexture(e,100,100,1),this._maskRenderTexture=new Zi.RenderTexture(e,100,100,1),this._brushSprite=new Ca(this),this._brushSpriteContainer=new Zi.Container;const i=this._brushSprite.getDisplayObject();if(this._brushSpriteContainer.addChild(i),this._outputSprite=new Zi.Sprite,this._outputContainer=new Zi.Container,this._outputContainer.addChild(this._outputSprite),this._maskFilter=new da,e.isOfType(gt.WEBGL)){this._horizontalFilter=new an,this._verticalFilter=new an,this._sprite.setFilters([this._horizontalFilter,this._verticalFilter]),this._horizontalFilter.setDelta(new Ta(1,1)),this._verticalFilter.setDelta(new Ta(-1,1));let t=this._maskRenderTexture.getBaseTexture();t.setGLUnit(this._maskFilter.getMaskImage()),e.updateTexture(t,!1),t=this._blurredRenderTexture.getBaseTexture(),t.setGLUnit(this._maskFilter.getFilterImage()),e.updateTexture(t,!1)}else e.isOfType(gt.CANVAS)&&(this._blurFilter=new an,this._sprite.setFilters([this._blurFilter]),this._maskFilter.setMaskCanvas(this._maskRenderTexture.getRenderTarget().getCanvas()),this._maskFilter.setFilterCanvas(this._blurredRenderTexture.getRenderTarget().getCanvas()));this._outputSprite.setFilters([this._maskFilter])}flip(t){this._brushSprite.applyFlip(t),this.setDirty(!0,!0),this._lastBlurRadius=null}rotate(t){this._brushSprite.applyRotation(t),this.setDirty(!0,!0),this._lastBlurRadius=null}transform(t,e){this._brushSprite.applyTransform(t,e),this.setDirty(!0,!0),this._lastBlurRadius=null}_render(t){return this._renderBlur(t),this._renderMask(t),this._outputSprite.setTexture(t),this._renderTexture.render(this._outputContainer),Promise.resolve()}_renderMask(t){const e=t.getDimensions();this._maskRenderTexture.getDimensions().equals(e)||this._maskRenderTexture.resizeTo(e),this._brushSprite.update(this._sdk,e),this._maskRenderTexture.clear(jt.BLACK),this._maskRenderTexture.render(this._brushSpriteContainer);const i=this._sdk.getRenderer();i.isOfType(gt.WEBGL)&&i.updateTexture(this._maskRenderTexture.getBaseTexture(),!1)}_renderBlur(t){const e=t.getDimensions(),i=this._blurredRenderTexture.getDimensions();i.equals(e)||this._blurredRenderTexture.resizeTo(e);const{blurRadius:r}=this._options;if(this._lastBlurRadius!==r||!i.equals(e)){const t=this._sdk.getRenderer();let i;if(t.isOfType(gt.WEBGL)){i={blurRadius:r*e.min(),texSize:e},this._horizontalFilter.set(i),this._verticalFilter.set(i)}else t.isOfType(gt.CANVAS)&&(i={blurRadius:r},this._blurFilter.set(i));this._blurredRenderTexture.render(this._container),this._lastBlurRadius=r}const n=this._sdk.getRenderer();n.isOfType(gt.WEBGL)&&n.updateTexture(this._blurredRenderTexture.getBaseTexture(),!1)}getBrush(){return this._brushSprite}createPath(t,e=1){const i=new Ca.Brushes.RadialBrush({size:t,hardness:e,color:jt.WHITE}),r=this._brushSprite.createPath(i);return this._options.paths.push(r),this.setDirty(!0),r}setDirtyForRenderer(t,e,i){super.setDirtyForRenderer(t,e,i),this._brushSprite.setDirtyForRenderer(t,e,i)}dispose(){super.dispose();this._sdk.getRenderer().isOfType(gt.WEBGL)?(this._verticalFilter.dispose(),this._horizontalFilter.dispose()):this._blurFilter.dispose(),this._brushSprite.dispose(),this._maskFilter.dispose(),this._blurredRenderTexture.dispose(),this._maskRenderTexture.dispose()}hasChanges(){return!0}}Ea.identifier="selective-blur",Ea.prototype.availableOptions={blurRadius:{type:ft.NUMBER,default:.05},paths:{type:ft.ARRAY,default:[],setter(t){return this._brushSprite&&this._brushSprite.setPaths(t),t}}},Lr.Operations.SelectiveBlurOperation=Ea;var Ra=Ea;const{Vector2:Da,ColorMatrix:Ia}=Ui;class Oa extends fa{constructor(...t){super(...t);const{image:e}=this._options,i=e.src||e.filePath||e.toDataUrl&&e.toDataURL();this._isSVG=i&&(!!i.match(/\w+\.svg(?=\?|$)/i)||i.match(/data:image\/svg/i)),this._isSVG&&(this._canvas=It.createCanvas(),this._context=this._canvas.getContext("2d"),this._options.smoothDownscaling=!1),e&&this._onImageUpdate(),this._tintFilter=new Zi.Filters.TintFilter,this._adjustmentsFilter=new Gr,this._lastRenderedDimensions=Da.NULL,this._lastRenderedInputDimensions=Da.NULL,this._onOptionsChange=this._onOptionsChange.bind(this),this._options.adjustments.on("update",this._onOptionsChange)}applyScale(t){this.setDimensions(this.getDimensions().multiply(t))}serializeOptions(t,e=!1){const i=super.serializeOptions(t,e);return t||(i.type="sticker"),i}_rendersToRenderTexture(t){return this._options.smoothDownscaling&&!this._isSVG&&t.getRenderer().isOfType(gt.WEBGL)||this._hasAdjustments()||"none"!==this._options.tintMode}_getTexture(){return this._inputTexture}update(t,e){const{dimensions:i,image:r}=this._options;i.equals(Da.NULL)&&i.set(r.width,r.height),this._sprite.setSmoothDownscaling(!this._isSVG&&this.getSmoothDownscaling());if((!this._lastRenderedInputDimensions.equals(e)||!this._lastRenderedDimensions.equals(i)||this._lastRenderedImage!==r)&&this._isSVG&&t.getRenderer().isOfType(gt.WEBGL)){r.width=Math.round(i.x),r.height=Math.round(i.y);const t=4096,e=r.width/r.height;r.width>t&&(r.width=t,r.height=Math.round(r.width/e)),r.height>t&&(r.height=t,r.width=Math.round(r.height*e)),this._canvas.width=r.width,this._canvas.height=r.height,this._context.clearRect(0,0,r.width,r.height),this._context.drawImage(r,0,0,r.width,r.height),this._inputTexture.getBaseTexture().update()}this._rendersToRenderTexture(t)&&this._prepareRenderTexture(t);const n=[];if(this._rendersToRenderTexture(t)){if(this._hasAdjustments()){n.push(this._adjustmentsFilter);const{adjustments:t}=this._options,e=new Ia;e.multiply(Ia.createBrightnessMatrix(t.getBrightness())),e.multiply(Ia.createSaturationMatrix(t.getSaturation())),e.multiply(Ia.createContrastMatrix(t.getContrast())),this._adjustmentsFilter.set({colorMatrix:e})}this._options.tintMode&&"none"!==this._options.tintMode&&(n.push(this._tintFilter),this._tintFilter.set({mode:Zi.Filters.TintFilter.MODES[this._options.tintMode.toUpperCase()],color:this._options.tintColor}),this._sprite.getTexture()&&this._sprite.getTexture()._baseTexture&&this._sprite.getTexture()._baseTexture.setDirty(!0)),this._renderTextureSprite.setFilters(n)}this._rendersToRenderTexture(t)?this._renderToRenderTexture(t):this._sprite.setTexture(this._inputTexture),this._updateSprite(e),this._applyFlip(),this._lastRenderedDimensions.copy(i),this._lastRenderedInputDimensions.copy(e),this._lastRenderedImage=r}_applyFlip(){const t=this._sprite.getScale(),{flipHorizontally:e,flipVertically:i}=this._options;(e&&t.x>0||!e&&t.x<0)&&(t.x*=-1),(i&&t.y>0||!i&&t.y<0)&&(t.y*=-1),this._sprite.setScale(t)}applyFlip(t){super.applyFlip(t);const e={rotation:this._options.rotation},i=-1*(e.rotation/Math.PI*180);switch(e.rotation=i*Math.PI/180,t){case"horizontal":e.flipHorizontally=!this._options.flipHorizontally,this.set(e);break;case"vertical":e.flipVertically=!this._options.flipVertically,this.set(e)}}_hasAdjustments(){const{adjustments:t}=this._options;return 0!==t.getBrightness()||1!==t.getSaturation()||1!==t.getContrast()}_onImageUpdate(){let t=this._options.image;const e=this._operation.getSDK().getRenderer();this._isSVG&&e.isOfType(gt.WEBGL)&&(t=this._canvas),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._inputTexture=Zi.Texture.fromImage(t),this._identitySprite.setTexture(this._inputTexture),this._sprite.setTexture(this._inputTexture),this._renderTexture&&(this._renderTextureSprite.setTexture(this._inputTexture),this._renderTexture.resizeTo(this._inputTexture.getDimensions())),this.setDirty(!0)}scalesUniformly(){return"keepAspect"===this._options.resizeMode}setOption(t,e,i=!0){super.setOption(t,e,i),"image"===t&&this._identitySprite&&this._onImageUpdate()}_onOptionsChange(){const t=this._dirtiness;for(const e in t)t[e]=!0}dispose(){super.dispose(),this._inputTexture&&(this._inputTexture.dispose(),this._inputTexture=null),this._tintFilter.dispose(),this._adjustmentsFilter.dispose(),this._options.adjustments.off("updated",this._onOptionsChange)}}Oa.prototype.availableOptions={id:{type:ft.STRING,default:()=>It.getUUID()},identifier:{type:ft.STRING,default:""},image:{type:ft.IMAGE,required:!0},position:{type:ft.VECTOR2,default:Da.NULL},dimensions:{type:ft.VECTOR2,default:Da.NULL},anchor:{type:ft.VECTOR2,default:new Da(0,0)},pivot:{type:ft.VECTOR2,default:new Da(.5,.5)},rotation:{type:ft.NUMBER,default:0},flipHorizontally:{type:ft.BOOLEAN,default:!1},flipVertically:{type:ft.BOOLEAN,default:!1},smoothDownscaling:{type:ft.BOOLEAN,default:!1},tintColor:{type:ft.COLOR,default:jt.WHITE},tintMode:{type:ft.STRING,default:"none",available:["none","solid","colorized"]},resizeMode:{type:ft.STRING,default:"keepAspect",available:["keepAspect","unrestricted"]},alpha:{type:ft.NUMBER,default:1},adjustments:{type:ft.CONFIGURABLE,structure:{brightness:{type:ft.NUMBER,default:0},saturation:{type:ft.NUMBER,default:1},contrast:{type:ft.NUMBER,default:1}}}},Oa.type="sticker";var Aa=Oa;class Fa{constructor(t){this._seed=void 0===t?Fa.TimeSeed():t}seed(t){this._seed=void 0===t?Fa.TimeSeed():t}next(){let t=0|this._seed;const e=t/Fa.SEED_DIVIDER|0,i=t%Fa.SEED_DIVIDER|0;return t=Fa.SEED_LOW_MULTIPLY*i-Fa.SEED_HIGH_MULTIPLY*e,t<=0&&(t+=Fa.MAX),-1===t&&(t=Fa.MAX-1),this._seed=t,t}nextInRange(t,e){return void 0===e&&(e=t,t=0),t+this.next()%(e-t+1)}nextBool(t=1,e=1){return this.nextInRange(t+e-1)>=t}static TimeSeed(){return Date.now()}pickNext(t){return Array.isArray(t)?t[this.next()%t.length]:null}}C(Fa,"MAX",2147483647),C(Fa,"SEED_DIVIDER",127773),C(Fa,"SEED_LOW_MULTIPLY",16807),C(Fa,"SEED_HIGH_MULTIPLY",2836);const{Rectangle:Ma}=Ui;class Pa{constructor(t=0,e=0){this.width=t,this.height=e}set(t,e){this.width=t,this.height=e}aspect(){return this.width/this.height}rectangle(t,e){return new Ma(t,e,this.width,this.height)}clone(){return new Pa(this.width,this.height)}scale(t,e){return void 0===e&&(e=t),this.width*=t,this.height*=e,this}copy(t){return this.width=t.width,this.height=t.height,this}fitInWidthWithOther(t,e=new Pa){return this.copy(Pa.fitTwoInWidth(t,this,e)[0]),this}static fitTwoInWidth(t,e,i){const r=e.width*i.height+e.height*i.width,n=i.height*t/r,o=e.width*n,s=e.height*n;return[new Pa(o,s),new Pa(t-o,s)]}}const Ba=k(U());class za extends ae{loadImages(t){return T(this,null,(function*(){return Ba.default(t,(t=>T(this,null,(function*(){return this.addImage(t.path,t.fullPath,t.image)}))))}))}addImage(t,e,i,r="anonymous"){const n=this.getImages();return i?(n[t]={fullPath:e,image:i},Promise.resolve({fullPath:e,image:i})):new Promise(((o,s)=>{(i=new ur).onload=()=>{n[t]={fullPath:e,image:i},o({fullPath:e,image:i})},i.crossOrigin=It.getCrossOriginValue(r),i.onerror=s,i.src=e}))}getImage(t){const e=this.getImages()[t];return e?e.image:null}getVariation(t){return this.getFonts()[t]}addFont(t,e){return this.getFonts()[t]=e,e}}za.prototype.availableOptions={images:{type:ft.OBJECT,default:{}},fonts:{type:ft.OBJECT,default:{}}};const La=new za,Na=(t,e,i,r)=>{const n=i*(4*r)+4*e;return{r:t[n],g:t[n+1],b:t[n+2],a:t[n+3]}},Ua=t=>t.a<=254,ja=(t,e,i)=>{let r=!0;for(let n=0;n<i;n++){const o=Na(t,n,e,i);if(!Ua(o)){r=!1;break}}return r};class Ha extends ae{constructor(t){super(t);const e=La.getVariation(this.getFontIdentifier());e||Mt.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`),this.set({fontVariation:e}),this._metrics=null,this._canvas=It.createCanvas(),this._context=this._canvas.getContext("2d"),this._isDirty=!0}_onOptionsChange(){this._isDirty=!0}setOption(t,e,i=!0,r=!1){super.setOption(t,e,i,r),"fontIdentifier"===t&&!r&&this.updateFontVariation()}updateFontVariation(){const t=La.getVariation(this.getFontIdentifier());return t||Mt.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`),this.setFontVariation(t),t}setOptions(t={}){this._options=b(b({},this._options),t),this._isDirty=!0}_applyTextOptions(t=this._context,e={}){const{fontSize:i,fontVariation:r,lineHeight:n,textColor:o,alignment:s}=b(b({},this._options),e),{fontStyle:a,fontWeight:l,fontFamily:c}=r.serializeOptions();t.font=`${a} ${l} ${i}px / ${n} ${c}`,t.fillStyle=o,t.textBaseline="alphabetic",t.textAlign=s||"left"}getTextMetrics(){return(!this._metrics||this._isDirty)&&this._calculateTextMetrics(),b({},this._metrics)}getSizeValue(){return(!this._metrics||this._isDirty)&&this._calculateTextMetrics(),new Pa(this._metrics.width,this._metrics.height)}fitWidth(t){if(!this.getFontVariation())return void Mt.warn("TextDesignFont#fitText: missing font variation");this._applyTextOptions(this._context,{fontSize:50});const e=t/this._context.measureText(this.getText()).width,i=Math.floor(50*e);return this.setFontSize(i),this._calculateTextMetrics(),this.getTextMetrics()}fitHeight(t){if(!this.getFontVariation())return void Mt.warn("TextDesignFont#fitText: missing font variation");const e=t/this._calculateTextMetrics({fontSize:50}).height,i=Math.floor(50*e);return this.setFontSize(i),this._calculateTextMetrics(),this.getTextMetrics()}_calculateTextMetrics(t={}){const e=this._canvas,i=this._context,r=b(b({},this._options),t),n=this.getText();this._applyTextOptions(i,r);const o=Math.ceil(i.measureText(n).width),s=Math.floor(o+2*r.fontSize),a=Math.floor(3*r.fontSize);e.width=s,e.height=a;const l=Math.floor(r.fontSize),c=Math.floor(.6*a);this._applyTextOptions(i,r),i.fillText(n,l,c);const u=i.getImageData(0,0,e.width,e.height).data,h=((t,e,i,r,n=!1)=>{let o=0;for(let i=r-1;i>=0;i--)if(ja(t,i,e)){if(n)break}else o=r-i;return o})(u,s,0,c,this._options.excludeAccents),d=((t,e,i,r,n=!1)=>{let o=0;for(let s=r+1;s<i;s++)if(ja(t,s,e)){if(n)break}else o=s-r+1;return o})(u,s,a,c,this._options.excludeAccents),p=o,f=h+d;return this._metrics={width:p,height:f,ascender:h,descender:d},this._isDirty=!1,b({},this._metrics)}draw(t=this._context,e=0,i=0,r,n=!1){t.save(),(!this._metrics||this._isDirty)&&this._calculateTextMetrics(),this._applyTextOptions(t,r),t.fillText(this.getText(),e,i+this._metrics.ascender),n&&(((t,e,i,r,n,o="blue")=>{t.save(),t.strokeStyle=o,t.strokeRect(e,i,r,n),t.restore()})(t,e,i,this._metrics.width,this._metrics.height),((t,e,i,r,n="red")=>{t.save(),t.strokeStyle=n,((t,e,i,r,n)=>{t.beginPath(),t.moveTo(e,i),t.lineTo(r,n),t.stroke()})(t,i,e,r,e),t.restore()})(t,i+this._metrics.ascender,e,e+this._metrics.width)),t.restore()}}Ha.prototype.availableOptions={text:{type:ft.STRING,default:""},fontIdentifier:{type:ft.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:ft.OBJECT,default:null},lineHeight:{type:ft.NUMBER,default:1},fontSize:{type:ft.NUMBER,default:22},textColor:{type:ft.STRING,default:"black"},strokeStyle:{type:ft.STRING,default:"black"},outlineWidth:{type:ft.NUMBER,default:0},textBaseline:{type:ft.STRING,default:"alphabetic"},excludeAccents:{type:ft.BOOLEAN,default:!1}};class Wa extends ae{}Wa.prototype.availableOptions={text:{type:ft.STRING,default:""},frame:{type:ft.OBJECT,default:null},font:{type:ft.OBJECT,default:null}};class Ga extends ae{}Ga.prototype.availableOptions={tintColor:{type:ft.COLOR,default:jt.BLACK},textColor:{type:ft.COLOR,default:jt.BLACK},alignment:{type:ft.STRING,default:"left",available:["left","center","right"]},lineSpacing:{type:ft.NUMBER,default:1},fontIdentifier:{type:ft.STRING,default:"imgly_font_open_sans_bold"}};const{Rectangle:Va}=Ui;class $a extends ae{constructor(t){super(t),this.setSize(new Pa(this.getWidth(),0)),this.serverImageSmoothingFix=!1}_getFrame(){const t=this.getSize();return new Va(0,0,t.width,t.height)}_getTextFrame(){return this._getFrame()}_getTextFrameForElement(t){return t.getFrame().clone()}_calculateLayoutElements(){Mt.warn("TextDesignRow is an abstract class.")}_getLayoutElements(){return this._options.elements.length<=0&&this.layout(),this.getElements()}_fontSize(t){return Mt.warn("TextDesignRow#_fontSize not implemented. @TODO: Is it necessary?"),0}layout(){return this.setElements(this._calculateLayoutElements()),this}textFrame(t,e){return t.getFrame().clone()}willRender(t){}didRender(t){}render(t){t.save(),this._getLayoutElements().forEach((e=>{const{text:i,frame:r,font:n}=e.serializeOptions(),o=this.getAttributes();n.draw(t,r.x,r.y,{textColor:o.getTextColor().toRGBA(),alignment:o.getAlignment()})})),t.restore()}}$a.prototype.availableOptions={words:{type:ft.OBJECT,default:null},width:{type:ft.NUMBER,default:100},attributes:{type:ft.CONFIGURABLE,default:new Ga},shearingAngle:{type:ft.NUMBER,default:0},elements:{type:ft.ARRAY,default:[]},size:{type:ft.OBJECT,default:null}};const{Rectangle:Za}=Ui;class Xa extends $a{_calculateLayoutElements(){if(this.getWords().size()<=0)return[];const{orientation:t,width:e,size:i,relativeRowOffset:r,attributes:n}=this.serializeOptions(),{fontIdentifier:o}=n,s=this.getWords().joined(3),a=t===Xa.Orientations.Left?[s[0],s[1],s[2]]:[s[1],s[2],s[0]],l=It.Array.range(0,2).map((t=>new Ha({text:a[t],fontIdentifier:o,fontSize:60}))),c=l.map((t=>t.getSizeValue())),u=c[0].width>c[1].width?0:1,h=(u+1)%2;l[h].fitWidth(c[u].width),c[h]=l[h].getSizeValue();const d=(c[h].height+c[u].height)/(1-r),p=new Ha({text:a[2],fontIdentifier:o});p.fitHeight(d);const f=p.getSizeValue().width,m=c[u].width,g=e/(f+m),_=g*f,y=g*m,v=g*d,b=r*v;i.set(e,v);const x=It.Array.range(0,3).map((t=>new Ha({text:a[t],fontIdentifier:o})));x[0].fitWidth(y),x[1].fitWidth(y),x[2].fitWidth(_);const w=t===Xa.Orientations.Left?0:_,S=[w,w,t===Xa.Orientations.Left?y:0],k=[0,x[0].getSizeValue().height+b,0],C=x.map(((t,e)=>new Za(S[e],k[e],t.getSizeValue().width,t.getSizeValue().height)));return x.map(((t,e)=>new Wa({text:a[e],font:x[e],frame:C[e]})))}}C(Xa,"Orientations",{Right:"RIGHT",Left:"LEFT"}),Xa.prototype.availableOptions=b(b({},$a.prototype.availableOptions),{orientation:{type:ft.STRING,default:Xa.Orientations.Left,available:[Xa.Orientations.Right,Xa.Orientations.Left]},relativeRowOffset:{type:ft.NUMBER,default:.05}});const{Rectangle:Ya}=Ui;class qa{constructor(t=0,e=0,i=0,r=0){this.top=t,this.left=e,this.bottom=i,this.right=r}multiply(t){this.top*=t,this.left*=t,this.bottom*=t,this.right*=t}toObject(){return b({},this)}equals(t,e=0){return Math.abs(t.top-this.top)<=e&&Math.abs(t.left-this.left)<=e&&Math.abs(t.bottom-this.bottom)<=e&&Math.abs(t.right-this.right)<=e}scale(t=1,e){return void 0===e&&(e=t),this.top*=e,this.bottom*=e,this.left*=t,this.right*=t,this}clone(){return new qa(this.top,this.left,this.bottom,this.right)}applyToRectangle(t){return new Ya(t.x+this.left,t.y+this.top,t.width-this.left-this.right,t.height-this.top-this.bottom)}static get ZERO(){return new qa(0,0,0,0)}}class Ka extends $a{_calculateLayoutElements(){const{attributes:t,imageInsets:e,size:i,width:r}=this.serializeOptions(),n=this.getWords().joined(1)[0]||"",{fontIdentifier:o}=t,s=new Ha({text:n,fontIdentifier:o});s.fitWidth(this._getTextFrame().width);const a=s.getTextMetrics().height+e.top+e.bottom;i.height=a;const l=this._getTextFrame();return[new Wa({text:n,frame:l,font:s})]}}Ka.prototype.availableOptions=b(b({},$a.prototype.availableOptions),{imageInsets:{type:ft.OBJECT,default:new qa}});const{Rectangle:Qa,Vector2:Ja}=Ui,tl=(t,e,i,r)=>{t.drawImage(e,i.x,i.y,i.width,i.height,r.x,r.y,r.width,r.height)},el=(t,e,i,r="source-over",n=!1)=>{t.save(),t.fillStyle=i.toRGBA(),t.globalCompositeOperation=r,t.fillRect(e.x,e.y,e.width,e.height),n&&(t.strokeStyle=i.toRGBA(),t.strokeWith=1,t.strokeRect(e.x,e.y,e.width,e.height)),t.restore()},il=(t,e,i,r,n="source-over",o=!1)=>{t.save(),t.fillStyle=r.toRGBA(),t.globalCompositeOperation=n,i=Math.min(Math.max(i,0),.5*Math.min(e.height,e.width));const s=e.x,a=e.x+e.width,l=e.y,c=e.y+e.height;t.beginPath(),t.moveTo(s+i,l),t.arcTo(a,l,a,c,i),t.arcTo(a,c,s,c,i),t.arcTo(s,c,s,l,i),t.arcTo(s,l,a,l,i),t.closePath(),t.fill(),o&&t.stroke(),t.restore()},rl=(t,e,i,r=4)=>{t.save(),t.strokeStyle=i.toRGBA(),t.lineWidth=r,t.strokeRect(e.x,e.y,e.width,e.height),t.restore()},nl=(t,e,i,r="source-over")=>{t.save();const n=e.height/2,o=e.y+n;let s=e.x+n;const a=e.x+e.width;for(t.fillStyle=i.toRGBA(),t.globalCompositeOperation=r;s<a;)t.beginPath(),t.arc(s,o,n,0,2*Math.PI),t.fill(),s+=4*n;t.restore()},ol=(t,e)=>{const i=e.applyToRectangle(t),{x:r,y:n,width:o,height:s}=t;return{corners:[Qa.FromDiagonalPoints(new Ja(0,0),new Ja(i.x,i.y)),Qa.FromDiagonalPoints(new Ja(0,i.y+i.height),new Ja(i.x,s)),Qa.FromDiagonalPoints(new Ja(i.x+i.width,i.y+i.height),new Ja(o,s)),Qa.FromDiagonalPoints(new Ja(i.x+i.width,0),new Ja(o,i.y))].map((t=>t.translate(r,n))),bars:[Qa.FromDiagonalPoints(new Ja(i.x,0),new Ja(i.x+i.width,i.y)),Qa.FromDiagonalPoints(new Ja(0,i.y),new Ja(i.x,i.y+i.height)),Qa.FromDiagonalPoints(new Ja(i.x,i.y+i.height),new Ja(i.x+i.width,s)),Qa.FromDiagonalPoints(new Ja(i.x+i.width,i.y),new Ja(o,i.y+i.height))].map((t=>t.translate(r,n))),center:i}},sl=(t,e,i,r,n="source-atop")=>{if(t.save(),r&&(t.globalAlpha=r.a),t.drawImage(e,i.x,i.y,i.width,i.height),r&&(t.globalAlpha=1),r){const e=r.clone();e.a=1,el(t,i,e,n)}t.restore()};class al extends Ka{_getTextColor(){return this.getAutoAdjustTextColor()&&!this.getIsMasked()?this.getBackgroundColor().equals(jt.WHITE)?jt.BLACK:jt.WHITE:this.getAttributes().getTextColor().clone()}_getTextFrame(){return this.getImageInsets().applyToRectangle(this._getFrame())}_getTextFrameForElement(t){const e=super._getTextFrameForElement(t),i=this.getImageInsets();return(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&(e.y-=i.top),e}willRender(t){this.getAttributes().setTextColor(this._getTextColor());const e=this.getImage();if(e){const i=this.getCapInsets(),r=this._getFrame();i&&!i.equals(qa.ZERO)?((t,e,i,r)=>{const n=e.naturalWidth||e.width,o=e.naturalHeight||e.height,s=ol(new Qa(0,0,n,o),r),a=ol(i,r);tl(t,e,s.center,a.center),It.Array.zip(s.corners,a.corners).forEach((([i,r])=>tl(t,e,i,r))),It.Array.zip(s.bars,a.bars).forEach((([i,r])=>tl(t,e,i,r)))})(t,e,r,i):t.drawImage(e,r.x,r.y,r.width,r.height),el(t,r,this.getBackgroundColor(),"source-atop",!0)}(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&e&&(t.save(),t.globalCompositeOperation="destination-out")}didRender(t){super.didRender(t),(this.getIsMasked()||this.getIsUsedInInvertedLayout())&&t.restore()}}al.prototype.availableOptions=b(b({},Ka.prototype.availableOptions),{image:{type:ft.IMAGE,default:null},capInsets:{type:ft.OBJECT,default:new qa},backgroundColor:{type:ft.COLOR,default:jt.WHITE},autoAdjustTextColor:{type:ft.BOOLEAN,default:!0},isMasked:{type:ft.BOOLEAN,default:!0},isUsedInInvertedLayout:{type:ft.BOOLEAN,default:!1}});class ll extends ae{insetsForWidth(t){return this.getRelativeInsets().clone().scale(t)}static get Small(){return new ll({imagePath:"text-design/images/imgly_text_design_asset_banderole_small.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new qa(.05,.2,.05,.2)})}static get Rectangle(){return new ll({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",fontIdentifier:"imgly_font_campton_bold",relativeInsets:new qa(.05,.05,.05,.05),needsImageSmoothingFix:!0})}static get Celebrate1(){return new ll({imagePath:"text-design/images/imgly_text_design_asset_celebrate_01.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new qa(.05,.2,.05,.2)})}static get Celebrate2(){return new ll({imagePath:"text-design/images/imgly_text_design_asset_celebrate_02.png",fontIdentifier:"imgly_font_rasa_500",relativeInsets:new qa(.05,.2,.05,.2)})}}ll.prototype.availableOptions={image:{type:ft.IMAGE,default:null},imagePath:{type:ft.STRING,default:null},relativeInsets:{type:ft.OBJECT,default:new qa},fontIdentifier:{type:ft.STRING,default:"imgly_font_open_sans_bold"},needsImageSmoothingFix:{type:ft.BOOLEAN,default:!1}};class cl extends ae{getSize(){const t=this.getRows(),e=this.getWidth(),i=t.length-1;let r=t.reduce(((t,e)=>t+e.getSize().height),0);r+=(i+1)*this.getRelativeLineSpacing()*e;const n=this.getRelativeInsets().clone().scale(e);return r+=n.top+n.bottom,new Pa(e,r)}}cl.prototype.availableOptions={text:{type:ft.STRING,default:""},lines:{type:ft.ARRAY,default:[]},relativeInsets:{type:ft.OBJECT,default:new qa},relativeLineSpacing:{type:ft.NUMBER,default:0},rows:{type:ft.OBJECT,default:[]},background:{type:ft.OBJECT,default:null},width:{type:ft.NUMBER,default:0}};class ul{constructor(t){this.words=[],t&&this.splitIntoWords(t)}splitIntoWords(t){return this.words=t.match(/\S+/g)||[],[...this.words]}get(){return[...this.words]}getWord(t){return this.words[t]}set(t){return this.words=[...t],this}slice(t,e){return ul.fromWords(this.words.slice(t,e))}getLowerCase(){return this.words.map((t=>t.toLowerCase()))}getUpperCase(){return this.words.map((t=>t.toUpperCase()))}size(){return this.words.length}countNumberOfCharacters(){return this.words.reduce(((t,e)=>t+e.length),0)}joined(t){const e=this.size(),i=Math.floor(e/t),r=e%t;let n=0,o=0;return It.Array.range(0,t).map((t=>{n=o;const s=i+(t<r?1:0);return o=Math.min(n+s,e),It.Array.range(n,o).reduce(((t,e)=>t+(e===n?"":" ")+this.words[e]),"")}))}static fromWords(t){const e=new ul;return e.words=[...t],e}}class hl extends ae{constructor(t){super(t),this._relativeInsets=new qa,this._background=null,this._fontRandomizer=new Fa(0),this._lineNumberRandomizer=new Fa(0),this._wordsPerLineRandomizer=new Fa(0),this._seedPool=[this._fontRandomizer,this._lineNumberRandomizer,this._wordsPerLineRandomizer]}seed(t){this._seedPool.forEach((e=>e.seed(t)))}getImagePaths(){return[]}onImagesLoaded(){}getMaximumNumberOfTries(){return 10}getMinLineCountOfRandom(){return 4}getRandomAdditionalLinePercentage(){return.4}_fontForRow(t,e){return this._fontRandomizer.pickNext(this.getFontIdentifiers())}_modifiedText(t){return t.replace("\n"," ").replace("\t"," ")}_minimumNumberOfLines(t){return Math.ceil(Math.sqrt(t.size()))}_maximumNumberOfLines(t){return t.size()}_calculatedNumberOfLines(t){let e=this._minimumNumberOfLines(t);if(t.size()>=this.getMinLineCountOfRandom()){const t=Math.floor(Math.max(1,e*this.getRandomAdditionalLinePercentage()));e+=this._lineNumberRandomizer.nextInRange(0,t)}return Math.min(e,this._maximumNumberOfLines(t))}_randomizedNumberOfWordsPerLine(t,e){if(t>e)return Mt.warn("TextDesign#_randomizedNumberOfWordsPerLine: Invalid number of lines"),e;const i=It.Array.repeat(1,t);return It.Array.range(t,e).forEach((e=>{const r=this._wordsPerLineRandomizer.nextInRange(0,t-1);i[r]+=1})),i}_textLines(t){const e=new ul(t),i=this._calculatedNumberOfLines(e);return this._randomizedNumberOfWordsPerLine(i,e.size()).reduce(((t,i)=>({index:t.index+i,lines:[...t.lines,e.slice(t.index,Math.min(t.index+i,e.size()))]})),{index:0,lines:[]}).lines}_validTextLines(t){let e=this._textLines(t),i=0;do{if(i=It.Array.findIndex(e,(t=>t.countNumberOfCharacters()<3)),i>=0){const t=e[i-1],r=e[i+1];(t?t.countNumberOfCharacters():Number.MAX_SAFE_INTEGER)<(r?r.countNumberOfCharacters():Number.MAX_SAFE_INTEGER)&&t?(t.words=[...t.words,...e[i].words],e=[...e.slice(0,i),...e.slice(i+1)]):r&&(r.words=[...e[i].words,...r.words],e=[...e.slice(0,i),...e.slice(i+1)])}}while(i>-1&&e.length>1);return e}_modifiedLines(t){return t}_getBackground(){return this._background}generateLayoutData(t,e){const i=this._modifiedText(t),r=this._modifiedLines(this._validTextLines(i)),n=e*(1-this._relativeInsets.left-this._relativeInsets.right),o=this._layoutRows(r,n);return new cl({text:i,relativeInsets:this._relativeInsets.clone(),relativeLineSpacing:this.getRelativeLineSpacing(),background:this._background||this._getBackground(),lines:r,rows:o,width:e})}_layoutRows(t,e){return t.map(((t,i)=>this._randomLayoutRow(t,i,e,new Ga({fontIdentifier:this._fontForRow(i,t)})).layout()))}_randomLayoutRow(t,e,i,r){return new Ka({words:t,width:i,attributes:r})}}C(hl,"defaultFontIdentifiers",[]),C(hl,"identifier","textdesign"),hl.prototype.availableOptions={fontIdentifiers:{type:ft.ARRAY,default:[]},relativeLineSpacing:{type:ft.NUMBER,default:0}};class dl extends hl{constructor(...t){super(...t),C(this,"getImagePaths",(()=>{const t=this.getBanderoles();return t&&t.map((t=>t.getImagePath()))||[]})),C(this,"onImagesLoaded",(()=>{const t=this.getBanderoles();t&&t.forEach((t=>{const e=La.getImage(t.getImagePath());e?t.setImage(e):Mt.warn(`TextDesignBlocks#onImagesLoaded: Image not found '${t.getImagePath()}'`)}))})),this._rowTypeLessThan3WordsRandomizer=new Fa(0),this._rowTypeMoreThan3WordsRandomizer=new Fa(0),this._banderolesRandomizer=new Fa(0),this._seedPool=[...this._seedPool,this._rowTypeLessThan3WordsRandomizer,this._rowTypeMoreThan3WordsRandomizer,this._banderolesRandomizer]}_modifiedText(t){return super._modifiedText(t).toUpperCase()}generateLayoutData(t,e){return this._options.hasMaskedText=!1,super.generateLayoutData(t,e)}_randomLayoutRow(t,e,i,r){if(t.size()<3){const e=0===this._rowTypeLessThan3WordsRandomizer.nextInRange(0,2);return this._layoutRow(t,i,r,e)}const n=this._rowTypeMoreThan3WordsRandomizer.nextInRange(0,3);switch(n){case 0:return new Xa({words:t,width:i,attributes:r,orientation:Xa.Orientations.Left});case 1:return new Xa({words:t,width:i,attributes:r,orientation:Xa.Orientations.Right});case 2:return this._layoutRow(t,i,r,!0);case 3:return new Ka({words:t,width:i,attributes:r});default:throw new Error(`TextDesignBlocks#_randomLayoutRow: Invalid randomValue generated: ${n}.`)}}_layoutRow(t,e,i,r){if(this.getHasMaskedText()&&(r=!1),r){this.setHasMaskedText(!0);const i=this._banderolesRandomizer.pickNext(this.getBanderoles()),r=new al({words:t,width:e,attributes:new Ga({alignment:"left",fontIdentifier:i.getFontIdentifier()}),image:i.getImage(),imageInsets:i.insetsForWidth(e),capInsets:null,backgroundColor:jt.WHITE});return i.getNeedsImageSmoothingFix()&&(r.serverImageSmoothingFix=!0),r}return new Ka({words:t,width:e,attributes:i})}}C(dl,"defaultFontIdentifiers",["imgly_font_campton_bold"]),C(dl,"identifier","imgly_text_design_blocks"),C(dl,"defaultBanderoles",[ll.Rectangle,ll.Small]),dl.prototype.availableOptions=b(b({},hl.prototype.availableOptions),{fontIdentifiers:{type:ft.ARRAY,default:dl.defaultFontIdentifiers},relativeLineSpacing:{type:ft.NUMBER,default:.025/3},hasMaskedText:{type:ft.BOOLEAN,default:!1},banderoles:{type:ft.ARRAY,default:dl.defaultBanderoles}});class pl extends dl{constructor(...t){super(...t),this._exclusiveFont=null}generateLayoutData(t,e){return this._exclusiveFont=this._fontRandomizer.pickNext(this.getFontIdentifiers()),super.generateLayoutData(t,e)}_fontForRow(t,e){return this._exclusiveFont||super._fontForRow(t,e)}_layoutRow(t,e,i,r){return new Ka({words:t,width:e,attributes:i})}}C(pl,"defaultFontIdentifiers",["imgly_font_ostrich_sans_heavy","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_black"]),C(pl,"identifier","imgly_text_design_blocks_condensed"),pl.prototype.availableOptions=b(b({},dl.prototype.availableOptions),{fontIdentifiers:{type:ft.ARRAY,default:pl.defaultFontIdentifiers}});const{Rectangle:fl}=Ui;class ml extends $a{constructor(...t){super(...t),this.setSize(new Pa(this.getWidth(),this.getHeight()))}_calculateLayoutElements(){return[new Wa({frame:this._getTextFrame()})]}render(t){const e=this._getFrame(),i=this.getType(),r=this.getAttributes().getTextColor(),n=e.height/3;let o=new fl(e.x,e.y,e.width,n),s=new fl(e.x,e.y+2*n,e.width,n);switch(i){case ml.FormType.Rect:el(t,e,r);break;case ml.FormType.DoubleRect:el(t,o,r),el(t,s,r);break;case ml.FormType.DoubleRectFirstPunctuated:nl(t,o,r),el(t,s,r);break;case ml.FormType.DoubleRectSecondPunctuated:el(t,o,r),nl(t,s,r);break;case ml.FormType.LongLine:{const i=e.height/2,n=new fl(e.x,e.y,e.width,i);il(t,n,.5*n.height,r);break}case ml.FormType.LongAndShortLine:{const i=.2*e.height,n=.75*i;o=new fl(e.x,e.y+i,e.width,i);const a=e.x+.25*e.width,l=e.y+e.height-n;s=new fl(a,l,.5*e.width,n),il(t,o,.5*o.height,r),il(t,s,.5*s.height,r);break}}}}C(ml,"FormType",{Rect:"RECT",DoubleRect:"DOUBLE_RECT",DoubleRectFirstPunctuated:"DOUBLE_RECT_FIRST_PUNCTUATED",DoubleRectSecondPunctuated:"DOUBLE_RECT_SECOND_PUNCTUATED",LongLine:"LONG_LINE",LongAndShortLine:"LONG_AND_SHORT_LINE"}),ml.prototype.availableOptions=b(b({},$a.prototype.availableOptions),{height:{type:ft.NUMBER,default:100},type:{type:ft.STRING,default:ml.FormType.Rect,available:It.values(ml.FormType)}});class gl extends dl{_layoutRow(t,e,i,r){return new Ka({words:t,width:e,attributes:i})}_layoutRows(t,e){const i=super._layoutRows(t,e),r=.08*e;return[new ml({width:e,height:.032*e,type:ml.FormType.LongLine,shearingAngle:0}).layout(),...i,new ml({width:e,height:r,type:ml.FormType.LongAndShortLine,shearingAngle:0}).layout()]}}C(gl,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]),C(gl,"identifier","imgly_text_design_blocks_light"),gl.prototype.availableOptions=b(b({},dl.prototype.availableOptions),{fontIdentifiers:{type:ft.ARRAY,default:gl.defaultFontIdentifiers}});class _l extends gl{_layoutRows(t,e){return t.map(((t,i)=>this._randomLayoutRow(t,i,e,new Ga({fontIdentifier:this._fontForRow(i,t)})).layout()))}_layoutRow(t,e,i,r){return new Ka({words:t,width:e,attributes:i})}}C(_l,"defaultFontIdentifiers",["imgly_font_sue_ellen_francisco"]),C(_l,"identifier","imgly_text_design_blocks_light-v3_1_0"),_l.prototype.availableOptions=b(b({},gl.prototype.availableOptions),{fontIdentifiers:{type:ft.ARRAY,default:_l.defaultFontIdentifiers}});const{Rectangle:yl}=Ui;class vl extends Ka{getImageSize(){const t=this.getLeftImage(),e=this.getRightImage(),i=this.getWords(),r=this.getAttributes().getFontIdentifier(),n=t?new Pa(t.width,t.height):new Pa,o=i.joined(1)[0];if(!o)return n;const s=new Ha({text:o,fontIdentifier:r,fontSize:50}).getSizeValue(),a=e?2:1;n.scale(a,1);const l=n.clone().fitInWidthWithOther(this._getFrame().width,s);return l.scale(1/a,1),l}_getTextFrame(){const t=super._getTextFrame().clone(),e=this.getImageSize(),i=this.getRightImage(),r=this.getImagePosition();return i?(t.x+=e.width,t.width-=2*e.width):r===vl.ImagePosition.Left&&(t.x+=e.width),t}_calculateLayoutElements(){const t=super._calculateLayoutElements(),e=this._getFrame(),i=this.getRightImage(),r=this.getImageSize(),n=this.getImagePosition(),o=this._getTextFrame(),s=this.getAttributes().getFontIdentifier(),a=new Ha({text:"stickerClock",fontIdentifier:s});a.fitWidth(this._getTextFrame().width);const l=(new yl).set(e.x,e.y,r.width,r.height);if(!i&&n===vl.ImagePosition.Right&&(l.x+=o.width),t.push(new Wa({text:"stickerClock",frame:l,font:a})),i){const e=t[0];if(e){const i=l.clone();i.translate(e.getFrame().width+i.width,0),t.push(new Wa({text:"stickerClock",frame:i,font:a}))}}return t}render(t){const e=this._getLayoutElements(),i=this.getAttributes(),r=i.getTextColor(),n=this.getLeftImage(),o=this.getRightImage(),s=e[0],a=e[1],{font:l}=s.serializeOptions(),c=this._getTextFrameForElement(s);if(l.draw(t,c.x,c.y,{textColor:i.getTextColor().toRGBA(),alignment:i.getAlignment()}),n){const e=a.getFrame();t.drawImage(n,e.x,e.y,e.width,e.height),el(t,e,r,"source-atop")}if(e.length>2){const i=e[2].getFrame().clone();t.drawImage(o,i.x,i.y,i.width,i.height),el(t,i,r,"source-atop")}}}C(vl,"ImagePosition",{Left:"LEFT",right:"RIGHT"}),vl.prototype.availableOptions=b(b({},Ka.prototype.availableOptions),{leftImage:{type:ft.IMAGE,default:null},rightImage:{type:ft.IMAGE,default:null},imagePosition:{type:ft.STRING,default:vl.ImagePosition.Left,available:[vl.ImagePosition.Left,vl.ImagePosition.Right]}});class bl extends dl{_fontForRow(t,e){const i=this.getFontIdentifiers();return i[t%i.length]}_minimumNumberOfLines(t){return Math.max(Math.floor(.7*super._minimumNumberOfLines(t)),1)}_maximumNumberOfLines(t){return Math.max(Math.floor(t.countNumberOfCharacters()/5),1)}_randomLayoutRow(t,e,i,r){return this._createSingleRow(bl.RowType.Single,t,i,r)}_createSingleRow(t,e,i,r){const n=r.getFontIdentifier(),o="imgly_font_amberlight"===n||"imgly_font_handycheera_regular"===n?(new ul).set(e.getLowerCase()):e;switch(t){case bl.RowType.Single:return new Ka({words:o,width:i,attributes:r});case bl.RowType.SingleImage:return new vl({words:o,width:i,attributes:r});default:return Mt.warn(`TextDesignCelebrate#_createSingleRow: Invalid row type '${t}'`),null}}}C(bl,"defaultFontIdentifiers",["imgly_font_handycheera_regular","imgly_font_rasa_regular"]),C(bl,"defaultBanderoles",[ll.Celebrate1,ll.Celebrate2]),C(bl,"identifier","imgly_text_design_celebrate"),C(bl,"RowType",{Single:"SINGLE",SingleImage:"SINGLE_IMAGE"}),bl.prototype.availableOptions=b(b({},dl.prototype.availableOptions),{relativeLineSpacing:{type:ft.NUMBER,default:.01875},fontIdentifiers:{type:ft.ARRAY,default:bl.defaultFontIdentifiers},banderoles:{type:ft.ARRAY,default:bl.defaultBanderoles}});class xl extends $a{constructor(...t){super(...t),this.setSize(new Pa(this.getWidth(),this.getHeight()))}_getImageFrame(){const t=this._getTextFrame().clone(),e=this.getImage();if(this.getDrawingModeAspectFit()&&e){const i=Math.min(t.width/e.width,t.height/e.height),r=e.width*i,n=e.height*i;t.x+=(t.width-r)/2,t.y+=(t.height-n)/2,t.width=r,t.height=n}return t}_calculateLayoutElements(){return[new Wa({text:"",frame:this._getImageFrame(),font:new Ha})]}render(t){const e=this.getImage(),i=this._getImageFrame(),r=this.getAttributes().getTextColor();sl(t,e,i,r)}}C(xl,"RowImages",{decorative1:"text-design/images/imgly_text_design_asset_decorative_01.png",decorative2:"text-design/images/imgly_text_design_asset_decorative_02.png",decorative3:"text-design/images/imgly_text_design_asset_decorative_05.png",decorative4:"text-design/images/imgly_text_design_asset_decorative_06.png",celebrate1:"text-design/images/imgly_text_design_asset_celebrate_03.png",celebrate2:"text-design/images/imgly_text_design_asset_celebrate_04.png",celebrate3:"text-design/images/imgly_text_design_asset_celebrate_05.png"}),xl.prototype.availableOptions=b(b({},$a.prototype.availableOptions),{words:{type:ft.OBJECT,default:new ul},height:{type:ft.NUMBER,default:0},image:{type:ft.IMAGE,default:null},imagePath:{type:ft.STRING,default:xl.RowImages.decorative1},drawingModeAspectFit:{type:ft.BOOLEAN,default:!1},attributes:{type:ft.CONFIGURABLE,default:new Ga}});class wl extends bl{constructor(...t){super(...t),C(this,"getImagePaths",(()=>{const t=this.getBanderoles();return[...t&&t.map((t=>t.getImagePath()))||[],...this._celebrateTypes]})),C(this,"onImagesLoaded",(()=>{const t=this.getBanderoles();t&&t.forEach((t=>{const e=La.getImage(t.getImagePath());e?t.setImage(e):Mt.warn(`TextDesignBlocks#onImagesLoaded: Image not found '${t.getImagePath()}'`)}))})),this._celebrateTypes=[xl.RowImages.celebrate1,xl.RowImages.celebrate2,xl.RowImages.celebrate3],this._exclusiveFont=null,this._typeRandomizer=new Fa(0),this._useMaskedRandomizer=new Fa(0),this._seedPool.push(this._typeRandomizer),this._seedPool.push(this._useMaskedRandomizer)}_fontForRow(t,e){const i=this.getFontIdentifiers();return i[t%(i.length-1)]}_layoutRows(t,e){const i=this._typeRandomizer.pickNext(this._celebrateTypes),r=La.getImage(i);r||Mt.warn(`TextDesignCelebrateSimple#_layoutRows: Image not fount '${i}'`);return[new xl({width:e,height:.5*e,drawingModeAspectFit:!0,image:r}).layout(),...super._layoutRows(t,e)]}_randomLayoutRow(t,e,i,r){const n=t.countNumberOfCharacters();n<4&&r.setFontIdentifier("imgly_font_rasa_regular");const o=this._useMaskedRandomizer.nextBool(2,1);return n<13&&o&&!this.getHasMaskedText()?this._layoutRow(t,i,r,!0):super._randomLayoutRow(t,e,i,r)}}C(wl,"identifier","imgly_text_design_celebrate_simple"),C(wl,"defaultFontIdentifiers",["imgly_font_amberlight","imgly_font_rasa_regular","imgly_font_rasa_500"]),wl.prototype.availableOptions=b(b({},bl.prototype.availableOptions),{fontIdentifiers:{type:ft.ARRAY,default:wl.defaultFontIdentifiers}});class Sl extends ae{render(t,e,i,r,n){Mt.warn("TextDesignBackground#render: Abstract class")}}Sl.prototype.availableOptions={};const{Rectangle:kl}=Ui;class Cl extends Sl{getImagePaths(){const{topImagePath:t,bottomImagePath:e,leftImagePath:i,rightImagePath:r}=this._options;return[t,e,i,r].filter((t=>""!==t))}render(t,e,i,r,n){const o=i.clone().scale(e.width),s=e.rectangle(0,0),a=La.getImage(this.getTopImagePath()),l=La.getImage(this.getLeftImagePath()),c=La.getImage(this.getRightImagePath()),u=La.getImage(this.getBottomImagePath());if(a){const e=a.width/a.height,i=o.top*this.getTopImageFillRate(),n=i*e,l=s.width/2,c=new kl(l-n/2,0,n,i);sl(t,a,c,r)}if(u){const e=u.width/u.height,i=o.bottom*this.getBottomImageFillRate(),n=i*e,a=s.width/2,l=new kl(a-n/2,s.height-i,n,i);sl(t,u,l,r)}if(l){const e=l.width/l.height,i=o.left*this.getLeftImageFillRate(),n=i/e,a=s.height/2,c=new kl(0,a-n/2,i,n);sl(t,l,c,r)}if(c){const e=c.width/c.height,i=o.right*this.getRightImageFillRate(),n=i/e,a=s.height/2-n/2,l=new kl(s.width-i,a,i,n);sl(t,c,l,r)}}}Cl.prototype.availableOptions={topImagePath:{type:ft.STRING,default:""},leftImagePath:{type:ft.STRING,default:""},bottomImagePath:{type:ft.STRING,default:""},rightImagePath:{type:ft.STRING,default:""},topImageFillRate:{type:ft.NUMBER,default:1},leftImageFillRate:{type:ft.NUMBER,default:1},bottomImageFillRate:{type:ft.NUMBER,default:1},rightImageFillRate:{type:ft.NUMBER,default:1}},Cl.Backgrounds=[new Cl({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_2.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background1_3.png",topImageFillRate:.8,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.8}),new Cl({leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background2_2.png",leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6}),new Cl({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_1.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background3_2.png",topImageFillRate:.6,bottomImageFillRate:.6}),new Cl({topImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_1.png",leftImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",rightImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_3.png",bottomImagePath:"text-design/images/imgly_xib_image_text_design_equal_width_background4_2.png",topImageFillRate:.1,leftImageFillRate:.6,rightImageFillRate:.6,bottomImageFillRate:.6})];class Tl extends hl{constructor(...t){super(...t),this._relativeInsets=new qa(.1,.1,.1,.1),this._alreadyContainsARowWithScriptFont=!1,this._backgroundsRandomizer=new Fa(0),this._seedPool.push(this._backgroundsRandomizer)}getImagePaths(){return It.Array.flatten(Cl.Backgrounds.map((t=>t.getImagePaths())))}_getBackground(){return this._backgroundsRandomizer.pickNext(Cl.Backgrounds)}generateLayoutData(t,e){return this._alreadyContainsARowWithScriptFont=!1,this._background=this._getBackground(),super.generateLayoutData(t,e)}_modifiedText(t){return super._modifiedText(t).toUpperCase()}_fontForRow(t,e){let i=super._fontForRow(t,e);return"imgly_font_petit_formal_script"===i&&(this._alreadyContainsARowWithScriptFont&&(i="imgly_font_bungee_inline"),this._alreadyContainsARowWithScriptFont=!0),i}_randomLayoutRow(t,e,i,r){const n="imgly_font_petit_formal_script"===r.getFontIdentifier();return new Ka({words:n?(new ul).set(t.getLowerCase()):t,width:i,attributes:r})}}C(Tl,"identifier","imgly_text_design_equal_width"),C(Tl,"defaultFontIdentifiers",["imgly_font_ultra","imgly_font_bungee_inline","imgly_font_petit_formal_script"]),Tl.prototype.availableOptions=b(b({},hl.prototype.availableOptions),{fontIdentifiers:{type:ft.ARRAY,default:Tl.defaultFontIdentifiers},relativeLineSpacing:{type:ft.NUMBER,default:.025}});class El extends Tl{constructor(...t){super(...t),this._relativeInsets=new qa}_getBackground(){return null}}C(El,"defaultFontIdentifiers",["imgly_font_ultra"]),C(El,"identifier","imgly_text_design_equal_width_fat"),El.prototype.availableOptions=b(b({},Tl.prototype.availableOptions),{fontIdentifiers:{type:ft.ARRAY,default:El.defaultFontIdentifiers}});class Rl extends ae{insetsForWidth(t){return this.getRelativeInsets().clone().scale(t)}}Rl.prototype.availableOptions={imagePath:{type:ft.STRING,default:""},minimumHeightRatio:{type:ft.NUMBER,default:0},sizeToFitContent:{type:ft.BOOLEAN,default:!0},capInsets:{type:ft.OBJECT,default:new qa},relativeInsets:{type:ft.OBJECT,default:new qa}},Rl.Box=new Rl({imagePath:"text-design/images/imgly_text_design_asset_black_background.png",relativeInsets:new qa(.1,.1,.1,.1)}),Rl.Badge1=new Rl({imagePath:"text-design/images/imgly_text_design_asset_badge1.png",relativeInsets:new qa(.3,.18,.2,.18)}),Rl.Badge2=new Rl({imagePath:"text-design/images/imgly_text_design_asset_badge2.png",relativeInsets:new qa(.3,.18,.2,.18)}),Rl.Badge3=new Rl({imagePath:"text-design/images/imgly_text_design_asset_badge3.png",relativeInsets:new qa(.3,.18,.2,.18)}),Rl.Badge4=new Rl({imagePath:"text-design/images/imgly_text_design_asset_badge4.png",relativeInsets:new qa(.3,.18,.2,.18)}),Rl.SpeechBubble1=new Rl({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small2.png",relativeInsets:new qa(.04,.07,.12,.07),capInsets:new qa(57,171,123,51)}),Rl.SpeechBubble2=new Rl({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble3.png",relativeInsets:new qa(.04,.07,.12,.07),capInsets:new qa(6,105,87,15)}),Rl.SpeechBubble3=new Rl({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble_small.png",relativeInsets:new qa(.165664675,.2,.165664675,.2),minimumHeightRatio:.7}),Rl.SpeechBubble4=new Rl({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble4.png",relativeInsets:new qa(.124800224,.2,.291200523,.2),minimumHeightRatio:.7}),Rl.SpeechBubble5=new Rl({imagePath:"text-design/images/imgly_text_design_asset_speech_bubble5.png",relativeInsets:new qa(.114892823,.27,.15984926,.27)}),Rl.Watercolor1=new Rl({imagePath:"text-design/images/imgly_text_design_asset_watercolor_01.png",minimumHeightRatio:.7,relativeInsets:new qa(.2,.25,.2,.25)}),Rl.Watercolor2=new Rl({imagePath:"text-design/images/imgly_text_design_asset_watercolor_02.png",minimumHeightRatio:.7,relativeInsets:new qa(.08,.25,.3,.25)}),Rl.Watercolor3=new Rl({imagePath:"text-design/images/imgly_text_design_asset_watercolor_03.png",minimumHeightRatio:.7,relativeInsets:new qa(.1,.2,.15,.2)});var Dl=class{constructor(t){this._context=t,this._lastFontStyle={}}getLines(){let t=[],e=[];const i=this._lines.length;for(let r=0;r<i;r++){const i=this._lines[r],n=this._buildWords(i),o=n.length;for(let i=0;i<o;i++){const r=n[i],o=e.concat(r).join("").replace(/\s+$/i,"");if(this._getWidth(o)>this._maxWidth){e.length>0&&(t.push(e.join("")),e=[r]);const i=r.replace(/\s+$/i,"");if(this._getWidth(i)>this._maxWidth){const i=this._splitWord(r);t=t.concat(i.lines),i.rest&&(e=[i.rest])}}else e.push(r)}t.push(e.join("")),e=[]}return t.map((t=>this._trimLine(t,this._context.textAlign)))}_trimLine(t,e){return t}_buildWords(t){const e=[];let i="";const r=t.length;for(let n=0;n<r;n++){const o=t[n];i+=o,(" "===o||"-"===o||n===r-1)&&(e.push(i),i="")}return e}_splitWord(t){const e={lines:[],rest:null},i=t.length;let r=[];for(let n=0;n<i;n++){const o=t[n];this._getWidth(r.concat(o).join(""))>this._maxWidth?(r.length>0&&e.lines.push(r.join("")),r=[o]):r.push(o),n===i-1&&r.length>0&&(e.rest=r.join(""))}return e}_fontStyleChanged(){return this._context.font!==this._lastFontStyle&&(this._lastFontStyle=this._context.font,!0)}_getWidth(t){return this._context.measureText(t).width}setText(t){this._text=t,this._lines=t.split("\n")}setMaxWidth(t){this._maxWidth=t}};const{Vector2:Il}=Ui;var Ol=class{constructor(t,e){this._text=t,this._operation=e,this._textOptions={},this.rotation=0,this._createCanvas(),this._createTexture()}_createCanvas(){this._canvas=It.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new Dl(this._context),this._finalCanvas=It.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d")}_createTexture(){this._texture=Zi.Texture.fromCanvas(this._canvas),this._finalTexture=Zi.Texture.fromCanvas(this._finalCanvas)}_applyTextOptions(t,e){e.font=`${this._text.getFontStyle()} ${this._text.getFontWeight()} ${t.fontSize}px "${this._text.getFontFamily()}"`,this._text.getTextMetrics()?e.textBaseline="alphabetic":e.textBaseline="top",e.textAlign=this._text.getAlignment(),e.fillStyle=this._text.getColor().toRGBA(),e.strokeStyle=this._text.getOutlineColor().toRGBA();const i=this._text.getOutlineWidth();i>0&&(e.lineWidth=i)}_buildOutputLines(t){return this._textSplitter.setText(this._text.getText()),this._textSplitter.setMaxWidth(t),this._textSplitter.getLines().map((t=>t.replace(/\s+$/i,"")))}_renderTextLine(t,e,i){const r=this._text.getAlignment(),n=new Il(0,e);switch(r){case"left":n.x=i;break;case"center":n.x=this._canvas.width/2;break;case"right":n.x=this._canvas.width-i}this._context.save(),this._context.translate(n.x,n.y),this._context.fillText(t,0,0),this._context.restore();this._text.getOutlineWidth()>0&&(this._context.miterLimit=2,this._context.strokeText(t,n.x,n.y))}update(t,e){const i=this.calculateFontStyles(t,e);if(i){const{dimensions:r,lines:n}=this._calculateText(t,i,e);this._renderText(t,r,n,i,e),this._updateFinalTexture()}}_updateFinalTexture(){const{width:t,height:e}=this._canvas,{rotation:i}=this,r=Math.cos(i),n=Math.sin(i),o=new Il(Math.abs(t*r)+Math.abs(e*n),Math.abs(t*n)+Math.abs(e*r));this._finalCanvas.width=o.x,this._finalCanvas.height=o.y,this._finalContext.save(),this._finalContext.translate(this._finalCanvas.width/2,this._finalCanvas.height/2),this._finalContext.rotate(i),this._finalContext.drawImage(this._canvas,-t/2,-e/2),this._finalContext.restore()}_renderText(t,e,i,r,n){this._canvas.width=e.x,this._canvas.height=e.y,this._text.getMaxHeight()&&(this._canvas.height=Math.min(this._text.getMaxHeight()*n.y,this._canvas.height)),this._context=this._canvas.getContext("2d"),this._context.fillStyle=this._text.getBackgroundColor().toRGBA(),this._context.fillRect(0,0,e.x,e.y),this._applyTextOptions(r,this._context);const o=this._padding(n),s=this._text.getTextMetrics(),a=this._text.getFontSize()*n.y,l=1/s.unitsPerEm*a,c=s.ascender*l;for(let t=0;t<i.length;t++){const e=i[t];this._renderTextLine(e,r.topPadding+r.lineHeight*t+o+c,o)}}calculateFontStyles(t,e){const i=this._text.getFontFamily(),r=this._text.getFontSize()*e.y,n=this._text.getAbsoluteTextHeight(e),o=n*this._text.getLineHeight(),s={fontFamily:i,fontSize:r,lineHeight:o,topPadding:n*(this._text.getLineHeight()-1)/2};return(this._textOptions.fontFamily!==i||this._textOptions.fontSize!==r||this._textOptions.lineHeight!==o)&&(this._textOptions=s),s}_calculateText(t,e,i){const r=this._text.getMaxWidth()*i.x;this._applyTextOptions(e,this._context);const n=new Il;let o=this._text.getText().split("\n");void 0!==r&&(n.x=r,o=this._buildOutputLines(r));for(let t=0;t<o.length;t++){const e=o[t];n.x=Math.max(n.x,this._context.measureText(e).width)}const{lineHeight:s}=e;n.y=o.length*s;const a=this._padding(i);return n.y+=2*a,n.x+=2*a,{dimensions:n,lines:o}}_padding(t){return.2*this._text.getAbsoluteTextHeight(t)}getTexture(){return this._texture}getFinalTexture(){return this._finalTexture}getDimensions(t,e){const i=this.calculateFontStyles(t,e),{dimensions:r}=this._calculateText(t,i,e);return r}dispose(){this._measurementElement&&document.body.removeChild(this._measurementElement),this._texture&&(this._texture.dispose(),this._texture=null),this._finalTexture&&(this._finalTexture.dispose(),this._finalTexture=null)}};const{Vector2:Al}=Ui;class Fl extends ae{constructor(t){super(t),this._textOptions={},this._createCanvas()}_createCanvas(){this._canvas=It.createCanvas(),this._context=this._canvas.getContext("2d"),this._textSplitter=new Dl(this._context),this._finalCanvas=It.createCanvas(),this._finalContext=this._finalCanvas.getContext("2d"),this.updateFontVariation()}setOption(t,e,i=!0,r=!1){super.setOption(t,e,i,r),"fontIdentifier"===t&&!r&&this.updateFontVariation()}updateFontVariation(){const t=La.getVariation(this.getFontIdentifier());return t||Mt.warn(`TextDesignFont: Unable to find font '${this._fontIdentifier}'`),this.setFontVariation(t),t}_applyTextOptions(t={},e=this._context){const{fontSize:i,fontVariation:r,lineHeight:n,textColor:o,alignment:s}=b(b({},this._options),t),{fontStyle:a,fontWeight:l,fontFamily:c}=r.serializeOptions();e.font=`${a} ${l} ${i}px "${c}"`,e.fillStyle=o,e.textBaseline="top",e.textAlign=s||"left"}_buildOutputLines(t){return this._textSplitter.setText(this.getText()),this._textSplitter.setMaxWidth(t),this._textSplitter.getLines()}_renderTextLine(t,e){const i=this.getAlignment(),r=new Al(0,e);switch(i){case"center":r.x=this._canvas.width/2;break;case"right":r.x=this._canvas.width}this._context.fillText(t,r.x,r.y)}update(){const t=this.calculateFontStyles();if(t){const{dimensions:e,lines:i}=this._calculateText(t);this._dimensions=e,this._renderText(e,i,t)}}draw(t,e=0,i=0){this.update(),t.drawImage(this._canvas,e,i,this._dimensions.x,this._dimensions.y)}_renderText(t,e,i){this._canvas.width=t.x,this._canvas.height=t.y,this._context=this._canvas.getContext("2d"),this._applyTextOptions(i,this._context);for(let t=0;t<e.length;t++){const r=e[t];this._renderTextLine(r,i.topPadding+i.lineHeight*t)}}getFontFamily(){return this.getFontVariation().getFontFamily()}calculateFontStyles(){const t=this.getFontFamily(),e=this.getFontSize(),i=this.getAbsoluteTextHeight(),r={fontFamily:t,fontSize:e,textHeight:i,lineHeight:i*this.getLineHeight(),topPadding:i*(this.getLineHeight()-1)/2};return this._textOptions=b({},r),r}getTextMetrics(){return this.getFontVariation().getTextMetrics()}getAbsoluteTextHeight(){const t=this.getFontSize(),e=this.getTextMetrics();if(e){const i=1/e.unitsPerEm*t,r=e.ascender*i,n=e.descender*i;return r+Math.abs(n)}return t*this.getLineHeight()*1.1}_calculateText(t){this._applyTextOptions(t,this._context);const e=new Al;let i=this.getText().split("\n");for(let t=0;t<i.length;t++){const r=i[t];e.x=Math.max(e.x,this._context.measureText(r).width)}const{lineHeight:r}=t;return e.y=i.length*r,{dimensions:e,lines:i}}getDimensions(){const t=this.calculateFontStyles(),{dimensions:e}=this._calculateText(t);return e}fitMaxHeight(){this.update();const t=this.getDimensions();this.getText().split("\n"),this.getMaxHeight(),t.y}fitMaxWidth(){const t=this.getDimensions().x,e=this.getMaxWidth()/t;this.setFontSize(this.getFontSize()*e),this._textOptions.fontSize=this.getFontSize()}fitInFrame(t){this.setMaxWidth(t.width),this.setMaxHeight(t.height),this.fitMaxWidth(),this.fitMaxHeight()}getSize(){const t=this.getDimensions();return new Pa(t.x,t.y)}}Fl.prototype.availableOptions={text:{type:ft.STRING,default:""},fontIdentifier:{type:ft.STRING,default:"imgly_font_open_sans_bold"},fontVariation:{type:ft.OBJECT,default:null},lineHeight:{type:ft.NUMBER,default:1},fontSize:{type:ft.NUMBER,default:22},textColor:{type:ft.STRING,default:"black"},strokeStyle:{type:ft.STRING,default:"black"},outlineWidth:{type:ft.NUMBER,default:0},textBaseline:{type:ft.STRING,default:"alphabetic"},excludeAccents:{type:ft.BOOLEAN,default:!0},maxWidth:{type:ft.NUMBER,default:100},maxHeight:{type:ft.NUMBER,default:0},alignment:{type:ft.STRING,default:"left",available:["left","center","right"]}};class Ml extends al{_calculateLayoutElements(){const t=this.getWords(),e=this._getTextFrame(),i=this.getAttributes().getFontIdentifier(),r=this.getImageInsets(),n=new Ha({text:t.getWord(0),fontIdentifier:i});n.fitWidth(e.width);const o=new Wa({text:t.getWord(0),frame:e,font:n});o.setFrame(this._getTextFrameForElement(o));const s=this.getSize();return(this.getSizeToFitContent()||s.height<=1)&&(s.height=r.top+o.getFrame().height+r.bottom),s.height=Math.max(s.height,this.getMinimumHeight()),[o]}_getTextFrameForElement(t){const e=this.getWords().getWord(0),i=this.getAttributes(),r=i.getFontIdentifier(),n=this.getImageInsets(),o=this.getImageInsets().applyToRectangle(this._getFrame()).scale(this.getTextScaleFactor()),s=new Fl({text:e,fontIdentifier:r,alignment:i.getAlignment(),lineHeight:1});s.fitInFrame(o);const a=s.getSize();o.height=a.height;let l=a.height*this.getRowScaleFactor();this.getSizeToFitContent()&&(l+=n.top+n.bottom);const c=this._getFrame(),u=i.getAlignment();if(this.getCenteredVertically())o.y=c.height/2-l/2+n.top;else switch(u){case"left":o.y=c.height-l-n.bottom;break;case"center":o.y=c.height/2-l/2+l*this.getCenterOffset(),o.x=(c.width-o.width)/2;break;case"right":o.x=c.width-o.width-n.right}return o}render(t){t.save(),this._getLayoutElements().forEach((e=>{let{text:i,frame:r}=e.serializeOptions();const n=this.getAttributes(),o=n.getFontIdentifier(),s=new Fl({text:i,fontIdentifier:o,alignment:n.getAlignment(),lineHeight:1,textColor:n.getTextColor().toRGBA()});r=this._getTextFrameForElement(e),s.fitInFrame(r),s.draw(t,r.x,r.y)})),t.restore()}}Ml.prototype.availableOptions=b(b({},al.prototype.availableOptions),{centerOffset:{type:ft.NUMBER,default:0},sizeToFitContent:{type:ft.BOOLEAN,default:!1},textScaleFactor:{type:ft.NUMBER,default:.95},rowScaleFactor:{type:ft.NUMBER,default:1},minimumHeight:{type:ft.NUMBER,default:0},centeredVertically:{type:ft.BOOLEAN,default:!1}});class Pl extends hl{constructor(...t){super(...t),this._rowType=Rl.Box,this._alignmentRandomizer=new Fa(0),this._isMaskedRandomizer=new Fa(0),this._seedPool.push(this._alignmentRandomizer),this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return[Rl.Box.getImagePath()]}_modifiedText(t){return super._modifiedText(t).toLowerCase()}_modifiedLines(t){const e=new ul;return e.set([t.reduce(((t,e)=>`${t}${""===t?"":"\n"}${e.joined(1)[0]}`),"")]),[e]}_layoutRows(t,e){const i=super._layoutRows(t,e),r=i[0];if(r&&this.getSquareLayout()){const t=r.getSize();t.height=t.width}return i}getAlignment(){return this._alignmentRandomizer.pickNext(this.constructor.ValidAlignments||Pl.ValidAlignments)}_randomLayoutRow(t,e,i,r){const n=this.getAlignment(),o=this._rowType,s=La.getImage(o.getImagePath());r.setAlignment(n);const a=new Ml({words:t,width:i,attributes:r,image:s,imageInsets:o.insetsForWidth(i),capInsets:o.getCapInsets(),backgroundColor:jt.WHITE,centerOffset:0,textScaleFactor:.7,isMasked:this._isMaskedRandomizer.nextBool()});this._rowType===Rl.Box&&(a.serverImageSmoothingFix=!0);const l=a.getSize();return this.getSquareLayout()?l.height=l.width:l.height=Math.max(l.height,l.width*o.getMinimumHeightRatio()),a}}C(Pl,"defaultFontIdentifiers",["imgly_font_galano_grotesque_bold"]),C(Pl,"Alignment",{Left:"left",Center:"center",Right:"right"}),C(Pl,"ValidAlignments",[Pl.Alignment.Left,Pl.Alignment.Center,Pl.Alignment.Right]),C(Pl,"identifier","imgly_text_design_masked"),Pl.prototype.availableOptions=b(b({},hl.prototype.availableOptions),{fontIdentifiers:{type:ft.ARRAY,default:Pl.defaultFontIdentifiers},squareLayout:{type:ft.BOOLEAN,default:!0}});class Bl extends Pl{constructor(...t){super(...t),this._possibleRowTypes=[Rl.Badge1,Rl.Badge2,Rl.Badge3,Rl.Badge4],this._rowTypesRandomizer=new Fa(0),this._isMaskedRandomizer=new Fa(0),this._seedPool.push(this._rowTypesRandomizer),this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return this._possibleRowTypes.map((t=>t.getImagePath()))}_randomLayoutRow(t,e,i,r){this._rowType=this._rowTypesRandomizer.pickNext(this._possibleRowTypes),r.setLineSpacing(.9);const n=super._randomLayoutRow(t,e,i,r);return n.set({textScaleFactor:.9}),n}}C(Bl,"defaultFontIdentifiers",["imgly_font_campton_bold"]),C(Bl,"identifier","imgly_text_design_masked_badge"),C(Bl,"ValidAlignments",[Pl.Alignment.Center]),Bl.prototype.availableOptions=b(b({},Pl.prototype.availableOptions),{fontIdentifiers:{type:ft.ARRAY,default:Bl.defaultFontIdentifiers}});class zl extends Pl{constructor(...t){super(...t),this._possibleRowTypes=[Rl.SpeechBubble1,Rl.SpeechBubble3],this._rowTypesRandomizer=new Fa(0),this._isMaskedRandomizer=new Fa(0),this._seedPool.push(this._rowTypesRandomizer),this._seedPool.push(this._isMaskedRandomizer)}getImagePaths(){return this._possibleRowTypes.map((t=>t.getImagePath()))}_rowTypes(t){return this._possibleRowTypes}_randomLayoutRow(t,e,i,r){this._rowType=this._rowTypesRandomizer.pickNext(this._rowTypes(t)),r.setLineSpacing(.9);const n=super._randomLayoutRow(t,e,i,r);return n.set({textScaleFactor:1,minimumHeight:i*this._rowType.getMinimumHeightRatio(),sizeToFitContent:this._rowType.getSizeToFitContent(),centeredVertically:!0}),n}}C(zl,"defaultFontIdentifiers",["imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_roboto_black","imgly_font_roboto_light"]),C(zl,"identifier","imgly_text_design_masked_speech_bubble"),zl.prototype.availableOptions=b(b({},Pl.prototype.availableOptions),{fontIdentifiers:{type:ft.ARRAY,default:zl.defaultFontIdentifiers},squareLayout:{type:ft.BOOLEAN,default:!1},alignment:{type:ft.STRING,default:"left",available:Pl.ValidAlignments}});class Ll extends zl{constructor(...t){super(...t),this._possibleRowTypes=[Rl.SpeechBubble2,Rl.SpeechBubble4,Rl.SpeechBubble2,Rl.SpeechBubble4,Rl.SpeechBubble5],this._possibleRowTypesForMin15=this._possibleRowTypes.slice(0,2),this._possibleRowTypesForMax14=this._possibleRowTypes.slice(2)}_rowTypes(t){return t.countNumberOfCharacters()<15?this._possibleRowTypesForMax14:this._possibleRowTypesForMin15}}C(Ll,"defaultFontIdentifiers",["imgly_font_permanent_marker"]),C(Ll,"identifier","imgly_text_design_masked_speech_bubble_comic"),Ll.prototype.availableOptions=b(b({},zl.prototype.availableOptions),{fontIdentifiers:{type:ft.ARRAY,default:Ll.defaultFontIdentifiers}});class Nl extends Pl{_modifiedText(t){return super._modifiedText(t).toUpperCase()}_randomLayoutRow(t,e,i,r){const n=this._alignmentRandomizer.pickNext(Pl.ValidAlignments);return r.setAlignment(n),new Ml({words:t,width:i,attributes:r,image:null,backgroundColor:jt.WHITE,centerOffset:0,sizeToFitContent:!0,isMasked:!1,autoAdjustTextColor:!1})}}C(Nl,"defaultFontIdentifiers",["imgly_font_abril_fatface_regular"]),C(Nl,"identifier","imgly_text_design_multiline"),Nl.prototype.availableOptions=b(b({},Pl.prototype.availableOptions),{fontIdentifiers:{type:ft.ARRAY,default:Nl.defaultFontIdentifiers}});const{Rectangle:Ul}=Ui;class jl extends ae{getContentFrame(){const t=this.getFrame().clone(),e=.1*t.width;return t.insetBy(e,e)}intersects(t){return this.getFrame().intersects(t.getFrame())}}jl.prototype.availableOptions={frame:{type:ft.OBJECT,default:new Ul}};const{Rectangle:Hl}=Ui;class Wl extends Sl{constructor(...t){super(...t),this._MAX_TRIES=1e3,this._PRECISION=1e3}render(t,e,i,r,n){const{imagePaths:o,relativeParticleSize:s}=this._options;if(o.length<=0)return;const a=e.width/e.height,l=new Hl(Math.round(i.left*this._PRECISION),Math.round(i.top*this._PRECISION*a),this._PRECISION,this._PRECISION);l.width-=l.x+Math.round(i.right*this._PRECISION),l.height-=l.y+Math.round(i.bottom*this._PRECISION*a);const c=[];let u=0,h=0;for(;u<this.getParticleCount()&&h<this._MAX_TRIES;){const t=s/2,e=Math.round(t*this._PRECISION),i=Math.round(t*this._PRECISION*a),r=Math.floor(this._PRECISION)-e,o=Math.floor(this._PRECISION)-i,d=n.nextInRange(e,r),p=n.nextInRange(i,o),f=new Hl(d-e,p-i,2*e,2*i);!f.intersects(l)&&!this.hasCollision(c,f)&&(c.push(new jl({frame:f})),u+=1),h+=1}for(let i=0;i<c.length;i++){const s=c[i],a=n.pickNext(o),l=La.getImage(a),u=n.nextInRange(140,230)/255,h=e.width/this._PRECISION,d=e.height/this._PRECISION,p=s.getContentFrame();p.x*=h,p.y*=d,p.width*=h,p.height*=d;const f=r.clone();f.a=u,sl(t,l,p,f,"source-atop")}}hasCollision(t,e){for(let i=0;i<t.length;i++)if(e.intersects(t[i].getFrame()))return!0;return!1}}Wl.prototype.availableOptions=b(b({},Sl.prototype.availableOptions),{particleCount:{type:ft.NUMBER,default:50},relativeParticleSize:{type:ft.NUMBER,default:.08},imagePaths:{type:ft.ARRAY,default:[]}});class Gl extends Wl{}C(Gl,"Images",["text-design/images/imgly_text_design_particle_brush_01.png","text-design/images/imgly_text_design_particle_brush_02.png","text-design/images/imgly_text_design_particle_brush_03.png","text-design/images/imgly_text_design_particle_brush_04.png","text-design/images/imgly_text_design_particle_brush_05.png","text-design/images/imgly_text_design_particle_brush_06.png","text-design/images/imgly_text_design_particle_brush_07.png","text-design/images/imgly_text_design_particle_brush_08.png","text-design/images/imgly_text_design_particle_brush_09.png","text-design/images/imgly_text_design_particle_brush_10.png"]),Gl.prototype.availableOptions=b(b({},Wl.prototype.availableOptions),{imagePaths:{type:ft.ARRAY,default:[...Gl.Images]},relativeParticleSize:{type:ft.NUMBER,default:.12}});class Vl extends Wl{}C(Vl,"Images",["text-design/images/imgly_text_design_particle_circle_01.png","text-design/images/imgly_text_design_particle_circle_02.png","text-design/images/imgly_text_design_particle_circle_03.png","text-design/images/imgly_text_design_particle_circle_04.png","text-design/images/imgly_text_design_particle_circle_05.png","text-design/images/imgly_text_design_particle_circle_06.png","text-design/images/imgly_text_design_particle_circle_07.png","text-design/images/imgly_text_design_particle_circle_08.png","text-design/images/imgly_text_design_particle_circle_09.png","text-design/images/imgly_text_design_particle_circle_10.png"]),Vl.prototype.availableOptions=b(b({},Wl.prototype.availableOptions),{imagePaths:{type:ft.ARRAY,default:[...Vl.Images]},relativeParticleSize:{type:ft.NUMBER,default:.12}});class $l extends Wl{}C($l,"Images",["text-design/images/imgly_text_design_particle_triangle_01.png","text-design/images/imgly_text_design_particle_triangle_02.png","text-design/images/imgly_text_design_particle_triangle_03.png","text-design/images/imgly_text_design_particle_triangle_04.png","text-design/images/imgly_text_design_particle_triangle_05.png","text-design/images/imgly_text_design_particle_triangle_06.png","text-design/images/imgly_text_design_particle_triangle_07.png","text-design/images/imgly_text_design_particle_triangle_08.png","text-design/images/imgly_text_design_particle_triangle_09.png","text-design/images/imgly_text_design_particle_triangle_10.png"]),$l.prototype.availableOptions=b(b({},Wl.prototype.availableOptions),{imagePaths:{type:ft.ARRAY,default:[...$l.Images]}});class Zl extends hl{constructor(...t){super(...t),this._relativeInsets=new qa(0,0,0,0),this._INVALID_FONTS_IF_LESS_THEN_5_CHARS=["imgly_font_montserrat_light"],this._INVALID_FONTS_IF_LESS_THEN_4_CHARS=["imgly_font_montserrat_light","imgly_font_wolesbro"],this._lineCount=0,this._decorativeRowCreated=!1,this._useImageRowRandomizer=new Fa(0),this._rowTypeRandomizer=new Fa(0),this._lineDecorativeTypeRandomizer=new Fa(0),this._seedPool.push(this._useImageRowRandomizer),this._seedPool.push(this._rowTypeRandomizer),this._seedPool.push(this._lineDecorativeTypeRandomizer)}getImagePaths(){return[...Zl.DecoratorImages,...Zl.RowImages]}_fontForRow(t,e){const i=e.countNumberOfCharacters();let r=this.getFontIdentifiers();return i<4?r=r.filter((t=>this._INVALID_FONTS_IF_LESS_THEN_4_CHARS.indexOf(t)<0)):i<5&&(r=r.filter((t=>this._INVALID_FONTS_IF_LESS_THEN_5_CHARS.indexOf(t)<0))),r[t%r.length]}_modifiedText(t){return super._modifiedText(t).toUpperCase()}_modifiedLines(t){return this._lineCount=t.length,t}generateLayoutData(t,e){return this._decorativeRowCreated=!1,super.generateLayoutData(t,e)}_randomLayoutRow(t,e,i,r){let n=t;switch(r.getFontIdentifier()){case"imgly_font_wolesbro":n=(new ul).set(t.getLowerCase());break;case"imgly_font_permanent_marker":n=(new ul).set(t.getUpperCase())}const o=this.getDecorativeRowsInTheMiddleOnly()&&(0===e||e===this._lineCount-1);if(this._useImageRowRandomizer.nextBool()||this._decorativeRowCreated||o)return new Ka({words:n,width:i,attributes:r});this._decorativeRowCreated=!0;const[s,a]=this._randomDecoratorImages();return new vl({words:t,width:i,attributes:r,leftImage:s,rightImage:a})}_layoutRows(t,e){const i=super._layoutRows(t,e);if(!this.getDecorationsVisible())return i;const r=.0625*e,n=new xl({width:e,height:r,image:La.getImage(this._rowTypeRandomizer.pickNext(Zl.RowImages))}).layout(),o=new xl({width:e,height:r,image:La.getImage(this._rowTypeRandomizer.pickNext(Zl.RowImages))}).layout();return[n,...i,o]}_randomDecoratorImages(){return this._lineDecorativeTypeRandomizer.nextInRange(0,1)?Zl.DecoratorImages.slice(0,2).map((t=>La.getImage(t))):Zl.DecoratorImages.slice(2).map((t=>La.getImage(t)))}}C(Zl,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"]),C(Zl,"identifier","imgly_text_design_sunshine"),C(Zl,"RowImages",[xl.RowImages.decorative1,xl.RowImages.decorative2,xl.RowImages.decorative3,xl.RowImages.decorative4]),C(Zl,"DecoratorImages",["text-design/images/imgly_text_design_asset_decorative_03.png","text-design/images/imgly_text_design_asset_decorative_04.png","text-design/images/imgly_text_design_asset_decorative_07.png","text-design/images/imgly_text_design_asset_decorative_08.png"]),Zl.prototype.availableOptions=b(b({},hl.prototype.availableOptions),{fontIdentifiers:{type:ft.ARRAY,default:Zl.defaultFontIdentifiers},relativeLineSpacing:{type:ft.NUMBER,default:.025/3*4},decorationsVisible:{type:ft.BOOLEAN,default:!0},decorativeRowsInTheMiddleOnly:{type:ft.BOOLEAN,default:!1}});class Xl extends Zl{constructor(...t){super(...t),this._relativeInsets=new qa(.3,.3,.3,.3),this._backgroundRandomizer=new Fa(0),this._decoTypeRandomizer=new Fa(0),this._seedPool.push(this._backgroundRandomizer),this._seedPool.push(this._decoTypeRandomizer)}getImagePaths(){return[...Zl.RowImages,...It.Array.flatten(Xl.Backgrounds.map((t=>t.getImagePaths()))),...Xl.DecoratorImages]}_getBackground(){return this._backgroundRandomizer.pickNext(Xl.Backgrounds)}_randomDecoratorImages(){switch(this._decoTypeRandomizer.nextInRange(0,2)){case 0:return Xl.DecoratorImages.slice(0,2).map((t=>La.getImage(t)));case 1:case 2:return Xl.DecoratorImages.slice(2).map((t=>La.getImage(t)));default:return Mt.warn("TextDesignParticles#_randomDecoratorImages: Number generated not in valid range."),Xl.DecoratorImages.slice(2).map((t=>La.getImage(t)))}}}C(Xl,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro","imgly_font_montserrat_light"]),C(Xl,"identifier","imgly_text_design_particles"),C(Xl,"Backgrounds",[new Gl,new Vl,new $l]),C(Xl,"DecoratorImages",["text-design/images/imgly_text_design_particle_holder_01.png","text-design/images/imgly_text_design_particle_holder_02.png","text-design/images/imgly_text_design_particle_holder_03.png","text-design/images/imgly_text_design_particle_holder_04.png"]),Xl.prototype.availableOptions=b(b({},Zl.prototype.availableOptions),{fontIdentifiers:{type:ft.ARRAY,default:Xl.defaultFontIdentifiers},decorationsVisible:{type:ft.BOOLEAN,default:!1},decorativeRowsInTheMiddleOnly:{type:ft.BOOLEAN,default:!0}});class Yl extends hl{constructor(...t){super(...t),this._relativeInsets=new qa(.1,0,0,0),this._rowTypeRandomizer=new Fa(0),this._seedPool.push(this._rowTypeRandomizer)}_modifiedText(t){return super._modifiedText(t).toUpperCase()}_randomLayoutRow(t,e,i,r){const n=super._randomLayoutRow(t,e,i,r);return n.setShearingAngle(this.getShearingAngle()),n}_layoutRows(t,e){const i=super._layoutRows(t,e),r=It.values(ml.FormType);return[new ml({width:e,height:30,type:this._rowTypeRandomizer.pickNext(r),shearingAngle:this.getShearingAngle()}).layout(),...i,new ml({width:e,height:30,type:this._rowTypeRandomizer.pickNext(r),shearingAngle:this.getShearingAngle()}).layout()]}}C(Yl,"defaultFontIdentifiers",["imgly_font_campton_bold"]),C(Yl,"identifier","imgly_text_design_rotated"),Yl.prototype.availableOptions=b(b({},hl.prototype.availableOptions),{fontIdentifiers:{type:ft.ARRAY,default:Yl.defaultFontIdentifiers},relativeLineSpacing:{type:ft.NUMBER,default:.025/3},shearingAngle:{type:ft.NUMBER,default:-.1}});class ql extends Zl{constructor(...t){super(...t),this._relativeInsets=new qa(0,.3,0,.3)}_layoutRows(t,e){const i=super._layoutRows(t,e);if(!this.getDecorationsVisible())return i;const r=new xl({width:e,height:25,image:La.getImage(this._rowTypeRandomizer.pickNext(Zl.RowImages))}).layout(),n=new xl({width:e,height:25,image:La.getImage(this._rowTypeRandomizer.pickNext(Zl.RowImages))}).layout();return[r,...i,n]}}C(ql,"identifier","imgly_text_design_sunshine-v3_1_0");class Kl extends zl{constructor(...t){super(...t),this._possibleRowTypes=[Rl.Watercolor1,Rl.Watercolor2,Rl.Watercolor3]}}C(Kl,"defaultFontIdentifiers",["imgly_font_permanent_marker","imgly_font_wolesbro","imgly_font_wolesbro"]),C(Kl,"identifier","imgly_text_design_watercolor"),Kl.prototype.availableOptions=b(b({},zl.prototype.availableOptions),{fontIdentifiers:{type:ft.ARRAY,default:Kl.defaultFontIdentifiers},alignment:{type:ft.STRING,default:Pl.Alignment.Center,available:Pl.ValidAlignments}});const{Rectangle:Ql}=Ui,Jl=1e3;class tc{constructor(){this._layoutData=null,this._layout=null,this._text="",this._seed=0,this._debugMode=!1,this.randomizer=new Fa}createLayout(t,e,i){this._layout=t,this._text=e,this._seed=i,t.seed(i),this._layoutData=t.generateLayoutData(e,Jl)}calculateAspect(){return this._layoutData?this._layoutData.getSize().aspect():(Mt.warn("TextDesignRenderer#calculateAspect: No layout data"),1)}draw(t,e,i,r){const n=this._layoutData;if(this._layoutData){const o=new Pa(Jl,Jl/e.aspect()),s=e.width/Jl,a=n.getRelativeInsets().clone().scale(o.width),l=n.getRelativeLineSpacing()*o.width;let c=a.top;t.save(),this.randomizer.seed(this._seed);const u=n.getBackground();u&&u.render(t,e,n.getRelativeInsets(),r?jt.WHITE:i,this.randomizer),t.scale(s,s),n.getRows().forEach((e=>{t.save();const n=e.getAttributes();if(t.transform(1,e.getShearingAngle(),0,1,a.left,c),n.setTextColor(r?jt.WHITE:i.clone()),n.setTintColor(r?jt.WHITE:i.clone()),(e instanceof al||e instanceof Ml)&&(e.setBackgroundColor(r?jt.WHITE:i.clone()),e.setIsUsedInInvertedLayout(r)),this._debugMode&&(e._debugMode=!0),e.willRender(t),e.render(t),e.didRender(t),this._debugMode){const i=e._getFrame(),r=e._getTextFrame();rl(t,i,jt.GREEN),rl(t,r,jt.BLUE),e._getLayoutElements().forEach((i=>{const r=i.getFrame(),n=e._getTextFrameForElement(i);rl(t,r,new jt(1,1,0)),rl(t,n,new jt(0,1,1))}))}c+=e.getSize().height+l,t.restore()})),this._debugMode&&rl(t,new Ql(0,0,o.width,o.height),jt.RED),t.restore()}}}const{Vector2:ec}=Ui;class ic extends fa{constructor(t,e){super(t,e),this._isDisposed=!1,this._renderer=new tc,this._canvas=It.createCanvas(),this._context=this._canvas.getContext("2d"),this._texture=Zi.Texture.fromCanvas(this._canvas),this._sprite.setTexture(this._texture),this._aspect=1,this._isLayoutDirty=!0,this.getSeed()<0&&this.setSeed(Fa.TimeSeed())}seed(t){this.setSeed(t||Fa.TimeSeed()),this._isLayoutDirty=!0}_updateLayout(){const t=this.getLayout();return t?(this._renderer.createLayout(t,this.getText(),this.getSeed()),this._aspect=this._renderer.calculateAspect(),this._isLayoutDirty=!1,!0):null}applyTransform(t){super.applyTransform(t);const e={};this._options.dimensions&&(e.width=t.applyToRelativeSize(this.getWidth())),this.set(e,!1)}applyFlip(t){super.applyFlip(t);let{rotation:e}=this._options;switch(t){case"horizontal":e+=2*(Math.PI-e),this.setRotation(e);break;case"vertical":e+=2*(Math.PI/2-e),this.setRotation(e)}}update(t,e){const i=this._isLayoutDirty;if(this._isDisposed||i&&!this._updateLayout())return;const r=this.getWidth()*e.min()/t.getTextureScale(),n=r/this._aspect,o=new ec(r,n),s=new ec(Math.round(2*r),Math.round(2*n)).clamp(new ec(1,1),new ec(1/0,1/0)),a=t.getRenderer(),l=a.getMaxDimensions()||1/0;s.x>l&&(s.x=l,s.y=Math.round(s.x/this._aspect)),s.y>l&&(s.y=l,s.x=Math.round(s.y*this._aspect));const c=It.ensureCanvasDimensions(this._canvas,s);(i||c)&&(this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._renderer.draw(this._context,new Pa(s.x,s.y),this.getColor(),this.getInverted()),this.setDimensions(o),this._texture.getBaseTexture().update(),a.isOfType(gt.WEBGL)&&a.updateTexture(this._texture.getBaseTexture())),super.update(t,e),this._applyFlip()}_applyFlip(){const t=this._sprite.getScale(),{flipHorizontally:e,flipVertically:i}=this._options;(e&&t.x>0||!e&&t.x<0)&&(t.x*=-1),(i&&t.y>0||!i&&t.y<0)&&(t.y*=-1),this._sprite.setScale(t)}_optionEquals(t,e){if("layout"===t){const{layout:t}=this._options;return!(!t&&e||!e&&t||!e.constructor||!t.constructor)&&!(t.constructor.identifier!==e.constructor.identifier)}return super._optionEquals(t,e)}serializeOptions(t,e=!1){if(t&&this.getPadding()<0){const e=t.indexOf("padding");e>-1&&t.splice(e,1)}const i=super.serializeOptions(t,e);return t||(i.type="textdesign"),i}_getTexture(){return this._texture}canBeFlippedHorizontally(){return!1}canBeDuplicated(){return!0}canMaskCanvas(){return!0}canAdjustPadding(){return!0}dispose(){this._isDisposed=!0,this._texture.dispose(),this._sprite.dispose()}}ic.Layouts={TextDesignBlocks:dl,TextDesignBlocksCondensed:pl,TextDesignBlocksLight:gl,TextDesignCelebrate:bl,TextDesignCelebrateSimple:wl,TextDesignEqualWidth:Tl,TextDesignEqualWidthFat:El,TextDesignMasked:Pl,TextDesignMaskedBadge:Bl,TextDesignMaskedSpeechBubble:zl,TextDesignMaskedSpeechBubbleComic:Ll,TextDesignMultiline:Nl,TextDesignWatercolor:Kl,TextDesignSunshine:Zl,TextDesignParticles:Xl,TextDesignRotated:Yl},ic.LegacyLayouts={TextDesignBlocksLightV310:_l,TextDesignSunshineV310:ql},ic.AssetManager=La,ic.prototype.availableOptions={id:{type:ft.STRING,default:()=>It.getUUID()},position:{type:ft.VECTOR2,default:new ec(.5,.5)},dimensions:{type:ft.VECTOR2,default:ec.NULL},anchor:{type:ft.VECTOR2,default:new ec(0,0)},pivot:{type:ft.VECTOR2,default:new ec(.5,.5)},rotation:{type:ft.NUMBER,default:0},flipHorizontally:{type:ft.BOOLEAN,default:!1},flipVertically:{type:ft.BOOLEAN,default:!1},layout:{type:ft.OBJECT,default:null,setter(t){return this._isLayoutDirty=!0,t}},text:{type:ft.STRING,default:"",setter(t){return this._isLayoutDirty=!0,t}},color:{type:ft.COLOR,default:jt.BLACK,setter(t){return this._isLayoutDirty=!0,t}},padding:{type:ft.NUMBER,default:.01,minValue:.01},width:{type:ft.NUMBER,default:.8},inverted:{type:ft.BOOLEAN,default:!1,setter(t){return this._isLayoutDirty=!0,t}},seed:{type:ft.NUMBER,default:-1}};var rc=ic;const{Vector2:nc}=Ui;class oc extends fa{constructor(...t){super(...t),this._textRenderer=new Ol(this,this._operation),this._textRenderer.rotation=this.getRotation(),this._sprite.setTexture(this._textRenderer.getFinalTexture()),this._hitTestSprite.setTexture(this._textRenderer.getTexture())}serializeOptions(t,e=!1){const i=super.serializeOptions(t,e);return t||(i.type="text"),i}getDOMStyle(t,e){const i=this.getFontSize()*e.y;return{fontWeight:this._options.fontWeight,fontSize:`${i}px`,fontStyle:this._options.fontStyle,fontFamily:this._options.fontFamily,lineHeight:this.getAbsoluteTextHeight(e)*this.getLineHeight()+"px",color:this._options.color.toRGBA(),backgroundColor:this._options.backgroundColor.toRGBA(),textAlign:this._options.alignment}}getAbsoluteTextHeight(t){const e=this.getFontSize()*t.y,i=this.getTextMetrics();if(i){const t=1/i.unitsPerEm*e,r=i.ascender*t,n=i.descender*t;return r+Math.abs(n)}return e*this.getLineHeight()*1.1}getDimensions(t,e){return this._textRenderer.getDimensions(t,e)}applyFlip(t){super.applyFlip(t);let{rotation:e}=this._options;switch(t){case"horizontal":e+=2*(Math.PI-e),this.setRotation(e);break;case"vertical":e+=2*(Math.PI/2-e),this.setRotation(e)}}applyTransform(t){super.applyTransform(t),this.set({fontSize:t.scaleSize(this.getFontSize(),"y"),maxWidth:t.scaleSize(this.getMaxWidth(),"x")},!1)}applyRotation(t){super.applyRotation(t);const e=(t+360)%360,i=this._operation.getInputDimensions();(90===e||270===e)&&(this.setMaxWidth(this.getMaxWidth()/i.x*i.y),this.setFontSize(this.getFontSize()/i.y*i.x))}setOption(t,e){const{flipHorizontally:i,flipVertically:r}=this._options;if("rotation"===t){let t=e;return i&&(t=2*Math.PI-t),r&&(t=2*Math.PI-t),this._options.rotation=t,this._textRenderer&&(this._textRenderer.rotation=t),this._rotation=t,void this.emit("update")}super.setOption(t,e)}getOption(t){return"rotation"===t?this._rotation:super.getOption(t)}getHitTestDisplayObject(){return this._hitTestSprite}update(t,e){if(this._sprite.setVisible(this._options.visible),!this._options.visible)return;this._textRenderer.update(t,e);const i=this._textRenderer.getFinalTexture();i.getBaseTexture().update();const r=t.getRenderer();r.isOfType(gt.WEBGL)&&r.updateTexture(i.getBaseTexture()),super.update(t,e),this._sprite.setRotation(0),this._textRenderer.getTexture().getBaseTexture().update(),this._hitTestSprite.setRotation(this._rotation),this._hitTestSprite.updateTransform(),this._applyFlip()}_applyFlip(){const t=this._sprite.getScale(),{flipHorizontally:e,flipVertically:i}=this._options;(e&&t.x>0||!e&&t.x<0)&&(t.x*=-1,this.setRotation(this._rotation)),(i&&t.y>0||!i&&t.y<0)&&(t.y*=-1,this.setRotation(this._rotation)),this._sprite.setScale(t)}_getTexture(){return this._textRenderer.getFinalTexture()}dispose(){super.dispose(),this._textRenderer.dispose(),this._hitTestSprite.dispose(),this._sprite.dispose()}canBeFlippedHorizontally(){return!1}canAdjustPadding(){return!1}}oc.prototype.availableOptions={id:{type:ft.STRING,default:()=>It.getUUID()},fontSize:{type:ft.NUMBER,default:.1},characterSpacing:{type:ft.NUMBER,default:0},lineHeight:{type:ft.NUMBER,default:1.1},fontIdentifier:{type:ft.STRING},fontFamily:{type:ft.STRING,default:"Times New Roman"},fontWeight:{type:ft.ALL,default:"normal"},fontStyle:{type:ft.STRING,default:"normal"},textMetrics:{type:ft.OBJECT,default:null},outlineWidth:{type:ft.NUMBER,default:0},outlineColor:{type:ft.COLOR,default:jt.BLACK},alignment:{type:ft.STRING,default:"left",available:["left","center","right"]},verticalAlignment:{type:ft.STRING,default:"top",available:["top","center","bottom"]},color:{type:ft.COLOR,default:new jt(1,0,0,1)},backgroundColor:{type:ft.COLOR,default:jt.TRANSPARENT},position:{type:ft.VECTOR2,default:new nc(.5,.5)},anchor:{type:ft.VECTOR2,default:new nc(0,0)},pivot:{type:ft.VECTOR2,default:new nc(.5,.5)},rotation:{type:ft.NUMBER,default:0},text:{type:ft.STRING,required:!0},maxWidth:{type:ft.NUMBER,default:.5},maxHeight:{type:ft.NUMBER,default:0},visible:{type:ft.BOOLEAN,default:!0},flipHorizontally:{type:ft.BOOLEAN,default:!1},flipVertically:{type:ft.BOOLEAN,default:!1}},oc.type="text";var sc=oc;const{Vector2:ac}=Ui;class lc extends _r{constructor(...t){super(...t),this.setSmoothDownscaling(this._sdk.getOptions().smoothDownscaling),this._onSpriteUpdate=this._onSpriteUpdate.bind(this),this._maskCanvas=It.createCanvas();this._options.sprites.slice().forEach((t=>{this.removeSprite(t),this.addSprite(t)}))}getSpritesOfType(t){return this._options.sprites.filter((e=>e instanceof t))}rotate(t){this._options.sprites.forEach((e=>{e.applyRotation(t)}))}flip(t){this._options.sprites.forEach((e=>{e.applyFlip(t)}))}_onSpriteUpdate(t,e){this.emit("update",this),this.setDirty(!0)}_applyRotation(t,e){this._options.sprites.forEach((i=>i.applyRotation(t,e)))}transform(t){this._options.sprites.forEach((e=>e.applyTransform(t)))}scale(t){this._options.sprites.forEach((e=>e.applyScale(t)))}serializeOption(t,e=!1){return"sprites"===t?this._options.sprites.map((t=>t.serializeOptions(void 0,e))):super.serializeOption(t,e)}createSticker(t){return new Aa(this,t)}createText(t){return new sc(this,t)}createBrush(t){return new Ca(this,t)}createTextDesign(t){return new rc(this,t)}addSprite(t){this._options.sprites.push(t);const e=this.getSmoothDownscaling();t.setSmoothDownscaling&&t.setSmoothDownscaling(e),this._container.addChild(t.getDisplayObject()),this.setDirty(!0),t.on("update",this._onSpriteUpdate),this.emit("update",this,this._options.sprites)}removeSprite(t){const{sprites:e}=this._options,i=e.indexOf(t);return-1!==i&&(t.off("update",this._onSpriteUpdate),this._container.removeChild(t.getDisplayObject()),e.splice(i,1),this.setDirty(!0),!0)}_getOrientatedStageSize(){const t=this._sdk.getSprite().getTexture().getFrame(),e=this._sdk.getOperationsStack().getByIdentifier("orientation");if(e){const i=e?e.getRotation():0;return 270===i||90===i?new ac(t.height,t.width):new ac(t.width,t.height)}const i=this._sdk.getOperationsStack().getByIdentifier("output");return i?i.getOutputResolution():new ac(t.width,t.height)}_render(t){const e=this._container,{sprites:i}=this._options,r=t.getDimensions().clone().floor();let n=new Zi.Container;return n.addChild(this._sprite),Promise.all(i.map((t=>t.validateSettings()))).then((()=>{i.forEach((t=>t.update(this._sdk,r)))})).then((()=>{this._renderTexture.clear(),i.forEach((t=>{t.getInverted&&t.getInverted()?(this._renderTexture.render(n),this._renderTexture.render(this._renderMaskedSprite(t.getDisplayObject(),t.getColor?t.getColor():jt.WHITE,t.getPadding?t.getPadding():-1)),n=new Zi.Container):n.addChild(t.getDisplayObject())})),this._renderTexture.render(n),e.addChild(this._sprite),i.forEach((t=>e.addChild(t.getDisplayObject())))}))}_renderMaskedSprite(t,e,i){const r=this._maskCanvas,n=t.getWorldTransform(),o=this._getOrientatedStageSize();It.ensureCanvasDimensions(r,o);const s=r.getContext("2d");if(s.clearRect(0,0,r.width,r.height),s.save(),s.fillStyle=e.toRGBA(),i<0)s.fillRect(0,0,o.x,o.y);else{const e=Math.abs(t.getWidth()/t.getScale().x),r=Math.abs(t.getHeight()/t.getScale().y),o=e*i;s.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),s.fillRect(-o,-o,e+2*o,r+2*o)}s.restore(),s.save(),s.globalCompositeOperation="destination-out",t._renderCanvas({getCurrentRenderTarget:()=>({getPixelRatio:()=>1}),beforeDraw:e=>{const i=t.getWidth(),r=t.getHeight(),n=t.getScale(),o=n.x<0,s=n.y<0;e.translate(i,r),e.scale(o?-1:1,s?-1:1),e.translate(-i,-r)},getContext:()=>s}),s.restore();const a=new Zi.Container,l=new Zi.Sprite(Zi.Texture.fromCanvas(r));return a.addChild(l),a}takeSpriteToFront(t){const{sprites:e}=this._options,i=e.indexOf(t);if(-1===i)return;It.moveArrayItem(e,i,e.length-1);const r=t.getDisplayObject();this._container.removeChild(r),this._container.addChild(r),this.setDirty(!0)}getSpritesAtPosition(t,e){const i=[];this._options.sprites.forEach((t=>t.update(this._sdk,e)));const r=this._sdk.getSprite(),n=r.getWorldTransform().applyInverseToVector(t),{width:o,height:s}=r.getTexture().getFrame(),a=r.getAnchor().clone().multiply(-o,-s);n.subtract(a);const l=this._options.sprites.slice(0).reverse();for(let t=0,e=l.length;t<e;t++){const e=l[t];e.getHitTestDisplayObject().isAtPosition(n)&&i.push(e)}return i}setDirtyForRenderer(t,e,i){super.setDirtyForRenderer(t,e,i),this._options.sprites.forEach((r=>{r.setDirtyForRenderer(t,e,i)}))}dispose(){super.dispose(),this._options.sprites.forEach((t=>{t.dispose()}))}}lc.StickerSprite=Aa,lc.TextSprite=sc,lc.BrushSprite=Ca,lc.TextDesignSprite=rc,lc.identifier="sprite",lc.prototype.availableOptions={sprites:{type:ft.ARRAY,default:[],setter(t,e){if(t=t.map(((t,e)=>{if(t instanceof fa)return t;const i=b({},t);switch(delete i.type,t.type){case"text":return new sc(this,i);case"sticker":return new Aa(this,i);case"brush":return new Ca(this,i);case"textdesign":return new rc(this,i);default:return Mt.error(this.constructor.name,`Invalid sprite type: ${t.type}`),null}})),!e){if(this._options.sprites){this._options.sprites.slice().forEach((t=>{t.dispose(),this.removeSprite(t)}))}t.forEach((t=>{this.addSprite(t)}))}return t}},smoothDownscaling:{type:ft.BOOLEAN,default:!1}},Lr.Operations.SpriteOperation=lc;var cc=lc;const{Vector2:uc}=Ui;var hc=class{constructor(t,e){this._options=e,this._oldOptions={start:t.getStart().clone(),end:t.getEnd().clone(),rotation:t.getRotation(),textureScale:t.getTextureScale()},this._inputDimensions=t.getInputDimensions(!1),this._rotationDelta=e.rotation-t.getRotation(),this._deltaCos=Math.cos(this._rotationDelta),this._deltaSin=Math.sin(this._rotationDelta),this._oldAbsoluteSize=this._oldOptions.end.clone().subtract(this._oldOptions.start).multiply(this._inputDimensions),this._newAbsoluteSize=e.end.clone().subtract(e.start).multiply(this._inputDimensions),this._absoluteStartDiff=this._oldOptions.start.clone().subtract(e.start).multiply(this._inputDimensions),this._scaleRatio=t.calculateScale(e.rotation)/t.calculateScale(),this._sizeFactor=this._newAbsoluteSize.clone().divide(this._oldAbsoluteSize),this._textureScaleFactor=this._options.textureScale/t.getTextureScale()}applyToRelativePoint(t){const e=this._oldOptions.start,i=this._oldOptions.end,r=e.clone().add(i.clone().subtract(e).divide(2)).multiply(this._inputDimensions),n=t.clone().multiply(this._oldAbsoluteSize).subtract(this._oldAbsoluteSize.clone().divide(2)),o=r.clone().add(n).clone().subtract(this._inputDimensions.clone().divide(2)),s=new uc(o.x*this._deltaCos-o.y*this._deltaSin,o.x*this._deltaSin+o.y*this._deltaCos),a=this._inputDimensions.clone().divide(2).add(s),l=this._options.start.clone().multiply(this._inputDimensions);return a.clone().subtract(l).divide(this._newAbsoluteSize)}applyToRelativeSize(t){return t*this._oldAbsoluteSize.min()/this._newAbsoluteSize.min()}applyToDimensions(t){return t=t.clone().multiply(this._scaleRatio),this._options.textureScale&&t.multiply(this._textureScaleFactor),t}scaleSize(t,e="y"){return t/this._sizeFactor[e]}applyToRotation(t){return(t+this._rotationDelta)%(2*Math.PI)}invert(){const t=this._options.start.clone(),e=this._options.end.clone(),i=this._inputDimensions,r=-this._rotationDelta,n=Math.cos(r),o=Math.sin(r),s=this._oldAbsoluteSize,a=this._newAbsoluteSize,l=t.clone().subtract(e).multiply(i),c=1/this._scaleRatio,u=new uc(1/this._sizeFactor.x,1/this._sizeFactor.y),h=1/this._textureScaleFactor,d=this._oldOptions;return this._oldOptions=this._options,this._options=d,this._inputDimensions=i,this._rotationDelta=r,this._deltaCos=n,this._deltaSin=o,this._oldAbsoluteSize=a,this._newAbsoluteSize=s,this._absoluteStartDiff=l,this._scaleRatio=c,this._sizeFactor=u,this._textureScaleFactor=h,this}};const{Vector2:dc}=Ui;class pc extends _r{_render(t){this._sprite.setRotation(0);const e=t.getDimensions(),{start:i,end:r,rotation:n,textureScale:o}=this._options,s=r.clone().subtract(i).clone().divide(2),a=i.clone().add(s),l=this.calculateScale()*o,c=e.clone().multiply(l).multiply(s);return this._sprite.setAnchor(a),this._sprite.setRotation(n),this._sprite.setScale(l,l),this._sprite.setPosition(c),this._renderTexture.render(this._container),Promise.resolve()}calculateScale(t=this._options.rotation){const e=this.getInputDimensions(!1),i=new dc(Math.abs(e.x*Math.cos(t))+Math.abs(e.y*Math.sin(t)),Math.abs(e.x*Math.sin(t))+Math.abs(e.y*Math.cos(t))),r=e.clone().subtract(i.clone()).divide(2).abs();let n=1;return n=r.y>r.x?2*r.y/e.y+1:2*r.x/e.x+1,n}getNewDimensions(t){const{start:e,end:i,textureScale:r}=this._options,n=this.calculateScale();return t.clone().multiply(r*n).multiply(i.clone().subtract(e)).round()}flip(t){const{start:e,end:i}=this._options,r=e.clone();"horizontal"===t?(e.set(1-i.x,e.y),i.set(1-r.x,i.y)):"vertical"===t&&(e.set(e.x,1-i.y),i.set(i.x,1-r.y))}rotate(t){const{start:e,end:i}=this._options,r=(t+360)%360,n=Math.floor(r/90);for(let t=0;t<n;t++){const t=e.clone();e.set(1-i.y,t.x),i.set(1-t.y,i.x)}}_onBeforeExport(){this._wasEnabledBeforeExport=this.getEnabled(),this.setEnabled(!0)}_onAfterExport(){this.setEnabled(this._wasEnabledBeforeExport,!0)}}pc.identifier="transform",pc.prototype.availableOptions={start:{type:ft.VECTOR2,default:new dc(0,0)},end:{type:ft.VECTOR2,default:new dc(1,1)},textureScale:{type:ft.NUMBER,default:1},rotation:{type:ft.NUMBER,default:0}},pc.TransformChange=hc,Lr.Operations.TransformOperation=pc;var fc=pc;const{Vector2:mc}=Ui;class gc extends _r{constructor(...t){super(...t),this._watermarkSprite=new Zi.Sprite,this._watermarkSprite.setAnchor(.5,.5),this._container.addChild(this._watermarkSprite)}_render(t){this._watermarkTexture||(this._watermarkTexture=Zi.Texture.fromImage(this._options.image),this._watermarkSprite.setTexture(this._watermarkTexture));const e=t.getDimensions(),{width:i,height:r}=this._options.image,n=It.resizeVectorToFit(new mc(i,r),e);return this._watermarkSprite.setPosition(e.clone().divide(2)),this._watermarkSprite.setWidth(n.x),this._watermarkSprite.setHeight(n.y),this._renderTexture.render(this._container),Promise.resolve()}dispose(){super.dispose(),this._watermarkSprite.dispose()}}gc.identifier="watermark",gc.prototype.availableOptions={image:{type:ft.OBJECT,required:!0}},Lr.Operations.WatermarkOperation=gc;const _c=[nn,un,Ts,As,Bs,Hs,Xs,Ks,na,ua,Ra,cc,fc,gc,ta,Ds];Lr.AllOperations=_c;const yc=[];void 0!==Lr.Operations.SpriteOperation&&yc.push(Lr.Operations.SpriteOperation.BrushSprite.Brushes.RadialBrush);var vc={TRANSFORM_RATIO_CATEGORIES:[{identifier:"imgly_transforms_common",defaultName:"Common Ratios",ratios:[{identifier:"imgly_transform_common_custom",defaultName:"Custom",ratio:"*",selected:!0},{identifier:"imgly_transform_common_square",defaultName:"Square",ratio:1},{identifier:"imgly_transform_common_4-3",defaultName:"4:3",ratio:4/3},{identifier:"imgly_transform_common_16-9",defaultName:"16:9",ratio:16/9}]},{identifier:"imgly_transforms_facebook",defaultName:"Facebook",ratios:[{identifier:"imgly_transform_facebook_profile",defaultName:"Profile Pic",dimensions:{x:300,y:300},forceDimensions:!1,lockDimensions:!0},{identifier:"imgly_transform_facebook_ad",defaultName:"Ad",dimensions:{x:1200,y:627}},{identifier:"imgly_transform_facebook_post",defaultName:"Post",dimensions:{x:940,y:788}},{identifier:"imgly_transform_facebook_cover",defaultName:"Cover",dimensions:{x:851,y:315}}]}],FONTS:[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Aleo",variations:[{identifier:"imgly_font_aleo_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_aleo_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:805,descender:-195}}]},{fontFamily:"Amatic SC",variations:[{identifier:"imgly_font_amaticsc",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_amaticsc.woff",textMetrics:{unitsPerEm:1e3,ascender:1016,descender:-245}}]},{fontFamily:"Archivo",variations:[{identifier:"imgly_font_archivo_black",fontWeight:"normal",filePath:"fonts/imgly_font_archivo_black.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_bungee_inline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_campton_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Carter",variations:[{identifier:"imgly_font_carter_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_carter_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}}]},{fontFamily:"Codystar",variations:[{identifier:"imgly_font_codystar",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_codystar.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:953,descender:-255}}]},{fontFamily:"Fira Sans",variations:[{identifier:"imgly_font_fira_sans_regular",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_fira_sans_regular.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_galano_grotesque_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Krona One",variations:[{identifier:"imgly_font_krona_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_krona_one.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}}]},{fontFamily:"Kumar One Outline",variations:[{identifier:"imgly_font_kumar_one_outline",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_kumar_one_outline.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}}]},{fontFamily:"Lobster",variations:[{identifier:"imgly_font_lobster",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_lobster.woff",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}}]},{fontFamily:"Molle",variations:[{identifier:"imgly_font_molle",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_molle.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}}]},{fontFamily:"Monoton",variations:[{identifier:"imgly_font_monoton",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_monoton.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}}]},{fontFamily:"Nixie One",variations:[{identifier:"imgly_font_nixie_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_nixie_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}}]},{fontFamily:"Notable",variations:[{identifier:"imgly_font_notable",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_notable.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}}]},{fontFamily:"Oswald SemiBold",variations:[{identifier:"imgly_font_oswald_semi_bold",fontWeight:600,fontStyle:"normal",filePath:"fonts/imgly_font_oswald_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}}]},{fontFamily:"Palanquin Dark SemiBold",variations:[{identifier:"imgly_font_palanquin_dark_semi_bold",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_palanquin_dark_semi_bold.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}}]},{fontFamily:"Poppins",variations:[{identifier:"imgly_font_poppins",fontWeight:"bold",fontStyle:"normal",filePath:"fonts/imgly_font_poppins.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_permanent_marker.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sancreek",variations:[{identifier:"imgly_font_sancreek",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_sancreek.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}}]},{fontFamily:"Stint Ultra Expanded",variations:[{identifier:"imgly_font_stint_ultra_expanded",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_stint_ultra_expanded.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}}]},{fontFamily:"Trashhand",variations:[{identifier:"imgly_font_trash_hand",fontWeight:"normal",provider:"file",filePath:"fonts/imgly_font_trash_hand.woff",textMetrics:{unitsPerEm:1e3,ascender:759,descender:-304}}]},{fontFamily:"VT323",variations:[{identifier:"imgly_font_vt323",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_vt323.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Yeseva One",variations:[{identifier:"imgly_font_yeseva_one",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_yeseva_one.woff",provider:"file",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}}]}],TEXT_DESIGN_FONTS:[{fontFamily:"Open Sans",variations:[{identifier:"imgly_font_open_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_open_sans_bold.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}}]},{fontFamily:"Abril Fatface",variations:[{identifier:"imgly_font_abril_fatface_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_abril_fatface_regular.woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}}]},{fontFamily:"Amberlight",variations:[{identifier:"imgly_font_amberlight",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_amberlight.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}}]},{fontFamily:"Bungee Inline",variations:[{identifier:"imgly_font_bungee_inline",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_bungee_inline.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}}]},{fontFamily:"Campton Book",variations:[{identifier:"imgly_font_campton_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_campton_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}}]},{fontFamily:"Galano Grotesque",variations:[{identifier:"imgly_font_galano_grotesque_bold",fontWeight:"bold",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_galano_grotesque_bold.woff",default:!0,textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}}]},{fontFamily:"Handycheera",variations:[{identifier:"imgly_font_handycheera_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_handycheera_regular.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}}]},{fontFamily:"Montserrat Light",variations:[{identifier:"imgly_font_montserrat_light",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_montserrat_light.woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}}]},{fontFamily:"Ostrich",variations:[{identifier:"imgly_font_ostrich_sans_black",fontWeight:800,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_black.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontWeight:"bold",provider:"file",filePath:"fonts/imgly_font_ostrich_sans_bold.woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_heavy",fontWeight:900,provider:"file",filePath:"fonts/imgly_font_ostrich_sans_heavy.woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}}]},{fontFamily:"Permanent Marker",variations:[{identifier:"imgly_font_permanent_marker",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_permanent_marker.woff",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}}]},{fontFamily:"Petit Formal Script",variations:[{identifier:"imgly_font_petit_formal_script",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_petit_formal_script.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}}]},{fontFamily:"Rasa",variations:[{identifier:"imgly_font_rasa_regular",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_rasa_regular.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_500",fontWeight:500,fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_rasa_500.woff",default:!0,textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}}]},{fontFamily:"Roboto Black",variations:[{identifier:"imgly_font_roboto_black",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_roboto_black.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_black_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_black_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Roboto Light",variations:[{identifier:"imgly_font_roboto_light",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_roboto_light.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontWeight:"normal",fontStyle:"italic",filePath:"fonts/imgly_font_roboto_light_italic.woff",provider:"file",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}}]},{fontFamily:"Sue Ellen Francisco",variations:[{identifier:"imgly_font_sue_ellen_francisco",fontWeight:"normal",fontStyle:"normal",filePath:"fonts/imgly_font_sue_ellen_francisco.woff",provider:"file",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}}]},{fontFamily:"Ultra",variations:[{identifier:"imgly_font_ultra",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_ultra.woff",default:!0,textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}}]},{fontFamily:"Wolesbro",variations:[{identifier:"imgly_font_wolesbro",fontWeight:"normal",fontStyle:"normal",provider:"file",filePath:"fonts/imgly_font_wolesbro.woff",textMetrics:{unitsPerEm:1e3,ascender:925,descender:-575}}]}],BRUSHES:yc};var bc={EVENTS:b(b({},Qe),{LOAD:"load",SAVE:"save",EDITOR_RESIZE:"editor:resize",ZOOM:"editor:zoom",ZOOM_CHANGED:"editor:zoom_changed",HISTORY_REDO:"history:redo",HISTORY_BEFORE_REDO:"history:before-redo",TEXT_SCALED:"editor:text:scaled",TRANSFORM_RESIZE:"transform:resize",TRANSFORM_AFTER_EDIT:"transform:after-edit",ADDED_STICKER:"sticker:added-sticker",SPRITES_DESELECTED:"editor:sprite:deselected-all",CANVAS_FOCUS:"canvas:focus"}),DEFAULTS:vc};var xc={getIEVersion:function(){const{userAgent:t,appVersion:e}=navigator;return-1!==e.indexOf("MSIE")?e.match(/MSIE\s+?([0-9]+)/i)[1]:-1!==t.indexOf("Trident")&&t.match(/rv:([0-9]+)/i)[1]}};const wc=Lr.Utils,{Vector2:Sc}=Lr.Math;var kc={getInnerDimensionsForElement(t){const e=new Sc(t.offsetWidth,t.offsetHeight),i=window.getComputedStyle(t,null);return e.x-=parseInt(i.getPropertyValue("padding-left"),10),e.x-=parseInt(i.getPropertyValue("padding-right"),10),e.y-=parseInt(i.getPropertyValue("padding-top"),10),e.y-=parseInt(i.getPropertyValue("padding-bottom"),10),e},getEventPosition(t){let e=t.clientX,i=t.clientY;if(-1!==t.type.indexOf("touch")){if(!t.touches.length)return;e=t.touches[0].clientX,i=t.touches[0].clientY}return new Sc(e,i)},createTransparentPatternCanvas(){const t=document.createElement("canvas"),e=t.getContext("2d");return t.width=10,t.height=10,e.fillStyle="white",e.fillRect(0,0,t.width,t.height),e.fillStyle="#cccccc",e.fillRect(0,0,t.width/2,t.height/2),e.fillRect(t.width/2,t.height/2,t.width,t.height),t},supportsMSBlob:()=>void 0!==document.createElement("canvas").msToBlob,translate(t,e,i={}){let r=this.fetch(t,e);if(!r)return Mt.info("Utils#translate",`Unable to translate \`${e}\``),null;for(const t in i)r=r.replace(`\${${t}}`,i[t]);return r},fetch(t,e,i){const r=(e=(e=e.replace(/\[(\w+)]/g,".$1")).replace(/^\./,"")).split(".");for(let e=0;e<r.length;e++){if(!(t=t[r[e]]))break}return void 0!==t&&t},isMobile(){const t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))},select(t,e,i=null){i||(i=t=>t);const r=[];return e.forEach((e=>{t.forEach((t=>{i(t)===e&&r.push(t)}))})),r},getJSONP:t=>new Nt(t).load(),cloneCategories:(t,e)=>t.map((t=>((t=wc.clone(t))[e]=t[e].slice(0),t))),mergeCategories(t,e,i){t=this.cloneCategories(t,i);let r=null;return e.forEach((e=>{t.forEach((t=>{e.identifier===t.identifier&&(r=t)})),r?r[i]=r[i].concat(e[i]):t.push(e)})),t},wrapFiltersInCategories:(t,e)=>t.map((t=>{let i=t;return e in i||(i={identifier:`imgly_filters_wrapped-${t.identifier}`,displayFlat:!0,[e]:[t]}),i})),getStyleObject(t){const e=window.getComputedStyle(t),i={};for(const t in e){const r=e.getPropertyValue(t),n=t.replace(/-([a-z])/g,((t,e)=>e.toUpperCase()));""!==r&&(i[n]=r)}return i},styleElement(t,e){for(const i in e)t.style[i]=e[i]},debounce(t,e,i){let r;return function(...n){const o=i&&!r;clearTimeout(r),r=setTimeout((()=>{r=null,i||t.apply(this,n)}),e),o&&t.apply(this,n)}},getScrollbarWidth(){const t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);const e=t.offsetWidth;t.style.overflow="scroll";const i=document.createElement("div");i.style.width="100%",t.appendChild(i);const r=i.offsetWidth;return t.parentNode.removeChild(t),e-r},findIntegerFraction(t,e=100){let i=Number.MAX_VALUE,r=0,n=0,o=1,s=1;for(let a=0;a<e;a++){const e=o/s-t;if(e<0)o++;else{if(!(e>0))return new Sc(o,s);s++}const a=Math.abs(o/s-t);a<i&&(i=a,r=o,n=s)}return new Sc(r,n)},toFixed(t,e=2){const i=t.toFixed(e);return parseFloat(i)},capitalize:t=>t.charAt(0).toUpperCase()+t.slice(1),flipObject(t){const e={};for(const i in t)e[t[i]]=i;return e},Browser:xc};const{Base64:Cc}=Lr,{Color:Tc}=Lr,{ColorMatrix:Ec}=Lr.Math,{EventEmitter:Rc}=Lr,{EXIF:Dc}=Lr,{OptionType:Ic}=Lr,{Promise:Oc}=Lr,Ac=Lr.Utils,{RenderType:Fc}=Lr,{ImageFormat:Mc}=Lr,Pc=Lr,{UniformType:Bc}=Lr,{Vector2:zc}=Lr.Math,{Rectangle:Lc}=Lr.Math,{Range:Nc}=Lr.Math;"undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):M();class Uc{constructor(t,e,i=!1){this._ui=t,this._options=e,this._categoriesById={},this._filtersByIdentifier={identity:Pc.Operations.FilterOperation.Filters.IdentityFilter},this._categories=kc.wrapFiltersInCategories(Je.DEFAULTS.FILTERS.slice(0),Uc.CATEGORY_ITEMS_PROPERTY),this._customAssetsAllowed=i||t.getEditor().getSDK()._l.areCustomAssetsAllowed(),this._customAssetsAllowed&&this._options.categories&&(this._options.categories=kc.wrapFiltersInCategories(this._options.categories,Uc.CATEGORY_ITEMS_PROPERTY)),this._initCategories()}instantiateFilterWithIdentifier(t){const e={value:this._ui._options.crossOrigin,cors:!0},i=this.getFilterByIdentifier(t);if(!i)return Promise.reject(new Error(`Unknown filter with identifier \`${t}\`!`));if(!(i.prototype instanceof Pc.Operations.FilterOperation.Filter)){const{lutImage:t,resolution:r,horizontalTileCount:n,verticalTileCount:o}=i;let s,a,{lightColor:l,darkColor:c}=i;return l&&c?(l=Tc.fromHex(l),c=Tc.fromHex(c),Promise.resolve(new Pc.Operations.FilterOperation.Filters.DuoToneFilter({lightColor:l,darkColor:c}))):(this._ui.getPreloader&&(s=this._ui.getPreloader().getAsset(t)),a=s?Promise.resolve(s):Bt.loadImage(this._ui.getAssetPath(t),e),a.then((()=>Bt.loadImage(this._ui.getAssetPath(t),e).then((t=>new Pc.Operations.FilterOperation.Filters.ThreeDLUTFilter({image:t,resolution:r,horizontalTileCount:n,verticalTileCount:o}))))))}return Promise.resolve(new i)}_initCategories(){if(this._customAssetsAllowed&&this._options.categories&&(this._options.replaceCategories?this._categories=kc.wrapFiltersInCategories(this._options.categories,Uc.CATEGORY_ITEMS_PROPERTY):this._categories=kc.mergeCategories(this._categories,this._options.categories,Uc.CATEGORY_ITEMS_PROPERTY)),this._customAssetsAllowed&&this._options.availableFilters){const t=[];this._categories.forEach((e=>{const i=e.filters.filter((t=>-1!==this._options.availableFilters.indexOf(t.identifier)));i.length>0&&t.push({identifier:e.identifier,defaultName:e.defaultName,filters:i})})),this._categories=t}const t={identifier:"all",defaultName:"All",visible:!1,filters:this._categories.length<=0?[]:this._categories.map((t=>t.filters)).reduce(((t,e)=>t.concat(e)))};this._categories.unshift(t),this._categoriesById.all=t,this._categories.forEach((t=>{this._categoriesById[t.identifier]=t})),t.filters.forEach((t=>{this._filtersByIdentifier[t.identifier]=t}))}getFiltersForCategory(t){if(!this._categoriesById[t])throw new Error(`Unknown filter category '${t}'`);return this._categoriesById[t].filters}getItemsByCategory(t){return this.getFiltersForCategory(t)}getFilterByIdentifier(t){return this._filtersByIdentifier[t]}getCategories(){return this._categories}getCategoryByIdentifier(t){return this._categoriesById[t]}}C(Uc,"CATEGORY_ITEMS_PROPERTY","filters");class jc extends ae{}jc.prototype.availableOptions={fontFamily:{type:ft.STRING,required:!0},variations:{type:ft.ARRAY,required:!0}};const Hc={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"};class Wc extends ae{getLabel(){let t=Hc[this._options.fontWeight];switch(this._options.fontStyle){case"italic":t+=" Italic"}return t}}Wc.prototype.availableOptions={identifier:{type:ft.STRING,required:!0},fontFamily:{type:ft.STRING,required:!0},fontWeight:{type:ft.ALL,default:400},fontStyle:{type:ft.STRING,default:"normal"},textMetrics:{type:ft.OBJECT,default:null},provider:{type:ft.STRING,available:["google","file"]},filePath:{type:ft.STRING},default:{type:ft.BOOLEAN,default:!1},font:{type:ft.OBJECT}};const Gc={imgly_font_bernier_regular:"imgly_font_sancreek",imgly_font_cheque_regular:"imgly_font_kumar_one_outline",imgly_font_gagalin_regular:"imgly_font_permanent_marker",imgly_font_hagin_caps_thin:"imgly_font_nixie_one",imgly_font_intro_inline:"imgly_font_bungee_inline",imgly_font_nexa_script:"imgly_font_molle",imgly_font_panton_blackitalic_caps:"imgly_font_roboto_black_italic",imgly_font_panton_lightitalic_caps:"imgly_font_roboto_light_italic",imgly_font_perfograma:"imgly_font_codystar",imgly_font_panton_black_caps:"imgly_font_roboto_black",imgly_font_panton_light_caps:"imgly_font_roboto_light",imgly_font_summer_font_light:"imgly_font_sue_ellen_francisco"},Vc=(t,e=!1)=>Gc[t]?(e&&console.warn(`Font ${t} was deprecated. Please use ${Gc[t]} instead.`),Gc[t]):t;class $c{constructor(t,e){this._ui=t,this._options=e,this._fonts=[],this._variationsByIdentifier={},this._fontsByFontFamily={},this._initFonts()}_initFonts(){const{fonts:t,replaceFonts:e,availableVariations:i,isTextDesign:r}=this._options;let n=!0;n=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed(),t&&n&&t.forEach((({variations:e},i)=>{e&&e.forEach(((e,r)=>{if(Gc[e.identifier]){const n=Vc(e.identifier,!0);t[i].variations[r].identifier=n;const{fontFamily:o}=bc.DEFAULTS.FONTS.find((t=>t.variations.some((t=>t.identifier===n))));t[i].fontFamily=o}}))}));let o,s=r?bc.DEFAULTS.TEXT_DESIGN_FONTS:bc.DEFAULTS.FONTS;n&&(s=e?t:s.concat(t||[])),s=s.map((t=>{const{fontFamily:e}=t;let{variations:r}=t;if(n&&i&&(r=r.filter((t=>-1!==i.indexOf(t.identifier)))),0===r.length)return null;const s=new jc({fontFamily:e});return r=r.map((t=>{const i=new Wc(t);return i.setFontFamily(e),i.setFont(s),t.default&&!o&&(o=i),null==i.getTextMetrics()&&Mt.warn(`Missing font metrics for ${i.getIdentifier()}. The SDK will fall back to basic font rendering, which may lead to layout issues. Please provide font metrics for your custom fonts. See https://docs.photoeditorsdk.com/guides/html5/ for more details.`),this._variationsByIdentifier[i.getIdentifier()]=i,i})),s.setVariations(r),this._fontsByFontFamily[e]=s,s})).filter((t=>t)),o||([o]=s[0].getVariations()),this._defaultVariation=o,this._fonts=s}getFonts(){return this._fonts}getFontByFontFamily(t){return this._fontsByFontFamily[t]}getVariationByIdentifier(t){return this._variationsByIdentifier[Vc(t)]}getVariationsByIdentifier(){return b({},this._variationsByIdentifier)}getDefaultVariation(){return this._defaultVariation}}class Zc{constructor(t,e={}){this._ui=t,this._options=e,this._defaultLayouts=Pc.Operations.SpriteOperation.TextDesignSprite.Layouts,this._legacyLayouts=Pc.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts,this._layouts=[],this._init()}_init(){const{availableLayouts:t}=this._options,e=b(b({},this._defaultLayouts),this._legacyLayouts);this._layouts=Object.keys(e).map((t=>({identifier:e[t].identifier,layout:e[t]}))),t&&(t.push(...Object.values(this._legacyLayouts).map((t=>t.identifier))),this._layouts=this._layouts.filter((e=>t.indexOf(e.identifier)>=0)))}getLayoutByIdentifier(t){const e=Ac.Array.find(this._layouts,(e=>e.identifier===t));return e&&e.layout}getLayouts(){return[...this._layouts]}getDefaultLayout(){return this.getLayouts()[0]}}class Xc{static downloadDataURL(t,e="photoeditorsdk-export"){const i=this.createBlobURLFromDataURL(t),r=this.getExtensionFromDataURL(t),n=document.createElement("a");n.download=`${e}.${r}`,n.href=i,document.body.appendChild(n),n.click(),document.body.removeChild(n)}static downloadMSBlob(t,e="photoeditorsdk-export"){navigator.msSaveBlob&&navigator.msSaveBlob(t,`${e}.png`)}static getExtensionFromDataURL(t){return t.split(",")[0].split(":")[1].split(";")[0].split("/").pop()}static createBlobURLFromDataURL(t){if(!(window.Blob&&window.URL&&ArrayBuffer&&Uint8Array))return t;const e=Cc.decode(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),n=new Uint8Array(r);for(let t=0;t<e.length;t++)n[t]=e[t];const o=new window.Blob([r],{type:i});return window.URL.createObjectURL(o)}}class Yc{constructor(t,e,i){this._sdk=t,this._options=e,this._download=i}export(){const t=this._getRenderType();return this._sdk.export(t,this._options.format,this._options.quality).then((e=>(this._download&&this._downloadData(t,e),e)))}_downloadData(t,e){switch(t){case Fc.DATAURL:Xc.downloadDataURL(e,this._options.fileBasename);break;case Fc.MSBLOB:Xc.downloadMSBlob(e,this._options.fileBasename)}}_getRenderType(){const t=this._options;return t.type===Fc.IMAGE&&this._download?kc.supportsMSBlob()?Fc.MSBLOB:Fc.DATAURL:t.type}}class qc{constructor(t,e,i){this._editor=t,this._sdk=e,this._mediator=i,this._available=this._sdk.getOperations(),this._map={},this._stack=this._sdk.getOperationsStack(),this._preferredOrder=this._editor.getOptions().editor.operationsOrder,this._fixStack()}exists(t){return!!this._map[t]}add(t){const{identifier:e}=t.constructor;t.on("update",(()=>{this._mediator.emit(bc.EVENTS.OPERATION_UPDATED,t)}));const i=this._preferredOrder.indexOf(e);if(-1===i)throw new Error(`EditorOperations#add: \`${e}\` does not appear in \`operationsOrder\``);this._stack.set(i,t),this._map[e]=t,this._mediator.emit(bc.EVENTS.OPERATION_CREATED,t)}remove(t,e=!0){const i="object"==typeof t?t.constructor.identifier:t,r=this._stack.getStack();t=this.get(i),delete this._map[i];const n=r.map((t=>t.constructor.identifier)).indexOf(i);if(-1!==n){this._stack.removeAt(n);for(let t=n+1;t<r.length;t++){const e=r[t];e&&e.setDirty(!0)}e&&this._mediator.emit(bc.EVENTS.OPERATION_REMOVED,t)}}get(t){return this._map[t]}getOrCreate(t,e={}){if(this._map[t]){const i=this._map[t];return i.set(e,!1),i}const i=new(0,this._available[t])(this._sdk,e);return this.add(i),i}getStack(){return this._stack}reset(){this._map={}}_fixStack(){const t=this._stack.getStack().slice();this._stack.clear(),t.forEach((t=>{this.add(t)}))}}class Kc{constructor(t,e,i){this._image=t,this._maxPixels=e,this._maxDimensions=i}needsResize(){const t=new zc(this._image.width,this._image.height),e=t.x*t.y>this._maxPixels,i=null!==this._maxDimensions&&(t.x>this._maxDimensions||t.y>this._maxDimensions);return e||i}resize(){let t=null,e=null;const i=this._maxDimensions;return new Promise(((r,n)=>{window.setTimeout((()=>{const n=new zc(this._image.width,this._image.height).clone();if(n.x*n.y>this._maxPixels&&(n.copy(this._getDimensionsByMaxPixels()),t="maxMegaPixels"),null!==i&&(n.x>i||n.y>i)){const e=Math.min(i/n.x,i/n.y);n.multiply(e),t="maxDimensions"}n.floor(),e=this._createResizedImageCanvas(n),r({canvas:e,dimensions:n,reason:t})}),1e3)}))}_createResizedImageCanvas(t,e=t){const i=this._image,r=document.createElement("canvas");r.width=t.x,r.height=t.y;const n=t.clone().subtract(e).divide(2);return r.getContext("2d").drawImage(i,0,0,i.width,i.height,n.x,n.y,e.x,e.y),r}_getDimensionsByMaxPixels(){const t=this._image,e=this._maxPixels,i=t.width/t.height,r=t.height/t.width;return new zc(Math.sqrt(e*i),Math.sqrt(e*r)).floor()}}class Qc{constructor(t){this._fontVariation=t||new Wc({fontFamily:"Times New Roman",fontWeight:"normal",fontStyle:"normal"}),this._createRuler()}_createRuler(){this._ruler=document.createElement("div"),this._ruler.innerText="abcdefghijklmnopqrstuvwxzy",document.body.appendChild(this._ruler),this._setRulerStyle()}_setRulerStyle(){this._ruler.style.cssText=`\n      position: absolute;\n      top: -9999px;\n      left: -9999px;\n      opacity: 0;\n      display: inline-block;\n      font: ${this._fontVariation.getFontStyle()} ${this._fontVariation.getFontWeight()} 30px ${this._fontVariation.getFontFamily()};\n    `}setFontVariation(t){this._fontVariation=t,this._setRulerStyle()}getWidth(){return this._ruler?this._ruler.offsetWidth:-1}dispose(){this._ruler&&(this._ruler.parentNode.removeChild(this._ruler),this._ruler=null)}}const Jc="undefined"!=typeof window&&window.performance&&window.performance.now?window.performance.now.bind(window.performance):M();class tu{constructor(t){this._fontVariation=t,this._defaultFontRuler=new Qc,this._customFontRuler=new Qc(this._fontVariation)}observe(){const t=Jc();return new Promise(((e,i)=>{const r=window.setInterval((()=>{if(this._defaultFontRuler.getWidth()!==this._customFontRuler.getWidth())return window.clearInterval(r),e();if(Jc()-t>=5e3){const t=new Error(`Failed to load font ${this._fontVariation.getFontFamily()}.`);return t.font=this._fontVariation,i(t)}}),50)}))}dispose(){this._defaultFontRuler.dispose(),this._customFontRuler.dispose()}}class eu{constructor(t){this._ui=t,this._fonts=[],this._observers=[]}add(t){this._fonts.push(t)}load(){return 0===this._fonts.length?Promise.resolve():(this._observers=[],this._fonts.forEach((t=>{this._observers.push(new tu(t))})),It.executePromises(this._observers.map((t=>t.observe()))))}dispose(){this._observers.forEach((t=>t.dispose()))}}class iu extends eu{load(){return Promise.resolve()}}const ru={italic:"i"};class nu extends eu{load(){return this._fonts.length&&this._addStylesheetTag(),super.load()}_addStylesheetTag(){const t=this._getFamiliesString(),e=document.createElement("link");e.rel="stylesheet",e.href=`https://fonts.googleapis.com/css?family=${t}`;document.getElementsByTagName("head")[0].appendChild(e)}_getFamiliesString(){const t={};this._fonts.forEach((e=>{const i=e.getFontFamily(),r=e.getFontStyle(),n=e.getFontWeight();t[i]=t[i]||[],void 0!==n?t[i].push(`${n}${ru[r]||""}`):t[i].push(400)}));const e=[];for(const i in t){const r=t[i],n=r.length?`:${r.join(",")}`:"",o=i.replace(" ","+")+n;e.push(o)}return e.join("|")}}class ou{constructor(t,e){this._ui=t,this._fonts=e,this._loadedFonts=[]}setFonts(t){this._fonts=t}needsToLoad(){for(let t=0;t<this._fonts.length;t++){let e;if(this._fonts[t].getVariations().forEach((t=>{e=e||t.getProvider()})),e)return!0}}fontLoaded(t){const e=t.getFontFamily();return-1!==this._loadedFonts.indexOf(e)}setFontLoaded(t){if(!this.fontLoaded(t)){const e=t.getFontFamily();this._loadedFonts.push(e)}}load(){const t=this._fonts,e={google:new nu(this._ui),file:new iu(this._ui)},i=()=>{for(const t in e){e[t].dispose()}};t.filter((t=>!this.fontLoaded(t))).forEach((t=>{t.getVariations().forEach((t=>{const i=t.getProvider();if(!i)return;e[i].add(t)}))}));const r=[];for(const t in e)r.push(e[t].load());return Promise.all(r).then((()=>{i(),t.forEach((t=>{this.setFontLoaded(t)}))})).catch((t=>{throw i(),t}))}}class su{constructor(t,e){this._ui=t,this._options=e,this._brushes=[],this._brushesById={},this._addBrushes(bc.DEFAULTS.BRUSHES);const{brushes:i,replaceBrushes:r,availableBrushes:n}=this._options;this._options.brushes&&this._addBrushes(i,r),n&&(this._brushes=this._brushes.filter((t=>-1!==n.indexOf(t.identifier))))}_addBrushes(t,e){e&&(this._brushes=[],this._brushesById={}),t.forEach((t=>{this._brushes.push(t),this._brushesById[t.identifier]=t}))}getBrushByIdentifier(t){return this._brushesById[t]}getBrushes(){return this._brushes}getFirstBrush(){return this._brushes[0]}}var au=class{constructor(){this._assetsByGroupId={}}addAsset(t,e,i=!1){this._assetsByGroupId[t]?i?this._assetsByGroupId[t].unshift(e):this._assetsByGroupId[t].push(e):this._assetsByGroupId[t]=[e]}setAssets(t,e){this._assetsByGroupId[t]=e}getAssets(t){return this._assetsByGroupId[t]=this._assetsByGroupId[t]||[],this._assetsByGroupId[t]}};const lu="imgly_sticker_custom";class cu{constructor(t,e,i){this._ui=t,this._options=e,this._dynamicAssetsLibrary=i||this._ui.getEditor().getDynamicAssetsLibrary()||new au,this._categoriesById={},this._categories=[],this._stickersById={},this._customStickerCanvas=It.createCanvas(),this.reload()}reload(){this._categoriesById={},this._categories=[],this._stickersById={};const t=this._ui.getEditor().getSDK()._l.areCustomAssetsAllowed();this._addCategories(Je.DEFAULTS.STICKER_CATEGORIES);const{categories:e,replaceCategories:i}=this._options;if(t&&this._options.categories?this._addCategories(e,i):(this._updateCategoriesMap(),this._updateAllCategory()),t){const t=this._dynamicAssetsLibrary.getAssets("sticker");if(t.length>0){const e=this._createCustomStickerCategory(t);this._addCategories([e],!1,!0)}}}loadExternal(t){return new Nt(t).load().then((t=>{this._addCategories(t.categories,this._options.replaceCategories)}))}_addCategories(t,e=!1,i=!1){this._categories=e?t.slice(0):i?this._mergeCategories(t,this._categories):this._mergeCategories(this._categories,t),this._updateCategoriesMap(),this._updateAllCategory()}_mergeCategories(t,e){t=kc.cloneCategories(t,"stickers");for(const i of e){let e=!1;for(const r of t)if(i.identifier===r.identifier){for(const t of i.stickers){let e=!1;for(const i of r.stickers)if(t.identifier===i.identifier){Object.assign(i,t),e=!0;break}e||r.stickers.push(t)}e=!0;break}e||t.push(i)}return t}_updateCategoriesMap(){this._categoriesById={},this._categories.forEach((t=>{this._categoriesById[t.identifier]=t})),this._categories.forEach((t=>{t.stickers.forEach((t=>{this._stickersById[t.identifier]=t}))})),void 0!==this._options.availableStickers&&null!==this._options.availableStickers&&(this._categories.forEach((t=>{t.identifier!==lu&&(t.stickers=t.stickers.filter((t=>-1!==this._options.availableStickers.indexOf(t.identifier))))})),this._categories=this._categories.filter((t=>t.stickers.length>0))),this._updateAllCategory()}_updateAllCategory(){this._allCategory={identifier:"all",defaultName:"All",stickers:this._categories.map((t=>t.stickers)).reduce(((t,e)=>t.concat(e)),[])},this._categoriesById.all=this._allCategory}renderStickerThumbnailFromImage(t){const e=this._customStickerCanvas,i=e.getContext("2d");i.save();const r=62/t.width,n=r*t.height;e.width=62,e.height=62,i.clearRect(0,0,t.width,t.height),i.translate(0,.5*(e.height-n)),i.scale(r,r),i.drawImage(t,0,0);const o=e.toDataURL("image/png");return i.restore(),{data:o,width:62,height:n}}addCustomStickerFromImage(t,e,i="none"){const r="data:image/svg"===t.src.substring(0,14);t=this._ui.getEditor().getSDK().correctExifOrientation(t);const n=((t,e)=>{const i=t.x/t.y;return i>1?new zc(e,e/i):new zc(e*i,e)})(new zc(t.width,t.height),2048),o=r?n:(t=>{const e=this._ui.getEditor().getSDK().getRenderer(),i=new zc(t.width,t.height),r=1e6*this._ui.getEditor().getMaxMegapixels();let n=e.getMaxDimensions();const o=i.x*i.y>r,s=null!==n&&(i.x>n||i.y>n);if(o){const e=t.width/t.height,i=t.height/t.width;n=new zc(Math.sqrt(r*e),Math.sqrt(r*i)).floor().max()}const a=i.clone();return(o||s)&&(i.x/i.y>1?(a.x=n,a.y=n/i.x*i.y):(a.x=n/i.y*i.x,a.y=n)),a})(t),s=this._customStickerCanvas,a=s.getContext("2d");a.save();const l=this.renderStickerThumbnailFromImage(t);r?(t.width>t.height?(s.width=2048,s.height=2048/t.width*t.height):(s.height=2048,s.width=2048/t.height*t.width),t.width=s.width,t.height=s.height):(s.width=o.x,s.height=o.y,a.scale(o.x/t.width,o.y/t.height)),a.drawImage(t,0,0,t.width,t.height);const c=s.toDataURL();a.restore();const u={identifier:It.generateUUID(),defaultName:e||"",tintMode:i,images:{mediaThumb:{uris:[l.data],rawData:!0,width:l.width,height:l.height},mediaBase:{uris:r?[c,t.src]:[c],rawData:!0,isSVG:r,width:o.x,height:o.y}}},h=this._dynamicAssetsLibrary;h.addAsset("sticker",u,!0);const d=h.getAssets("sticker");if(1===d.length){const t=this._createCustomStickerCategory(d);this._addCategories([t],!1,!0)}else this.getCategory(lu).stickers=d,this._updateAllCategory();this._updateCategoriesMap()}_createCustomStickerCategory(t){return{identifier:lu,defaultName:"Custom",metaData:{backgroundImage:t[t.length-1].images.mediaBase.uris[0],rawData:!0},stickers:t}}getStickersForCategory(t){if(!this._categoriesById[t])throw new Error(`Unknown sticker category '${t}'`);return this._categoriesById[t].stickers}getStickerByIdentifier(t){return this._stickersById[t]}getCategories(t=!1){return t?[this._allCategory].concat(this._categories):this._categories}getCategory(t){return this._categoriesById[t]}static getURLForSticker(t,e="base"){const{images:i}=t,r="base"===e&&i.mediaBase||i.mediaThumb,n=r.uris||[r.uri];if(!kc.Browser.getIEVersion()){const t=n.filter((t=>/\.svg$/i.test(t)));return t.length?t[0]:n[0]}const o=n.filter((t=>!/\.svg$/i.test(t)));return o.length?o[0]:n[0]}}const uu=k(U());let hu;void 0!==Pc.Operations.SpriteOperation&&(hu=Pc.Operations.SpriteOperation.BrushSprite);class du{constructor(t,e){this._editor=t,this._ui=this._editor.getUI(),this._data=e,this._filterManager=new Uc(this._ui,this._getOptions("filter")),this._stickerManager=new cu(this._ui,this._getOptions("sticker")),this._brushManager=new su(this._ui,this._getOptions("brush")),this._fontManager=new $c(this._ui,this._getOptions("text"))}_getOptions(t){const{controls:e}=this._editor;let i={};e&&e.get(t)&&(i=e.get(t).defaultOptions);const r=this._editor.getOptions();return Ac.deepDefaults({},r.editor.controlsOptions[t]||{},i)}deserialize(){return this._validateVersion().then((()=>this._deserializeInputImage())).then((()=>this._deserializeOperations()))}_validateVersion(){return this._data.version!==this.constructor.version?Promise.reject(new Error(`Invalid version ${this._data.version}, expected ${this.constructor.version}`)):Promise.resolve()}_deserializeInputImage(){return new Promise(((t,e)=>{const{data:i,type:r}=this._data.inputImage;if(i&&r){const e=new window.Image;e.addEventListener("load",(()=>{this._editor.setImage(e),t()})),e.src=`data:${r};base64,${i}`}else t()}))}_deserializeOperations(){return T(this,null,(function*(){const{operations:t}=this._data;return uu.default(t,(t=>T(this,null,(function*(){return this._deserializeOperation(t)}))))}))}_deserializeOperation(t){switch(t.type){case"crop":return this._deserializeCropOperation(t);case"orientation":return this._deserializeOrientationOperation(t);case"filter":return this._deserializeFilterOperation(t);case"adjustments":return this._deserializeAdjustmentsOperation(t);case"sprite":return this._deserializeSpriteOperation(t);case"focus":return this._deserializeFocusOperation(t)}}_deserializeCropOperation(t){const{options:e}=t;let{rotation:i}=e;const r=zc.fromObject(e.start),n=zc.fromObject(e.end);i>Math.PI&&(i-=2*Math.PI);const o={start:r,end:n};void 0!==i&&(o.rotation=i);const s=this._editor.operations.getOrCreate("transform");return this._editor.broadcastTransform(s,o),s.set(o),Promise.resolve(s)}_deserializeOrientationOperation(t){const{options:e}=t,i=this._editor.operations.getOrCreate("orientation");return i?(i.set(e),Promise.resolve(i)):Promise.resolve()}_deserializeFilterOperation(t){const{options:e}=t;return this._filterManager.getFilterByIdentifier(e.name)?this._filterManager.instantiateFilterWithIdentifier(e.name).then((t=>{const i=this._editor.operations.getOrCreate("filter");return i.set({identifier:e.name,filter:t,intensity:e.intensity}),i})):(Mt.warn("Deserializer",`Unknown filter \`${e.name}\``),Promise.resolve())}_deserializeAdjustmentsOperation(t){const{AdjustmentsOperation:e}=Pc.Operations,{options:i}=t,r={};return["brightness","saturation","contrast","exposure","shadows","highlights","clarity"].forEach((t=>{if(void 0===i[t])return;const{minValue:n,midValue:o,maxValue:s}=e.prototype.availableOptions[t];let a=i[t];a=a<0?o+(o-n)*a:o+(s-o)*a,r[t]=a})),Promise.resolve(this._editor.operations.getOrCreate("adjustments",r))}_deserializeSpriteOperation(t){const{options:e}=t,i=this._editor.operations.getOrCreate("sprite");if(!i)return Promise.resolve();const r=e.sprites.map((t=>this._deserializeSprite(i,t))).filter((t=>t));return Promise.all(r).then((t=>(i.setSprites(t.filter((t=>t))),i)))}_deserializeSprite(t,e){switch(e.type){case"sticker":return this._deserializeSticker(t,e);case"text":return this._deserializeText(t,e);case"brush":return this._deserializeBrush(t,e);case"textdesign":return this._deserializeTextDesign&&this._deserializeTextDesign(t,e)}}_deserializeSticker(t,e){const{SpriteOperation:i}=Pc.Operations,{options:r}=e,n=this._stickerManager.getStickerByIdentifier(r.name),o=this._stickerManager.getURLForSticker(n);return n?new Promise(((e,n)=>{const s=new window.Image;s.addEventListener("load",(()=>{const n=i.StickerSprite.prototype.availableOptions.adjustments.structure,{rotation:o,flipHorizontally:a,flipVertically:l}=r,c={identifier:r.name,image:s,position:zc.fromObject(r.position),dimensions:zc.fromObject(r.dimensions),rotation:o,flipHorizontally:a,flipVertically:l,adjustments:{}};void 0!==r.adjustments&&["brightness","contrast","saturation"].forEach((t=>{void 0!==r.adjustments[t]&&(c.adjustments[t]=r.adjustments[t]+n[t].default)})),e(t.createSticker(c))})),s.crossOrigin=this._editor.getCrossOrigin(),s.src=this._editor.getUI().getAssetPath(o)})):(Mt.warn("Deserializer",`Unknown sticker '${r.name}'. Skipping sprite.`),Promise.resolve())}_deserializeText(t,e){const{options:i}=e,{fontSize:r,lineHeight:n,fontFamily:o,fontWeight:s,alignment:a,rotation:l,maxWidth:c,color:u,backgroundColor:h}=i,d=new ou(this._ui);let p=this._fontManager.getFontByFontFamily(o);return p||(p=this._fontManager.getDefaultFont()),d.setFonts([p]),d.load().then((()=>{const e=t.createText({fontSize:r,lineHeight:n,fontFamily:o,fontWeight:s,alignment:a,rotation:l,maxWidth:c,text:i.text,color:Tc.fromArray(u),backgroundColor:Tc.fromArray(h),position:zc.fromObject(i.position)});return e._edited=!0,e}))}_deserializeBrush(t,e){const{options:i}=e,{paths:r}=i,n=t.createBrush();return r.forEach((t=>{this._deserializeBrushPath(n,t)})),Promise.resolve(n)}_deserializeBrushPath(t,e){const{points:i}=e,r=this._createBrushForPath(e),n=t.createPath(r);n.setClosed(!0),i.forEach((t=>{n.addControlPoint(zc.fromObject(t))}))}_createBrushForPath(t){const{color:e,size:i}=t,r={color:Tc.fromArray(e),size:i},n=this._brushManager.getFirstBrush();if(n.prototype&&n.prototype instanceof hu){return new n(r)}const o=b({},n);delete o.image;class s extends hu{}return s.identifier=n.identifier,new s(b(b({},o),r))}_deserializeFocusOperation(t){const{options:e}=t.options;switch(t.options.type){case"radial":{const{position:t,radius:i,gradientRadius:r,blurRadius:n}=e;return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:zc.fromObject(t),radius:i,gradientRadius:r,blurRadius:n}))}case"linear":{const{start:t,end:i,size:r,gradientSize:n,blurRadius:o}=e;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:zc.fromObject(t),end:zc.fromObject(i),size:r,gradientSize:n,blurRadius:o}))}}}_getInputDimensionsForOperation(t){let e=!1,i=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach((r=>{r===t&&(e=!0),e||(i=r.getNewDimensions(i))})),i}}du.version="1.0.0";const pu=2*Math.PI;class fu{constructor(t){this._editor=t,this._serializeOperations=this._serializeOperations.bind(this)}serialize(t={}){this._options=b(b({},t),{image:!0});const e={version:this.constructor.version};return this._serializeInputImage(e).then(this._serializeOperations)}_serializeInputImage(t){const e=this._editor.getImage(),{width:i,height:r}=e;if(!this._options.image)return t.inputImage={width:i,height:r},Promise.resolve(t);const n=Ac.createCanvas();n.width=e.width,n.height=e.height;n.getContext("2d").drawImage(e,0,0);const o=n.toDataURL(Mc.PNG);return t.inputImage={type:Mc.PNG,data:o.replace(/^data:image\/(.*?);base64,/,""),width:i,height:r},Promise.resolve(t)}_serializeOperations(t){const e=[];return this._editor.operations.getStack().forEach((t=>{const i=this._serializeOperation(t,e);i&&e.push(i)})),t.operations=e.filter((t=>t)),Promise.resolve(t)}_serializeOperation(t,e){switch(t.constructor.identifier){case"transform":return this._serializeTransformOperation(t);case"orientation":return this._serializeOrientationOperation(t);case"filter":return this._serializeFilterOperation(t);case"adjustments":return this._serializeAdjustmentsOperation(t);case"sprite":return this._serializeSpriteOperation(t,e);case"radial-focus":return this._serializeRadialFocusOperation(t);case"mirrored-focus":return this._serializeLinearFocusOperation(t);default:Mt.warn(`Unable to serialize operation of type ${t.constructor.identifier}`)}}_serializeTransformOperation(t){const e=t.serializeOptions(["start","end","rotation"],!0);return e.rotation=(e.rotation+pu)%pu,{type:"crop",options:e}}_serializeOrientationOperation(t){return{type:"orientation",options:t.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}_serializeFilterOperation(t){return"identity"===t.getIdentifier()?null:{type:"filter",options:{intensity:t.getIntensity(),name:t.getIdentifier()}}}_serializeAdjustmentsOperation(t){const{availableOptions:e}=t,i={};return["brightness","saturation","contrast","exposure","shadows","highlights","clarity"].forEach((r=>{const n=e[r],o=t.getOption(r),{minValue:s,midValue:a,maxValue:l}=n;i[r]=o<=a?(o-s)/(a-s)-1:(o-a)/(l-a)})),{type:"adjustments",options:i}}_serializeSpriteOperation(t,e){const i=e.filter((t=>"sprite"===t.type));let r,n=!0;if(i.length?(r=i.pop(),n=!1):r={type:"sprite",options:{sprites:[]}},t.getSprites().forEach((e=>{let i=null;e instanceof t.constructor.StickerSprite?i=this._serializeSticker(t,e):e instanceof t.constructor.TextSprite?i=this._serializeText(t,e):e instanceof t.constructor.BrushSprite?i=this._serializeBrush(t,e):e instanceof t.constructor.TextDesignSprite&&(i=this._serializeTextDesign&&this._serializeTextDesign(t,e)),i&&r.options.sprites.push(i)})),n)return r}_serializeSticker(t,e){const i=e.getAdjustments(),r=e.serializeOptions(["identifier","position","dimensions","flipVertically","flipHorizontally","rotation"],!0);r.name=r.identifier,delete r.identifier,r.rotation=(r.rotation+pu)%pu;const n=i.availableOptions;return r.adjustments={brightness:i.getBrightness()-n.brightness.default,saturation:i.getSaturation()-n.saturation.default,contrast:i.getContrast()-n.contrast.default},{type:"sticker",options:r}}_serializeText(t,e){const i=e.serializeOptions(["fontSize","lineHeight","fontFamily","fontWeight","alignment","color","backgroundColor","position","rotation","text","maxWidth"],!0);return i.rotation=(i.rotation+pu)%pu,{type:"text",options:i}}_serializeBrush(t,e){return{type:"brush",options:{paths:e.getPaths().map((t=>this._serializePath(t)))}}}_serializePath(t){const e=t.getBrush().serializeOptions(["color","size"],!0);return e.points=t.getControlPoints().map((t=>t.getPosition().toObject())),e}_serializeRadialFocusOperation(t){return{type:"focus",options:{type:"radial",options:t.serializeOptions(["position","radius","gradientRadius","blurRadius"],!0)}}}_serializeLinearFocusOperation(t){return{type:"focus",options:{type:"linear",options:t.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}_getInputDimensionsForOperation(t){let e=!1,i=this._editor.getInputDimensions();return this._editor.operations.getStack().forEach((r=>{r===t&&(e=!0),e||(i=r.getNewDimensions(i))})),i}}fu.version="1.0.0";class mu extends du{_deserializeOperation(t){return"selective-blur"===t.type?this._deserializeSelectiveBlurOperation(t):super._deserializeOperation(t)}_deserializeCropOperation(t){const{options:e}=t;let{rotation:i}=e;const r=zc.fromObject(e.start),n=zc.fromObject(e.end),o=e.dimensions?zc.fromObject(e.dimensions):null;if(n.x-r.x<=0||n.y-r.y<=0)throw new Error(`A crop should not result in negative or zero dimensions - start: ${r} - end: ${n}`);i>Math.PI&&(i-=2*Math.PI);const s={start:r,end:n};void 0!==i&&(s.rotation=i);const a=this._editor.operations.getOrCreate("transform");if(!a)return Promise.resolve();if(this._editor.broadcastTransform(a,s),a.set(s),o){const t=n.clone().subtract(r),e=a.getInputDimensions(!1).multiply(t);a.setTextureScale(o.x/e.x)}return Promise.resolve(a)}}mu.version="1.0.1";const gu=2*Math.PI;class _u extends fu{_serializeTransformOperation(t){const e=t.serializeOptions(["start","end","rotation","textureScale"],!0);return e.rotation=(e.rotation+gu)%gu,1!==e.textureScale&&(e.dimensions=t.getNewDimensions(t.getInputDimensions(!1))),delete e.textureScale,{type:"crop",options:e}}}_u.version="1.0.1";const{OptionType:yu}=Pc;class vu extends Pc.Configurable{constructor(t,e={}){super(e),this._loaded=!1,this._loading=!1,this._ui=t,this._frame=Pc.Utils.deepClone(this._options)}load(){if(this._loaded)return Promise.resolve();if(this._loading)return Promise.reject(new Error("Called Frame#load while it's already loading"));this._loading=!0;const{imageGroups:t}=this._frame,e=[];return["top","left","right","bottom"].forEach((i=>{if(!(i in t))return;const r=t[i];["start","mid","end"].forEach((t=>{t in r&&e.push(this._loadPart(i,t))}))})),Promise.all(e).then((()=>{this._loaded=!0,this._loading=!1})).catch((t=>{this._loaded=!1,this._loading=!1}))}_loadPart(t,e){const{imageGroups:i}=this._frame,r=i[t][e];let n=r;return"string"!=typeof r&&"image"in r&&(n=r.image),Bt.load(this._ui.getAssetPath(n)).then((i=>("string"!=typeof r?this._frame.imageGroups[t][e].image=i:this._frame.imageGroups[t][e]=i,i)))}getFrame(){return this._frame}}vu.prototype.availableOptions={identifier:{type:yu.STRING,required:!0},defaultName:{type:yu.STRING},thumbnail:{type:yu.STRING},tintable:{type:yu.BOOLEAN,default:!1},layoutMode:{type:yu.STRING,default:"horizontal-inside",available:["horizontal-inside","vertical-inside"]},imageGroups:{type:yu.OBJECT,required:!0}};class bu{constructor(t,e){this._ui=t,this._options=e,this._categoriesById={},this._categories=[],this._framesById={},this._addCategories(Je.DEFAULTS.FRAME_CATEGORIES),this._customAssetsAllowed=t.getEditor().getSDK()._l.areCustomAssetsAllowed();const{categories:i,replaceCategories:r}=this._options;this._customAssetsAllowed&&this._options.categories?this._addCategories(i,r):this._updateAllCategory()}_addCategories(t,e=!1){this._categories=e?t.slice(0):kc.mergeCategories(this._categories,t,"frames"),this._categoriesById={},this._categories.forEach((t=>{this._categoriesById[t.identifier]=t}));const{availableFrames:i}=this._options;this._customAssetsAllowed&&i&&this._categories.forEach((t=>{t.frames=t.frames.filter((t=>-1!==i.indexOf(t.identifier)))})),this._categories.forEach((t=>{t.frames.forEach((t=>{this._framesById[t.identifier]=t}))})),this._updateAllCategory()}_updateAllCategory(){this._allCategory={identifier:"all",defaultName:"All",frames:this._categories.map((t=>t.frames)).reduce(((t,e)=>t.concat(e)),[])},this._categoriesById.all=this._allCategory}getFramesForCategory(t){if(!this._categoriesById[t])throw new Error(`Unknown frame category '${t}'`);return this._categoriesById[t].frames}getFrameByIdentifier(t){return this._framesById[t]}getCategories(){return this._categories}getCategory(t){return this._categoriesById[t]}}class xu{constructor(t,e){this._ui=t,this._options=e,this._overlays=Je.DEFAULTS.OVERLAYS.slice(0),this._overlaysByIdentifier={};const i=t.getEditor().getSDK()._l.areCustomAssetsAllowed();i&&e.overlays&&(e.replaceOverlays?this._overlays=e.overlays:this._overlays=this._overlays.concat(e.overlays)),i&&e.availableOverlays&&(this._overlays=this._overlays.filter((t=>-1!==e.availableOverlays.indexOf(t.identifier)))),this._overlays.forEach((t=>{this._overlaysByIdentifier[t.identifier]=t}))}getOverlays(){return this._overlays}getOverlayByIdentifier(t){return this._overlaysByIdentifier[t]}}const{OverlayFilter:wu}=Pc.Engine.Filters;var Su={[wu.BLEND_MODES.NORMAL]:"normal",[wu.BLEND_MODES.OVERLAY]:"overlay",[wu.BLEND_MODES.HARD_LIGHT]:"hard light",[wu.BLEND_MODES.SOFT_LIGHT]:"soft light",[wu.BLEND_MODES.MULTIPLY]:"multiply",[wu.BLEND_MODES.DARKEN]:"darken",[wu.BLEND_MODES.LIGHTEN]:"lighten",[wu.BLEND_MODES.SCREEN]:"screen",[wu.BLEND_MODES.COLOR_BURN]:"color burn"};const ku=Ac.flipObject(Su);class Cu extends mu{constructor(...t){super(...t),this._frameManager=new bu(this._ui,this._getOptions("frame"));const e=this._getOptions("overlay");e&&(this._overlayManager=new xu(this._ui,e))}_deserializeSprite(t,e){return"frame"===e.type?this._deserializeFrame(t,e):"overlay"===e.type?this._deserializeOverlay(t,e):super._deserializeSprite(t,e)}_deserializeOperation(t){return"transform"===t.type?this._deserializeTransformOperation(t):super._deserializeOperation(t)}_deserializeOrientationOperation(t){if(this._data.meta&&"html5"!==this._data.meta.platform)return super._deserializeOrientationOperation(t);const{rotation:e,flipHorizontally:i,flipVertically:r}=t.options;let n=90===e&&!i&&!r;return n|=90===e&&i&&r,n|=270===e&&!i&&!r,n|=270===e&&i&&r,n&&(t.options.flipHorizontally=!t.options.flipHorizontally,t.options.flipVertically=!t.options.flipVertically),super._deserializeOrientationOperation(t)}_deserializeTransformOperation(t){return super._deserializeCropOperation(t).then((t=>{if(!t)return;const e=Ac.Array.find(this._data.operations,(t=>"orientation"===t.type));if(e){const{options:i}=e;let{rotation:r,flipHorizontally:n,flipVertically:o}=i;(90===r||270===r)&&(!n&&o||n&&!o)&&(n=!n,o=!o),t.rotate(i.rotation),n&&(t.flip("horizontal"),t.setRotation(-1*t.getRotation())),o&&(t.flip("vertical"),t.setRotation(-1*t.getRotation()))}return t}))}_deserializeFrame(t,e){const{identifier:i}=e.options,r=this._frameManager.getFrameByIdentifier(i);if(!r)return Mt.warn("Deserializer",`Unknown frame \`${i}\`. Skipping frame.`),Promise.resolve();const n=new vu(this._ui,r);return n.load().then((()=>{this._editor.operations.getOrCreate("frame",{frame:n.getFrame()})}))}_deserializeOverlay(t,e){const{blendMode:i,intensity:r,identifier:n}=e.options,o=this._overlayManager.getOverlayByIdentifier(n);if(!o)return Mt.warn("Deserializer",`Unknown overlay \`${n}\`. Skipping overlay.`),Promise.resolve();const s=this._editor.getUI().getAssetPath(o.image);return Bt.load(s).then((t=>{this._editor.operations.getOrCreate("overlay",{alpha:r,identifier:n,blendMode:parseInt(ku[i||o.blendMode],10),image:t})}))}_createBrushForPath(t){const e=super._createBrushForPath(t);return void 0!==t.hardness&&e.hasOption("hardness")&&e.setHardness(t.hardness),e}_deserializeSticker(t,e){const{SpriteOperation:i}=Pc.Operations,{options:r}=e,n=this._stickerManager.getStickerByIdentifier(r.identifier),o=cu.getURLForSticker(n,"base");if(!n)return Mt.warn("Deserializer",`Unknown sticker \`${r.identifier}\`. Skipping sprite.`),Promise.resolve();const s=t.getInputDimensions(!1);return new Promise(((e,a)=>{const l=new window.Image;l.addEventListener("load",(()=>{const o=i.StickerSprite.prototype.availableOptions.adjustments.structure,{rotation:a,flipHorizontally:c,flipVertically:u}=r,h={identifier:r.identifier,image:l,position:zc.fromObject(r.position),dimensions:zc.fromObject(r.dimensions).multiply(s.min()),rotation:a,flipHorizontally:c,flipVertically:u,adjustments:{}};void 0!==r.adjustments&&["brightness","contrast","saturation"].forEach((t=>{void 0!==r.adjustments[t]&&(h.adjustments[t]=r.adjustments[t]+o[t].default)})),void 0!==r.tintColor&&void 0!==n.tintMode&&(h.tintColor=Tc.fromArray(r.tintColor),h.tintMode=n.tintMode),e(t.createSticker(h))})),l.crossOrigin=this._editor.getCrossOrigin(),l.src=this._editor.getUI().getAssetPath(o)}))}_deserializeFilterOperation(t){const{options:e}=t;return this._filterManager.getFilterByIdentifier(e.identifier)?this._filterManager.instantiateFilterWithIdentifier(e.identifier).then((t=>{const i=this._editor.operations.getOrCreate("filter");return i?(i.set({identifier:e.identifier,filter:t,intensity:e.intensity}),i):void 0})):(Mt.warn("Deserializer",`Unknown filter \`${e.identifier}\``),Promise.resolve())}_deserializeFocusOperation(t){const{options:e,type:i}=t.options;if("radial"!==i)return super._deserializeFocusOperation(t);const r=this._editor.getImage(),n=r.width/r.height,{start:o,end:s,gradientRadius:a,blurRadius:l}=e,c=zc.fromObject(s).subtract(zc.fromObject(o)).multiply(n,1).len();return Promise.resolve(this._editor.operations.getOrCreate("radial-focus",{position:zc.fromObject(o),radius:c,gradientRadius:a,blurRadius:l}))}_deserializeText(t,e){const{options:i}=e,{fontSize:r,lineHeight:n,fontIdentifier:o,alignment:s,rotation:a,maxWidth:l,color:c,backgroundColor:u}=i,h=new ou(this._ui);let d=this._fontManager.getVariationByIdentifier(o);return d?h.setFonts([d.getFont()]):d=this._fontManager.getDefaultFont(),h.load().then((()=>{const e=t.getInputDimensions(!1),o=l*e.min()/e.x,h=t.createText({fontSize:r,lineHeight:n,fontFamily:d.getFontFamily(),fontWeight:d.getFontWeight(),fontIdentifier:d.getIdentifier(),alignment:s,rotation:a,maxWidth:o,text:i.text,color:Tc.fromArray(c),backgroundColor:Tc.fromArray(u),position:zc.fromObject(i.position)});return h._edited=!0,h}))}}Cu.version="2.0.0";class Tu extends _u{_serializeSticker(t,e){const i=t.getInputDimensions(!1),r=super._serializeSticker(t,e);return"none"!==e.getTintMode()&&(r.options.tintColor=e.serializeOption("tintColor",!0)),r.options.dimensions=e.getDimensions().clone().divide(i.min()).toObject(),r.options.identifier=r.options.name,delete r.options.name,r}_serializePath(t){const e=super._serializePath(t),i=t.getBrush();return i.hasOption("hardness")&&(e.hardness=i.getOption("hardness")),e}_serializeOperation(t,e){return"frame"===t.constructor.identifier?(this._serializeFrameOperation(t,e),null):"overlay"===t.constructor.identifier?(this._serializeOverlayOperation(t,e),null):super._serializeOperation(t,e)}_serializeFrameOperation(t,e){const i=e.filter((t=>"sprite"===t.type));let r;i.length?r=i.pop():(r={type:"sprite",options:{sprites:[]}},e.push(r)),r.options.sprites.push({type:"frame",options:this._getFrameOptions(t)})}_serializeOverlayOperation(t,e){if(!t.getIdentifier())return;const i=e.filter((t=>"sprite"===t.type));let r;i.length?r=i.pop():(r={type:"sprite",options:{sprites:[]}},e.push(r)),r.options.sprites.push({type:"overlay",options:{identifier:t.getIdentifier(),intensity:t.getAlpha(),blendMode:Su[t.getBlendMode()]}})}_getFrameOptions(t){return{identifier:t.getFrame().identifier}}_serializeOrientationOperation(t){const e=super._serializeOrientationOperation(t);return(90===e.options.rotation||270===e.options.rotation)&&(e.options.flipHorizontally=!e.options.flipHorizontally,e.options.flipVertically=!e.options.flipVertically),e}_serializeTransformOperation(t){const{operations:e}=this._editor;if(e.exists("orientation")){t=t.clone();const i=e.get("orientation");t.rotate(-i.getRotation()),i.getFlipVertically()&&(t.flip("vertical"),t.setRotation(-1*t.getRotation())),i.getFlipHorizontally()&&(t.flip("horizontal"),t.setRotation(-1*t.getRotation()))}const i=super._serializeTransformOperation(t);return i.type="transform",i}_serializeText(t,e){const i=super._serializeText(t,e),r=t.getInputDimensions(!1);return i.options.fontIdentifier=e.getFontIdentifier(),i.options.maxWidth=i.options.maxWidth*r.x/r.min(),delete i.options.fontFamily,i}_serializeFilterOperation(t){const e=super._serializeFilterOperation(t);return e?(e.options.identifier=e.options.name,delete e.options.name,e):null}_serializeRadialFocusOperation(t){const e=super._serializeRadialFocusOperation(t),i=e.options.options;return i.start=i.position,delete i.position,i.end={x:i.start.x+i.radius,y:i.start.y},delete i.radius,e}}let Eu;Tu.version="2.0.0",void 0!==Pc.Operations.SpriteOperation&&(Eu=Pc.Operations.SpriteOperation.BrushSprite.Brush);class Ru extends Cu{_deserializeSticker(t,e){const{SpriteOperation:i}=Pc.Operations,{options:r}=e,n=this._stickerManager.getStickerByIdentifier(r.identifier);if(!n)return Mt.warn("Deserializer",`Unknown sticker \`${r.identifier}\`. Skipping sprite.`),Promise.resolve();const{mediaBase:o}=n.images,s=cu.getURLForSticker(n,"base"),a=o.rawData?o.uris[0]:this._editor.getUI().getAssetPath(s),l=t.getInputDimensions(!1);return Bt.load(a).then((e=>{const o=i.StickerSprite.prototype.availableOptions.adjustments.structure,{rotation:s,flipHorizontally:a,flipVertically:c}=r,u={identifier:r.identifier,image:e,position:zc.fromObject(r.position),dimensions:zc.fromObject(r.dimensions).multiply(l.min()),rotation:s||0,flipHorizontally:a,flipVertically:c,resizeMode:n.resizeMode||"keepAspect",adjustments:{}};return void 0!==r.adjustments&&["brightness","contrast","saturation"].forEach((t=>{void 0!==r.adjustments[t]&&(u.adjustments[t]=r.adjustments[t]+o[t].default)})),void 0!==r.tintMode&&void 0!==r.tintColor?(u.tintColor=Tc.fromArray(r.tintColor.rgba),u.tintMode=r.tintMode):void 0!==r.tintColor&&void 0!==n.tintMode&&(u.tintColor=Tc.fromArray(r.tintColor.rgba),u.tintMode=n.tintMode),void 0!==r.alpha&&(u.alpha=r.alpha),t.createSticker(u)}))}_deserializeTransformOperation(t){return super._deserializeTransformOperation(t).then((t=>t?(t._ratio=null,t):void 0))}_deserializeInputImage(){let{data:t,type:e,uri:i}=this._data.image;return t&&e&&(i=`data:${e};base64,${t}`),i?Bt.load(i).then((t=>{this._editor.setImage(t)})):Promise.resolve()}_deserializeAdjustmentsOperation(t){const{AdjustmentsOperation:e}=Pc.Operations;return super._deserializeAdjustmentsOperation(t).then((i=>{if(!i)return null;const{options:r}=t,n={};return["gamma","whites","blacks","temperature"].forEach((t=>{if(void 0===r[t])return;const{minValue:i,midValue:o,maxValue:s}=e.prototype.availableOptions[t];let a=r[t];a=a<0?o+(o-i)*a:o+(s-o)*a,n[t]=a})),i.set(n),i}))}_deserializeFocusOperation(t){const{options:e}=t.options;switch(t.options.type){case"radial":return super._deserializeFocusOperation(t);case"linear":{const{start:t,end:i,blurRadius:r}=e;return Promise.resolve(this._editor.operations.getOrCreate("linear-focus",{controlPoint1:zc.fromObject(t),controlPoint2:zc.fromObject(i),blurRadius:r}))}case"mirrored":{const{start:t,end:i,size:r,gradientSize:n,blurRadius:o}=e;return Promise.resolve(this._editor.operations.getOrCreate("mirrored-focus",{start:zc.fromObject(t),end:zc.fromObject(i),size:r,gradientSize:n,blurRadius:o}))}case"gaussian":{const{blurRadius:t}=e;return Promise.resolve(this._editor.operations.getOrCreate("blur",{blurRadius:t}))}}}_deserializeText(t,e){const{options:i}=e,{fontSize:r,lineHeight:n,fontIdentifier:o,alignment:s,rotation:a,maxWidth:l,color:c,backgroundColor:u}=i,h=this._ui.getFontLoader();let d=this._fontManager.getVariationByIdentifier(o);return d?h.setFonts([d.getFont()]):d=this._fontManager.getDefaultVariation(),h.load().then((()=>{const e=t.getInputDimensions(!1),o=l*e.min()/e.x,h=t.createText({fontSize:r,lineHeight:n,fontFamily:d.getFontFamily(),fontWeight:d.getFontWeight(),fontIdentifier:d.getIdentifier(),textMetrics:d.getTextMetrics(),alignment:s,rotation:a,maxWidth:o,text:i.text,color:Tc.fromArray(c.rgba),backgroundColor:Tc.fromArray(u.rgba),position:zc.fromObject(i.position)});return h._edited=!0,h}))}_createBrushForPath(t){const{identifier:e,color:i,size:r,hardness:n}=t.brush,o={color:Tc.fromArray(i.rgba),size:r};void 0!==n&&(o.hardness=n);let s=this._brushManager.getBrushByIdentifier(e);if(s||(s=this._brushManager.getFirstBrush()),s.prototype&&s.prototype instanceof Eu){return new s(o)}const a=b({},s);delete a.image;class l extends Eu{}return l.identifier=s.identifier,new l(b(b({},a),o))}_deserializeFrame(t,e){return super._deserializeFrame(t,e).then((()=>{const t=this._editor.operations.get("frame"),{size:i,alpha:r,tintColor:n}=e.options,o={};void 0!==i&&(o.scale=i),void 0!==r&&(o.alpha=r),void 0!==n&&(o.tintColor=Tc.fromArray(n.rgba)),t.set(o)}))}_deserializeTextDesign(t,e){const{options:i}=e,{position:r,rotation:n,flipHorizontally:o,flipVertically:s,text:a,color:l,width:c,seed:u,inverted:h}=i;let{identifier:d}=i;d===Pc.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?d=Pc.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:d===Pc.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(d=Pc.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);const p=new Zc(this._ui,this._getOptions("textdesign")),f=new $c(this._ui,{fonts:bc.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),{AssetManager:m}=t.constructor.TextDesignSprite,g=this._ui.getFontLoader(),_=new(p.getLayoutByIdentifier(d));return g.setFonts(f.getFonts()),m.setFonts(b(b({},m.getFonts()),f.getVariationsByIdentifier())),g.load().then((()=>{const e=_.getImagePaths().map((t=>({path:t,fullPath:this._ui.getAssetPath(t),image:null})));return m.loadImages(e).then((()=>(_.onImagesLoaded(),t.createTextDesign({position:r,rotation:n,flipHorizontally:o,flipVertically:s,text:a,color:Tc.fromArray(l.rgba),width:c,seed:u,inverted:h,layout:_}))))}))}}Ru.version="3.0.0";class Du extends ae{}Du.prototype.availableOptions={identifier:{type:ft.STRING,required:!0},defaultName:{type:ft.STRING,required:!0},ratio:{type:ft.ALL,required:!1,default:null},selected:{type:ft.BOOLEAN,required:!1},dimensions:{type:ft.VECTOR2,required:!1},lockDimensions:{type:ft.BOOLEAN,required:!1,default:null},forceDimensions:{type:ft.BOOLEAN,required:!1,default:null}};class Iu extends Tu{serialize(t={}){return super.serialize(t).then((t=>(t.meta={platform:"html5",version:this._editor.getSDK().version,createdAt:Ac.ISODateString(new Date)},t.image=t.inputImage,delete t.inputImage,t)))}_serializeSticker(t,e){const i=super._serializeSticker(t,e);return i.options.alpha=e.getAlpha(),i.options.tintColor&&(i.options.tintColor={rgba:i.options.tintColor}),i}_serializeText(t,e){const i=super._serializeText(t,e);return i.options.color={rgba:i.options.color},i.options.backgroundColor={rgba:i.options.backgroundColor},i.options.flipHorizontally=!1,i.options.flipVertically=!1,delete i.options.fontWeight,i}_serializePath(t){const e=super._serializePath(t);delete e.hardness,delete e.size,delete e.color;const i=t.getBrush();e.brush=i.serializeOptions(["identifier","size","color"],!0),void 0===e.brush.identifier&&delete e.brush.identifier,e.brush.color={rgba:e.brush.color};const r=i.getOption("hardness");return"undefined"!==r&&(e.brush.hardness=r),e}_serializeFrameOperation(t,e){super._serializeFrameOperation(t,e);const i=e.filter((t=>"sprite"===t.type));let r;if(i.length){r=i.pop();const e=r.options.sprites.filter((t=>"frame"===t.type))[0];t.getTintColor().equals(new Tc(1,1,1,0))||(e.options.tintColor={rgba:t.serializeOption("tintColor",!0)});const n=t.serializeOptions(["scale","alpha"],!0);e.options=b(b({},e.options),n),e.options.size=e.options.scale,delete e.options.scale}}_serializeTransformOperation(t){const e=super._serializeTransformOperation(t);if(t._ratio){let i;i=t._ratio instanceof Du?t._ratio.getIdentifier():t._ratio.identifier,e.options.meta={identifier:i}}return delete e.options.scale,e}_serializeAdjustmentsOperation(t){const e=super._serializeAdjustmentsOperation(t),{availableOptions:i}=t,r={};return["gamma","whites","blacks","temperature"].forEach((e=>{const n=i[e],o=t.getOption(e),{minValue:s,midValue:a,maxValue:l}=n;r[e]=o<=a?(o-s)/(a-s)-1:(o-a)/(l-a)})),e.options=b(b({},e.options),r),e}_serializeOperation(t,e){switch(t.constructor.identifier){case"mirrored-focus":return this._serializeMirroredFocusOperation(t);case"linear-focus":return this._serializeLinearFocusOperation(t);case"blur":return this._serializeBlurOperation(t);default:return super._serializeOperation(t,e)}}_serializeMirroredFocusOperation(t){return{type:"focus",options:{type:"mirrored",options:t.serializeOptions(["start","end","blurRadius","size","gradientSize"],!0)}}}_serializeLinearFocusOperation(t){const e=t.serializeOptions(["controlPoint1","controlPoint2","blurRadius"],!0);return e.start=e.controlPoint1,delete e.controlPoint1,e.end=e.controlPoint2,delete e.controlPoint2,{type:"focus",options:{type:"linear",options:e}}}_serializeBlurOperation(t){return{type:"focus",options:{type:"gaussian",options:t.serializeOptions(["blurRadius"],!0)}}}}Iu.version="3.0.0";class Ou extends Ru{_deserializeTextDesign(t,e){const{options:i}=e,{position:r,rotation:n,flipHorizontally:o,flipVertically:s,text:a,color:l,width:c,seed:u,inverted:h}=i;let{identifier:d}=i;d===Pc.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?d=Pc.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:d===Pc.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(d=Pc.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);const p=new Zc(this._ui,this._getOptions("textdesign")),f=new $c(this._ui,{fonts:bc.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),{AssetManager:m}=t.constructor.TextDesignSprite,g=this._ui.getFontLoader(),_=new(p.getLayoutByIdentifier(d));return g.setFonts(f.getFonts()),m.setFonts(b(b({},m.getFonts()),f.getVariationsByIdentifier())),g.load().then((()=>{const e=_.getImagePaths().map((t=>({path:t,fullPath:this._ui.getAssetPath(t),image:null})));return m.loadImages(e).then((()=>(_.onImagesLoaded(),t.createTextDesign({position:r,rotation:n,flipHorizontally:o,flipVertically:s,text:a,color:Tc.fromArray(l.rgba),width:c,seed:u,inverted:h,layout:_}))))}))}}Ou.version="3.1.0";class Au extends Iu{_serializeTextDesign(t,e){const i=e.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted"],!0);i.color={rgba:i.color};const r=e.getLayout();return r&&(i.identifier=r.constructor.identifier),{type:"textdesign",options:i}}}Au.version="3.1.0";class Fu extends Ou{_deserializeTextDesign(t,e){const{options:i}=e,{position:r,rotation:n,flipHorizontally:o,flipVertically:s,text:a,color:l,width:c,seed:u,inverted:h}=i;let{identifier:d}=i;d===Pc.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignBlocksLight.identifier?d=Pc.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignBlocksLightV310.identifier:d===Pc.Operations.SpriteOperation.TextDesignSprite.Layouts.TextDesignSunshine.identifier&&(d=Pc.Operations.SpriteOperation.TextDesignSprite.LegacyLayouts.TextDesignSunshineV310.identifier);const p="padding"in i?i.padding/c:-1,f=new Zc(this._ui,this._getOptions("textdesign")),m=new $c(this._ui,{fonts:bc.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),{AssetManager:g}=t.constructor.TextDesignSprite,_=this._ui.getFontLoader(),y=new(f.getLayoutByIdentifier(d));return _.setFonts(m.getFonts()),g.setFonts(b(b({},g.getFonts()),m.getVariationsByIdentifier())),_.load().then((()=>{const e=y.getImagePaths().map((t=>({path:t,fullPath:this._ui.getAssetPath(t),image:null})));return g.loadImages(e).then((()=>(y.onImagesLoaded(),t.createTextDesign({position:r,rotation:n,flipHorizontally:o,flipVertically:s,text:a,color:Tc.fromArray(l.rgba),width:c,seed:u,inverted:h,layout:y,padding:p}))))}))}}Fu.version="3.2.0";class Mu extends Au{_serializeTextDesign(t,e){const i=e.serializeOptions(["position","rotation","flipHorizontally","flipVertically","text","color","width","seed","inverted","padding"],!0);i.color={rgba:i.color};const r=e.getLayout();return r&&(i.identifier=r.constructor.identifier),i.padding*=i.width,{type:"textdesign",options:i}}}Mu.version="3.2.0";class Pu extends Fu{_deserializeOperation(t){return super._deserializeOperation(t)}_deserializeOrientationOperation(t){const{options:e}=t,i=this._editor.operations.getOrCreate("orientation");return i?(i.set(e),Promise.resolve(i)):Promise.resolve()}}Pu.version="3.4.0";class Bu extends Mu{_serializeOperation(t,e){switch(t.constructor.identifier){case"artfilter":return this._serializeStyle(t);default:return super._serializeOperation(t,e)}}_serializeOrientationOperation(t){return{type:"orientation",options:t.serializeOptions(["flipVertically","flipHorizontally","rotation"],!0)}}_serializeStyle(t){const{identifier:e,intensity:i,blendMode:r}=t.getOptions(),{tileEdgeLength:n,overlappingFactor:o}=t.getStyleTransferModel().getOptions();return{type:"artFilter",options:{identifier:e,intensity:i,blendMode:Su[r],tileEdgeLength:n,overlappingFactor:o}}}}Bu.version="3.4.0";class zu extends Pu{_deserializeTextDesign(t,e){const{options:i}=e,{position:r,rotation:n,flipHorizontally:o,flipVertically:s,text:a,color:l,width:c,seed:u,inverted:h,identifier:d}=i,p="padding"in i?i.padding/c:-1,f=new Zc(this._ui,this._getOptions("textdesign")),m=new $c(this._ui,{fonts:bc.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0}),{AssetManager:g}=t.constructor.TextDesignSprite,_=this._ui.getFontLoader(),y=new(f.getLayoutByIdentifier(d));return _.setFonts(m.getFonts()),g.setFonts(b(b({},g.getFonts()),m.getVariationsByIdentifier())),_.load().then((()=>{const e=y.getImagePaths().map((t=>({path:t,fullPath:this._ui.getAssetPath(t),image:null})));return g.loadImages(e).then((()=>(y.onImagesLoaded(),t.createTextDesign({position:r,rotation:n,flipHorizontally:o,flipVertically:s,text:a,color:Tc.fromArray(l.rgba),width:c,seed:u,inverted:h,layout:y,padding:p}))))}))}}zu.version="3.5.0";class Lu extends Bu{}Lu.version="3.5.0";class Nu extends zu{_deserializeAdjustmentsOperation(t){const{AdjustmentsOperation:e}=Pc.Operations;return super._deserializeAdjustmentsOperation(t).then((i=>{if(!i)return null;const{options:r}=t,n="sharpness",o={};if(void 0===r[n])return;const{minValue:s,midValue:a,maxValue:l}=e.prototype.availableOptions[n];let c=r[n];return c=c<0?a+(a-s)*c:a+(l-a)*c,o[n]=c,i.set(o),i}))}}Nu.version="3.6.0";class Uu extends Lu{_serializeAdjustmentsOperation(t){const e=super._serializeAdjustmentsOperation(t),i="sharpness",{availableOptions:r}=t,n={},o=r[i],s=t.getOption(i),{minValue:a,midValue:l,maxValue:c}=o;return n[i]=s<=l?(s-a)/(l-a)-1:(s-l)/(c-l),e.options=b(b({},e.options),n),e}}Uu.version="3.6.0";class ju extends Nu{deserialize(){return this._validateVersion().then((()=>this._deserializeAssetLibrary())).then((()=>this._deserializeInputImage())).then((()=>this._deserializeOperations()))}_deserializeAssetLibrary(){return new Promise(((t,e)=>{const i=this._data;if(!i.assetLibrary)return void t();const{assets:r}=i.assetLibrary,n=[];for(const t in r)n.push(this._deserializeCustomAssets(t,r[t]));return Promise.all(n).then((()=>{t()})).catch((t=>{console.error(t),e(t)}))}))}_deserializeCustomAssets(t,e){switch(t){case"stickers":return this._deserializeCustomStickerAssets(e);default:return Promise.reject(new Error(`Unknown asset type: ${t}`))}}_deserializeCustomStickerAssets(t){let e="none";const i=this._editor.getOptions().editor;i&&i.controlsOptions&&i.controlsOptions.sticker&&(e=i.controlsOptions.sticker.customStickerTintMode||"none");const r=t.map((t=>new Promise(((i,r)=>{const{identifier:n,raster:o}=t,s=void 0!==t.svg;let a=`data:${o.type};base64,${o.data}`,l=new ur;l.onload=()=>{const r=this._editor.getSDK();l=r.correctExifOrientation(l),l.toDataURL&&(a=l.toDataURL());let o={data:"",width:1,height:1};o=this._stickerManager.renderStickerThumbnailFromImage(l);const c={identifier:n,defaultName:t.name||"",tintMode:e,images:{mediaBase:{uris:[a],rawData:!0,isSVG:s,width:l.width,height:l.height},mediaThumb:{uris:[o.data],rawData:!0,width:o.width,height:o.height}}};if(s){const e=`data:image/svg+xml;base64,${t.svg.data}`;c.images.mediaBase.uris.push(e)}i(c)},l.onerror=()=>{r(new Error(`Invalid base64 data: ${a}`))},l.src=a}))));return Promise.all(r).then((t=>{this._editor.getDynamicAssetsLibrary().setAssets("sticker",t),this._stickerManager.reload()}))}}ju.version="3.7.0";class Hu extends Uu{serialize(t={}){return super.serialize(t).then((t=>this._serializeAssetLibrary(t).then((t=>t))))}_serializeAssetLibrary(t){if(!this._editor.getDynamicAssetsLibrary)return Promise.resolve(t);const e=this._editor.getDynamicAssetsLibrary(),i=this._serializeCustomStickerAssets(t,e);return 0===i.length||(t.assetLibrary={assets:{stickers:i}}),Promise.resolve(t)}_serializeCustomStickerAssets(t,e){const i=e.getAssets("sticker");if(0===i.length)return[];const r=t.operations.filter((t=>"sprite"===t.type)).flatMap((t=>t.options.sprites)).filter((t=>"sticker"===t.type)).map((t=>t.options.identifier)),n={};r.forEach((t=>{n[t]=!0}));return i.filter((t=>n[t.identifier])).map((t=>{const{identifier:e,defaultName:i,images:r}=t,n=r.mediaBase.uris[0],{isSVG:o}=r.mediaBase,s=/^data:(image\/(jpeg|png));base64,(.*)$/g.exec(n),a={identifier:e,name:i,raster:{type:s[1],data:s[3]}};return i&&(a.name=i),o&&(a.svg={data:r.mediaBase.uris[1].replace(/^data:image\/svg\+xml;base64,/g,"")}),a}))}}Hu.version="3.7.0";class Wu extends ju{}Wu.version="3.8.0";class Gu extends Hu{_serializeSticker(t,e){const i=super._serializeSticker(t,e);return i.options.tintMode=e.getTintMode(),i}}Gu.version="3.8.0";class Vu extends Wu{_deserializeTransformOperation(t){return super._deserializeCropOperation(t).then((t=>{if(!t)return;const e=Ac.Array.find(this._data.operations,(t=>"orientation"===t.type));if(e){const{options:i}=e;t.rotate(i.rotation),i.flipHorizontally&&(t.flip("horizontal"),t.setRotation(-1*t.getRotation())),i.flipVertically&&(t.flip("vertical"),t.setRotation(-1*t.getRotation()))}return t._ratio=null,t}))}_deserializeText(t,e){const{options:i}=e,{fontSize:r,lineHeight:n,fontIdentifier:o,alignment:s,rotation:a,maxWidth:l,color:c,backgroundColor:u}=i,h=this._ui.getFontLoader();let d=this._fontManager.getVariationByIdentifier(o);return d?h.setFonts([d.getFont()]):d=this._fontManager.getDefaultVariation(),h.load().then((()=>{const e=t.getInputDimensions(!1),o=e.min(),h=e.x,p=e.y,f=l*o/h,m=r*o/p,g=t.createText({fontSize:m,lineHeight:n,fontFamily:d.getFontFamily(),fontWeight:d.getFontWeight(),fontIdentifier:d.getIdentifier(),textMetrics:d.getTextMetrics(),alignment:s,rotation:a,maxWidth:f,text:i.text,color:Tc.fromArray(c.rgba),backgroundColor:Tc.fromArray(u.rgba),position:zc.fromObject(i.position)});return g._edited=!0,g}))}}Vu.version="3.9.0";const $u=2*Math.PI;class Zu extends Gu{_serializeTransformOperation(t){const{operations:e}=this._editor;if(e.exists("orientation")){t=t.clone();const i=e.get("orientation");i.getFlipVertically()&&(t.flip("vertical"),t.setRotation(-1*t.getRotation())),i.getFlipHorizontally()&&(t.flip("horizontal"),t.setRotation(-1*t.getRotation())),t.rotate(-i.getRotation())}const i=t.serializeOptions(["start","end","rotation","textureScale"],!0);i.rotation=(i.rotation+$u)%$u,1!==i.textureScale&&(i.dimensions=t.getNewDimensions(t.getInputDimensions(!1))),delete i.textureScale;const r={type:"transform",options:i};if(t._ratio){let e;e=t._ratio instanceof Du?t._ratio.getIdentifier():t._ratio.identifier,r.options.meta={identifier:e}}return delete r.options.scale,r}_serializeText(t,e){const i=t.getInputDimensions(!1),r=super._serializeText(t,e);return r.options.fontSize=r.options.fontSize*i.y/i.min(),r}}Zu.version="3.9.0";var Xu=class extends Rc{constructor(t,e,i,r=!1){super(),this._ui=t,this._options=e,this._mediator=i,this._shallow=r,r||(this._initSDK(),this.operations=new qc(this,this._sdk,this._mediator))}_initFonts(){const t=Ac.defaults(this._options.editor.controlsOptions.text,{additionalFonts:[],replaceFonts:!1,availableVariations:null});this._fontManager=new $c(this._ui,t);const e=this._fontManager.getFonts(),i=this._ui.getFontLoader();i.setFonts(e),i.load()}setImage(t=this._options.editor.image,e=!0){e&&this.reset();let i=null;i=this._sdk.parseExif(t),this._setImage(t,i),this._initWatermark()}_initWatermark(){this._options.editor.watermarkImage&&(this._watermarkOperation=this.operations.getOrCreate("watermark",{image:this._options.editor.watermarkImage}))}_initSDK(){const{logLevel:t,displayWelcomeMessage:e,debug:i,license:r,crossOrigin:n}=this._options,{smoothDownscaling:o,smoothUpscaling:s,preferredRenderer:a,pixelRatio:l,transparent:c,clearColor:u}=this._options.editor;let h;Array.isArray(u)?h=Tc.fromArray(u):"string"==typeof u?h=Tc.fromHex(u):u instanceof Tc&&(h=u.clone());const d={logLevel:t,debug:i,displayWelcomeMessage:e,pixelRatio:l,smoothDownscaling:o,smoothUpscaling:s,transparent:c,crossOrigin:n,clearColor:h,license:r};this._sdk=new Pc(a,d)}getMaxMegapixels(){const{maxMegaPixels:t}=this._options.editor;return t}getCrossOrigin(){return Ac.getCrossOriginValue(this._options.crossOrigin||"anonymous")}getOutputDimensions(t=!1){return this._sdk.getOutputDimensions(t)}getOutputTextureDimensions(t=!1){return this._sdk.getOutputTextureDimensions(t)}getFinalDimensions(t=!1){return this._sdk.getFinalDimensions(t)}_setImage(t=this._options.editor.image,e=null){this._sdk.setAllOperationsToDirty(),this._options.editor.image=t,this._sdk.setImage(t,e)}_ensureImageIsResized(){const t=this._sdk.getImage(),e=this._sdk.getRenderer(),i=this.getMaxMegapixels(),r=i?1e6*i:null,n=e.getMaxDimensions(),o=new Kc(t,r,n);return!this._resizedImage&&o.needsResize()?o.resize().then((({canvas:t,dimensions:e,reason:i})=>(this._resizedImage=t,this._sdk.setImage(t),t))):Promise.resolve(t)}export(t=!1){return this._watermarkOperation&&this._watermarkOperation.setEnabled(!1),this._sdk.setAllOperationsToDirty(),this._ensureImageIsResized().then((e=>{const i=this._options.editor.export;return new Yc(this._sdk,i,t).export().then((t=>(this.emit("export",t),this._mediator.emit(bc.EVENTS.EXPORT,t,this),this._watermarkOperation&&(this._watermarkOperation.setEnabled(!0),this._sdk.render()),this._sdk.setAllOperationsToDirty(),t)))}))}broadcastTransform(t,e){const i=new Pc.Operations.TransformOperation.TransformChange(t,e);["sprite","selective-blur","radial-focus","mirrored-focus","linear-focus","blur"].forEach((t=>{const e=this.operations.get(t);e&&e.transform(i)}))}broadcastFlip(t){["mirrored-focus","radial-focus","linear-focus","sprite","selective-blur"].forEach((e=>{const i=this.operations.get(e);i&&i.flip(t)}))}broadcastRotate(t){["transform","mirrored-focus","linear-focus","radial-focus","sprite","selective-blur"].forEach((e=>{const i=this.operations.get(e);i&&i.rotate(t)}))}_initSerializers(){this._serializers={"1.0.0":j().default,"1.0.1":H().default,"2.0.0":W().default,"3.0.0":G().default,"3.1.0":V().default,"3.2.0":$().default,"3.4.0":Z().default,"3.5.0":X().default,"3.6.0":Y().default,"3.7.0":q().default,"3.8.0":K().default,"3.9.0":Q().default}}serialize(t={},e="3.9.0"){const i=this._serializers[e];if(!i)return Promise.reject(new Error(`No serializer for version ${e} found.`));return new i(this).serialize(t)}deserialize(t){const e=this._serializers[t.version];if(!e)return Promise.reject(new Error(`No serializer for version ${t.version} found.`));return new e(this).deserialize(t)}save(t=!1,e=!1){const i=this._options.editor.save;return this.serialize({image:e}).then((e=>{const r=JSON.stringify(e,null,2);if(t){const t=`data:text/json;charset=utf-8;base64,${window.encodeURI(window.btoa(r))}`;Xc.downloadDataURL(t,i.fileBasename)}return r}))}reset(){this._sdk.reset(),this.operations.reset()}dispose(){this.stop(),this._sdk.dispose()}getRenderer(){return this._sdk.getRenderer()}getSDK(){return this._sdk}getInputDimensions(){return this._sdk.getInputDimensions()}getImage(){return this._sdk.getImage()}getOptions(){return this._options}getUI(){return this._ui}getMediator(){return this._mediator}};const Yu=t=>Ac.byteArrayToString(Cc.decode(t));class qu extends Rc{constructor(t={}){super(),this._mediator=new Rc,this._fontLoader=new ou(this),this._options=t,this._initOptions(),this._initEvents(),this._disposed=!1,this._isReady=!1,this._editor=new Xu(this,this._options,this._mediator),this._options.editor.image&&this._editor.setImage(this._options.editor.image),this._mediator.once(bc.EVENTS.EDITOR_READY,(()=>{this._isReady=!0})),Mt.setLevel(this._options.logLevel),this._v()}export(...t){return this._editor.export(...t)}serialize(...t){return this._editor.serialize(...t)}deserialize(t){return this._editor.deserialize(t)}getEditor(){return this._editor}isReady(){return this._isReady}onReady(t){this._isReady?t():this._mediator.once(bc.EVENTS.EDITOR_READY,t)}createFilter(t){return new Uc(this,this._getOptions("filter")).instantiateFilterWithIdentifier(t)}getTextDesignLayoutByID(t){return new(new Zc(this,this._getOptions("textDesign")).getLayoutByIdentifier(t))}getTextDesignAssetManager(){return Pc.Operations.SpriteOperation.TextDesignSprite.AssetManager}getTextDesignFontManager(){return new $c(this,{fonts:bc.DEFAULTS.TEXT_DESIGN_FONTS,replaceFonts:!0,isTextDesign:!0})}_getOptions(t){const e=this.getEditor(),{controls:i}=e;let r={};i&&i.get(t)&&(r=i.get(t).defaultOptions);const n=e.getOptions();return Ac.deepDefaults({},n.editor.controlsOptions[t]||{},r)}_initOptions(){if(this._options=Ac.defaults(this._options,{language:"en",logLevel:"warn",crossOrigin:"anonymous",editor:{},assets:{},responsive:!1,preloader:!0,autoRun:!0}),this._options.editor=Ac.defaults(this._options.editor||{},{enableZoom:!0,enableDrag:!0,enableExport:!0,enableKeyboardControls:!0,enablePositionSnapping:!0,enableRotationSnapping:!0,enableSave:!1,enableLoad:!1,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,preferredRenderer:"webgl",transparent:!0,clearColor:[0,0,0,0],displayResizeMessage:!0,maxMegaPixels:{},displayCloseButton:!1,undoMode:"global",defaultControl:"filter",forceCrop:!1,snappingOptions:{},tools:["transform","filter","adjustments","focus","text","textdesign","sticker","brush","frame","overlay","library","artfilter"],controlsOrder:[["library"],["artfilter","transform","filter","adjustments","focus"],["text","textdesign","sticker","brush","frame","overlay"]],operationsOrder:["exif-orientation","artfilter","orientation","transform","filter","adjustments","radial-focus","mirrored-focus","linear-focus","blur","selective-blur","overlay","sprite","frame","watermark"],controlsOptions:{focus:{highQualityCanvasBlur:!1}}}),this._options.editor.snappingOptions=Ac.defaults(this._options.editor.snappingOptions,{position:{},rotation:{}}),this._options.editor.snappingOptions.position=Ac.defaults(this._options.editor.snappingOptions.position,{padding:{},threshold:20}),this._options.editor.snappingOptions.position.padding=Ac.defaults(this._options.editor.snappingOptions.position.padding,{left:.1,right:.1,top:.1,bottom:.1}),this._options.editor.snappingOptions.rotation=Ac.defaults(this._options.editor.snappingOptions.rotation,{angles:[0,45,90,135,180,225,270,315],threshold:20}),this._options.editor.controlsOptions.focus=Ac.defaults(this._options.editor.controlsOptions.focus,{highQualityCanvasBlur:!1}),this._options.editor.maxMegaPixels=Ac.defaults(this._options.editor.maxMegaPixels,{mobile:5,desktop:10}),this._options.editor.export=Ac.defaults(this._options.editor.export||{},{format:"image/png",type:Fc.IMAGE,download:!0,fileBasename:"photoeditorsdk-export",quality:.8}),this._options.editor.save=Ac.defaults(this._options.editor.save||{},{format:"text/json",download:!0,fileBasename:"photoeditorsdk-save"}),this._options.extensions=Ac.defaults(this._options.extensions||{},{languages:{},operations:[],controls:[]}),this._options.assets=Ac.defaults(this._options.assets||{},{baseUrl:"assets",resolver:null}),!(this._options.editor.image instanceof window.Image)){const t=new window.Image;this._options.editor.image&&(t.src=this._options.editor.image,this._options.editor.image=t)}}_v(){return!!this[Yu("X29wdGlvbnM=")][Yu("bGljZW5zZQ==")]||(Mt.error(Yu("TGljZW5zaW5n"),Yu("Tm8gYGxpY2Vuc2VgIG9wdGlvbiBnaXZlbg==")),Mt.error(Yu("TGljZW5zaW5n"),Yu("SW4gY2FzZSB5b3UgZG9uJ3QgaGF2ZSBhIGxpY2Vuc2UgeWV0LCBwbGVhc2UgY29udGFjdCBvdXIgc2FsZXMgc3RhZmYgYXQgc2FsZXNAcGhvdG9lZGl0b3JzZGsuY29tIHRvIG9idGFpbiBhIGxpY2Vuc2Ugb3IgbG9nIGluIHRvIHlvdXIgY3VzdG9tZXIgZGFzaGJvYXJkLg==")),!1)}_initEvents(){this._mediator.pipeEvents(this)}_disposeEvents(){this._mediator.unpipeEvents(this)}setImage(t){this._editor.setImage(t)}getAssetPath(t,e=!1,i=!1){let{baseUrl:r,resolver:n}=this._options.assets,o=`${r}/${t}`;n=n||(t=>t),t.match(/(ftp|http|https):\/\//)&&(o=t);const s=t.replace(/assets\//,"").split("/");let a={};switch(s[0]){case"art-filters":return a={identifier:s[1],type:s[2].split(".")[0]},n("art-filter",a);case"filters":return a={identifier:s[1].replace(/\.png$/g,"")},n("filter",a);case"fonts":return a={identifier:s[1].replace(/\.(woff|otf|ttf)$/g,"")},n("font",a);case"frames":return a={identifier:s[1],filename:s[2]},n("frame",a);case"overlays":return a={identifier:s[1].replace(/\.(png|jpg|jpeg)$/g,"")},n("overlay",a);case"stickers":{const t=s[3].endsWith(".svg"),e="thumbs"===s[3];return a={category:s[1],identifier:(t?s[3]:s[4]).replace(/\.(png|svg)$/g,""),variant:t?"svg":e?"thumb":"base"},n("sticker",a)}case"text-design":return a={type:"fonts"===s[1]?"font":"image",identifier:s[2].replace(/\.(png|otf|ttf|woff2?)$/g,"")},n("text-design",a)}return null!=n&&(o=n(o)),o}getFontLoader(){return this._fontLoader}dispose(){if(this._disposed)throw new Error("This instance of PhotoEditorSDK is already disposed.");this._disposed=!0,this._disposeEvents()}render(t){return this.deserialize(t).then((()=>this.export()))}}qu.prototype.identifier="engine-wrapper",qu.Constants=bc,qu.Events=bc.EVENTS,qu.Utils=kc,qu.JSONLoader=Nt,qu.SDK=Pc;const Ku=()=>window&&window.navigator&&window.navigator.userAgent||"",Qu=(t=Ku())=>-1!==t.indexOf("Edge"),Ju=(t=Ku())=>!!t.match(/msie|trident/i),th=new RegExp(/\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC68\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC68\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC68\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC68\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69(?:\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68\u200D(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68\u200D\u2764\uFE0F\u200D\uD83D\uDC68|\uD83D\uDC69\u200D\u2764\uFE0F\u200D(?:\uD83D[\uDC68\uDC69])|\uD83E\uDDD1\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC68(?:\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|(?:\uD83D[\uDC67-\uDC69])\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]\uFE0F)|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83C\uDFF3\uFE0F\u200D\u26A7|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF]))\u200D[\u2695\u2696\u2708]\uFE0F|\uD83D\uDC69\u200D(?:\uD83D[\uDC67\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D\uDC3B\u200D\u2744|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDF])\u200D[\u2640\u2642])\uFE0F|\uD83E\uDDD1\u200D[\u2695\u2696\u2708]\uFE0F|(?:\uD83D[\uDC68\uDC69])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D[\u2695\u2696\u2708]\uFE0F)|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC08\u200D\u2B1B|\uD83E\uDDD1\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDC66\uDC67\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC3\uDFC7]|\uD83D[\uDC43\uDC4A-\uDC4C\uDC4F\uDC50\uDC66-\uDC69\uDC6B-\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD7A\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270C\u270D]|\uD83C[\uDFC2\uDFC4\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC46-\uDC49\uDC4D\uDC4E\uDD74\uDD75\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9\u23EA\u23ED-\u23EF\u23F1-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7\u26F8\u26FA\u26FD\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2753\u2757\u2763\u2764\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE1A\uDE2F\uDE37\uDF0D-\uDF0F\uDF15\uDF1C\uDF21\uDF24-\uDF2C\uDF36\uDF78\uDF7D\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFA7\uDFAC-\uDFAE\uDFC6\uDFCD\uDFCE\uDFD4-\uDFE0\uDFED\uDFF3\uDFF5\uDFF7]|\uD83D[\uDC08\uDC15\uDC1F\uDC26\uDC3F\uDC41\uDC53\uDC6A\uDC7D\uDCA3\uDCB0\uDCB3\uDCBB\uDCBF\uDCCB\uDCDA\uDCDF\uDCE4-\uDCE6\uDCEA-\uDCED\uDCF7\uDCF9-\uDCFB\uDCFD\uDD08\uDD0D\uDD12\uDD13\uDD49\uDD4A\uDD50-\uDD67\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDE10\uDE87\uDE8D\uDE91\uDE94\uDE98\uDEAD\uDEB2\uDEB9\uDEBA\uDEBC\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|[\u23E9-\u23F3\u23F8-\u23FA\u25FB-\u25FE\u2614\u2615\u267F\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26C8\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]/g),eh=t=>{try{return new URL(t),!0}catch(t){return!1}};var ih=[{identifier:"basics",name:"Basics",items:[{identifier:d.BRIGHTNESS},{identifier:d.CONTRAST},{identifier:d.SATURATION},{identifier:d.GAMMA}]},{identifier:"refinements",name:"Refinements",items:[{identifier:d.CLARITY},{identifier:d.SHADOWS},{identifier:d.HIGHLIGHTS},{identifier:d.EXPOSURE},{identifier:d.BLACKS},{identifier:d.WHITES},{identifier:d.TEMPERATURE},{identifier:d.SHARPNESS}]}];var rh=[{identifier:it.DuoTone,name:"DuoTone",thumbnailURI:"./categories/duotone.jpg",items:[{identifier:et.Desert,name:"Desert",thumbnailURI:"./items/imgly_duotone_desert.jpg",lightColor:"#e1de9a",darkColor:"#cb2129",defaultIntensity:.5},{identifier:et.Peach,name:"Peach",thumbnailURI:"./items/imgly_duotone_peach.jpg",lightColor:"#e9abb8",darkColor:"#0040ff",defaultIntensity:.5},{identifier:et.Clash,name:"Clash",thumbnailURI:"./items/imgly_duotone_clash.jpg",lightColor:"#f41a0f",darkColor:"#23007c",defaultIntensity:.5},{identifier:et.Plum,name:"Plum",thumbnailURI:"./items/imgly_duotone_plum.jpg",lightColor:"#74d7ff",darkColor:"#23007c",defaultIntensity:.5},{identifier:et.Breezy,name:"Breezy",thumbnailURI:"./items/imgly_duotone_breezy.jpg",lightColor:"#68fdff",darkColor:"#c20000",defaultIntensity:.5},{identifier:et.DeepBlue,name:"Deep Blue",thumbnailURI:"./items/imgly_duotone_deepblue.jpg",lightColor:"#2de9eb",darkColor:"#58007c",defaultIntensity:.5},{identifier:et.Frog,name:"Frog",thumbnailURI:"./items/imgly_duotone_frog.jpg",lightColor:"#5bff60",darkColor:"#7f23a9",defaultIntensity:.5},{identifier:et.Sunset,name:"Sunset",thumbnailURI:"./items/imgly_duotone_sunset.jpg",lightColor:"#f8ea46",darkColor:"#c400be",defaultIntensity:.5}]},{identifier:it.BW,name:"B & W",thumbnailURI:"./categories/b&w.jpg",items:[{identifier:et.AD1920,name:"1920 A.D.",thumbnailURI:"./items/imgly_lut_ad1920.jpg",lutURI:"./items/imgly_lut_ad1920_5_5_128.png",defaultIntensity:1},{identifier:et.Greyed,name:"Greyed",thumbnailURI:"./items/imgly_lut_bw.jpg",lutURI:"./items/imgly_lut_bw_5_5_128.png",defaultIntensity:1},{identifier:et.Dusty,name:"Dusty",thumbnailURI:"./items/imgly_lut_x400.jpg",lutURI:"./items/imgly_lut_dusty_5_5_128.png",defaultIntensity:1},{identifier:et.Litho,name:"Litho",thumbnailURI:"./items/imgly_lut_litho.jpg",lutURI:"./items/imgly_lut_litho_5_5_128.png",defaultIntensity:1},{identifier:et.Sepia,name:"Sepia",thumbnailURI:"./items/imgly_lut_sepiahigh.jpg",lutURI:"./items/imgly_lut_sepia_5_5_128.png",defaultIntensity:1},{identifier:et.Weathered,name:"Weathered",thumbnailURI:"./items/imgly_lut_plate.jpg",lutURI:"./items/imgly_lut_weathered_5_5_128.png",defaultIntensity:1},{identifier:et.HardStuff,name:"Hard Stuff",thumbnailURI:"./items/imgly_lut_sin.jpg",lutURI:"./items/imgly_lut_hard_stuff_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8}]},{identifier:it.Vintage,name:"Vintage",thumbnailURI:"./categories/vintage.jpg",items:[{identifier:et.Polaroid,name:"Polaroid",thumbnailURI:"./items/imgly_lut_blues.jpg",lutURI:"./items/imgly_lut_polaroid_5_5_128.png",defaultIntensity:1},{identifier:et.Sunny70s,name:"Sunny 70s",thumbnailURI:"./items/imgly_lut_front.jpg",lutURI:"./items/imgly_lut_sunny_70s_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:et.Oldtimer,name:"Oldtimer",thumbnailURI:"./items/imgly_lut_texas.jpg",lutURI:"./items/imgly_lut_oldtimer_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:et.Inferno,name:"Inferno",thumbnailURI:"./items/imgly_lut_celsius.jpg",lutURI:"./items/imgly_lut_inferno_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:et.Snappy,name:"Snappy",thumbnailURI:"./items/imgly_lut_cool.jpg",lutURI:"./items/imgly_lut_snappy_5_5_128.png",defaultIntensity:1}]},{identifier:it.Smooth,name:"Smooth",thumbnailURI:"./categories/smooth.jpg",items:[{identifier:et.Chestnut,name:"Chestnut",thumbnailURI:"./items/imgly_lut_chest.jpg",lutURI:"./items/imgly_lut_chestnut_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:et.Softy,name:"Softy",thumbnailURI:"./items/imgly_lut_winter.jpg",lutURI:"./items/imgly_lut_softly_5_5_128.png",defaultIntensity:1},{identifier:et.Pebble,name:"Pebble",thumbnailURI:"./items/imgly_lut_kdynamic.jpg",lutURI:"./items/imgly_lut_pebble_5_5_128.png",defaultIntensity:1},{identifier:et.Moss,name:"Moss",thumbnailURI:"./items/imgly_lut_fall.jpg",lutURI:"./items/imgly_lut_moss_5_5_128.png",defaultIntensity:1},{identifier:et.Lemon,name:"Lemon",thumbnailURI:"./items/imgly_lut_lenin.jpg",lutURI:"./items/imgly_lut_lemon_5_5_128.png",defaultIntensity:1},{identifier:et.GreenGap,name:"Green Gap",thumbnailURI:"./items/imgly_lut_pola669.jpg",lutURI:"./items/imgly_lut_green_gap_5_5_128.png",defaultIntensity:1}]},{identifier:it.Cold,name:"Cold",thumbnailURI:"./categories/cold.jpg",items:[{identifier:et.Colla,name:"Colla",thumbnailURI:"./items/imgly_lut_elder.jpg",lutURI:"./items/imgly_lut_colla_5_5_128.png",defaultIntensity:1},{identifier:et.Solanus,name:"Solanus",thumbnailURI:"./items/imgly_lut_orchid.jpg",lutURI:"./items/imgly_lut_solanus_5_5_128.png",defaultIntensity:1},{identifier:et.Kalmen,name:"Kalmen",thumbnailURI:"./items/imgly_lut_bleached.jpg",lutURI:"./items/imgly_lut_kalmen_5_5_128.png",defaultIntensity:1},{identifier:et.Joran,name:"Joran",thumbnailURI:"./items/imgly_lut_bleachedblue.jpg",lutURI:"./items/imgly_lut_joran_5_5_128.png",defaultIntensity:1},{identifier:et.Levante,name:"Levante",thumbnailURI:"./items/imgly_lut_breeze.jpg",lutURI:"./items/imgly_lut_levante_5_5_128.png",defaultIntensity:1},{identifier:et.Zephyr,name:"Zephyr",thumbnailURI:"./items/imgly_lut_blueshadows.jpg",lutURI:"./items/imgly_lut_zephyr_5_5_128.png",defaultIntensity:1}]},{identifier:it.Warm,name:"Warm",thumbnailURI:"./categories/warm.jpg",items:[{identifier:et.Golden,name:"Golden",thumbnailURI:"./items/imgly_lut_sunset.jpg",lutURI:"./items/imgly_lut_golden_5_5_128.png",defaultIntensity:1},{identifier:et.LowFire,name:"Low Fire",thumbnailURI:"./items/imgly_lut_eighties.jpg",lutURI:"./items/imgly_lut_low_fire_5_5_128.png",defaultIntensity:1},{identifier:et.Sunrise,name:"Sunrise",thumbnailURI:"./items/imgly_lut_evening.jpg",lutURI:"./items/imgly_lut_sunrise_5_5_128.png",defaultIntensity:1},{identifier:et.FlatBlack,name:"Flat Black",thumbnailURI:"./items/imgly_lut_k2.jpg",lutURI:"./items/imgly_lut_flat_black_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:et.Pumpkin,name:"Pumpkin",thumbnailURI:"./items/imgly_lut_nogreen.jpg",lutURI:"./items/imgly_lut_pumpkin_5_5_128.png",defaultIntensity:1}]},{identifier:it.Legacy,name:"Legacy",thumbnailURI:"./categories/legacy.jpg",items:[{identifier:et.Ancient,name:"Ancient",thumbnailURI:"./items/imgly_lut_ancient.jpg",lutURI:"./items/imgly_lut_ancient_5_5_128.png",defaultIntensity:1},{identifier:et.Candy,name:"Candy",thumbnailURI:"./items/imgly_lut_cottoncandy.jpg",lutURI:"./items/imgly_lut_cottoncandy_5_5_128.png",defaultIntensity:1},{identifier:et.Classic,name:"Classic",thumbnailURI:"./items/imgly_lut_classic.jpg",lutURI:"./items/imgly_lut_classic_5_5_128.png",defaultIntensity:1},{identifier:et.Colorful,name:"Colorful",thumbnailURI:"./items/imgly_lut_colorful.jpg",lutURI:"./items/imgly_lut_colorful_5_5_128.png",defaultIntensity:1},{identifier:et.Creamy,name:"Creamy",thumbnailURI:"./items/imgly_lut_creamy.jpg",lutURI:"./items/imgly_lut_creamy_5_5_128.png",defaultIntensity:1},{identifier:et.Fixie,name:"Fixie",thumbnailURI:"./items/imgly_lut_fixie.jpg",lutURI:"./items/imgly_lut_fixie_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:et.Food,name:"Food",thumbnailURI:"./items/imgly_lut_food.jpg",lutURI:"./items/imgly_lut_food_5_5_128.png",defaultIntensity:1},{identifier:et.Fridge,name:"Fridge",thumbnailURI:"./items/imgly_lut_fridge.jpg",lutURI:"./items/imgly_lut_fridge_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:et.Glam,name:"Glam",thumbnailURI:"./items/imgly_lut_glam.jpg",lutURI:"./items/imgly_lut_glam_5_5_128.png",defaultIntensity:1},{identifier:et.Gobblin,name:"Gobblin",thumbnailURI:"./items/imgly_lut_gobblin.jpg",lutURI:"./items/imgly_lut_gobblin_5_5_128.png",defaultIntensity:1},{identifier:et.Hicon,name:"Hicon",thumbnailURI:"./items/imgly_lut_highcontrast.jpg",lutURI:"./items/imgly_lut_highcontrast_5_5_128.png",defaultIntensity:1},{identifier:et.HighCarb,name:"High Carb",thumbnailURI:"./items/imgly_lut_highcarb.jpg",lutURI:"./items/imgly_lut_highcarb_5_5_128.png",defaultIntensity:1},{identifier:et.K1,name:"K1",thumbnailURI:"./items/imgly_lut_k1.jpg",lutURI:"./items/imgly_lut_k1_5_5_128.png",defaultIntensity:1},{identifier:et.K6,name:"K6",thumbnailURI:"./items/imgly_lut_k6.jpg",lutURI:"./items/imgly_lut_k6_5_5_128.png",defaultIntensity:1},{identifier:et.Keen,name:"Keen",thumbnailURI:"./items/imgly_lut_keen.jpg",lutURI:"./items/imgly_lut_keen_5_5_128.png",defaultIntensity:1},{identifier:et.Lomo,name:"Lomo",thumbnailURI:"./items/imgly_lut_lomo.jpg",lutURI:"./items/imgly_lut_lomo_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:et.Lomo100,name:"Lomo 100",thumbnailURI:"./items/imgly_lut_lomo100.jpg",lutURI:"./items/imgly_lut_lomo100_5_5_128.png",defaultIntensity:1},{identifier:et.Lucid,name:"Lucid",thumbnailURI:"./items/imgly_lut_lucid.jpg",lutURI:"./items/imgly_lut_lucid_5_5_128.png",defaultIntensity:1},{identifier:et.Mellow,name:"Mellow",thumbnailURI:"./items/imgly_lut_mellow.jpg",lutURI:"./items/imgly_lut_mellow_8_8_512.png",defaultIntensity:1,horizontalTileCount:8,verticalTileCount:8},{identifier:et.Neat,name:"Neat",thumbnailURI:"./items/imgly_lut_neat.jpg",lutURI:"./items/imgly_lut_neat_5_5_128.png",defaultIntensity:1},{identifier:et.Pale,name:"Pale",thumbnailURI:"./items/imgly_lut_pale.jpg",lutURI:"./items/imgly_lut_pale_5_5_128.png",defaultIntensity:1},{identifier:et.Pitched,name:"Pitched",thumbnailURI:"./items/imgly_lut_pitched.jpg",lutURI:"./items/imgly_lut_pitched_5_5_128.png",defaultIntensity:1},{identifier:et.PolaSX,name:"Pola SX",thumbnailURI:"./items/imgly_lut_polasx.jpg",lutURI:"./items/imgly_lut_polasx_5_5_128.png",defaultIntensity:1},{identifier:et.Pro400,name:"Pro 400",thumbnailURI:"./items/imgly_lut_pro400.jpg",lutURI:"./items/imgly_lut_pro400_5_5_128.png",defaultIntensity:1},{identifier:et.Quozi,name:"Quozi",thumbnailURI:"./items/imgly_lut_quozi.jpg",lutURI:"./items/imgly_lut_quozi_5_5_128.png",defaultIntensity:1},{identifier:et.Settled,name:"Settled",thumbnailURI:"./items/imgly_lut_settled.jpg",lutURI:"./items/imgly_lut_settled_5_5_128.png",defaultIntensity:1},{identifier:et.Seventies,name:"Seventies",thumbnailURI:"./items/imgly_lut_seventies.jpg",lutURI:"./items/imgly_lut_seventies_5_5_128.png",defaultIntensity:1},{identifier:et.Soft,name:"Soft",thumbnailURI:"./items/imgly_lut_soft.jpg",lutURI:"./items/imgly_lut_soft_5_5_128.png",defaultIntensity:1},{identifier:et.Steel,name:"Steel",thumbnailURI:"./items/imgly_lut_steel.jpg",lutURI:"./items/imgly_lut_steel_5_5_128.png",defaultIntensity:1},{identifier:et.Summer,name:"Summer",thumbnailURI:"./items/imgly_lut_summer.jpg",lutURI:"./items/imgly_lut_summer_5_5_128.png",defaultIntensity:1},{identifier:et.Tender,name:"Tender",thumbnailURI:"./items/imgly_lut_tender.jpg",lutURI:"./items/imgly_lut_tender_5_5_128.png",defaultIntensity:1},{identifier:et.Twilight,name:"Twilight",thumbnailURI:"./items/imgly_lut_twilight.jpg",lutURI:"./items/imgly_lut_twilight_5_5_128.png",defaultIntensity:1}]}];var nh=[{identifier:rt.RADIAL,thumbnailURI:"./items/radial.png"},{identifier:rt.MIRRORED,thumbnailURI:"./items/mirrored.png"},{identifier:rt.LINEAR,thumbnailURI:"./items/linear.png"},{identifier:rt.GAUSSIAN,thumbnailURI:"./items/gaussian.png"}];var oh=[{identifier:"imgly_font_open_sans_bold",fontFamily:"Open Sans",fontWeight:"bold",fontURI:"./fonts/imgly_font_open_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2189,descender:-600}},{identifier:"imgly_font_aleo_bold",fontFamily:"Aleo",fontWeight:"bold",fontURI:"./fonts/imgly_font_aleo_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:805,descender:-195}},{identifier:"imgly_font_amaticsc",fontFamily:"Amatic SC",fontWeight:"normal",fontURI:"./fonts/imgly_font_amaticsc.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1016,descender:-245}},{identifier:"imgly_font_archivo_black",fontFamily:"Archivo",fontWeight:"normal",fontURI:"./fonts/imgly_font_archivo_black.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:878,descender:-210}},{identifier:"imgly_font_bungee_inline",fontFamily:"Bungee Inline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_bungee_inline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:860,descender:-140}},{identifier:"imgly_font_fira_sans_regular",fontFamily:"Fira Sans",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:935,descender:-265}},{identifier:"imgly_font_campton_bold",fontFamily:"Campton Book",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_campton_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:770,descender:-294}},{identifier:"imgly_font_carter_one",fontFamily:"Carter One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_carter_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2264,descender:-890}},{identifier:"imgly_font_codystar",fontFamily:"Codystar",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_codystar.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:953,descender:-255}},{identifier:"imgly_font_galano_grotesque_bold",fontFamily:"Galano Grotesque",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_galano_grotesque_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_krona_one",fontFamily:"Krona One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_krona_one.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2030,descender:-530}},{identifier:"imgly_font_kumar_one_outline",fontFamily:"Kumar One Outline",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_kumar_one_outline.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1137,descender:-642}},{identifier:"imgly_font_lobster",fontFamily:"Lobster",fontWeight:"normal",fontURI:"./fonts/imgly_font_lobster.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1e3,descender:-250}},{identifier:"imgly_font_molle",fontFamily:"Molle",fontWeight:"normal",fontStyle:"italic",fontURI:"./fonts/imgly_font_molle.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1852,descender:-701}},{identifier:"imgly_font_monoton",fontFamily:"Monoton",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_monoton.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2366,descender:-822}},{identifier:"imgly_font_nixie_one",fontFamily:"Nixie One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_nixie_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:926,descender:-210}},{identifier:"imgly_font_notable",fontFamily:"Notable",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_notable.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1143,descender:-157}},{identifier:"imgly_font_ostrich_sans_black",fontFamily:"Ostrich",fontWeight:800,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_black.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_ostrich_sans_bold",fontFamily:"Ostrich",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:950,descender:-250}},{identifier:"imgly_font_oswald_semi_bold",fontFamily:"Oswald SemiBold",googleFamily:"Oswald",fontWeight:600,fontStyle:"normal",fontURI:"./fonts/imgly_font_oswald_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1193,descender:-289}},{identifier:"imgly_font_palanquin_dark_semi_bold",fontFamily:"Palanquin Dark SemiBold",googleFamily:"Palanquin Dark",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_palanquin_dark_semi_bold.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1320,descender:-491}},{identifier:"imgly_font_poppins",fontFamily:"Poppins",fontWeight:"bold",fontStyle:"normal",fontURI:"./fonts/imgly_font_poppins.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1050,descender:-350}},{identifier:"imgly_font_permanent_marker",fontFamily:"Permanent Marker",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_permanent_marker.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:1136,descender:-325}},{identifier:"imgly_font_roboto_black_italic",fontFamily:"Roboto Black",fontWeight:"bold",fontStyle:"italic",googleFamily:"Roboto",fontURI:"./fonts/imgly_font_roboto_black_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light_italic",fontFamily:"Roboto Light",googleFamily:"Roboto",fontWeight:300,fontStyle:"italic",fontURI:"./fonts/imgly_font_roboto_light_italic.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sancreek",fontFamily:"Sancreek",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sancreek.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2104,descender:-738}},{identifier:"imgly_font_stint_ultra_expanded",fontFamily:"Stint Ultra Expanded",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_stint_ultra_expanded.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1853,descender:-483}},{identifier:"imgly_font_trash_hand",fontFamily:"Trash Hand",fontWeight:"normal",fontURI:"./fonts/imgly_font_trash_hand.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:759,descender:-304}},{identifier:"imgly_font_vt323",fontFamily:"VT323",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_vt323.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:800,descender:-200}},{identifier:"imgly_font_yeseva_one",fontFamily:"Yeseva One",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_yeseva_one.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:915,descender:-240}},{identifier:"imgly_font_abril_fatface_regular",fontFamily:"Abril Fatface",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_abril_fatface_regular.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:1058,descender:-291}},{identifier:"imgly_font_amberlight",fontFamily:"Amberlight",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_amberlight.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:750,descender:-250}},{identifier:"imgly_font_montserrat_light",fontFamily:"Montserrat Light",googleFamily:"Montserrat",fontWeight:300,fontStyle:"normal",fontURI:"./fonts/imgly_font_montserrat_light.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:968,descender:-251}},{identifier:"imgly_font_handycheera_regular",fontFamily:"Handycheera",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_handycheera_regular.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2199,descender:-808}},{identifier:"imgly_font_ostrich_sans_heavy",fontFamily:"Ostrich",fontWeight:900,fontStyle:"normal",fontURI:"./fonts/imgly_font_ostrich_sans_heavy.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:674,descender:0}},{identifier:"imgly_font_petit_formal_script",fontFamily:"Petit Formal Script",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_petit_formal_script.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2033,descender:-527}},{identifier:"imgly_font_rasa_500",fontFamily:"Rasa",fontWeight:500,fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_500.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_rasa_regular",fontFamily:"Rasa",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_rasa_regular.woff",format:"woff",textMetrics:{unitsPerEm:2750,ascender:2300,descender:-1050}},{identifier:"imgly_font_roboto_black",fontFamily:"Roboto Black",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_black.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_roboto_light",fontFamily:"Roboto Light",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_roboto_light.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:1900,descender:-500}},{identifier:"imgly_font_sue_ellen_francisco",fontFamily:"Sue Ellen Francisco",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_sue_ellen_francisco.woff",format:"woff",textMetrics:{unitsPerEm:1024,ascender:1362,descender:-634}},{identifier:"imgly_font_ultra",fontFamily:"Ultra",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_ultra.woff",format:"woff",textMetrics:{unitsPerEm:2048,ascender:2066,descender:-561}},{identifier:"imgly_font_wolesbro",fontFamily:"Wolesbro",fontWeight:"normal",fontStyle:"normal",fontURI:"./fonts/imgly_font_wolesbro.woff",format:"woff",textMetrics:{unitsPerEm:1e3,ascender:925,descender:-575}}];const sh=["imgly_font_open_sans_bold","imgly_font_aleo_bold","imgly_font_amaticsc","imgly_font_archivo_black","imgly_font_bungee_inline","imgly_font_campton_bold","imgly_font_carter_one","imgly_font_codystar","imgly_font_fira_sans_regular","imgly_font_galano_grotesque_bold","imgly_font_krona_one","imgly_font_kumar_one_outline","imgly_font_lobster","imgly_font_molle","imgly_font_monoton","imgly_font_nixie_one","imgly_font_notable","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_oswald_semi_bold","imgly_font_palanquin_dark_semi_bold","imgly_font_poppins","imgly_font_permanent_marker","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sancreek","imgly_font_stint_ultra_expanded","imgly_font_trash_hand","imgly_font_vt323","imgly_font_yeseva_one"],ah=["imgly_font_abril_fatface_regular","imgly_font_amberlight","imgly_font_bungee_inline","imgly_font_campton_bold","imgly_font_galano_grotesque_bold","imgly_font_handycheera_regular","imgly_font_montserrat_light","imgly_font_ostrich_sans_black","imgly_font_ostrich_sans_bold","imgly_font_ostrich_sans_heavy","imgly_font_permanent_marker","imgly_font_petit_formal_script","imgly_font_rasa_500","imgly_font_rasa_regular","imgly_font_roboto_black","imgly_font_roboto_light","imgly_font_roboto_black_italic","imgly_font_roboto_light_italic","imgly_font_sue_ellen_francisco","imgly_font_ultra","imgly_font_wolesbro"];var lh=[{identifier:"imgly_frame_dia",name:"Dia",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_dia/imgly_frame_dia_thumb.png",imageGroups:{top:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_top.png",mode:"repeat"}},left:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_left.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_left.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_left.png"},right:{start:"./items/imgly_frame_dia/imgly_frame_dia_top_corner_right.png",mid:"./items/imgly_frame_dia/imgly_frame_dia_right.png",end:"./items/imgly_frame_dia/imgly_frame_dia_bottom_corner_right.png"},bottom:{mid:{image:"./items/imgly_frame_dia/imgly_frame_dia_bottom.png",mode:"repeat"}}}},{identifier:"imgly_frame_art_decor",name:"Art Decor",tintable:!0,layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_art_decor/imgly_frame_art_decor_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_left.png",mid:{image:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom.png",mode:"stretch"},end:"./items/imgly_frame_art_decor/imgly_frame_art_decor_bottom_corner_right.png"}}},{identifier:"imgly_frame_black_passepartout",name:"Black Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_black_passepartout/imgly_frame_black_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_wood_passepartout",name:"Wood Passepartout",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_left.png",mid:{image:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom.png",mode:"stretch"},end:"./items/imgly_frame_wood_passepartout/imgly_frame_wood_passepartout_bottom_corner_right.png"}}},{identifier:"imgly_frame_lowpoly_shadow",name:"Low Poly",layoutMode:"horizontal-inside",thumbnailURI:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_thumb.png",imageGroups:{top:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_top_corner_right.png"},left:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_left.png",mode:"stretch"}},right:{mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_right.png",mode:"stretch"}},bottom:{start:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_left.png",mid:{image:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom.png",mode:"stretch"},end:"./items/imgly_frame_lowpoly_shadow/imgly_frame_lowpoly_shadow_bottom_corner_right.png"}}}];var ch=[{identifier:ot.Golden,name:"Golden",defaultBlendMode:nt.LIGHTEN,overlayURI:"./items/imgly_overlay_golden.jpg",thumbnailURI:"./items/imgly_overlay_golden_thumb.jpg"},{identifier:ot.LightLeak1,name:"Lightleak",defaultBlendMode:nt.SCREEN,overlayURI:"./items/imgly_overlay_lightleak1.jpg",thumbnailURI:"./items/imgly_overlay_lightleak1_thumb.jpg"},{identifier:ot.Rain,name:"Rain",defaultBlendMode:nt.OVERLAY,overlayURI:"./items/imgly_overlay_rain.jpg",thumbnailURI:"./items/imgly_overlay_rain_thumb.jpg"},{identifier:ot.Mosaic,name:"Mosaic",defaultBlendMode:nt.MULTIPLY,overlayURI:"./items/imgly_overlay_mosaic.jpg",thumbnailURI:"./items/imgly_overlay_mosaic_thumb.jpg"},{identifier:ot.Vintage,name:"Vintage",defaultBlendMode:nt.DARKEN,overlayURI:"./items/imgly_overlay_vintage.jpg",thumbnailURI:"./items/imgly_overlay_vintage_thumb.jpg"},{identifier:ot.Paper,name:"Paper",defaultBlendMode:nt.MULTIPLY,overlayURI:"./items/imgly_overlay_paper.jpg",thumbnailURI:"./items/imgly_overlay_paper_thumb.jpg"},{identifier:ot.Bokeh,name:"Bokeh",defaultBlendMode:nt.LIGHTEN,overlayURI:"./items/imgly_overlay_bokeh.jpg",thumbnailURI:"./items/imgly_overlay_bokeh_thumb.jpg"},{identifier:ot.Hearts,name:"Hearts",defaultBlendMode:nt.SCREEN,overlayURI:"./items/imgly_overlay_hearts.jpg",thumbnailURI:"./items/imgly_overlay_hearts_thumb.jpg"},{identifier:ot.LightLeak2,name:"Lightleak 2",defaultBlendMode:nt.LIGHTEN,overlayURI:"./items/imgly_overlay_lightleak2.jpg",thumbnailURI:"./items/imgly_overlay_lightleak2_thumb.jpg"},{identifier:ot.Wood,name:"Wood",defaultBlendMode:nt.MULTIPLY,overlayURI:"./items/imgly_overlay_wood.jpg",thumbnailURI:"./items/imgly_overlay_wood_thumb.jpg"},{identifier:ot.Chop,name:"Chop",defaultBlendMode:nt.MULTIPLY,overlayURI:"./items/imgly_overlay_chop.jpg",thumbnailURI:"./items/imgly_overlay_chop_thumb.jpg"},{identifier:ot.Metal,name:"Metal",defaultBlendMode:nt.OVERLAY,overlayURI:"./items/imgly_overlay_metal.jpg",thumbnailURI:"./items/imgly_overlay_metal_thumb.jpg"},{identifier:ot.Painting,name:"Painting",defaultBlendMode:nt.OVERLAY,overlayURI:"./items/imgly_overlay_painting.jpg",thumbnailURI:"./items/imgly_overlay_painting_thumb.jpg"},{identifier:ot.Grain,name:"Grain",defaultBlendMode:nt.OVERLAY,overlayURI:"./items/imgly_overlay_grain.jpg",thumbnailURI:"./items/imgly_overlay_grain_thumb.jpg"},{identifier:ot.Clouds,name:"Clouds",defaultBlendMode:nt.SOFT_LIGHT,overlayURI:"./items/imgly_overlay_clouds.jpg",thumbnailURI:"./items/imgly_overlay_clouds_thumb.jpg"},{identifier:ot.Wall1,name:"Wall",defaultBlendMode:nt.LIGHTEN,overlayURI:"./items/imgly_overlay_wall1.jpg",thumbnailURI:"./items/imgly_overlay_wall1_thumb.jpg"},{identifier:ot.Wall2,name:"Wall 2",defaultBlendMode:nt.OVERLAY,overlayURI:"./items/imgly_overlay_wall2.jpg",thumbnailURI:"./items/imgly_overlay_wall2_thumb.jpg"}];var uh=[{identifier:"imgly_sticker_emoticons",name:"Emoticons",thumbnailURI:"./categories/emoticons.png",items:[{identifier:"imgly_sticker_emoticons_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_grin.svg",tintMode:"none",name:"Grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_laugh",stickerURI:"./emoticons/imgly_sticker_emoticons_laugh.svg",tintMode:"none",name:"Laugh",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smile",stickerURI:"./emoticons/imgly_sticker_emoticons_smile.svg",tintMode:"none",name:"Smile",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_wink.svg",tintMode:"none",name:"Wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tongue_out_wink",stickerURI:"./emoticons/imgly_sticker_emoticons_tongue_out_wink.svg",tintMode:"none",name:"Tongue out wink",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angel",stickerURI:"./emoticons/imgly_sticker_emoticons_angel.svg",tintMode:"none",name:"Angel",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kisses",stickerURI:"./emoticons/imgly_sticker_emoticons_kisses.svg",tintMode:"none",name:"Kisses",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loving",stickerURI:"./emoticons/imgly_sticker_emoticons_loving.svg",tintMode:"none",name:"Loving",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_kiss",stickerURI:"./emoticons/imgly_sticker_emoticons_kiss.svg",tintMode:"none",name:"Kiss",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wave",stickerURI:"./emoticons/imgly_sticker_emoticons_wave.svg",tintMode:"none",name:"Wave",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_nerd",stickerURI:"./emoticons/imgly_sticker_emoticons_nerd.svg",tintMode:"none",name:"Nerd",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cool",stickerURI:"./emoticons/imgly_sticker_emoticons_cool.svg",tintMode:"none",name:"Cool",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_blush",stickerURI:"./emoticons/imgly_sticker_emoticons_blush.svg",tintMode:"none",name:"Blush",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_duckface",stickerURI:"./emoticons/imgly_sticker_emoticons_duckface.svg",tintMode:"none",name:"Duckface",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_furious.svg",tintMode:"none",name:"Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_angry",stickerURI:"./emoticons/imgly_sticker_emoticons_angry.svg",tintMode:"none",name:"Angry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_steaming_furious",stickerURI:"./emoticons/imgly_sticker_emoticons_steaming_furious.svg",tintMode:"none",name:"Steaming Furious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sad",stickerURI:"./emoticons/imgly_sticker_emoticons_sad.svg",tintMode:"none",name:"Sad",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_anxious",stickerURI:"./emoticons/imgly_sticker_emoticons_anxious.svg",tintMode:"none",name:"Anxious",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_cry.svg",tintMode:"none",name:"Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sobbing",stickerURI:"./emoticons/imgly_sticker_emoticons_sobbing.svg",tintMode:"none",name:"Sobbing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_loud_cry",stickerURI:"./emoticons/imgly_sticker_emoticons_loud_cry.svg",tintMode:"none",name:"Loud Cry",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wide_grin",stickerURI:"./emoticons/imgly_sticker_emoticons_wide_grin.svg",tintMode:"none",name:"Wide grin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_impatient",stickerURI:"./emoticons/imgly_sticker_emoticons_impatient.svg",tintMode:"none",name:"Impatient",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_tired",stickerURI:"./emoticons/imgly_sticker_emoticons_tired.svg",tintMode:"none",name:"Tired",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_asleep",stickerURI:"./emoticons/imgly_sticker_emoticons_asleep.svg",tintMode:"none",name:"Asleep",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sleepy",stickerURI:"./emoticons/imgly_sticker_emoticons_sleepy.svg",tintMode:"none",name:"Sleepy",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_deceased",stickerURI:"./emoticons/imgly_sticker_emoticons_deceased.svg",tintMode:"none",name:"Deceased",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_attention",stickerURI:"./emoticons/imgly_sticker_emoticons_attention.svg",tintMode:"none",name:"Attention",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_question",stickerURI:"./emoticons/imgly_sticker_emoticons_question.svg",tintMode:"none",name:"Question",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_not_speaking_to_you",stickerURI:"./emoticons/imgly_sticker_emoticons_not_speaking_to_you.svg",tintMode:"none",name:"Not speaking to you",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sick",stickerURI:"./emoticons/imgly_sticker_emoticons_sick.svg",tintMode:"none",name:"Sick",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pumpkin",stickerURI:"./emoticons/imgly_sticker_emoticons_pumpkin.svg",tintMode:"none",name:"Pumpkin",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_boxer",stickerURI:"./emoticons/imgly_sticker_emoticons_boxer.svg",tintMode:"none",name:"Boxer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_idea",stickerURI:"./emoticons/imgly_sticker_emoticons_idea.svg",tintMode:"none",name:"Idea",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_smoking",stickerURI:"./emoticons/imgly_sticker_emoticons_smoking.svg",tintMode:"none",name:"Smoking",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_beer",stickerURI:"./emoticons/imgly_sticker_emoticons_beer.svg",tintMode:"none",name:"Beer",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skateboard",stickerURI:"./emoticons/imgly_sticker_emoticons_skateboard.svg",tintMode:"none",name:"Skateboard",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_guitar",stickerURI:"./emoticons/imgly_sticker_emoticons_guitar.svg",tintMode:"none",name:"Guitar",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_music",stickerURI:"./emoticons/imgly_sticker_emoticons_music.svg",tintMode:"none",name:"Music",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_sunbathing",stickerURI:"./emoticons/imgly_sticker_emoticons_sunbathing.svg",tintMode:"none",name:"Sunbathing",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hippie",stickerURI:"./emoticons/imgly_sticker_emoticons_hippie.svg",tintMode:"none",name:"Hippie",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_humourous",stickerURI:"./emoticons/imgly_sticker_emoticons_humourous.svg",tintMode:"none",name:"Humourous",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_hitman",stickerURI:"./emoticons/imgly_sticker_emoticons_hitman.svg",tintMode:"none",name:"Hitman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_harry_potter",stickerURI:"./emoticons/imgly_sticker_emoticons_harry_potter.svg",tintMode:"none",name:"Harry Potter",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_business",stickerURI:"./emoticons/imgly_sticker_emoticons_business.svg",tintMode:"none",name:"Business",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_batman",stickerURI:"./emoticons/imgly_sticker_emoticons_batman.svg",tintMode:"none",name:"Batman",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_skull",stickerURI:"./emoticons/imgly_sticker_emoticons_skull.svg",tintMode:"none",name:"Skull",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_ninja",stickerURI:"./emoticons/imgly_sticker_emoticons_ninja.svg",tintMode:"none",name:"Ninja",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_masked",stickerURI:"./emoticons/imgly_sticker_emoticons_masked.svg",tintMode:"none",name:"Masked",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_alien",stickerURI:"./emoticons/imgly_sticker_emoticons_alien.svg",tintMode:"none",name:"Alien",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_wrestler",stickerURI:"./emoticons/imgly_sticker_emoticons_wrestler.svg",tintMode:"none",name:"Wrestler",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_devil",stickerURI:"./emoticons/imgly_sticker_emoticons_devil.svg",tintMode:"none",name:"Devil",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_star",stickerURI:"./emoticons/imgly_sticker_emoticons_star.svg",tintMode:"none",name:"Star",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_baby_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_baby_chicken.svg",tintMode:"none",name:"Baby Chicken",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_rabbit",stickerURI:"./emoticons/imgly_sticker_emoticons_rabbit.svg",tintMode:"none",name:"Rabbit",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_pig",stickerURI:"./emoticons/imgly_sticker_emoticons_pig.svg",tintMode:"none",name:"Pig",resizeMode:"keepAspect"},{identifier:"imgly_sticker_emoticons_chicken",stickerURI:"./emoticons/imgly_sticker_emoticons_chicken.svg",tintMode:"none",name:"Chicken",resizeMode:"keepAspect"}]},{identifier:"imgly_sticker_shapes",name:"Shapes",thumbnailURI:"./categories/shapes.png",items:[{identifier:"imgly_sticker_shapes_badge_01",stickerURI:"./shapes/imgly_sticker_shapes_badge_01.svg",tintMode:"solid",name:"Shape Badge 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_04",stickerURI:"./shapes/imgly_sticker_shapes_badge_04.svg",tintMode:"solid",name:"Shape Badge 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_12",stickerURI:"./shapes/imgly_sticker_shapes_badge_12.svg",tintMode:"solid",name:"Shape Badge 12",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_06",stickerURI:"./shapes/imgly_sticker_shapes_badge_06.svg",tintMode:"solid",name:"Shape Badge 06",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_13",stickerURI:"./shapes/imgly_sticker_shapes_badge_13.svg",tintMode:"solid",name:"Shape Badge 13",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_36",stickerURI:"./shapes/imgly_sticker_shapes_badge_36.svg",tintMode:"solid",name:"Shape Badge 36",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_08",stickerURI:"./shapes/imgly_sticker_shapes_badge_08.svg",tintMode:"solid",name:"Shape Badge 08",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_11",stickerURI:"./shapes/imgly_sticker_shapes_badge_11.svg",tintMode:"solid",name:"Shape Badge 11",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_35",stickerURI:"./shapes/imgly_sticker_shapes_badge_35.svg",tintMode:"solid",name:"Shape Badge 35",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_28",stickerURI:"./shapes/imgly_sticker_shapes_badge_28.svg",tintMode:"solid",name:"Shape Badge 28",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_32",stickerURI:"./shapes/imgly_sticker_shapes_badge_32.svg",tintMode:"solid",name:"Shape Badge 32",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_15",stickerURI:"./shapes/imgly_sticker_shapes_badge_15.svg",tintMode:"solid",name:"Shape Badge 15",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_20",stickerURI:"./shapes/imgly_sticker_shapes_badge_20.svg",tintMode:"solid",name:"Shape Badge 20",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_18",stickerURI:"./shapes/imgly_sticker_shapes_badge_18.svg",tintMode:"solid",name:"Shape Badge 18",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_badge_19",stickerURI:"./shapes/imgly_sticker_shapes_badge_19.svg",tintMode:"solid",name:"Shape Badge 19",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_02",stickerURI:"./shapes/imgly_sticker_shapes_arrow_02.svg",tintMode:"solid",name:"Shape Arrow 02",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_arrow_03",stickerURI:"./shapes/imgly_sticker_shapes_arrow_03.svg",tintMode:"solid",name:"Shape Arrow 03",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_01",stickerURI:"./shapes/imgly_sticker_shapes_spray_01.svg",tintMode:"solid",name:"Shape Spray 01",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_04",stickerURI:"./shapes/imgly_sticker_shapes_spray_04.svg",tintMode:"solid",name:"Shape Spray 04",resizeMode:"keepAspect"},{identifier:"imgly_sticker_shapes_spray_03",stickerURI:"./shapes/imgly_sticker_shapes_spray_03.svg",tintMode:"solid",name:"Shape Spray 03",resizeMode:"keepAspect"}]}];var hh=[{thumbnailURI:"./items/dark/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/dark/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/dark/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/dark/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/dark/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/dark/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/dark/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/dark/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/dark/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/dark/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/dark/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/dark/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/dark/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/dark/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/dark/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}];var dh=[{thumbnailURI:"./items/light/imgly_text_design_icon_thislayoutisgreat.png",identifier:"imgly_text_design_blocks",name:"Blocks"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatandfast.png",identifier:"imgly_text_design_rotated",name:"Rotated"},{thumbnailURI:"./items/light/imgly_text_design_icon_summerfeeling.png",identifier:"imgly_text_design_blocks_light",name:"Blocks Light"},{thumbnailURI:"./items/light/imgly_text_design_icon_typewithstyle.png",identifier:"imgly_text_design_equal_width",name:"Equal Width"},{thumbnailURI:"./items/light/imgly_text_design_icon_inthebox.png",identifier:"imgly_text_design_masked",name:"Masked"},{thumbnailURI:"./items/light/imgly_text_design_icon_bluefriday.png",identifier:"imgly_text_design_celebrate",name:"Celebrate"},{thumbnailURI:"./items/light/imgly_text_design_icon_decorative.png",identifier:"imgly_text_design_sunshine",name:"Sunshine"},{thumbnailURI:"./items/light/imgly_text_design_icon_specialdeals.png",identifier:"imgly_text_design_masked_badge",name:"Masked Badge"},{thumbnailURI:"./items/light/imgly_text_design_icon_doublelines.png",identifier:"imgly_text_design_blocks_condensed",name:"Blocks Condensed"},{thumbnailURI:"./items/light/imgly_text_design_icon_celebrate.png",identifier:"imgly_text_design_celebrate_simple",name:"Celebrate Simple"},{thumbnailURI:"./items/light/imgly_text_design_icon_beerandburger.png",identifier:"imgly_text_design_equal_width_fat",name:"Equal Width Fat"},{thumbnailURI:"./items/light/imgly_text_design_icon_watercolor.png",identifier:"imgly_text_design_watercolor",name:"Watercolor"},{thumbnailURI:"./items/light/imgly_text_design_icon_particle.png",identifier:"imgly_text_design_particles",name:"Particles"},{thumbnailURI:"./items/light/imgly_text_design_icon_yeah.png",identifier:"imgly_text_design_masked_speech_bubble",name:"Masked Speech Bubble"},{thumbnailURI:"./items/light/imgly_text_design_icon_thisisadream.png",identifier:"imgly_text_design_masked_speech_bubble_comic",name:"Masked Speech Bubble Comic"},{thumbnailURI:"./items/light/imgly_text_design_icon_fatface.png",identifier:"imgly_text_design_multiline",name:"Multiline"}];var ph=[{identifier:"imgly_transforms_common",name:"Common",items:[{identifier:"imgly_transform_common_custom",name:"Custom",thumbnailURI:"",ratio:"*"},{identifier:"imgly_transform_common_square",name:"Square",thumbnailURI:"",ratio:1},{identifier:"imgly_transform_common_4",name:"4:3",thumbnailURI:"",ratio:4/3},{identifier:"imgly_transform_common_16",name:"16:9",thumbnailURI:"",ratio:16/9},{identifier:"imgly_transform_common_3",name:"3:4",thumbnailURI:"",ratio:3/4},{identifier:"imgly_transform_common_9",name:"9:16",thumbnailURI:"",ratio:9/16}]},{identifier:"imgly_transforms_facebook",name:"Facebook",items:[{identifier:"imgly_transform_facebook_profile",name:"Profile",thumbnailURI:"",dimensions:{x:300,y:300},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_facebook_title",name:"Title",thumbnailURI:"",dimensions:{x:1200,y:627},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_facebook_post",name:"Post",thumbnailURI:"",dimensions:{x:940,y:788},forceDimensions:!0,lockDimensions:!0}]},{identifier:"imgly_transforms_instagram",name:"Instagram",items:[{identifier:"imgly_transform_instagram_landscape",name:"Landscape",thumbnailURI:"",dimensions:{x:1080,y:566},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_portrait",name:"Portrait",thumbnailURI:"",dimensions:{x:1080,y:1350},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_square",name:"Square",thumbnailURI:"",dimensions:{x:1080,y:1080},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_instagram_story",name:"Story",thumbnailURI:"",dimensions:{x:1080,y:1920},forceDimensions:!0,lockDimensions:!0}]},{identifier:"imgly_transforms_twitter",name:"Twitter",items:[{identifier:"imgly_transform_twitter_post",name:"Post",thumbnailURI:"",dimensions:{x:1024,y:512},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_twitter_profile",name:"Profile",thumbnailURI:"",dimensions:{x:400,y:400},forceDimensions:!0,lockDimensions:!0},{identifier:"imgly_transform_twitter_title",name:"Title",thumbnailURI:"",dimensions:{x:1500,y:500},forceDimensions:!0,lockDimensions:!0}]}];function fh(){if("undefined"==typeof navigator)return!1;const t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}function mh(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}window.performance.now.bind(window.performance);class gh{constructor(t){this.text=t,this.lastOffsetWidth=-1;const e="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.element=document.createElement("div"),this.element.setAttribute("aria-hidden","true"),this.element.appendChild(document.createTextNode(t)),this.collapsible=document.createElement("span"),this.expandable=document.createElement("span"),this.collapsibleInner=document.createElement("span"),this.expandableInner=document.createElement("span"),this.collapsible.style.cssText=e,this.expandable.style.cssText=e,this.expandableInner.style.cssText=e,this.collapsibleInner.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.collapsible.appendChild(this.collapsibleInner),this.expandable.appendChild(this.expandableInner),this.element.appendChild(this.collapsible),this.element.appendChild(this.expandable)}getElement(){return this.element}setFont(t){this.element.style.cssText=`max-width:none;\n      min-width:20px;\n      min-height:20px;\n      display:inline-block;\n      overflow:hidden;\n      position:absolute;\n      width:auto;\n      margin:0;\n      padding:0;\n      top:-999px;\n      white-space:nowrap;\n      font-synthesis:none;\n      font:${t};`}getWidth(){return this.element.offsetWidth}setWidth(t){this.element.style.width=`${t}px`}onResize(t){const e=()=>{this.onScroll(t)};this.collapsible.addEventListener("scroll",e),this.expandable.addEventListener("scroll",e),this.reset()}reset(){const t=this.getWidth(),e=t+100;return this.expandableInner.style.width=`${e}px`,this.expandable.scrollLeft=e,this.collapsible.scrollLeft=this.collapsible.scrollWidth+100,this.lastOffsetWidth!==t&&(this.lastOffsetWidth=t,!0)}onScroll(t){this.reset()&&null!==this.element.parentNode&&t(this.lastOffsetWidth)}}class _h{static getUserAgent(){return window.navigator.userAgent}static getNavigatorVendor(){return window.navigator.vendor}static hasWebKitFallbackBug(){if(null===_h.HAS_WEBKIT_FALLBACK_BUG){const t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(_h.getUserAgent());_h.HAS_WEBKIT_FALLBACK_BUG=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)}return _h.HAS_WEBKIT_FALLBACK_BUG}static hasSafari10Bug(){if(null===_h.HAS_SAFARI_10_BUG)if(_h.supportsNativeFontLoading()&&/Apple/.test(_h.getNavigatorVendor())){const t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(_h.getUserAgent());_h.HAS_SAFARI_10_BUG=!!t&&parseInt(t[1],10)<603}else _h.HAS_SAFARI_10_BUG=!1;return _h.HAS_SAFARI_10_BUG}static supportsNativeFontLoading(){return null===_h.SUPPORTS_NATIVE_FONT_LOADING&&(_h.SUPPORTS_NATIVE_FONT_LOADING=!!document.fonts),_h.SUPPORTS_NATIVE_FONT_LOADING}static supportsStretch(){if(null===_h.SUPPORTS_STRETCH){const t=document.createElement("div");try{t.style.font="condensend 100px sans-serif"}catch(t){_h.SUPPORTS_STRETCH=!1}_h.SUPPORTS_STRETCH=""!==t.style.font}return _h.SUPPORTS_STRETCH}constructor(t){this.font=b({fontFamily:"normal",fontStyle:"normal",fontWeight:"normal",fontStretch:"normal"},t)}load(t,e){const i="BESbswy";let r=null;const n=e||_h.DEFAULT_TIMEOUT,o=this.getTime();return new Promise(((t,e)=>{if(_h.supportsNativeFontLoading()&&!_h.hasSafari10Bug()){const s=new Promise(((t,r)=>{const s=()=>{this.getTime()-o>=n?r(new Error(n+"ms timeout exceeded")):document.fonts.load(this.getStyle(`"${this.font.fontFamily}"`),i).then((e=>{e.length>=1?t():setTimeout(s,25)}),e)};s()})),a=new Promise(((t,e)=>{r=setTimeout((()=>{e(new Error(`${n} ms timeout exceeded`))}),n)}));Promise.race([a,s]).then((()=>{clearTimeout(r),t(this)}),e)}else{const s=new gh(i),a=new gh(i),l=new gh(i);let c=-1,u=-1,h=-1,d=-1,p=-1,f=-1;const m=document.createElement("div"),g=()=>{null!==m.parentNode&&m.parentNode.removeChild(m)},_=()=>{if((-1!==c&&-1!==u||-1!==c&&-1!==h||-1!==u&&-1!==h)&&(c===u||c===h||u===h)){if(_h.hasWebKitFallbackBug()&&(c===d&&u===d&&h===d||c===p&&u===p&&h===p||c===f&&u===f&&h===f))return;g(),clearTimeout(r),t(this)}};m.dir="ltr",s.setFont(this.getStyle("sans-serif")),a.setFont(this.getStyle("serif")),l.setFont(this.getStyle("monospace")),m.appendChild(s.getElement()),m.appendChild(a.getElement()),m.appendChild(l.getElement()),document.body.appendChild(m),d=s.getWidth(),p=a.getWidth(),f=l.getWidth();const y=()=>{if(this.getTime()-o>=n)g(),e(new Error(`${n} ms timeout exceeded`));else{const t=document.hidden;(!0===t||void 0===t)&&(c=s.getWidth(),u=a.getWidth(),h=l.getWidth(),_()),r=setTimeout(y,50)}};y(),s.onResize((t=>{c=t,_()})),s.setFont(this.getStyle(`"${this.font.fontFamily}",sans-serif`)),a.onResize((t=>{u=t,_()})),a.setFont(this.getStyle(`"${this.font.fontFamily}",serif`)),l.onResize((t=>{h=t,_()})),l.setFont(this.getStyle(`"${this.font.fontFamily}",monospace`))}}))}getStyle(t){return[this.font.fontStyle,this.font.fontWeight,_h.supportsStretch()?this.font.fontStretch:"","100px",t].join(" ")}getTime(){return(new Date).getTime()}}_h.HAS_WEBKIT_FALLBACK_BUG=null,_h.HAS_SAFARI_10_BUG=null,_h.SUPPORTS_STRETCH=null,_h.SUPPORTS_NATIVE_FONT_LOADING=null,_h.DEFAULT_TIMEOUT=3e3;class yh{static fromSize(t){return new yh(t.width,t.height)}static distance(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}static dot(t,e){return t.x*e.x+t.y*e.y}static lerp(t,e,i){const r=Math.min(Math.max(i,0),1);return new yh(t.x*r+e.x*(1-r),t.y*r+e.y*(1-r))}static lerpUnclamped(t,e,i){return new yh(t.x*i+e.x*(1-i),t.y*i+e.y*(1-i))}static proportionalFit(t,e){return t.x/t.y>e.x/e.y?e.multiply(t.y/e.y):e.multiply(t.x/e.x)}get magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}get normalized(){const t=this.magnitude;return new yh(this.x/t,this.y/t)}get floored(){return new yh(Math.floor(this.x),Math.floor(this.y))}get rounded(){return new yh(Math.round(this.x),Math.round(this.y))}get min(){return Math.min(this.x,this.y)}get max(){return Math.max(this.x,this.y)}get abs(){return new yh(Math.abs(this.x),Math.abs(this.y))}get swapped(){return new yh(this.y,this.x)}constructor(t,e){"number"==typeof t?(this.x=t,this.y=e):(this.x=t.x,this.y=t.y)}clone(){return new yh(this.x,this.y)}add(t,e){return"number"==typeof t?new yh(this.x+t,this.y+e):new yh(this.x+t.x,this.y+t.y)}subtract(t,e){return"number"==typeof t?new yh(this.x-t,this.y-e):new yh(this.x-t.x,this.y-t.y)}multiply(t,e){return"number"==typeof t?new yh(this.x*t,this.y*(void 0===e?t:e)):new yh(this.x*t.x,this.y*t.y)}divide(t,e){return"number"==typeof t?new yh(this.x/t,this.y/(void 0===e?t:e)):new yh(this.x/t.x,this.y/t.y)}equals(t){return this.x===t.x&&this.y===t.y}clamp(t,e){const i=Math.max(t.x,Math.min(e.x,this.x)),r=Math.max(t.y,Math.min(e.y,this.y));return new yh(i,r)}}var vh,bh;yh.ZERO=new yh(0,0),yh.ONE=new yh(1,1),yh.UP=new yh(0,1),yh.DOWN=new yh(0,-1),yh.RIGHT=new yh(1,0),yh.LEFT=new yh(-1,0),function(t){t.BEGAN_IMAGE_DOWNSCALING="beganImageDownscaling",t.IMAGE_DOWNSCALED="imageDownscaled"}(vh||(vh={}));class xh extends ut{constructor(t,e){super(),this.image=t,this.options=e}needsResize(){const t=this.resizedDimensions();return t.x<this.image.width||t.y<this.image.height}resizedDimensions(){const{options:t}=this,e={width:this.image.width,height:this.image.height};let i=yh.fromSize(e),r=yh.fromSize(e);const{maxMegaPixels:n}=t;if(n){const t=1e6*(fh()?n.mobile:n.desktop),r=e.width/e.height,o=e.height/e.width,s=new yh(Math.floor(Math.sqrt(t*r)),Math.floor(Math.sqrt(t*o)));s.x<=e.width&&s.y<=e.height&&(i=s)}const o=t.maxDimensions;o&&(o.height<e.height||o.width<e.width)&&(r=new yh(o.width,o.height));const s=new yh(Math.min(i.x,r.x),Math.min(i.y,r.y));return yh.proportionalFit(s,yh.fromSize(e)).floored}downscaleIfNecessary(){const t=this.resizedDimensions();if(!(t.x<this.image.width||t.y<this.image.height))return this.image;this.emit(vh.BEGAN_IMAGE_DOWNSCALING,this.image);const e=document.createElement("canvas");e.width=t.x,e.height=t.y;const i=e.getContext("2d"),{image:r}=this;return i.drawImage(r,0,0,r.width,r.height,0,0,t.x,t.y),this.emit(vh.IMAGE_DOWNSCALED,{width:t.x,height:t.y}),e}downscaleImageIfNecessary(){const t=this.image,e=this.resizedDimensions();if(!(e.x<this.image.width||e.y<this.image.height))return t;this.emit(vh.BEGAN_IMAGE_DOWNSCALING,t);const i=new Image;return i.width=e.x,i.height=e.y,i.src=t.src,this.emit(vh.IMAGE_DOWNSCALED,{width:e.x,height:e.y}),i}}!function(t){t[t.EditorContainer=0]="EditorContainer",t[t.ToolControlBar=1]="ToolControlBar",t[t.ToolControlBarControls=2]="ToolControlBarControls",t[t.CanvasContainer=3]="CanvasContainer",t[t.Canvas=4]="Canvas",t[t.MainBarButtonClose=5]="MainBarButtonClose",t[t.Tooltip=6]="Tooltip",t[t.Cursor=7]="Cursor",t[t.CursorContainer=8]="CursorContainer",t[t.NummericInput=9]="NummericInput",t[t.BrushSize=10]="BrushSize",t[t.BrushHardness=11]="BrushHardness",t[t.Dialog=12]="Dialog",t[t.DialogBody=13]="DialogBody",t[t.CardContainer=14]="CardContainer",t[t.CategoryItemsContainer=15]="CategoryItemsContainer",t[t.ToolbarItem=16]="ToolbarItem",t[t.ColorList=17]="ColorList",t[t.NoResult=18]="NoResult",t[t.CardLabel=19]="CardLabel",t[t.CardAvatar=20]="CardAvatar",t[t.Dropdown=21]="Dropdown",t[t.DropdownList=22]="DropdownList",t[t.TextAlignment=23]="TextAlignment",t[t.Sprite=24]="Sprite",t[t.SpriteTopLeft=25]="SpriteTopLeft",t[t.SpriteTopRight=26]="SpriteTopRight",t[t.SpriteBottomLeft=27]="SpriteBottomLeft",t[t.SpriteBottomRight=28]="SpriteBottomRight",t[t.Knob=29]="Knob",t[t.TextWidth=30]="TextWidth",t[t.ToolbarWrapper=31]="ToolbarWrapper",t[t.MainCanvasActionBar=32]="MainCanvasActionBar",t[t.SpriteActions=33]="SpriteActions",t[t.CarouselSlider=34]="CarouselSlider",t[t.CropMask=35]="CropMask",t[t.FlipRotateControls=36]="FlipRotateControls",t[t.RotateSlider=37]="RotateSlider",t[t.CropTopRight=38]="CropTopRight",t[t.CropTopLeft=39]="CropTopLeft",t[t.CropBottomRight=40]="CropBottomRight",t[t.CropBottomLeft=41]="CropBottomLeft",t[t.Toolbar=42]="Toolbar",t[t.CanvasBar=43]="CanvasBar",t[t.Checkbox=44]="Checkbox",t[t.Focus=45]="Focus"}(bh||(bh={}));const wh={};for(const t in bh){const e=bh[t];"string"==typeof e&&(wh[e]=e)}var Sh;Boolean(null==(Sh=window.Cypress)?void 0:Sh.env("pesdk"));const kh=(...t)=>function(t){const e=function(t){return"/"===t.charAt(0)}(t),i="/"===t.substr(-1);return!(t=function(t,e){let i=0;for(let e=t.length-1;e>=0;e--){const r=t[e];"."===r?t.splice(e,1):".."===r?(t.splice(e,1),i++):i&&(t.splice(e,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}(t.split("/").filter(Boolean),!e).join("/"))&&!e&&(t="."),t&&i&&(t+="/"),(e?"/":"")+t}(t.join("/")),Ch={italic:"i"};class Th{constructor(t){this.assetManager=t,this.injectedFonts={},this.loadedFonts={},this.getGoogleFamiliesString=t=>{const e=t.reduce(((t,e)=>{const{fontFamily:i,fontStyle:r,fontWeight:n=400}=e;return t[i]=(t[i]||[]).concat(`${n}${Ch[r]||""}`),t}),{});return Object.keys(e).map((t=>{const i=e[t].length?`:${e[t].join(",")}`:"";return t.replace(" ","+")+i})).join("|")}}static createFontFacesCSS(t,e){return t.map((t=>{const i=e(t.fontURI);return`@font-face {\n        font-family: "${t.fontFamily}";\n        src: url('${i}') format('${t.format||"woff"}');\n        font-weight: ${t.fontWeight||"normal"};\n        font-style: ${t.fontStyle||"normal"};\n      }`}))}getFontWithId(t){const e=this.assetManager.getFontAsset(t);if(!e)throw new Error("The requested font does not exist as an asset.");return e}isFontLoaded(t){return void 0!==this.loadedFonts[t]}injectAllFonts(){const t=this.assetManager.getFontAssets();this.injectFonts(t)}loadAllFonts(){return T(this,null,(function*(){const t=this.assetManager.getFontAssets();return this.loadFonts(t)}))}loadFontsWithIdentifiers(t){return T(this,null,(function*(){const e=t.map((t=>this.getFontWithId(t)));return this.loadFonts(e)}))}loadFonts(t){return T(this,null,(function*(){this.injectFonts(t);const e=new Array;return t.forEach((t=>{e.push(this.loadFont(t,!1))})),new Promise(((t,i)=>{Promise.all(e).then((()=>t())).catch((t=>i(t)))}))}))}loadFont(t,e=!0){return T(this,null,(function*(){return new Promise(((i,r)=>{this.isFontLoaded(t.identifier)&&i(),e&&this.injectFonts([t]);new _h(t).load().then((()=>{this.loadedFonts[t.identifier]=t,i()})).catch((()=>{r(t.identifier)}))}))}))}loadFontWithIdentifier(t,e=!0){return T(this,null,(function*(){const i=this.assetManager.getFontAsset(t);if(!i)throw new Error(`The requested font asset with identifier ${t} does not exist!`);return this.loadFont(i,e)}))}injectFonts(t,e=this.assetManager.getPathForCategory("font")){const i=t.filter(ct),r=t.filter(lt);i.length>0&&this.addGoogleFontLinks(i),r.length>0&&this.addWebFontCSS(r,e)}addGoogleFontLinks(t){const e=t.filter((t=>!this.injectedFonts[t.identifier]));if(0===e.length)return;const i=this.getGoogleFamiliesString(e),r=document.createElement("link");r.rel="stylesheet",r.href=`https://fonts.googleapis.com/css?family=${i}`;document.getElementsByTagName("head")[0].appendChild(r),t.forEach((t=>{this.injectedFonts[t.identifier]=t}))}addWebFontCSS(t,e){const i=t.filter((t=>!this.injectedFonts[t.identifier]));if(0===i.length)return;const r=`\n      /* Injected by PhotoEditorSDK */\n      ${Th.createFontFacesCSS(i,e).join("\n")}\n    `,n=document.createElement("style");n.innerHTML=r,document.head.appendChild(n),t.forEach((t=>{this.injectedFonts[t.identifier]=t}))}}class Eh{constructor(t,e=!1){this.basePath="assets/",this.areCustomAssetsAllowed=!1,this.getAssets=t=>{switch(t){case"overlay":return this.overlayAssets;case"filter":return this.filterCategories;case"font":return this.fontAssets;case"focus":return this.focusAssets;case"adjustment":return this.adjustmentCategories;case"sticker":return this.stickerCategories;case"textdesign":return this.textDesignAssets;case"frame":return this.frameAssets;case"transform":return this.transformCategories}return[]},this.getPath=(t,...e)=>{const i=kh(t,...e);if(e&&0!==e.length&&eh(kh(...e)))return kh(...e);if((!e||0===e.length)&&eh(t))return t;if(this.basePath.match(/(ftp|http|https):\/\//)){const{length:t}=this.basePath;return"/"!==this.basePath[t-1]&&(this.basePath=`${this.basePath}/`),this.basePath+i}return kh(this.basePath,i)},this.getPathForCategory=t=>(...e)=>this.getPath(t,...e),this.addCustomStickerAsset=(t,e,i)=>{t.forEach((t=>{const{thumbnailURI:r,name:n,stickerURI:o,identifier:s,tintMode:a,resizeMode:l}=t,c=this.stickerCategories.find((t=>t.identifier===e)),u={identifier:s,name:n,thumbnailURI:r,stickerURI:o,tintMode:a,resizeMode:l};if(c)c.items.push(u);else{const t={identifier:e,name:i,thumbnailURI:r,items:[u]};this.stickerCategories=[t,...this.stickerCategories]}})),this.stickerAssets=this.stickerCategories.reduce(this.allOptions,[])},this.getItemPath=(t,e,i)=>{const r=t.find((t=>t.identifier===e));return r&&(r[i]||r.path)||""},this.isNonExistingFont=t=>!oh.find((e=>e.identifier===t.identifier))&&!Gc[t.identifier],this.replaceDeprecatedFont=t=>Gc[t.identifier]?oh.find((e=>e.identifier===Vc(t.identifier,!0))):t,t&&t.basePath&&(this.basePath=t.basePath),this.areCustomAssetsAllowed=e;const i=rh.reduce(this.allOptions,[]);t&&t.filter?this.filterCategories=this.configuredCategory(rh,t.filter,i):this.filterCategories=rh,this.lutFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter((t=>function(t){return void 0!==t.lutURI}(t))),this.duoToneFilterAssets=this.filterCategories.reduce(this.allOptions,[]).filter((t=>tt(t)));const r=ih.reduce(this.allOptions,[]);t&&t.adjustment?this.adjustmentCategories=this.configuredCategory(ih,t.adjustment,r):this.adjustmentCategories=ih,this.fontAssets=oh.reduce(this.allOptions,[]);let n=sh.map((t=>this.getFontAsset(t)));if(t&&t.text&&t.text.fonts&&t.text.fonts.length>0){const e=t.text.fonts.filter(this.isNonExistingFont),i=t.text.fonts.filter((t=>!this.isNonExistingFont(t))).map((t=>this.replaceDeprecatedFont(t))).map((t=>this.getFontAsset(t.identifier)));n=t.text.fonts?[...i,...e]:n,this.fontAssets=t.text.fonts?[...this.fontAssets,...e]:this.fontAssets}this.textToolFontAssets=n;const o=t&&t.focus&&t.focus.items&&t.focus.items.length?t.focus.items.map((t=>nh.find((e=>e.identifier===t.identifier)))):nh;this.focusAssets=o,t&&t.overlay&&t.overlay.items?this.overlayAssets=this.configuredItem(t.overlay.items,ch,ch):this.overlayAssets=ch,t&&t.frame&&t.frame.items?this.frameAssets=this.configuredItem(t.frame.items,lh,lh):this.frameAssets=lh;const s=uh.reduce(this.allOptions,[]);t&&t.sticker?this.stickerCategories=this.configuredCategory(uh,t.sticker,s):this.stickerCategories=uh,this.stickerAssets=this.stickerCategories.reduce(this.allOptions,[]);let a=hh;t&&"light"===t.theme&&(a=dh),this.textDesignAssets=t&&t.textdesign&&t.textdesign.items&&t.textdesign.items.length?t.textdesign.items.map((t=>a.find((e=>e.identifier===t.identifier)))):a,this.textDesignToolFontAssets=ah.map((t=>this.getFontAsset(t)));const l=ph.reduce(this.allOptions,[]);t&&t.transform?this.transformCategories=this.configuredCategory(ph,t.transform,l):this.transformCategories=ph,this.transformAssets=this.transformCategories.reduce(this.allOptions,[]),this.fontManager=new Th(this)}getFontManager(){return this.fontManager}getAssetSource(t,e){switch(t){case"filter":if(this.getLUTFilterAsset(e))return this.getPath(t,this.getItemPath(this.lutFilterAssets,e,"lutURI"));break;case"overlay":return this.getPath(t,this.getItemPath(this.overlayAssets,e,"overlayURI"));case"font":return this.getPath(t,this.getItemPath(this.fontAssets,e,"fontURI"));case"sticker":const i=this.stickerAssets.find((t=>t.identifier===e));if(i){if("data:image"===i.stickerURI.substr(0,10))return i.stickerURI;if(e.includes("imgly_sticker")&&i.stickerURI.includes(".svg")&&Ju()){const i=this.getPath(t,this.getItemPath(this.stickerAssets,e,"stickerURI")).split("/");return i.splice(i.length-1,0,"base"),i[i.length-1]=i[i.length-1].replace(".svg",".png"),i.join("/")}return this.getPath(t,this.getItemPath(this.stickerAssets,e,"stickerURI"))}throw new Error("Cannot resolve this type of sticker asset yet");case"textdesign":return this.getPath(t,"engine",e);case"frame":return this.getPath(t,e)}throw new Error("Cannot resolve this type of asset yet")}getDuotoneFilterAsset(t){return this.duoToneFilterAssets.filter((e=>e.identifier===t))[0]}getLUTFilterAsset(t){return this.lutFilterAssets.filter((e=>e.identifier===t))[0]}getOverlayAsset(t){return this.overlayAssets.filter((e=>e.identifier===t))[0]}getStickerAsset(t){return this.stickerAssets.filter((e=>e.identifier===t))[0]}getFontAsset(t){return this.fontAssets.filter((e=>e.identifier===t))[0]}getTextDesignAssets(t){return this.textDesignAssets.filter((e=>e.identifier===t))[0]}getFrameAsset(t){return this.frameAssets.filter((e=>e.identifier===t))[0]}getFontAssets(){return this.fontAssets}getFontAssetsForText(){return this.textToolFontAssets}getFontAssetsForTextDesign(){return this.textDesignToolFontAssets}getFrameAssets(){return this.frameAssets}allOptions(t,e){return Object.prototype.hasOwnProperty.call(e,"items")?[...t,...e.items]:[...t,e]}configuredCategory(t,e,i){return e.categories&&e.categories.length?e.categories.reduce(((e,r)=>{const n=t.find((t=>t.identifier===r.identifier));return n?e.push(b(b(b({},n),r),{items:this.configuredItem(r.items,i,n.items).filter(Boolean)})):this.areCustomAssetsAllowed&&e.push(b(b({},r),{items:this.configuredItem(r.items,i,r.items).filter(Boolean)})),e}),[]):t}configuredItem(t,e,i){return t&&t.length?t.reduce(((t,i)=>{const r=e.find((t=>t.identifier===i.identifier));return r?t.push(b(b({},r),i)):this.areCustomAssetsAllowed&&t.push(i),t}),[]).filter(Boolean):i}}class Rh{static contains(t,e){return e.x>=t.minX&&e.x<=t.maxX&&e.y>=t.minY&&e.y<=t.maxY}constructor(t,e,i,r){if("number"==typeof t){if("number"!=typeof e||void 0===i||void 0===r)throw new Error("Invalid arguments passed to Rect. Expected (number, number, number, number)");this.origin={x:t,y:e},this.size={width:i||0,height:r||0}}else{if(this.origin=t,"number"==typeof e)throw new Error("Invalid arguments passed to Rect. Expected (Float2, Size)");this.size=e}}get minX(){return this.origin.x}get minY(){return this.origin.y}get midX(){return this.origin.x+.5*this.size.width}get midY(){return this.origin.y+.5*this.size.height}get maxX(){return this.origin.x+this.size.width}get maxY(){return this.origin.y+this.size.height}get width(){return this.size.width}get height(){return this.size.height}}Rh.ZERO=new Rh({x:0,y:0},{width:0,height:0});class Dh{constructor(t,e,i,r,n,o){this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o}static fromScale(t,e){return new Dh(t,0,0,e,0,0)}static fromRotation(t){const e=Math.cos(t),i=Math.sin(t);return new Dh(e,-i,i,e,0,0)}static fromRotationDeg(t){const e=Math.PI*t/180;return this.fromRotation(e)}static fromTranslation(t,e){return new Dh(1,0,0,1,t,e)}static fromTRS(t,e,i,r,n){const o=Math.cos(i),s=Math.sin(i);return new Dh(r*o,-n*s,r*s,n*o,t,e)}static multiply(t,e){const i=t.a*e.a+t.b*e.c,r=t.a*e.b+t.b*e.d,n=t.c*e.a+t.d*e.c,o=t.c*e.b+t.d*e.d,s=t.a*e.tx+t.b*e.ty+t.tx,a=t.c*e.tx+t.d*e.ty+t.ty;return new Dh(i,r,n,o,s,a)}static transformPoint(t,e){return{x:t.a*e.x+t.b*e.y+t.tx,y:t.c*e.x+t.d*e.y+t.ty}}static getInverted(t){const e=t.a*t.d-t.b*t.c;if(0===e)return t;const i=1/e,r=i*t.d,n=-i*t.b,o=-i*t.c,s=i*t.a,a=i*(t.b*t.ty-t.d*t.tx),l=i*(t.c*t.tx-t.a*t.ty);return new Dh(r,n,o,s,a,l)}}function Ih(t){return"number"==typeof t}Dh.IDENTITY=Dh.fromScale(1,1);class Oh{static get IDENTITY(){return new Oh({x:0,y:0})}constructor(t,e={x:1,y:1},i=0){this.position=t,this.scale=e,this.rotation=i}}const Ah={};function Fh(t){return void 0!==t.x}function Mh(t){return Dh.fromTRS(t.position.x,t.position.y,t.rotation,t.scale.x,t.scale.y)}function Ph(t){const e=t.getParent(),i=function(t){return t.getBaseLocalToParentMatrix?t.getBaseLocalToParentMatrix():Mh(t.getTransform())}(t);if(void 0===e)return i;const r=Ph(e);return Dh.multiply(r,i)}function Bh(t){return t.getLocalToParentMatrix?t.getLocalToParentMatrix():Mh(t.getTransform())}function zh(t){const e=t.getParent(),i=Bh(t);if(void 0===e)return i;const r=zh(e);return Dh.multiply(r,i)}function Lh(t,e,i,r=!1){const n="output"===e.type&&r?Ph(e):zh(e),o="output"===i.type&&r?Ph(i):zh(i),s=Dh.getInverted(o);return Dh.transformPoint(s,Dh.transformPoint(n,t))}function Nh(t,e,i){const r=new yh(t,0),n=new yh(Lh(r,e,i)),o=new yh(Lh(yh.ZERO,e,i));return yh.distance(o,n)}function Uh(t,e,i){const r=Fh(t)?t.x:t.width,n=Fh(t)?t.y:t.height;return{width:Nh(r,e,i),height:Nh(n,e,i)}}function jh(t,e){const i=zh(e);return Dh.transformPoint(i,t)}function Hh(t,e){const i=new yh(t,0),r=new yh(jh(i,e)),n=new yh(jh(yh.ZERO,e));return yh.distance(r,n)}function Wh(t){const e=zh(t),i=t.getBounds(),r={x:i.width,y:0},n={x:0,y:i.height},o=new yh(Dh.transformPoint(e,yh.ZERO)),s=new yh(Dh.transformPoint(e,r)),a=new yh(Dh.transformPoint(e,n));return{width:yh.distance(o,s),height:yh.distance(o,a)}}function Gh(t,e){const i=Wh(t),r=e.getTransform().scale,n=1/r.x,o=1/r.y;return{width:i.width*n,height:i.height*o}}function Vh(t,e){const i=e.getBounds();return{width:t.width*i.width,height:t.height*i.height}}function $h(t,e){const i=e.getBounds();return{width:t.width/i.width,height:t.height/i.height}}function Zh(t,e,i=!0){const r=e.getBounds();return{x:t.x*r.width+(i?0:r.minX),y:t.y*r.height+(i?0:r.minY)}}function Xh(t,e,i=!0){const r=e.getBounds();return{x:(t.x-(i?0:r.minX))/r.width,y:(t.y-(i?0:r.minY))/r.height}}function Yh(t,e){const i=Lh({x:1,y:0},t,e,!0),r=Lh(yh.ZERO,t,e,!0);return Math.atan2(i.y-r.y,i.x-r.x)}function qh(t){return"string"!=typeof t&&!Array.isArray(t)&&void 0===t.a}function Kh(t){return"string"!=typeof t&&Array.isArray(t)&&3===t.length}function Qh(t){return"string"!=typeof t&&!Array.isArray(t)&&void 0!==t.a}function Jh(t){return"string"!=typeof t&&Array.isArray(t)&&4===t.length}var td;S(Ah,{absoluteToRelativePoint:()=>Xh,absoluteToRelativeSize:()=>$h,getBaseLocalToWorldMatrix:()=>Ph,getLocalToParentMatrix:()=>Bh,getLocalToWorldMatrix:()=>zh,getPointInWorldSpace:()=>jh,getRotationBetweenCoordinateSpaces:()=>Yh,getScalarInWorldSpace:()=>Hh,getSizeInOutputSpace:()=>Gh,getSizeInWorldSpace:()=>Wh,pointFromSpaceToSpace:()=>Lh,rectTransformToAffineTransform:()=>Mh,relativeToAbsolutePoint:()=>Zh,relativeToAbsoluteSize:()=>Vh,scalarFromSpaceToSpace:()=>Nh,sizeFromSpaceToSpace:()=>Uh}),function(t){t.BEGAN_IMAGE_DOWNSCALING="beganImageDownscaling",t.IMAGE_DOWNSCALED="imageDownscaled"}(td||(td={}));class ed{constructor(t,e){this.engine=e,this.transform=Oh.IDENTITY,this.canvasPivot={x:0,y:0},this.previewQuality=1,this.canvas=t}get quality(){return this.previewQuality}setQuality(t){this.previewQuality=Math.min(Math.max(t,.01),1)}getTransform(){return this.transform}setTransform(t){this.transform=t}getPosition(){return this.transform.position}setPosition(t,e){let i;i="number"==typeof t?{x:t,y:void 0===e?t:e}:t;const{scale:r}=this.transform,{rotation:n}=this.transform;this.setTransform(new Oh(i,r,n))}getScale(){return this.transform.scale}setScale(t,e){let i;i="number"!=typeof t?t:{x:t,y:void 0===e?t:e};const{position:r}=this.transform,{rotation:n}=this.transform;this.setTransform(new Oh(r,i,n))}getRotation(){return this.transform.rotation}setRotation(t){const{position:e}=this.transform,{scale:i}=this.transform;this.setTransform(new Oh(e,i,t))}getCanvasPivot(){return this.canvasPivot}setCanvasPivot(t,e){this.canvasPivot="number"==typeof t?{x:t,y:void 0===typeof e?t:e}:t}getCanvasBounds(){const t=this.canvasPivot,{width:e,height:i}=this.canvas;return new Rh(-t.x*e,-t.y*i,e,i)}}function id(t){return void 0!==t.getTransform}class rd extends ut{constructor(t){super(),this.config=t}getOutputDimensions(){const t=this.getOutputContainer();return t?t.getResolution():{width:0,height:0}}getSmallerOutputSide(){const t=this.getOutputContainer();if(!t)return 0;const e=t.getResolution();return Math.min(e.width,e.height)}convertPointFromPreviewIntoOutputSpace(t,e){const i=Dh.getInverted(Ah.rectTransformToAffineTransform(e));return Dh.transformPoint(i,t)}convertPointFromPreviewIntoWorldSpace(t,e,i){const r=Dh.getInverted(Ah.rectTransformToAffineTransform(e)),n=i?this.getOutputContainer().getBaseLocalToParentMatrix():this.getOutputContainer().getLocalToParentMatrix(),o=Dh.multiply(n,r);return Dh.transformPoint(o,t)}convertPointFromPreviewIntoFlippedPreviewSpace(t){const e=this.getOutputContainer().getFlipTransformMatrix();return Dh.transformPoint(e,t)}convertPointFromWorldIntoPreviewSpace(t,e){const i=Ah.rectTransformToAffineTransform(e),r=Dh.getInverted(this.getOutputContainer().getLocalToParentMatrix()),n=Dh.multiply(i,r);return Dh.transformPoint(n,t)}convertPointFromOutputIntoPreviewSpace(t,e){const i=Ah.rectTransformToAffineTransform(e);return Dh.transformPoint(i,t)}getContainersAtPreviewPoint(t,e){const i=new Array,r=this.convertPointFromPreviewIntoWorldSpace(t,e),n=this.getRootContainers();for(const t of n)this.accumulateContainersAtWorldPointInHierarchy(r,t,i);return i}isPreviewPointInContainer(t,e,i){const r=this.convertPointFromPreviewIntoWorldSpace(t,i);return this.isWorldPointInContainer(r,e)}isWorldPointInContainer(t,e){const i=Ah.getLocalToWorldMatrix(e),r=Dh.getInverted(i),n=Dh.transformPoint(r,t);return Rh.contains(e.getBounds(),n)}accumulateContainersAtWorldPointInHierarchy(t,e,i){this.isWorldPointInContainer(t,e)&&i.push(e);const r=e.getChildren();for(const e of r)id(e)&&this.accumulateContainersAtWorldPointInHierarchy(t,e,i)}}class nd{constructor(t){this.engine=t,this.id=mh()}getID(){return this.id}getContainer(){return this.engine.getRootContainers()[0]}getIndexInParent(){const{rootOperations:t}=this.engine;for(let e=0;e<t.length;e+=1)if(t[e].getID()===this.id)return e;return-1}setIndexInParent(t){this.engine.moveIndex(this,t)}isValid(){return-1!==this.getIndexInParent()}}class od extends nd{constructor(t,e,i){super(e),this.operation=i,this.type="adjustments",this.setProperties(t)}getProperties(){const t=this.operation.getOptions(),e=t.gamma-1;return{brightness:t.brightness||0,saturation:t.saturation||0,contrast:t.contrast||0,gamma:(e<0?2*e:e)||0,clarity:t.clarity||0,exposure:t.exposure||0,shadows:.5*t.shadows||0,highlights:t.highlights||0,whites:t.whites||0,blacks:t.blacks||0,temperature:t.temperature||0,sharpness:t.sharpness||0}}setProperties(t){void 0!==t.gamma&&(t.gamma=1+(t.gamma<0?.5*t.gamma:t.gamma)),t.shadows&&(t.shadows=2*t.shadows),this.operation.set(t)}getOperation(){return this.operation}getTypeIdentifier(){return"adjustments"}}const sd=t=>{if(Qh(t))return new Pc.Color(t.r,t.g,t.b,t.a);if(Jh(t))return new Pc.Color(t[0],t[1],t[2],t[3]);if(qh(t))return new Pc.Color(t.r,t.g,t.b,1);if(Kh(t))return new Pc.Color(t[0],t[1],t[2],1);if(function(t){return"string"==typeof t}(t)){const[e,i,r]=t.match(/[0-9A-fa-f]{1,2}/g);return new Pc.Color(parseInt(e,16)/255,parseInt(i,16)/255,parseInt(r,16)/255,1)}throw new Error("Invalid color type")};class ad{get x(){return this._x}get y(){return this._y}constructor(t=0,e=0){this._x=t,this._y=e}set(t,e){return this._x=t,this._y=e,this}clone(){return new ad(this._x,this._y)}copy(t){return this._x=t.x,this._y=t.y,this}clamped(t=this,e=this){let i="number"==typeof t?{x:t,y:t}:t,r="number"==typeof e?{x:e,y:e}:e;return this._x=Math.max(i.x,this._x),this._y=Math.max(i.y,this._y),this._x=Math.min(r.x,this._x),this._y=Math.min(r.y,this._y),this}divide(t,e){return"number"==typeof t||null===t?(this._x/=t,this._y/=void 0===e?t:e):(this._x/=t.x,this._y/=t.y),this}subtract(t,e){return"number"==typeof t||null===t?(this._x-=t,this._y-=void 0===e?t:e):(this._x-=t.x,this._y-=t.y),this}multiply(t,e){return"number"==typeof t||null===t?(this._x*=t,this._y*=void 0===e?t:e):(this._x*=t.x,this._y*=t.y),this}add(t,e){return"number"==typeof t||null===t?(this._x+=t,this._y+=void 0===e?t:e):(this._x+=t.x,this._y+=t.y),this}dot(t,e){return"number"==typeof t||null===t?this._x*t+this._y*(void 0===e?t:e):this._x*t.x+this._y*t.y}equals(t,e){return"number"==typeof t||null===t?t===this._x&&e===this._y:t.x===this._x&&t.y===this._y}flip(){let t=this._x;return this._x=this._y,this._y=t,this}round(){return this._x=Math.round(this._x),this._y=Math.round(this._y),this}ceil(){return this._x=Math.ceil(this._x),this._y=Math.ceil(this._y),this}floor(){return this._x=0|this._x,this._y=0|this._y,this}abs(){return this._x=Math.abs(this._x),this._y=Math.abs(this._y),this}len(){return Math.sqrt(this._x*this._x+this._y*this._y)}min(){return Math.min(this._x,this._y)}max(){return Math.max(this._x,this._y)}toObject(){return{x:this._x,y:this._y}}toString(){return`Vector2({ x: ${this._x}, y: ${this._y} })`}roundDecimal(t){return this._x=parseFloat(this._x.toFixed(t)),this._y=parseFloat(this._y.toFixed(t)),this}asArray(t=!1){return t?[this._y,this._x]:[this._x,this._y]}static fromObject(t){return new ad(t.x,t.y)}static fromSize(t){return new ad(t.width,t.height)}static get NULL(){return new ad(0,0)}}class ld{constructor(t){this.engine=t,this.id=mh(),this.transform=Oh.IDENTITY,this.bounds=Rh.ZERO}getID(){return this.id}getParent(){const t=this.engine.getRootContainers();return 0===t.length||this.id===t[0].id?void 0:t[0]}getIndexInParent(){const{rootOperations:t}=this.engine;for(let e=0;e<t.length;e+=1)if(t[e].getID()===this.id)return e;return-1}setIndexInParent(t){this.engine.moveIndex(this,t)}getChildren(){const t=this.engine.getRootContainers();return t.length>0&&(this.id===t[0].id||this.id===this.engine.getOutputContainer().id)?this.engine.rootOperations:[]}getBounds(){return this.bounds}setPivotOnSelfAndSprite(t,e,i){"number"==typeof e?(this.setPivotInternal(e,i),t.setPivot(new ad(e,i))):(this.setPivotInternal(e),t.setPivot(ad.fromObject(e)))}setPivot(t,e){this.setPivotInternal(t,e)}getPivot(){const t=this.getBounds();return{x:-t.minX/t.width,y:-t.minY/t.height}}getTransform(){return this.transform}setTransform(t){this.transform=t}updateTransform(){this.setTransform(this.transform)}getPosition(){return this.transform.position}setPosition(t,e){let i;i="number"==typeof t?{x:t,y:void 0===e?t:e}:t;const{scale:r}=this.transform,{rotation:n}=this.transform;this.setTransform(new Oh(i,r,n))}getScale(){return this.transform.scale}setScale(t,e){let i;i="number"!=typeof t?t:{x:t,y:void 0===e?t:e};const{position:r,rotation:n}=this.transform;this.setTransform(new Oh(r,i,n))}getRotation(){return this.transform.rotation}setRotation(t){const{position:e,scale:i}=this.transform;this.setTransform(new Oh(e,i,t))}getSizeInWorldSpace(){return Ah.getSizeInWorldSpace(this)}getSizeInOutputSpace(){return Ah.getSizeInOutputSpace(this,this.engine.getOutputContainer())}setSizeInWorldSpace(t){const e=this.getBounds();this.setScale(t.width/e.width,t.height/e.height)}setSizeInOutputSpace(t){const e=this.engine.getOutputContainer().getScale();this.setSizeInWorldSpace({width:t.width/e.x,height:t.height/e.y})}isValid(){return-1!==this.getIndexInParent()}setPivotInternal(t,e){const i=this.getBounds();"number"==typeof t?this.setBoundsFromSize(i.width,i.height,{x:t,y:e}):this.setBoundsFromSize(i.width,i.height,t)}setBoundsFromSize(t,e,i=this.getPivot()){this.bounds=new Rh(-i.x*t,-i.y*e,t,e)}}class cd extends ld{constructor(t,e){super(e),this.type="drawing",this.drawing=t,this.operation=e.createSpriteOperation(),this.sprite=this.operation.createBrush({}),this.operation.addSprite(this.sprite),this.radialBrush=this.sprite._createRadialBrush();const i=e.getRootContainers()[0].getBounds();this.bounds=new Rh(0,0,i.width,i.height),this.setTransform(Oh.IDENTITY),this.operation.setDirty(!0),this.setData(t)}beginStroke(t){if(this.currentStroke)throw new Error("A brush stroke has already been started but not finished.");if("imgly_brush_radial"!==t.id)throw new Error("This adapter does not support any brush faces other than the radial img.ly brush.");this.currentBrush=t,this.currentStroke={brush:t,path:{controlPoints:[]}},this.radialBrush.setColor(sd(t.color)),this.radialBrush.setHardness(t.hardness),this.radialBrush.setSize(t.size),this.currentPath=this.sprite.createPath(this.radialBrush.clone())}addPointToCurrentStroke(t,e=!0){if(!this.currentStroke||!this.currentBrush||!this.currentPath)throw new Error('A brush stroke has to first be started with a call to "beginStroke(brush:Brush)"');if(this.currentStroke.path.controlPoints.length){const e=this.currentStroke.path.controlPoints,i=e[e.length-1],r=this.currentBrush.size/10;if(Math.sqrt(t.x-i.x**2+(t.y-i.y**2))<r)return}const i=this.engine.getOutputContainer(),r=this.engine.getRootContainers()[0],n=Ah.pointFromSpaceToSpace(t,r,i,!0),o=Ah.absoluteToRelativePoint(n,i,!1),s=i.getBounds();this.currentPath.addControlPoint(ad.fromObject(o)),this.currentStroke.path.controlPoints.push(t),e&&this.sprite.render(ad.fromObject({x:s.width,y:s.height}))}endStroke(){if(!this.currentStroke||!this.currentPath||!this.currentBrush)return;this.currentStroke.path.controlPoints.length&&this.drawing.strokes.push(this.currentStroke),this.currentStroke=void 0,this.currentBrush=void 0,this.currentPath.setClosed(!0);const t=this.engine.getOutputContainer().getBounds();this.sprite.render(ad.fromObject({x:t.width,y:t.height})),this.currentPath=void 0}setData(t){this.drawing=b(b({},this.drawing),t),this.drawing.strokes&&(this.drawing.strokes=[]),this.sprite.clearPersistCanvas(),this.sprite.clearCanvas(),this.sprite.setPaths([]),this.drawStrokes(t.strokes)}getData(){return this.drawing}updateData(){this.setData(this.getData())}getOperation(){return this.operation}drawStrokes(t){t.forEach((t=>{this.beginStroke(t.brush),t.path.controlPoints.forEach((t=>{this.addPointToCurrentStroke(t,!0)})),this.endStroke()}))}}class ud extends nd{constructor(t,e,i,r){super(r),this.filterOperation=e,this.type="duotone-filter",e.set({intensity:i.colorIntensity}),e.set({filter:t}),r.pesdk.setAllOperationsToDirty()}getProperties(){return{colorIntensity:this.filterOperation.getOptions().intensity}}setProperties(t){let e=this.filterOperation.getOptions().intensity;void 0!==t.colorIntensity&&(e=Math.min(Math.max(t.colorIntensity,0),1)),this.filterOperation.set({intensity:e})}getOperation(){return this.filterOperation}getTypeIdentifier(){return"filter"}}class hd{constructor(t,e){this.engine=e,this.loaded=!1,this.loading=!1,this.asset=b({},t)}load(){return T(this,null,(function*(){if(this.loaded)return Promise.resolve();if(this.loading)return Promise.reject(new Error("Called Frame#load while it's already loading"));this.loading=!0;const{imageGroups:t}=this.asset,e=[];return["top","left","right","bottom"].forEach((i=>{if(!t[i])return;const r=t[i];["start","mid","end"].forEach((t=>{t in r&&e.push(this.loadPart(i,t))}))})),Promise.all(e).then((()=>{this.loaded=!0,this.loading=!1})).catch((()=>{this.loaded=!1,this.loading=!1}))}))}getFrame(){return b(b({},this.asset),{defaultName:this.asset.name,thumbnail:this.asset.thumbnailURI})}getIdentifier(){return this.asset.identifier}getDefaultName(){return this.asset.name}getThumbnail(){return this.asset.thumbnailURI}getTintable(){return this.asset.tintable||!1}getLayoutMode(){return this.asset.layoutMode}getImageGroups(){return this.asset.imageGroups}loadPart(t,e){return T(this,null,(function*(){return new Promise(((i,r)=>{const{imageGroups:n}=this.asset,o=n[t][e];let s=o;"string"!=typeof o&&"image"in o&&(s=o.image);const a=new Image;a.addEventListener("load",(()=>{"string"!=typeof o?this.asset.imageGroups[t][e].image=a:this.asset.imageGroups[t][e]=a,i(a)})),a.addEventListener("error",(()=>{r(new Error(`Failed to load image at ${a.src}`))})),a.crossOrigin=this.engine.configuration.crossOrigin||"anonymus",a.src=this.engine.assetProvider.getAssetSource("frame",s)}))}))}}class dd extends nd{constructor(t,e,i){super(i),this.frameOperation=t,this.type="frame",this.setProperties(e),i.pesdk.setAllOperationsToDirty()}setProperties(t){if(this.props=b(b({},this.props),t),"number"==typeof t.opacity&&this.frameOperation.set({alpha:t.opacity}),t.tintColor&&this.frameOperation.set({tintColor:sd(t.tintColor)}),t.width){const e=this.engine.getOutputContainer().getBounds(),i=Math.min(e.width,e.height),r=t.width/i;this.frameOperation.set({scale:r})}this.frameOperation.setDirty(!0)}getProperties(){return this.props}getOperation(){return this.frameOperation}getTypeIdentifier(){return"frame"}}class pd extends nd{constructor(t,e,i){super(e),this.blurOperation=i,this.type="gaussian-blur",this.setProperties(t)}getProperties(){const t=this.engine.getOutputContainer(),e=t.getBounds(),i=Math.min(e.size.width,e.size.height);return{blurRadius:Ah.scalarFromSpaceToSpace(this.blurOperation.getOptions().blurRadius*i,t,this.getContainer())}}setProperties(t){if(void 0!==t.blurRadius){const e=this.engine.pesdk.getOutputDimensions(),i=Math.min(e.x,e.y),r=this.getContainer(),n=this.engine.getOutputContainer(),o=Ah.scalarFromSpaceToSpace(t.blurRadius,r,n)/i;this.blurOperation.set({blurRadius:o})}}getOperation(){return this.blurOperation}getTypeIdentifier(){return"blur"}}class fd extends ld{constructor(t,e){super(e),this.data=t,this.type="image";const i=e.configuration.downscaleOptions;if(i){const{maxDimensions:t}=i;this.downscaleOptions={maxMegaPixels:i.maxMegaPixels,maxDimensions:{width:Math.min(e.maxTextureDimension,t?t.width:Number.MAX_VALUE),height:Math.min(e.maxTextureDimension,t?t.height:Number.MAX_VALUE)}}}else this.downscaleOptions={maxDimensions:{width:e.maxTextureDimension,height:e.maxTextureDimension}};this.setData(t);const{image:r}=this.data;this.bounds=new Rh(yh.ZERO,{width:r.width,height:r.height})}setData(t){if(this.data=b(b({},this.data),t),t.image){let e,{image:i}=t;if(i instanceof HTMLImageElement&&(e=this.engine.pesdk.parseExif(i),e)){const t=e.getTags();if(t&&t.Orientation){const r=1!==t.Orientation&&2!==t.Orientation,n=-1!==[2,4,5,7].indexOf(t.Orientation);if(r||n){if(Ju()||Qu()||!CSS.supports("image-orientation","from-image")){const e=this.engine.pesdk.createOperation("exif-orientation",{},!1);e.setTags(t),i=e.applyTo(i)}e.setOrientation(1),t.Orientation=1}}}const r=new xh(i,this.downscaleOptions);r.on(vh.IMAGE_DOWNSCALED,(({width:t,height:e})=>{this.engine.emit(td.IMAGE_DOWNSCALED,{width:t,height:e})})),r.on(vh.BEGAN_IMAGE_DOWNSCALING,(()=>{this.engine.emit(td.BEGAN_IMAGE_DOWNSCALING)})),i=r.downscaleIfNecessary(),this.data.image=i,this.engine.pesdk.setImage(i,e),this.setBoundsFromSize(i.width,i.height)}}getData(){return this.data}setPivot(t,e){throw new Error("This container does not support modifying the pivot")}getOperation(){throw new Error("This container has no associated operation")}}class md extends nd{constructor(t,e,i){super(e),this.props=t,this.blurOperation=i,this.type="linear-blur",this.setProperties(t)}getProperties(){return this.props}setProperties(t){this.props=b(b({},this.props),t);const e=this.blurOperation.getOptions(),i=this.engine.getOutputContainer(),r=i.getBounds(),n=this.getContainer(),o=i.getBaseLocalToParentMatrix(),s=Ah.getBaseLocalToWorldMatrix(n),a=Dh.multiply(Dh.getInverted(o),s),l=Math.min(r.size.width,r.size.height);if(void 0!==t.blurRadius){const r=Ah.scalarFromSpaceToSpace(t.blurRadius,n,i);e.blurRadius=r/l}if(void 0!==t.start){const r=Dh.transformPoint(a,t.start),n=Ah.absoluteToRelativePoint(r,i,!1);e.controlPoint1=n}if(void 0!==t.end){const r=Dh.transformPoint(a,t.end),n=Ah.absoluteToRelativePoint(r,i,!1);e.controlPoint2=n}this.blurOperation.set(e)}updateProperties(){const t=this.getProperties();this.setProperties(t)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"linear-focus"}}class gd extends nd{constructor(t,e,i,r){super(r),this.filter=t,this.filterOperation=e,this.props=i,this.type="lut-filter",e.set({intensity:i.intensity}),e.set({filter:t}),r.pesdk.setAllOperationsToDirty()}getProperties(){return{intensity:this.filterOperation.getOptions().intensity,lutImage:this.props.lutImage,horizontalTileCount:this.props.horizontalTileCount,verticalTileCount:this.props.verticalTileCount}}setProperties(t){const e=this.filterOperation.getOptions(),i="number"==typeof t.intensity?t.intensity:e.intensity;this.filterOperation.set({intensity:i})}getOperation(){return this.filterOperation}getTypeIdentifier(){return"filter"}}class _d extends nd{constructor(t,e,i){super(e),this.props=t,this.blurOperation=i,this.type="mirrored-blur",this.setProperties(t)}getProperties(){return this.props}setProperties(t){this.props=b(b({},this.props),t);const e=this.blurOperation.getOptions(),i=this.engine.getOutputContainer(),r=i.getBounds(),n=this.getContainer(),o=i.getBaseLocalToParentMatrix(),s=Ah.getBaseLocalToWorldMatrix(n),a=Dh.multiply(Dh.getInverted(o),s),l=Math.min(r.size.width,r.size.height);if(void 0!==t.blurRadius){const r=Ah.scalarFromSpaceToSpace(t.blurRadius,n,i);e.blurRadius=r/l}if(void 0!==t.gradientSize){const r=Ah.scalarFromSpaceToSpace(t.gradientSize,n,i)/l;e.gradientSize=r}if(void 0!==t.clearAreaWidth){const r=Ah.scalarFromSpaceToSpace(t.clearAreaWidth,n,i)/l;e.size=.5*r}if(void 0!==t.mirrorAxisOrigin){const r=Dh.transformPoint(a,t.mirrorAxisOrigin),n=Ah.absoluteToRelativePoint(r,i,!1);e.start=n}if(void 0!==t.mirrorAxisDirection){const r=Dh.transformPoint(a,t.mirrorAxisDirection),n=Ah.absoluteToRelativePoint(r,i,!1);e.end=n}this.blurOperation.set(e)}updateProperties(){const t=this.getProperties();this.setProperties(t)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"mirrored-focus"}}class yd extends ld{constructor(t,e,i,r){super(r),this.settings=t,this.operation=e,this.flipOperation=i,this.type="output",this.flipTransform=Dh.IDENTITY,this.blockTransformUpdate=!1,this.transformUpdateWhileBlock=!1,this.bounds=new Rh({x:0,y:0},this.settings.resolution),this.setData(t)}pauseChildrenUpdates(){this.transformUpdateWhileBlock=!1,this.blockTransformUpdate=!0}resumeChildrenUpdates(){this.blockTransformUpdate=!1,this.transformUpdateWhileBlock&&this.updateChildrenContainers()}setData(t){if(this.settings=b(b({},this.settings),t),t.resolution&&(this.setBoundsFromSize(t.resolution.width,t.resolution.height),this.setTransform(this.transform),this.operation.set({outputResolution:new ad(t.resolution.width,t.resolution.height)})),void 0!==t.flipHorizontally){const e=t.flipHorizontally;this.updateFlipTransform(),this.flipOperation.set({flipHorizontally:e})}if(void 0!==t.flipVertically){const e=t.flipVertically;this.updateFlipTransform(),this.flipOperation.set({flipVertically:e})}this.operation.setDirty(!0),this.flipOperation.setDirty(!0)}getData(){return this.settings}setResolution(t){this.setData({resolution:t})}getResolution(){return this.getData().resolution}setTransform(t){if(this.transform.rotation!==t.rotation||this.transform.position!==t.position||this.transform.scale!==t.scale){this.transform=t;const e=this.flipTransform;this.flipTransform=Dh.IDENTITY;const i=this.engine.getRootContainers()[0],r=Ah.pointFromSpaceToSpace({x:0,y:0},i,this),n=-t.rotation,o=ad.fromObject(r).clone().subtract(ad.fromObject(this.getBounds().origin));this.operation.set({pivot:new ad(0,0),position:o,scale:new ad(1/t.scale.x,1/t.scale.y),rotation:n}),this.flipTransform=e,this.operation.setDirty(!0),this.updateChildrenContainers()}}rotate90(t=!1){const e=t?.5*-Math.PI:.5*Math.PI,i=this.getResolution(),r=this.getPivot(),n=this.getBounds(),o={x:n.midX,y:n.midY},s=Ah.getPointInWorldSpace(o,this);this.setPivot(.5,.5),this.setPosition(s),this.setRotation(this.getRotation()-e);const a={width:i.height,height:i.width};this.setResolution(a);const l={x:-a.width*(.5-r.x),y:-a.height*(.5-r.y)},c=Ah.getPointInWorldSpace(l,this);this.setPivot(r),this.setPosition(c),this.updateChildrenContainers()}setPivot(t,e){super.setPivotInternal(t,e),this.setTransform(this.transform)}getTransform(){return this.transform}getBaseLocalToParentMatrix(){return Ah.rectTransformToAffineTransform(this.getTransform())}getLocalToParentMatrix(){const t=Ah.rectTransformToAffineTransform(this.getTransform());return Dh.multiply(t,this.flipTransform)}getFlipTransformMatrix(){return this.flipTransform}isValid(){return!0}getOperation(){return this.operation}updateFlipTransform(){const{flipHorizontally:t,flipVertically:e}=this.settings;if(t||e){const i=this.getPivot(),r=this.getBounds(),n=t?-1:1,o=t?-2*(i.x-.5)*r.width:0,s=e?-1:1,a=e?-2*(i.y-.5)*r.height:0;this.flipTransform=new Dh(n,0,0,s,o,a)}else this.flipTransform=Dh.IDENTITY}updateChildrenContainers(){this.blockTransformUpdate?this.transformUpdateWhileBlock=!0:this.engine.rootOperations.forEach((t=>{id(t)?(t.updateTransform(),"updateData"in t&&t.updateData()):"updateProperties"in t&&t.updateProperties()}))}}class vd extends nd{constructor(t,e,i){super(i),this.overlayOperation=t,this.type="overlay";const r=e.blendMode||i.mapBlendMode(t.getBlendMode());t.set({blendMode:i.reverseMapBlendMode(r)}),t.set({image:e.image}),i.pesdk.setAllOperationsToDirty()}getProperties(){const t=this.overlayOperation.getOptions();return{image:t.image,blendMode:this.engine.mapBlendMode(t.blendMode),opacity:t.alpha}}setProperties(t){const e=this.overlayOperation.getOptions();"number"==typeof t.opacity&&(e.alpha=t.opacity),void 0!==t.blendMode&&(e.blendMode=this.engine.reverseMapBlendMode(t.blendMode)),this.overlayOperation.set(e),this.overlayOperation.setDirty(!0)}getOperation(){return this.overlayOperation}getTypeIdentifier(){return"overlay"}setFlipHorizontally(t){this.overlayOperation.setFlipHorizontally(t)}setFlipVertically(t){this.overlayOperation.setFlipVertically(t)}getFlipHorizontally(){return this.overlayOperation.getFlipHorizontally()}getFlipVertically(){return this.overlayOperation.getFlipVertically()}}class bd extends nd{constructor(t,e,i){super(e),this.props=t,this.blurOperation=i,this.type="radial-blur",this.setProperties(t)}getProperties(){return this.props}setProperties(t){this.props=b(b({},this.props),t);const e=this.blurOperation.getOptions(),i=this.engine.getOutputContainer(),r=i.getBounds(),n=this.getContainer(),o=i.getBaseLocalToParentMatrix(),s=Ah.getBaseLocalToWorldMatrix(n),a=Dh.multiply(Dh.getInverted(o),s),l=Math.min(r.size.width,r.size.height);if(void 0!==t.blurRadius){const r=Ah.scalarFromSpaceToSpace(t.blurRadius,n,i);e.blurRadius=r/l}if(void 0!==t.center){const r=Dh.transformPoint(a,t.center),n=Ah.absoluteToRelativePoint(r,i,!1);e.position=n}if(void 0!==t.radius){const r=Ah.scalarFromSpaceToSpace(t.radius,n,i)/l;e.radius=r}if(void 0!==t.gradientSize){const r=Ah.scalarFromSpaceToSpace(t.gradientSize,n,i)/l;e.gradientRadius=r}this.blurOperation.set(e)}updateProperties(){const t=this.getProperties();this.setProperties(t)}getOperation(){return this.blurOperation}getTypeIdentifier(){return"radial-focus"}}class xd extends ld{constructor(t,e){super(e),this.data=t,this.type="sticker";let i=t.image;const r=this.engine.pesdk.parseExif(t.image);if(r){const e=r.getTags();if(e&&e.Orientation){const n=1!==e.Orientation&&2!==e.Orientation,o=-1!==[2,4,5,7].indexOf(e.Orientation);if(n||o){const n=this.engine.pesdk.createOperation("exif-orientation",{},!1);n.setTags(e),i=n.applyTo(t.image),r.setOrientation(1),e.Orientation=1}}}i=new xh(i,{maxMegaPixels:{desktop:10,mobile:5}}).downscaleImageIfNecessary(),this.operation=e.createSpriteOperation(),this.sprite=this.operation.createSticker({identifier:"",image:i,position:new ad(0,0),dimensions:new ad(1,1),rotation:0,smoothDownscaling:!1}),this.operation.addSprite(this.sprite),this.bounds=new Rh({x:0,y:0},{width:i.width,height:i.height}),this.setTransform(Oh.IDENTITY),this.sprite.setPivot(new ad(0,0)),this.operation.setDirty(!0),this.setData(t)}setData(t){this.data=b(b({},this.data),t),t.id&&(this.id=t.id),Ih(t.opacity)&&t.opacity>=0&&this.sprite.setAlpha(t.opacity),t.tintColor&&this.sprite.setTintColor(sd(t.tintColor)),t.tintMode&&this.sprite.setTintMode(t.tintMode),this.operation.setDirty(!0)}getData(){return this.data}updateData(){this.setData(this.getData())}setTransform(t){super.setTransform(t);const e=this.engine.getOutputContainer(),i=this.getParent(),r={width:this.bounds.width*t.scale.x,height:this.bounds.height*t.scale.y},n=Ah.sizeFromSpaceToSpace(r,i,e);this.sprite.setDimensions(ad.fromSize(n));const o=Ah.pointFromSpaceToSpace(t.position,i,e,!0),s=Ah.absoluteToRelativePoint(o,e,!1);this.sprite.setPosition(new ad(s.x,s.y));const a=Ah.getRotationBetweenCoordinateSpaces(i,e),l=t.rotation+a;this.sprite.setRotation(l),this.operation.setDirty(!0)}setPivot(t,e){this.setPivotOnSelfAndSprite(this.sprite,t,e)}getOperation(){return this.operation}setFlipHorizontally(t){this.sprite.setFlipHorizontally(t)}setFlipVertically(t){this.sprite.setFlipVertically(t)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}}const wd=t=>2*Math.PI-t;class Sd{constructor(t){this.context=t,this.sourceLines=[],this.maxWidth=100}static buildWords(t){const e=[];let i="";const r=t.length;for(let n=0;n<r;n+=1){const o=t[n];i+=o,(" "===o||"-"===o||n===r-1)&&(e.push(i),i="")}return e}getLines(){let t=[],e=[];const i=this.sourceLines.length;for(let r=0;r<i;r+=1){const i=this.sourceLines[r],n=Sd.buildWords(i),o=n.length;for(let i=0;i<o;i+=1){const r=n[i],o=e.concat(r).join("").replace(/\s+$/i,"");if(this.getWidth(o)>this.maxWidth){e.length>0&&(t.push(e.join("")),e=[r]);const i=r.replace(/\s+$/i,"");if(this.getWidth(i)>this.maxWidth){const i=this.splitWord(r);t=t.concat(i.lines),i.rest&&(e=[i.rest])}}else e.push(r)}t.push(e.join("")),e=[]}return t}splitWord(t){const e={lines:[],rest:null},i=t.length;let r=[];for(let n=0;n<i;n+=1){const o=t[n];this.getWidth(r.concat(o).join(""))>this.maxWidth?(r.length>0&&e.lines.push(r.join("")),r=[o]):r.push(o),n===i-1&&r.length>0&&(e.rest=r.join(""))}return e}getWidth(t){return this.context.measureText(t).width}setText(t){this.sourceLines=t.split("\n")}setMaxWidth(t){this.maxWidth=t}}function kd(t,e,i,r,n,o,s){t.font=`${i.fontStyle||"normal"} ${i.fontWeight||"normal"} ${r}px "${i.fontFamily}"`;const a=new Sd(t);a.setText(e),a.setMaxWidth(o);const l=a.getLines().map((t=>t.replace(/\s+$/i,""))),c=function(t,e){if(e){const i=1/e.unitsPerEm*t,r=e.ascender*i,n=e.descender*i;return r+Math.abs(n)}return 1.1*t}(r,s),u=c*n,h=c/5;return{width:o+2*h,height:l.length*u+2*h}}class Cd extends ld{constructor(t,e){if(super(e),this.text=t,this.type="text",!Cd.measureContext){const t=document.createElement("canvas");Cd.measureContext=t.getContext("2d")}this.operation=e.createSpriteOperation();const i=this.engine.getOutputContainer(),r=this.getParent(),n=i.getBounds();this.sprite=this.operation.createText({text:t.text,position:new ad(0,0),rotation:0,fontSize:Ah.scalarFromSpaceToSpace(t.fontSize/n.height,r,i),lineHeight:t.lineHeight,fontIdentifier:t.fontIdentifier,alignment:t.alignment,color:sd(t.textColor),backgroundColor:sd(t.backgroundColor),maxWidth:Ah.scalarFromSpaceToSpace(t.width/n.width,r,i)});const o=e.assetProvider.getFontManager().getFontWithId(t.fontIdentifier);this.sprite.setFontFamily(o.fontFamily),this.sprite.setFontWeight(o.fontWeight||"normal"),this.sprite.setFontStyle(o.fontStyle||"normal"),this.sprite.setFontIdentifier(o.identifier),this.sprite.setTextMetrics(o.textMetrics),this.sprite.setPivot(new ad(0,0)),this.operation.addSprite(this.sprite);const s=kd(Cd.measureContext,t.text,o,t.fontSize,t.lineHeight,t.width,o.textMetrics);this.bounds=new Rh(0,0,s.width,s.height),this.setTransform(Oh.IDENTITY),this.operation.setDirty(!0)}setData(t){this.text=b(b({},this.text),t);const e=this.engine.assetProvider.getFontManager().getFontWithId(t.fontIdentifier||this.text.fontIdentifier);if(t.fontIdentifier&&(this.sprite.setFontFamily(e.fontFamily),this.sprite.setFontWeight(e.fontWeight||"normal"),this.sprite.setFontStyle(e.fontStyle||"normal"),this.sprite.setFontIdentifier(e.identifier),this.sprite.setTextMetrics(e.textMetrics)),t.id&&(this.id=t.id),t.text&&this.sprite.setText(t.text),t.fontSize){const e=this.engine.getOutputContainer(),i=this.getParent(),r=Ah.scalarFromSpaceToSpace(t.fontSize,i,e),n=e.getBounds();this.sprite.setFontSize(r/n.height)}if(t.alignment&&this.sprite.setAlignment(t.alignment),t.lineHeight&&this.sprite.setLineHeight(t.lineHeight),t.textColor&&this.sprite.setColor(sd(t.textColor)),t.backgroundColor&&this.sprite.setBackgroundColor(sd(t.backgroundColor)),t.width){const e=this.engine.getOutputContainer(),i=this.getParent(),r=Ah.scalarFromSpaceToSpace(t.width,i,e),n=e.getBounds();this.sprite.setMaxWidth(r/n.width)}const i=kd(Cd.measureContext,this.text.text,e,this.text.fontSize,this.text.lineHeight,this.text.width,e.textMetrics);this.setBoundsFromSize(i.width,i.height),this.operation.setDirty(!0)}getData(){return this.text}updateData(){this.setData(this.getData())}setTransform(t){super.setTransform(t);const e=this.engine.getOutputContainer(),i=this.getParent(),r=Ah.pointFromSpaceToSpace(t.position,i,e,!0),n=Ah.absoluteToRelativePoint(r,e,!1);this.sprite.setPosition(new ad(n.x,n.y));const o=Ah.getRotationBetweenCoordinateSpaces(i,e);this.sprite.setRotation(t.rotation+o),this.operation.setDirty(!0)}setPivot(t,e){this.setPivotOnSelfAndSprite(this.sprite,t,e)}getOperation(){return this.operation}setFlipHorizontally(t){this.sprite.setRotation(this.getFlippedRotation({flipHorizontally:t})),this.sprite.setFlipHorizontally(t)}setFlipVertically(t){this.sprite.setRotation(this.getFlippedRotation({flipVertically:t})),this.sprite.setFlipVertically(t)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}getFlippedRotation({flipVertically:t,flipHorizontally:e}){const i=t||this.getFlipVertically(),r=e||this.getFlipHorizontally();let n=this.getRotation();return(i||r)&&(n=wd(n)),n}}const Td=1e3;class Ed extends ld{constructor(t,e,i){super(i),this.textDesign=t,this.layout=e,this.type="text-design",this.currentLayoutSize=void 0,this.layoutID=e.identifier,this.operation=i.createSpriteOperation();const r=this.engine.getOutputContainer(),n=this.getParent(),o=r.getBounds(),s=Math.min(o.width,o.height);e.seed(t.seed),this.bounds=this.calculateBounds(this.textDesign,this.layout);const a=t.width;this.sprite=this.operation.createTextDesign({text:t.text,layout:e,inverted:t.inverted,color:sd(t.color),width:Ah.scalarFromSpaceToSpace(t.width/s,n,r),padding:t.padding/a,seed:t.seed}),this.updatePivot(),this.operation.addSprite(this.sprite),this.setTransform(Oh.IDENTITY),this.operation.setDirty(!0)}static stringify(t){return JSON.stringify(t,Ed.serializer())}static serializer(){const t=[],e=[],i=(i,r)=>t[0]===r?"[Circular ~]":`[Circular ~.${e.slice(0,t.indexOf(r)).join(".")}]`;return function(r,n){const o=this;if(t.length>0){const s=t.indexOf(o);~s?(t.splice(s+1),e.splice(s,1/0,r)):(t.push(o),e.push(r)),~t.indexOf(n)&&(n=i.call(o,r,n))}else t.push(n);return n}}calculateBounds(t,e,i=!0){const r=t.inverted&&i?Math.max(0,2*t.padding):0,n=t.width/Td;if(void 0===this.currentLayoutSize){e.seed(t.seed);const i=e.generateLayoutData(t.text,Td);this.currentLayoutData=i,this.currentLayoutSize=i.getSize()}return new Rh(0,0,this.currentLayoutSize.width*n+r,this.currentLayoutSize.height*n+r)}findNextUniqueSeed(t,e,i){let r=i;const n=this.currentLayoutData?Ed.stringify(this.currentLayoutData.getRows()):"";let o;for(let i=0;i<20&&(e.seed(r),o=e.generateLayoutData(t.text,Td),n===Ed.stringify(o.getRows()));i+=1)r+=1;return e.seed(r),this.currentLayoutData=o,r}setData(t){if(this.textDesign=b(b({},this.textDesign),t),t.id&&(this.id=t.id),void 0!==t.padding){const e=this.textDesign.width;this.sprite.setPadding(t.padding/e)}else t.width&&(this.textDesign.padding=this.sprite.getPadding()*this.textDesign.width);if(void 0!==t.seed&&(t.seed<0&&(t.seed=this.findNextUniqueSeed(this.textDesign,this.layout,Date.now()),this.textDesign.seed=t.seed),this.currentLayoutSize=void 0,this.layout.seed(t.seed),this.sprite.setSeed(t.seed),this.sprite.setLayout(this.layout)),t.color&&this.sprite.setColor(sd(t.color)),void 0!==t.inverted&&this.sprite.setInverted(t.inverted),t.text&&(this.currentLayoutSize=void 0,this.sprite.setText(t.text)),t.width){const e=this.engine.getOutputContainer(),i=this.getParent(),r=e.getBounds(),n=Math.min(r.width,r.height),o=Ah.scalarFromSpaceToSpace(t.width/n,i,e);this.sprite.setWidth(o)}if(void 0!==t.padding||void 0!==t.seed||void 0!==t.inverted||t.text||t.width){const t=this.calculateBounds(this.textDesign,this.layout);this.setBoundsFromSize(t.width,t.height),this.updatePivot()}this.operation.setDirty(!0)}getData(){return this.textDesign}updateData(){this.setData(this.getData())}setTransform(t){super.setTransform(t);const e=this.engine.getOutputContainer(),i=this.getParent();if(1!==t.scale.x||1!==t.scale.y)throw new Error("This engine doesn't support scaling TextDesign containers! You can change the bounds using the width property of the TextDesign data.");const r=Ah.pointFromSpaceToSpace(t.position,i,e,!0),n=Ah.absoluteToRelativePoint(r,e,!1);this.sprite.setPosition(new ad(n.x,n.y));const o=Ah.getRotationBetweenCoordinateSpaces(i,e);this.sprite.setRotation(t.rotation+o),this.operation.setDirty(!0)}setPivot(t,e){"number"==typeof t?super.setPivot(t,e):super.setPivot(t),this.updatePivot()}getOperation(){return this.operation}getLayoutID(){return this.layoutID}setFlipHorizontally(t){this.sprite.setFlipHorizontally(t)}setFlipVertically(t){this.sprite.setFlipVertically(t)}getFlipHorizontally(){return this.sprite.getFlipHorizontally()}getFlipVertically(){return this.sprite.getFlipVertically()}updatePivot(){const t=this.textDesign.inverted?Math.max(0,this.textDesign.padding):0,e=new yh(this.bounds.width-2*t,this.bounds.height-2*t),i=this.getPivot(),r=new yh(i.x*this.bounds.width,i.y*this.bounds.height),n=new yh(t,t),o=r.subtract(n).divide(e);this.sprite.setPivot(new ad(o.x,o.y))}}const{BLEND_MODES:Rd}=Pc.Operations.OverlayOperation,Dd="imgly_font_open_sans_bold";class Id extends rd{constructor(t){if(super(t),this.previews=Array(),this.rootOperationStack=[],this.deferredRenderQueue=[],this.operationStackOffset=1,this.enforceOperationOrder=()=>{this.refreshFlipIndex(),this.refreshFrameIndex()},this.assetProvider=t.assetProvider||new Eh,this.wrapper=new qu({license:t.license,crossOrigin:t.crossOrigin,assets:{resolver:(t,e)=>this.resolveAssetForSDK(t,e)},editor:{preferredRenderer:t.preferredRenderer,pixelRatio:1}}),this.editor=this.wrapper.getEditor(),this.sdk=this.editor.getSDK(),this.sdk.setRenderMode("adapter"),this.tempCanvas=document.createElement("canvas"),this.sdk.setCanvas(this.tempCanvas),"webgl"===t.preferredRenderer){const t=document.createElement("canvas"),e=t.getContext("webgl")||t.getContext("experimental-webgl");this.maxTextureDimension=e.getParameter(e.MAX_TEXTURE_SIZE)}else this.maxTextureDimension=1/0}get configuration(){return this.config}get pesdk(){return this.sdk}get rootOperations(){return this.rootOperationStack}dispose(){this.pesdk.dispose(),this.wrapper.dispose()}render(t){return new Promise((e=>{const i=()=>new Promise((i=>{const{canvas:r}=t,n=t.getTransform(),o=this.outputContainer.getPivot(),s=t.getCanvasBounds(),a=t.quality,{tempCanvas:l}=this;this.sdk.setTextureQuality(a);const c=this.sdk.getOutputDimensions();return l.width=c.x,l.height=c.y,this.sdk.getRenderer().resizeTo(new ad(l.width,l.height)),this.sdk.render(!0).then((()=>{const a=r.getContext("2d");a.clearRect(0,0,r.width,r.height),a.save(),a.translate(-s.minX,-s.minY),a.translate(n.position.x,n.position.y),a.rotate(n.rotation),a.scale(n.scale.x,n.scale.y),a.translate(-o.x*l.width,-o.y*l.height),a.scale(1/t.quality,1/t.quality),a.drawImage(l,0,0),a.restore(),e(),this.deferredRenderQueue.shift(),this.deferredRenderQueue.length?(this.sdk.setAllOperationsToDirty(),Promise.resolve(this.deferredRenderQueue[0]().then(i))):i()}))}));this.deferredRenderQueue.push(i),1===this.deferredRenderQueue.length&&i()}))}createPreview(t){const e=new ed(t,this);return this.previews.push(e),e}export(){return T(this,arguments,(function*(t=c.IMAGE,e=u.PNG,i=1){return new Promise((r=>{const n=()=>new Promise((n=>this.sdk.export(this.mapToRenderType(t),this.mapToImageFormat(e),i).then((t=>{r(t),this.deferredRenderQueue.shift(),this.deferredRenderQueue.length?Promise.resolve(this.deferredRenderQueue[0]().then(n)):n()}))));this.deferredRenderQueue.push(n),1===this.deferredRenderQueue.length&&n()}))}))}getRootContainers(){return[this.rootContainer]}getOutputContainer(){return this.outputContainer}findContainerByID(t){return t===this.rootContainer.getID()?this.rootContainer:this.rootOperationStack.find((e=>e.getID()===t))}findEffectByID(t){return this.rootOperationStack.find((e=>e.getID()===t))}addImage(t,e,i){if(this.rootContainer)throw new Error("A background image already exists - did you mean to use addSticker?");const r=new fd(t,this);if(this.rootContainer=r,!this.outputContainer){const{width:t,height:e}=r.getBounds(),i={resolution:{width:t,height:e},flipHorizontally:!1,flipVertically:!1},n=this.sdk.createOperation("output",{},!1),o=this.sdk.createOperation("flip",{},!1);this.insertIntoOperationsStack(n,this.operationStackOffset-1),this.insertIntoOperationsStack(o,this.operationStackOffset),this.outputContainer=new yd(i,n,o,this)}return r}addSticker(t,e,i){if(!e)throw new Error("This engine does not support adding stickers as root elements.");this.ensureContainerIsRoot(e);const r=new xd(t,this);return this.addToStackAtIndex(r,i),r}addStickerFromAssets(t,e,i){if(!e)throw new Error("This engine does not support adding stickers as root elements.");return this.ensureContainerIsRoot(e),new Promise(((e,r)=>{const n=new Image;n.onload=()=>{const t=new xd({image:n,opacity:1},this);this.addToStackAtIndex(t,i),e(t)},n.onerror=t=>{r(t)},n.crossOrigin=this.config.crossOrigin||null,n.src=this.assetProvider.getAssetSource("sticker",t)}))}addText(t,e,i){if(!e)throw new Error("This engine does not support adding text as root elements.");if(!this.assetProvider.getFontManager().isFontLoaded(t.fontIdentifier||Dd))throw new Error("Adding text synchronously only works if the required font is already loded! Consider using the asynchronous addTextWithFontLoading function instead!");this.ensureContainerIsRoot(e);const r=b({text:"",fontIdentifier:Dd,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100},t),n=new Cd(r,this);return this.addToStackAtIndex(n,i),n}addTextWithFontLoading(t,e,i){if(!e)throw new Error("This engine does not support adding text as root elements.");const r=this.assetProvider.getFontManager(),n=t.fontIdentifier||Dd;return new Promise(((o,s)=>{r.loadFontWithIdentifier(n).then((()=>{this.ensureContainerIsRoot(e);const r=b({text:"",fontIdentifier:Dd,fontSize:20,lineHeight:1,alignment:"center",textColor:[1,1,1],backgroundColor:[0,0,0,0],width:100},t),n=new Cd(r,this);this.addToStackAtIndex(n,i),o(n)})).catch(s)}))}addTextDesignAsync(t="imgly_text_design_blocks",e,i,r){return T(this,null,(function*(){if(!i)throw new Error("This engine does not support adding TextDesign as a root element.");const n=b({seed:Date.now(),padding:0,text:"",color:[0,0,0],inverted:!1,width:100},e),o=this.wrapper.getTextDesignLayoutByID(t);if(!o)throw new Error(`The layout could not be loaded for the given id: ${t}`);const s=o.getImagePaths().map((t=>{const e=t.split("/").pop()||"";return{path:t,fullPath:this.assetProvider.getAssetSource("textdesign",e)}})),a=this.wrapper.getTextDesignAssetManager(),l=this.wrapper.getTextDesignFontManager().getVariationsByIdentifier();a.setFonts(l),yield a.loadImages(s),o.onImagesLoaded();const c=Object.keys(l);return this.assetProvider.getFontManager().loadFontsWithIdentifiers(c).then((()=>{this.ensureContainerIsRoot(i);const t=new Ed(n,o,this);return this.addToStackAtIndex(t,r),Promise.resolve(t)}))}))}addDrawing(t,e,i){if(!e)throw new Error("This engine does not support DrawingContainers as root elements.");this.ensureContainerIsRoot(e);const r=new cd(t,this);return this.addToStackAtIndex(r,i),r}addGaussianBlur(t,e,i){this.ensureContainerIsRoot(e);const r=new pd(t,this,this.sdk.createOperation("blur",{},!1));return this.addToStackAtIndex(r,i),r}addRadialBlur(t,e,i){this.ensureContainerIsRoot(e);const r=new bd(t,this,this.sdk.createOperation("radial-focus",{},!1));return this.addToStackAtIndex(r,i),r}addMirroredBlur(t,e,i){this.ensureContainerIsRoot(e);const r=new _d(t,this,this.sdk.createOperation("mirrored-focus",{},!1));return this.addToStackAtIndex(r,i),r}addLinearBlur(t,e,i){this.ensureContainerIsRoot(e);const r=new md(t,this,this.sdk.createOperation("linear-focus",{},!1));return this.addToStackAtIndex(r,i),r}addDuoToneFilter(t,e,i){throw new Error("Not supported! Use addDuoToneFilterFromAssets instead")}addDuoToneFilterFromAssets(t,e,i){this.ensureContainerIsRoot(e);const r=this.sdk.getOperationsStack().getByIdentifier("filter");if(r&&r.getIdentifier()!==t)throw new Error("This engine doesn't support multiple types of filter operations at once!");const n=r||this.sdk.createOperation("filter",{},!1);return new Promise(((e,r)=>{try{const r=this.assetProvider.getDuotoneFilterAsset(t),o={colorIntensity:r.defaultIntensity||0},s=new Pc.Operations.FilterOperation.Filters.DuoToneFilter({intensity:o.colorIntensity,lightColor:Pc.Color.fromHex(r.lightColor),darkColor:Pc.Color.fromHex(r.darkColor)}),a=new ud(s,n,o,this);this.addToStackAtIndex(a,i),e(a)}catch(t){t&&r(t)}}))}addLUTFilter(t,e,i){throw new Error("Not supported! Use addLUTFilterFromAssets instead")}addLUTFilterFromAssets(t,e,i){this.ensureContainerIsRoot(e);const r=this.sdk.getOperationsStack().getByIdentifier("filter");if(r&&r.getIdentifier()!==t)throw new Error("This engine doesn't support multiple types filter operations at once!");const n=r||this.sdk.createOperation("filter",{},!1);return new Promise(((e,r)=>{const o=new Image;o.addEventListener("load",(()=>{const r=this.assetProvider.getLUTFilterAsset(t),s={horizontalTileCount:r.horizontalTileCount||5,verticalTileCount:r.verticalTileCount||5,intensity:r.defaultIntensity||1},a=new Pc.Operations.FilterOperation.Filters.ThreeDLUTFilter(b(b({},s),{image:o})),l=b(b({},s),{lutImage:new Image}),c=new gd(a,n,l,this);this.addToStackAtIndex(c,i),e(c)})),o.addEventListener("error",(t=>{r(t)})),o.crossOrigin=this.config.crossOrigin||null,o.src=this.assetProvider.getAssetSource("filter",t)}))}addAdjustments(t,e,i){this.ensureContainerIsRoot(e);const r=new od(t,this,this.sdk.createOperation("adjustments",{},!1));return this.addToStackAtIndex(r,i),r}addOverlay(t,e,i){this.ensureContainerIsRoot(e);const r=new vd(this.sdk.createOperation("overlay",{},!1),t,this);return this.addToStackAtIndex(r,i),r}addOverlayFromAssets(t,e,i){return this.ensureContainerIsRoot(e),new Promise(((e,r)=>{const n=this.sdk.getOperationsStack(),o=n.getByIdentifier("overlay");o&&o.getIdentifier()!==t&&n.remove(o);const s=o||this.sdk.createOperation("overlay",{},!1),a=new Image;a.onload=()=>{const t={image:a,opacity:1,blendMode:nt.NORMAL},r=new vd(s,t,this);this.addToStackAtIndex(r,i),e(r)},a.onerror=t=>{r(t)},a.crossOrigin=this.config.crossOrigin||null,a.src=this.assetProvider.getAssetSource("overlay",t)}))}addFrame(t,e,i){throw new Error("Not supported!")}addFrameFromAssets(t,e,i){return T(this,null,(function*(){this.ensureContainerIsRoot(e);const r=this.assetProvider.getFrameAsset(t);if(!r)throw new Error(`The requested asset does not exist! ${t}`);const n=new hd(r,this);yield n.load();const o=this.getOutputContainer().getBounds(),s=Math.min(o.width,o.height),a=this.sdk.createOperation("frame",{},!1);a.setFrame(n.getFrame());const l={opacity:1,tintColor:[1,1,1],tintable:!1,width:Math.max(1,.1*s),imageGroups:n.getFrame().imageGroups},c=new dd(a,l,this);return this.addToStackAtIndex(c,i),Promise.resolve(c)}))}removeEffect(t){if(!t.isValid())return;const e=t.getOperation();this.sdk.removeOperation(e),this.sdk.setAllOperationsToDirty(),this.rootOperationStack.splice(t.getIndexInParent(),1)}removeContainer(t){if(!t.isValid()||"output"===t.type)return;const e=t.getOperation();this.sdk.removeOperation(e),this.sdk.setAllOperationsToDirty(),this.rootOperationStack.splice(t.getIndexInParent(),1)}refreshOutputIndex(){const t=this.sdk.getOperationsStack().getIndexByIdentifier("output");this.moveInOperationsStack(t,this.operationStackOffset-1)}refreshFlipIndex(){const t=this.sdk.getOperationsStack().getIndexByIdentifier("flip"),e=this.sdk.getOperationsStack().getStack().length-1;t!==e&&this.moveInOperationsStack(t,e)}refreshFrameIndex(){const t=this.sdk.getOperationsStack().getIndexByIdentifier("frame"),e=this.sdk.getOperationsStack().getStack().length-1;-1!==t&&t!==e&&this.moveInOperationsStack(t,e)}mapToRenderType(t){switch(t){case c.IMAGE:return Pc.RenderType.IMAGE;case c.DATA_URL:return Pc.RenderType.DATAURL;case c.BLOB:return Pc.RenderType.BLOB;case c.MSBLOB:return Pc.RenderType.MSBLOB;default:return Pc.RenderType.IMAGE}}mapToImageFormat(t){switch(t){case u.PNG:return Pc.ImageFormat.PNG;case u.JPEG:return Pc.ImageFormat.JPEG;default:return null}}mapBlendMode(t){switch(t){case Rd.NORMAL:return nt.NORMAL;case Rd.OVERLAY:return nt.OVERLAY;case Rd.HARD_LIGHT:return nt.HARD_LIGHT;case Rd.SOFT_LIGHT:return nt.SOFT_LIGHT;case Rd.MULTIPLY:return nt.MULTIPLY;case Rd.DARKEN:return nt.DARKEN;case Rd.LIGHTEN:return nt.LIGHTEN;case Rd.SCREEN:return nt.SCREEN;case Rd.COLOR_BURN:return nt.COLOR_BURN;default:return nt.NORMAL}}reverseMapBlendMode(t){switch(t){case nt.NORMAL:return Rd.NORMAL;case nt.OVERLAY:return Rd.OVERLAY;case nt.HARD_LIGHT:return Rd.HARD_LIGHT;case nt.SOFT_LIGHT:return Rd.SOFT_LIGHT;case nt.MULTIPLY:return Rd.MULTIPLY;case nt.DARKEN:return Rd.DARKEN;case nt.LIGHTEN:return Rd.LIGHTEN;case nt.SCREEN:return Rd.SCREEN;case nt.COLOR_BURN:return Rd.COLOR_BURN;default:return Rd.NORMAL}}createSpriteOperation(){return this.sdk.createOperation("sprite",{},!1)}moveIndex(t,e){const i=this.getSiblingIndex(t);if(-1===i)throw new Error("The item to be moved is not part of any stack.");this.moveInStack(this.rootOperationStack,i,e);const r=this.operationStackOffset;this.moveInOperationsStack(i+r,e+r),this.enforceOperationOrder()}ensureContainerIsRoot(t){if(t.getID()!==this.rootContainer.getID())throw new Error("This engine doesn't support adding this effect/container to anything other than the root image container")}addToStackAtIndex(t,e){if(e&&e<0)throw new Error(`The given index may not be negative: ${e}`);void 0===e?this.rootOperationStack.push(t):this.rootOperationStack.splice(e,0,t);const i=this.rootOperationStack.length-1;let r=void 0!==e?e:i;r+=this.operationStackOffset,function(t){t.getContainer}(t),this.insertIntoOperationsStack(t.getOperation(),r),this.sdk.setAllOperationsToDirty()}insertIntoOperationsStack(t,e){const i=this.sdk.getOperationsStack().getStack(),r=i.length,n=Math.max(Math.min(e,r),0);for(let t=r-1;t>=n;t-=1){const e=i[t];i[t+1]=e}i[n]=t,this.sdk.setAllOperationsToDirty(),this.enforceOperationOrder()}moveInStack(t,e,i){const r=t.length,n=Math.max(Math.min(e,r-1),0),o=Math.max(Math.min(i,r-1),0);if(n===o)return;const s=t[n];if(n<o)for(let e=n+1;e<=o;e+=1)t[e-1]=t[e];else for(let e=n-1;e>=o;e-=1)t[e+1]=t[e];t[o]=s}moveInOperationsStack(t,e){const i=this.sdk.getOperationsStack().getStack(),r=i.length,n=Math.min(Math.max(0,t),r-1),o=Math.min(Math.max(0,e),r-1);if(n===o)return;const s=i[n];if(n<o)for(let t=n+1;t<=o;t+=1)i[t-1]=i[t];else for(let t=n-1;t>=o;t-=1)i[t+1]=i[t];i[o]=s,this.sdk.getOperationsStack().setAllToDirty()}getSiblingIndex(t){return t.getIndexInParent()}resolveAssetForSDK(t,e){switch(e=e,t){case"filter":return this.assetProvider.getAssetSource("filter",e.identifier);case"overlay":return this.assetProvider.getAssetSource("overlay",e.identifier);case"font":return this.assetProvider.getAssetSource("font",e.identifier)}return""}}},3974:(t,e,i)=>{"use strict";i.d(e,{a:()=>l,b:()=>c,c:()=>y,d:()=>Dt,f:()=>g,g:()=>pe,h:()=>Xi,i:()=>_,k:()=>H,l:()=>Ui,m:()=>h,n:()=>Zi,o:()=>ji,p:()=>bi,q:()=>ce,r:()=>Jt,s:()=>te,t:()=>ee,u:()=>re,v:()=>ne});var r=i(463),n=i(8821),o=i(9163),s=i(7294);const a=t=>e=>{(t=>"Enter"===t.key)(e)&&t(e)},l=t=>.08*t,c=t=>.03*t,u=t=>{var{label:e,icon:i,children:o}=t,s=(0,r.E)(t,["label","icon","children"]);return r.a.createElement(r.x,(0,n.N)({},s),r.a.createElement(r.D,null,i))},h=({children:t,className:e,caret:i,isActive:n,style:o,withBackground:s,hidden:a})=>{if(a)return r.b.createElement(r.K,null,t);return r.b.createElement(r.F,{className:e,withBackground:s,style:o},r.b.createElement(r.z,{"data-test":r.T.CardLabel},t,i&&r.b.createElement(r.I,null,r.b.createElement(r.H,{"aria-hidden":!0,rotation:n?180:0,withBackground:s}))))},d=(0,o.ZP)(r.B)`
  font-size: ${t=>t.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.button2.case};
  color: ${t=>t.theme.button.textSecondaryForeground};

  ${r.p} {
    display: none;
  }

  &:disabled {
    opacity: ${t=>t.theme.button.textInactiveOpacity};
  }
`,p=(0,o.ZP)(r.L)`
  width: 60px;
  height: 60px;
  background-color: gray;
  border-radius: 50%;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  z-index: ${t=>t.theme.measurements.zIndex.button.float};
  padding: 2px;
`,f=o.ZP.div`
  height: 56px;
  width: 56px;
  border-radius: 50%;
  background-color: ${t=>t.theme.webcam.floatButton};
`,m=o.ZP.div`
  display: inline-flex;
`,g=(0,o.ZP)(r.B)`
  background: ${t=>t.theme.canvasActionBar.background};
  color: ${t=>t.theme.canvasActionBar.foreground};
  font-size: ${t=>t.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.button2.case};
  padding: 4px 10px;
  position: relative;
  /* for safari */
  margin: 0;
  &:last-child:after {
    opacity: 0;
  }
`,_=o.ZP.div`
  ${({show:t})=>t?o.iv`
          opacity: 1;
        `:o.iv`
          opacity: 0;
        `};
  position: absolute;
  transform: translate(-50%, -100%);
  background: ${t=>t.theme.canvasActionBar.background};
  color: ${t=>t.theme.canvasActionBar.foreground};
  border-radius: ${t=>t.theme.canvasActionBar.borderRadius?t.theme.canvasActionBar.borderRadius:t.theme.shape.radiusMedium}px;
  white-space: nowrap;
  transition: opacity 0.3s ease-in-out;
  z-index: ${t=>t.theme.measurements.zIndex.buttonGroup};

  ${g} {
    &:after {
      content: '';
      position: absolute;
      right: 0px;
      top: 6px;
      height: calc(100% - 12px);
      border-right: 1px solid
        ${t=>t.theme.canvasActionBar.separatorColor};
      &:last-child {
        border-right: unset;
      }
    }
  }
`,y=o.ZP.div`
  display: flex;
  position: relative;
  flex-direction: column;
  width: 100%;
  height: 100%;
`,v=o.ZP.div.attrs((()=>({"data-test":r.T.MainCanvasActionBar})))`
  &&& {
    display: ${t=>t.hide?"none":"flex"};
    flex-direction: row;
    align-items: center;
    height: ${t=>t.theme.measurements.mainCanvasActionBar.height}px;
    color: ${t=>t.theme.mainCanvasActionBar.foreground};
    border-bottom: 1px solid
      ${t=>t.theme.mainCanvasActionBar.borderColor};
    padding: 8px 24px;
    box-sizing: border-box;
    position: absolute;
    width: 100%;
    z-index: ${t=>t.theme.measurements.zIndex.canvas.bar};
    background: ${t=>t.transparentBackgound?"transparent":t.theme.mainCanvasActionBar.background};
    ${t=>t.bottom?o.iv`
            justify-content: space-around;
            bottom: 0;
            transform: rotate(180deg);
          `:o.iv`
            justify-content: space-between;
          `}
  }
`,b=o.ZP.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,x=o.ZP.div.attrs({role:"main"})`
  background-color: ${t=>t.theme.canvas.background};
  flex-grow: 1;
  flex-shrink: 1;
  flex-basis: auto;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  /* added this for safari, else the webcam overlay did not know the height */
  height: 100%;
  width: 100%;
  margin-top: ${t=>t.theme.measurements.canvas.marginTop}px;
`,w=o.ZP.div.attrs((({height:t,width:e})=>({style:{height:`${t}px`,width:`${e}px`}})))`
  border-style: solid;
  border-width: 2px 0 2px 0;
  border-color: ${t=>t.theme.canvas.controlsOutline};
  box-shadow: 0 -6px 6px -6px rgba(0, 0, 0, 0.2),
    inset 0 6px 6px -6px rgba(0, 0, 0, 0.2);
  cursor: move;
  position: absolute;
`,S=o.ZP.div.attrs((({radius:t})=>({style:{height:2*t+"px",width:2*t+"px"}})))`
  border-radius: 50%;
  border: 2px solid ${t=>t.theme.canvas.controlsOutline};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
`,k=o.ZP.div`
  position: relative;
  height: inherit;
  width: inherit;
`,C=o.ZP.div((t=>{const{desktop:e,mobile:i}=t.theme.measurements.canvasControls.corner.touchable,r=e/4,n=i/2;return o.iv`
    position: absolute;
    width: ${e}px;
    height: ${e}px;
    ${t=>"top"===t.vertical?o.iv`
            top: 0px;
          `:o.iv`
            bottom: 0px;
          `}
    ${t=>"left"===t.horizontal?o.iv`
            left: 0px;
          `:o.iv`
            right: 0px;
          `}
  ${t=>"top"===t.vertical?o.iv`
            margin-top: -${r}px;
          `:o.iv`
            margin-bottom: -${r}px;
          `}
  ${t=>"left"===t.horizontal?o.iv`
            margin-left: -${r}px;
          `:o.iv`
            margin-right: -${r}px;
          `}
  @media all and (min-width: 0) and (max-width: 599px) {
      width: ${i}px;
      height: ${i}px;
      ${t=>"top"===t.vertical?o.iv`
              margin-top: -${n}px;
            `:o.iv`
              margin-bottom: -${n}px;
            `}
      ${t=>"left"===t.horizontal?o.iv`
              margin-left: -${n}px;
            `:o.iv`
              margin-right: -${n}px;
            `}
    }
  `})),T=(0,o.ZP)(C)((t=>{const e="right"===t.horizontal?t.borderWidth:0,i="bottom"===t.vertical?t.borderWidth:0,r="left"===t.horizontal?t.borderWidth:0,n=`${"top"===t.vertical?t.borderWidth:0}px ${e}px ${i}px ${r}px`,s="left"===t.horizontal&&"bottom"===t.vertical||"right"===t.horizontal&&"top"===t.vertical?"nesw-resize":"nwse-resize",a=t.theme.measurements.canvasControls.corner.touchable.desktop/4-t.borderWidth,l=t.theme.measurements.canvasControls.corner.touchable.mobile/4+t.borderWidth;return o.iv`
    &:before {
      display: block;
      position: absolute;
      content: '';
      width: ${t=>t.theme.measurements.canvasControls.corner.size}px;
      height: ${t=>t.theme.measurements.canvasControls.corner.size}px;
      z-index: ${t=>t.theme.measurements.zIndex.canvas.controls};
      border-color: ${t=>t.theme.canvas.controlsColor};
      border-style: solid;
      border-width: ${n};
      pointer-events: auto;
      ${"top"===t.vertical?o.iv`
            top: ${a}px;
          `:o.iv`
            bottom: ${a}px;
          `}
      ${"left"===t.horizontal?o.iv`
            left: ${a}px;
          `:o.iv`
            right: ${a}px;
          `}
      @media all and (min-width: 0) and (max-width: 599px) {
        ${"top"===t.vertical?o.iv`
              margin-top: ${l}px;
            `:o.iv`
              margin-bottom: ${l}px;
            `}
        ${"left"===t.horizontal?o.iv`
              margin-left: ${l}px;
            `:o.iv`
              margin-right: ${l}px;
            `}
      }
    }
    cursor: ${s};
    pointer-events: none;
  `})),E=o.ZP.div.attrs((()=>({"data-test":r.T.Knob})))`
  position: absolute;
  height: ${t=>t.theme.measurements.canvasControls.knob.touchable.desktop}px;
  width: ${t=>t.theme.measurements.canvasControls.knob.touchable.desktop}px;
  margin-left: -10px;
  margin-top: -10px;
  z-index: ${t=>t.theme.measurements.zIndex.canvas.knob};
  will-change: transform;
  cursor: ew-resize;
  &:before {
    display: block;
    position: absolute;
    content: '';
    background: ${t=>t.theme.canvas.controlsColor};
    border-radius: 50%;
    width: ${t=>t.theme.measurements.canvasControls.knob.size}px;
    height: ${t=>t.theme.measurements.canvasControls.knob.size}px;
    top: ${t=>t.theme.measurements.canvasControls.knob.size/4}px;
    left: ${t=>t.theme.measurements.canvasControls.knob.size/4}px;
    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24);
  }
`,R=o.ZP.div`
  position: absolute;
  color: ${t=>t.theme.canvas.controlsOutline};
`,D=o.ZP.div.attrs((t=>({style:{left:`${t.x}px`}})))`
  position: absolute;
  bottom: -${t=>t.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  height: ${t=>t.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  width: 2px;
  background-color: ${t=>t.theme.canvas.controlsOutline};
`,I=o.ZP.div.attrs((({height:t,width:e,theme:i})=>({style:{height:`${t+i.measurements.canvasControls.sprite.controlPadding}px`,width:`${e+i.measurements.canvasControls.sprite.controlPadding}px`}})))`
  left: -${t=>t.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  top: -${t=>t.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  transform-origin: center center;
  border-style: solid;
  border-width: 2px;
  border-color: ${t=>t.theme.canvas.controlsColor};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
  will-change: transform;
  position: absolute;
`,O=o.ZP.div.attrs((()=>({"data-test":r.T.TextWidth})))`
  position: absolute;
  height: ${t=>t.theme.measurements.canvasControls.width.size}px;
  width: 4px;
  z-index: ${t=>t.theme.measurements.zIndex.canvas.controls};
  background: ${t=>t.theme.canvas.controlsColor};
  cursor: pointer;
`,A=o.ZP.div.attrs({tabIndex:0})`
  position: absolute;
  height: ${t=>t.height}px;
  width: ${t=>t.width}px;
  top: 0;
  left: 0;
  &:focus {
    outline: 0;
  }
`,F=((t=(0,n.q)())=>-1!==t.indexOf("Safari")&&-1===t.indexOf("Chrome"))()?o.iv`
      transition: unset;
    `:o.iv`
      transition: all 0.4s ease-in-out;
    `,M=o.ZP.div`
  position: absolute;
  background: ${t=>t.theme.canvas.cropBackdrop};
  z-index: ${t=>t.theme.measurements.zIndex.canvas.crop.backdrop};
  ${F}
`,P=o.ZP.div.attrs({"data-test":r.T.CropMask})`
  position: absolute;
  box-shadow: inset 0 0 0 2px ${t=>t.theme.canvas.controlsOutline};
  cursor: move;
  ${F}
`,B=o.ZP.div`
  position: absolute;
  background: ${t=>t.theme.canvas.controlsOutline};
  z-index: ${t=>t.theme.measurements.zIndex.canvas.crop.grid};
  ${F}
`,z=(0,o.ZP)(T)`
  z-index: ${t=>t.theme.measurements.zIndex.canvas.controls};
  ${F};
`,L=o.ZP.canvas`
  position: absolute;
  top: 0;
  left: 0;
`,N=o.ZP.video`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`,U=o.ZP.div`
  position: relative;
  transition: all 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  height: 100%;
  width: 100%;
  z-index: ${t=>t.theme.measurements.zIndex.canvas.webcam.backdrop};
  background-color: ${t=>t.theme.webcam.background};
`,j={Index:b,Area:y,Bar:{Index:v,ButtonGroup:m},Button:{TextSecondary:d,Float:t=>s.createElement(p,(0,n.N)({},t),s.createElement(f,null))},Container:x,Element:L,Wrapper:U,Webcam:N,Controls:{Knob:E,Circle:S,Corner:T,Line:R,Area:w,Sprite:I,RotateHandle:D,Container:k,Wrapper:A,SpriteActionsWrapper:_,SpriteActionButton:g,Width:O},Crop:{Mask:P,GridLine:B,Backdrop:M,Control:z}};class H{constructor(t={},e={}){this.getAdvancedCategoryCard=()=>this.components.advancedUICategoryCard,this.getAdvancedItemCard=()=>this.components.advancedUIItemCard,this.getAdvancedToolbarItem=()=>this.components.advancedUIToolbarItem,this.getDialog=()=>this.components.dialog,this.getButton=t=>this.components.buttons[t],this.getColorItem=()=>this.components.colorItem,this.getCheckbox=()=>this.components.checkbox;const i={dialog:r.X.Dialog,colorItem:r.X.ColorItem,checkbox:r.X.Input.Checkbox,buttons:{mainCanvasActionUndo:j.Button.TextSecondary,mainCanvasActionRedo:j.Button.TextSecondary,mainCanvasActionExport:r.k,mainCanvasActionClose:r.m,canvasActionEdit:j.Controls.SpriteActionButton,canvasActionBringToFront:j.Controls.SpriteActionButton,canvasActionDuplicate:j.Controls.SpriteActionButton,canvasActionDelete:j.Controls.SpriteActionButton,canvasActionInvert:j.Controls.SpriteActionButton,canvasActionFlip:j.Controls.SpriteActionButton,transformActionFlipHorizontal:u,transformActionFlipVertical:u,transformActionRotateClockwise:u,transformActionRotateAntiClockwise:u,textAlignment:u,toolControlBarPrimaryButton:r.l,toolControlBarSecondaryButton:r.m}};this.components=(0,r.O)([i,e,t])}}var W=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-blacks-icon",d:"M24 12c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m0 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10m4 12c0 2.788-2.326 3.879-7 3V18.5c4.148-.459 6.516.226 6.516 2.623 0 1.207-.492 1.998-1.512 2.474C27.504 23.999 28 24.619 28 26zm-5-6v3c2.244.068 2.775-.719 2.775-1.536 0-1.22-.531-1.812-2.775-1.464zm0 7.5c2.19.193 3.038-.04 3.038-1.484 0-1.37-1.096-1.695-3.038-1.516v3z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{d:"M0 0H48V48H0z"}),s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-blacks-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-blacks-icon"})));var G=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-brightness-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),s.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("mask",null,s.createElement("use",{xlinkHref:"#photoeditorsdk-brightness-icon"})),s.createElement("use",{fillOpacity:"0.9",transform:"rotate(-45 24.039 24)",xlinkHref:"#photoeditorsdk-brightness-icon"})));var V=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-clarity-icon",d:"M24 12L13 24.001 24 36l11-11.999L24 12zm-8.29 12.001H21l3-9.041 8.29 9.041-8.28 9.029L28 24.001h-7l2.99 9.029-8.28-9.029z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{d:"M0 0H48V48H0z"}),s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-clarity-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-clarity-icon"})));var $=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-contrast-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12-5.38-12-12-12"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{d:"M0 0H48V48H0z"}),s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-contrast-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-contrast-icon"})));var Z=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-exposure-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12 5.38-12 12-12zm-3.536 8.464l-2.121 2.122-2.121-2.122-1.414 1.415L16.929 24l-2.121 2.121 1.414 1.415 2.121-2.122 2.121 2.122 1.415-1.415L19.757 24l2.122-2.121-1.415-1.415zm5.304 4.597l4.242-4.243 1.415 1.414-4.243 4.243-1.414-1.414z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{d:"M0 0H48V48H0z"}),s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-exposure-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(45 24 24)",xlinkHref:"#photoeditorsdk-exposure-icon"})));var X=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-gamma-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{d:"M0 0H48V48H0z"}),s.createElement("mask",{fill:"#fff"},s.createElement("use",{xlinkHref:"#photoeditorsdk-gamma-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-gamma-icon"})));var Y=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-highlights-icon",d:"M31.07 31.07A9.932 9.932 0 0124 34c-2.67 0-5.18-1.04-7.07-2.93l14.14-14.14c3.9 3.9 3.9 10.24 0 14.14m1.42-15.56A11.995 11.995 0 0024 12c-3.07 0-6.14 1.17-8.49 3.51-4.68 4.69-4.68 12.29 0 16.98C17.86 34.83 20.93 36 24 36c3.07 0 6.14-1.17 8.49-3.51 4.68-4.69 4.68-12.29 0-16.98"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{d:"M0 0H48V48H0z"}),s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-highlights-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-highlights-icon"})));var q=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-saturation-icon",d:"M17 31c1.334 1.099 2 2.177 2 3.234 0 .797-.454 1.39-1.211 1.655-.165.057-.428.094-.789.111l-.172-.01a2.54 2.54 0 01-.617-.101C15.454 35.624 15 35.03 15 34.234c0-1.057.666-2.135 2-3.234zm8.7-6l-4.24 4H17v-3.81l.2-.19h8.5zm-.7-7.59l4.24 4.25L26.76 24h-8.54L25 17.41zm7.778-3.532a3 3 0 01.135 4.1l-.135.143-1.414 1.414 1.414 1.415-1.414 1.414-7.07-7.071 1.413-1.414 1.414 1.413 1.414-1.414a3.001 3.001 0 014.243 0z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{d:"M0 0H48V48H0z"}),s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-saturation-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-saturation-icon"})));var K=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-shadows-icon",d:"M30.365 17.637l3.076 3.076c.382 1.09.566 2.234.56 3.387l-5.05-5.049-1.414 1.414 6.123 6.124a9.674 9.674 0 01-.792 2.036l-6.746-6.745-1.414 1.414 7.036 7.036c-.212.254-.43.502-.672.742-.24.24-.488.46-.742.672l-7.036-7.036-1.414 1.414 6.745 6.746a9.674 9.674 0 01-2.036.792l-6.124-6.123-1.414 1.414L24.101 34a10.012 10.012 0 01-3.388-.558l-3.076-3.076-.707.707c-3.896-3.896-3.896-10.246 0-14.142 3.896-3.896 10.246-3.896 14.142 0l-.707.707zm-14.849-2.12c-4.688 4.687-4.688 12.281 0 16.97a12.036 12.036 0 004.108 2.693c.064.022.127.057.191.078 4.264 1.577 9.242.658 12.671-2.772 3.43-3.429 4.35-8.407 2.772-12.67-.02-.065-.056-.128-.078-.192a12.036 12.036 0 00-2.694-4.108c-4.688-4.688-12.282-4.688-16.97 0z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{d:"M0 0H48V48H0z"}),s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-shadows-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shadows-icon"})));var Q=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-sharpness-icon",d:"M24 12l11 24H13l11-24zm0 4.8V34h7.883L24 16.8z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{d:"M0 0H48V48H0z"}),s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-sharpness-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-sharpness-icon"})));var J=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-temperature-icon",d:"M24 12a4 4 0 014 4v7.255a7 7 0 11-8 0V16a4 4 0 014-4zm0 2a2 2 0 00-2 2v8.298l-.856.597a5 5 0 105.712 0L26 24.298V16a2 2 0 00-2-2zm1 6v5.126A4.002 4.002 0 0124 33a4 4 0 01-1-7.874V20h2z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{d:"M0 0H48V48H0z"}),s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-temperature-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-temperature-icon"})));var tt=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-whites-icon",d:"M24 12c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12zm-2 6.46h-2c.221 4.539.762 9.051 1 11.04h1.5l1.5-5.52 1.5 5.52H27c.238-1.989.779-6.501 1-11.04h-2c-.051 1.071-.432 7.446-.5 7.973-.459-1.717-.541-3.111-1-4.811h-1c-.442 1.7-.541 2.975-1 4.811-.051-.527-.466-6.902-.5-7.973z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{d:"M0 0H48V48H0z"}),s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-whites-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-whites-icon"})));var et=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-close-icon",d:"M21.583 0L24 2.416 14.416 12 24 21.584 21.583 24 12 14.416 2.417 24 0 21.584 9.584 12 0 2.416 2.417 0 12 9.584 21.583 0z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-close-icon"})),s.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-close-icon"})));var it=function(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-export-icon",d:"M22 1.5a1.5 1.5 0 011.493 1.356L23.5 3H22h1.5v17a1.5 1.5 0 01-1.5 1.5H12a1.5 1.5 0 01-1.493-1.356L10.5 20v-6h2v5.499h9v-16h-9V9h-2V3A1.5 1.5 0 0112 1.5h10zM6.15 5.817L7.634 7.3l-3.171 3.171h13.978v2H4.47l3.171 3.17-1.483 1.483L.5 11.467l5.65-5.65z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("mask",{fill:"#fff"},s.createElement("use",{xlinkHref:"#photoeditorsdk-export-icon"})),s.createElement("use",{fill:"currentcolor",fillOpacity:"0.9",transform:"rotate(90 12 11.5)",xlinkHref:"#photoeditorsdk-export-icon"})))};var rt=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-redo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-redo-icon"})),s.createElement("use",{fill:"currentColor",transform:"matrix(0 1 1 0 .25 -.25)",xlinkHref:"#photoeditorsdk-redo-icon"})));var nt=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-undo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-undo-icon"})),s.createElement("use",{fill:"currentColor",transform:"rotate(90 12.25 12)",xlinkHref:"#photoeditorsdk-undo-icon"})));var ot=function(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Center Align",width:"26",height:"26"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-align-center-icon",d:"M31.5 30v3h-15v-3h15zm4.5-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("mask",{fill:"#fff"},s.createElement("use",{xlinkHref:"#photoeditorsdk-align-center-icon"})),s.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-center-icon"})))};var st=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Left Align",width:"26",height:"26"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-align-left-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("mask",{fill:"#fff"},s.createElement("use",{xlinkHref:"#photoeditorsdk-align-left-icon"})),s.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-left-icon"})));var at=function(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",width:"26",height:"26",focusable:"false","aria-hidden":"true","aria-label":"Right Align"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-align-right-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{d:"M0 0H48V48H0z"}),s.createElement("mask",{fill:"#fff"},s.createElement("use",{xlinkHref:"#photoeditorsdk-align-right-icon"})),s.createElement("use",{fill:"currentColor",transform:"matrix(-1 0 0 1 48 0)",xlinkHref:"#photoeditorsdk-align-right-icon"})))};var lt=()=>s.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Adjustments",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{fill:"none",fillRule:"evenodd"},s.createElement("g",null,s.createElement("g",{fill:"#D8D8D8",opacity:"0"},s.createElement("rect",{width:"48",height:"48"})),s.createElement("g",{transform:"translate(12 12)"},s.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),s.createElement("g",{transform:"translate(2 13)",fill:"currentColor"},s.createElement("path",{d:"M3.02746439,4 C3.00931666,4.16416693 3,4.33099545 3,4.5 C3,4.66900455 3.00931666,4.83583307 3.02746439,5 L0,5 L0,4 L3.02746439,4 Z M13,4 L20,4 L20,5 L13,5 L13,4 Z",fillOpacity:"0.2"}),s.createElement("path",{d:"M5.09842503,6.29819429 C5.0340931,6.05140089 5,5.7851211 5,5.5 C5,3.56700338 6.56700338,2 8.5,2 C8.7851211,2 9.05140089,2.0340931 9.29819429,2.09842503 C10.0278893,2.64566496 10.5,3.5176988 10.5,4.5 C10.5,6.15685425 9.15685425,7.5 7.5,7.5 C6.5176988,7.5 5.64566496,7.02788926 5.09842503,6.29819429 Z M11.1637159,7.11349161 C10.874061,7.51881791 10.5188179,7.87406095 10.1134916,8.16371592 C10.5772175,7.93004328 10.9300433,7.5772175 11.1637159,7.11349161 Z",fillOpacity:"0.2"}),s.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,0 7.5,0 C9.98528137,0 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})),s.createElement("g",{transform:"rotate(-180 11 5.5)",fill:"currentColor"},s.createElement("path",{d:"M11.9725356,4 L20,4 L20,5 L11.9725356,5 C11.9906833,4.83583307 12,4.66900455 12,4.5 C12,4.33099545 11.9906833,4.16416693 11.9725356,4 Z M0,4 L2,4 L2,5 L0,5 L0,4 Z",fillOpacity:"0.2"}),s.createElement("g",{transform:"rotate(-180 5 3.5)",fillOpacity:"0.2"},s.createElement("path",{d:"M0.0984250251,4.29819429 C0.0340930963,4.05140089 0,3.7851211 0,3.5 C0,1.56700338 1.56700338,0 3.5,0 C3.7851211,0 4.05140089,0.0340930963 4.29819429,0.0984250251 C5.02788926,0.645664963 5.5,1.5176988 5.5,2.5 C5.5,4.15685425 4.15685425,5.5 2.5,5.5 C1.5176988,5.5 0.645664963,5.02788926 0.0984250251,4.29819429 Z M6.16371592,5.11349161 C5.87406095,5.51881791 5.51881791,5.87406095 5.11349161,6.16371592 C5.5772175,5.93004328 5.93004328,5.5772175 6.16371592,5.11349161 Z"})),s.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,-3.6739404e-16 7.5,-3.6739404e-16 C9.98528137,-3.6739404e-16 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"}))))));var ct=function(){return s.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Brush",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},s.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{fillOpacity:"0.87",d:"M14.73 18.86C13.293 19.503 11.624 20 10 20 2 20 0 13 0 10c.486.972 2.37 5.848 7.537 4.165C7.873 17.125 10.427 19 13 19c.6 0 1.177-.05 1.73-.14zM8.422 8.63a7.352 7.352 0 00-1.127 1.616L2.401 3.705c-.215-.287-.178-.807.072-1.056l.088-.088L8.5 8.5l-.078.13z",opacity:"0.5",transform:"translate(12 12) translate(2 2)"}),s.createElement("path",{fillOpacity:"0.87",d:"M7.295 10.246c-.27.526-.48 1.09-.615 1.68L1.2 4.603c-.663-.885-.564-2.24.212-3.015l.176-.176c.78-.78 2.121-.881 3.015-.212l7.245 5.421a6.088 6.088 0 00-1.67.624L3.706 2.401c-.294-.22-.801-.184-1.056.072l-.176.176c-.25.25-.287.769-.072 1.056l4.894 6.54z",transform:"translate(12 12) translate(2 2)"}),s.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858z",opacity:"0.5",transform:"translate(12 12) translate(2 2) translate(7 7)"}),s.createElement("path",{fillOpacity:"0.25",d:"M10.379 9.027c.053.135.108.263.165.385C8.914 10.158 7.545 10.5 6 10.5c-2.165 0-4-1.706-4-4 0-1.528.79-2.921 1.88-3.74-.882 2.084-1.025 6.482 6.499 6.267z",transform:"translate(12 12) translate(2 2) translate(7 7)"}),s.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858zM6 12C3.239 12 .5 9.842.5 6.5S3.239.5 6 .5c6.5 0 4 8 7 9.342C11 10.947 8.761 12 6 12z",transform:"translate(12 12) translate(2 2) translate(7 7)"})))};var ut=()=>s.createElement("svg",{"aria-hidden":"true",focusable:"false","aria-label":"Filter",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{fill:"none",fillRule:"evenodd"},s.createElement("g",null,s.createElement("g",{fill:"#D8D8D8",opacity:"0"},s.createElement("rect",{width:"48",height:"48"})),s.createElement("g",{transform:"translate(16 14)",fill:"currentColor"},s.createElement("g",null,s.createElement("path",{d:"M1.53468397,11.3244256 C2.30584171,10.1516526 4.0927284,8.69757613 8,10 C11.5643313,11.1881104 13.1877038,10.2588113 13.9183327,9.30853287 C14.2918933,10.1286474 14.5,11.0400207 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.41014913,18.5 1.5,15.5898509 1.5,12 C1.5,11.7718729 1.51175212,11.5464906 1.53468397,11.3244256 Z",fillOpacity:"0.2"}),s.createElement("path",{d:"M1.53471819,12.6759057 C2.39408133,13.5811739 4.12541941,14.1109247 5.5,13.5 C9.81068889,11.5841383 9.99203585,9.66827654 14.3948028,10.8290113 C14.4639074,11.2088572 14.5,11.6002137 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.63838968,18.5 1.87279864,15.9481381 1.53471819,12.6759057 Z",fillOpacity:"0.25"}),s.createElement("path",{d:"M11,1.44328993e-15 L11,4.58151705 C13.9318303,5.7682918 16,8.64262245 16,12 C16,16.418278 12.418278,20 8,20 C3.581722,20 0,16.418278 0,12 C0,8.64262245 2.06816966,5.7682918 5,4.58151705 L5,1.60982339e-15 L6.5,1.44328993e-15 L6.5,5.67393184 C3.6333,6.35109564 1.5,8.92641836 1.5,12 C1.5,15.5898509 4.41014913,18.5 8,18.5 C11.5898509,18.5 14.5,15.5898509 14.5,12 C14.5,8.92641836 12.3667,6.35109564 9.5,5.67393184 L9.5,1.77635684e-15 L11,1.44328993e-15 Z",fillOpacity:"0.87"}))))));var ht=()=>s.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Focus",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{fill:"none",fillRule:"evenodd"},s.createElement("g",null,s.createElement("g",{fill:"#D8D8D8",opacity:"0"},s.createElement("rect",{width:"48",height:"48"})),s.createElement("g",{transform:"translate(12 12)"},s.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),s.createElement("g",{transform:"translate(4 2)",fill:"currentColor"},s.createElement("path",{d:"M8.51312274,19.9836057 C8.77273397,19.9669655 9.02898229,19.9377873 9.2812837,19.8966625 C9.14309542,19.9643562 9.04607398,20 9,20 C8.83633495,20 8.67398178,19.9944755 8.51312274,19.9836057 Z M2.27242753,15.0235117 C2.09503729,14.4174909 2,13.7771617 2,13.115 C2,8.89625769 7.39855682,4.1952443 9.03524007,2.8669743 C9.66704719,3.45933018 10.2896864,4.09178959 10.8802638,4.75434357 C12.9939648,7.12565193 14.310818,9.45010207 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C5.525182,18.5 3.37015673,17.0943182 2.27242753,15.0235117 Z M15.999821,11.9547651 C15.9999402,11.9698392 16,11.9849176 16,12 C16,12.0581275 15.9984809,12.1163475 15.9954873,12.1746435 C15.9978914,12.1015915 15.9993401,12.0282946 15.999821,11.9547651 Z",fillOpacity:"0.2"}),s.createElement("path",{d:"M3.47269084,16.6357644 C3.47244857,13.6389249 9.59189484,15.3529683 12,11.5 C13.2066771,9.56931667 12.316614,7.05620551 11.0727604,4.97270186 C13.0737756,7.26814668 14.316054,9.51197209 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C6.2411126,18.5 4.64375705,17.7899702 3.47269084,16.6357644 Z",fillOpacity:"0.25"}),s.createElement("path",{d:"M7.73975027,2.16383649 C6.84545319,2.94914111 5.95084629,3.82194197 5.11973623,4.75434357 C3.00603518,7.12565193 1.68918197,9.45010207 1.51870896,11.4644804 C1.50624591,11.6117488 1.5,11.7569175 1.5,11.9 C1.5,15.5492218 4.41434886,18.5 8,18.5 C11.5855665,18.5 14.5,15.5490785 14.5,11.9 C14.5,11.7569175 14.4937541,11.6117488 14.481291,11.4644804 C14.310818,9.45010207 12.9939648,7.12565193 10.8802638,4.75434357 C10.0491537,3.82194197 9.15454681,2.94914111 8.26024973,2.16383649 C8.17157048,2.08596503 8.08476013,2.01060875 8,1.93784184 C7.91523987,2.01060875 7.82842952,2.08596503 7.73975027,2.16383649 Z M8,20 C3.581722,20 0,16.3735065 0,11.9 C0,6.05 8,0 8,0 C8,0 16,6.05 16,11.9 C16,16.3732777 12.418278,20 8,20 Z",fillOpacity:"0.87"}))))));var dt=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true","aria-label":"Frames",width:"48",height:"48",viewBox:"0 0 48 48"},s.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},s.createElement("path",{fillOpacity:"0.2",d:"M8 8L17 7 17 17 7 17z"}),s.createElement("path",{fillOpacity:"0.87",d:"M4.5 19.5h15v-15h-15v15zM3 3h18v18H3V3z"}),s.createElement("path",{fillOpacity:"0.87",d:"M7 17h10V7H7v10zM6 6h12v12H6V6z"}),s.createElement("path",{fillOpacity:"0.25",d:"M9 15L11 12 13 14 14 13.5 15 15z"})));var pt=()=>s.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Library",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{fill:"none",fillRule:"evenodd"},s.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},s.createElement("g",null,s.createElement("polygon",{fillOpacity:"0.2",points:"3 3 12.5 1.5 12.5 15.5 1.5 15.5"}),s.createElement("path",{d:"M1.5,1.5 L1.5,15.5 L12.5,15.5 L12.5,1.5 L1.5,1.5 Z M0,0 L14,0 L14,17 L0,17 L0,0 Z",fillOpacity:"0.87"}),s.createElement("polygon",{fillOpacity:"0.25",points:"3 11 6 7 8 9 9 8.5 11 11"}),s.createElement("circle",{fillOpacity:"0.25",cx:"9",cy:"5",r:"1"}),s.createElement("rect",{fillOpacity:"0.25",x:"3",y:"13",width:"8",height:"1"}),s.createElement("g",{transform:"rotate(14 -2.352 56.952)",fillOpacity:"0.2"},s.createElement("path",{d:"M1.32904158,1.07500967e-13 L5,1.07500967e-13 L5,14.7234101 L4,10.7126291 L4,1 L1.57836958,1 L1.32904158,1.07500967e-13 Z M5,14.9745817 L5,16 L0.887271787,16 L5,14.9745817 Z"}),s.createElement("path",{d:"M1.82769758,2 L3,2 L3,6.70184819 L1.82769758,2 Z"}))))));var ft=()=>s.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Overlays",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{fill:"none",fillRule:"evenodd"},s.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},s.createElement("path",{d:"M13.5,4 L13.5,13.5 L4,13.5 L4,5 C4,4.44771525 4.44771525,4 5,4 L13.5,4 Z M15,4 L17,4 C17.5522847,4 18,4.44771525 18,5 L18,17 C18,17.5522847 17.5522847,18 17,18 L5,18 C4.44771525,18 4,17.5522847 4,17 L4,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,4 Z",fillOpacity:"0.2"}),s.createElement("path",{d:"M1.5,1.5 L1.5,13.5 L13.5,13.5 L13.5,1.5 L1.5,1.5 Z M1,0 L14,0 C14.5522847,-1.01453063e-16 15,0.44771525 15,1 L15,14 C15,14.5522847 14.5522847,15 14,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z",fillOpacity:"0.87"}))));var mt=()=>s.createElement("svg",{focusable:"false","aria-hidden":"true",width:"48px",height:"48px",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-label":"Stickers",viewBox:"0 0 48 48"},s.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},s.createElement("g",null,s.createElement("g",{transform:"translate(14.000000, 14.000000)",fill:"currentColor"},s.createElement("g",{transform:"translate(2.000000, 2.000000)",fillOpacity:"0.2"},s.createElement("path",{d:"M11.5840291,0.290311095 C14.1040281,1.4637822 15.9529364,3.83641178 16.3972985,6.6747443 C11.4538042,7.5567274 7.55733385,11.4556991 6.68374109,16.3973312 C3.83946575,15.9530468 1.46423317,14.1041207 0.290132399,11.5832649 C0.0988489957,10.7650202 3.01980663e-14,9.89786431 3.01980663e-14,9 C3.01980663e-14,6.64646143 0.903391324,4.50392121 2.38232909,2.90022422 C4.02683831,1.11698861 6.38297582,-3.55271368e-15 9,-3.55271368e-15 C9.89814387,-3.55271368e-15 10.7655602,0.0989105588 11.5840291,0.290311095 Z"}),s.createElement("path",{d:"M17.9877222,8 L8,17.9877222 C8.2591955,12.5923102 12.5906864,8.26470667 17.9877222,8 Z"})),s.createElement("path",{d:"M9.87290303,14.9211604 C9.09408801,14.4293124 5,11.7146562 5,9 C5,7.34 6.34,6 8,6 C8.77,6 9.47,6.52 10,7 C10.53,6.52 11.23,6 12,6 C13.66,6 15,7.34 15,9 C15,9.30171667 14.9494261,9.60343334 14.8584511,9.90209822 C12.7354304,11.0373368 10.9933363,12.7905402 9.87290303,14.9211604 Z",fillOpacity:"0.25"}),s.createElement("path",{d:"M10,1.5 C5.30557963,1.5 1.5,5.30557963 1.5,10 C1.5,14.2449983 4.61102233,17.7611603 8.68374109,18.3973312 C9.55733385,13.4556991 13.4538042,9.5567274 18.3972985,8.6747443 C17.7608961,4.60976745 14.2436106,1.5 10,1.5 Z M0,10 C0,4.4771525 4.4771525,0 10,0 C15.5228475,0 20,4.4771525 20,10 C14.5988732,10.2649073 10.2649073,14.5988732 10.0116954,19.9999933 C4.4771525,20 0,15.5228475 0,10 Z",fillOpacity:"0.87"})))));var gt=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Texts",width:"48",height:"48"},s.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{fillOpacity:"0.2",d:"M17.883 19.5H16.07L11.702 6.833l1.235-1.411L17.883 19.5z",transform:"translate(12 12)"}),s.createElement("path",{fillOpacity:"0.87",d:"M10.8 8.818L8.483 14.5h4.275l-1.96-5.682zM10 6.5l3.5-4 5.973 17H21V21h-8v-1.5h1.483L13.276 16H7.873l-1.426 3.5H8V21H3v-1.5h1.704L10 6.5zm1.702.333L16.069 19.5h1.814L12.937 5.422l-1.235 1.411z",transform:"translate(12 12)"}),s.createElement("path",{fillOpacity:"0.2",d:"M19.55 15l-.35-1H21v1h-1.45zm1.05 3l-.35-1H21v1h-.4zM7.639 8L7.25 9H3V8h4.639zm1.167-3l-.39 1H7V5h1.806zm-2.334 6l-.389 1H6v-1h.472zm-1.166 3l-.39 1H3v-1h2.306zm-1.167 3l-.389 1H3v-1h1.139zM15.35 3L15 2h1v1h-.65zm3.15 9l-.35-1H21v1h-2.5zm-1.05-3l-.35-1H21v1h-3.55zM16.4 6l-.35-1H18v1h-1.6zm-5.9-3H9V2h2.5l-1 1zM3 5h3v1H3V5zm16 0h2v1h-2V5zM3 11h2v1H3v-1zm18-8h-4V2h4v1zM8 3H3V2h5v1z",transform:"translate(12 12)"})));var _t=()=>s.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Text Design",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},s.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{fillOpacity:"0.87",d:"M1 0h14a1 1 0 011 1v19l-8-6-8 6V1a1 1 0 011-1zm.5 1.5V17L8 12.125 14.5 17V1.5h-13z",transform:"translate(14 14) translate(2)"}),s.createElement("path",{fillOpacity:"0.2",d:"M1.5 1.5h13V17L8 12.125 1.5 17V1.5z",transform:"translate(14 14) translate(2)"}),s.createElement("path",{fillOpacity:"0.25",d:"M9 4l2.52 7H10.2l-.7-1.85H6.45L5.77 11H4.49L6.9 4H9zm-1.04.78h-.05L6.73 8.14H9.2L7.96 4.78z",transform:"translate(14 14) translate(2)"})));var yt=function(){return s.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Transform",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},s.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},s.createElement("path",{fillOpacity:"0.2",d:"M10 10L15 9 15 15 9 15z"}),s.createElement("path",{fillOpacity:"0.87",d:"M9 15h6V9H9v6zm-1.5 0V7.5H15V3h1.5v13.5H3V15h4.5zm0 2.5H9V21H7.5v-3.5zM21 7.5V9h-3.5V7.5H21z"}),s.createElement("g",{fillOpacity:"0.2"},s.createElement("path",{d:"M0 10h1a9.003 9.003 0 015.5-8.294L7 3 10.942.044C10.632.014 10.318 0 10 0 4.477 0 0 4.477 0 10z",transform:"translate(2 2)"}),s.createElement("path",{d:"M9 20h1a9.003 9.003 0 015.5-8.294L16 13l3.942-2.956c-.31-.03-.624-.044-.942-.044-5.523 0-10 4.477-10 10z",transform:"translate(2 2) rotate(-180 14.47 15)"}))))};var vt=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-icon-add-text",d:"M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm1 6h-2v5H6v2h5v5h2v-5h5v-2h-5V6z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-icon-add-text"})),s.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-icon-add-text"})));var bt=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},s.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M12 1c5.523 0 10 4.477 10 10a9.98 9.98 0 01-3.678 7.749c1.877.92 3.445 2.251 4.502 3.88l.176.283-1.743 1.02c-1.04-1.735-2.824-3.102-4.995-3.884A9.94 9.94 0 0112 21a9.962 9.962 0 01-4.255-.948c-2.076.748-3.797 2.033-4.852 3.661l-.147.237L1 22.935c1.053-1.766 2.694-3.204 4.684-4.183A9.975 9.975 0 012 11C2 5.477 6.477 1 12 1zm0 2a8 8 0 100 16 8 8 0 000-16zm0 5a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm1-4v1h-2V6h2z"}));var xt=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},s.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M16.23 10.885a2.292 2.292 0 00-2.285-2.286 2.292 2.292 0 00-2.286 2.286 2.292 2.292 0 002.286 2.286 2.292 2.292 0 002.286-2.286zM13.946.599C8.265.6 3.66 5.205 3.66 10.885H.231l4.571 4.571 4.572-4.571H5.945c0-4.423 3.577-8 8-8s8 3.577 8 8a7.994 7.994 0 01-12.64 6.514l-1.623 1.646a10.3 10.3 0 006.263 2.126c5.68 0 10.286-4.606 10.286-10.286S19.625.599 13.945.599z",transform:"rotate(56 11.298 10.261)"}));var wt=function(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-shuffle-icon",d:"M24 10v8a3 3 0 01-3 3H6v3l-6-4 6-4v3h15a1 1 0 001-1v-8h2zM18 0l6 4-6 4V5H3a1 1 0 00-1 1v8H0V6a3 3 0 013-3h15V0z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-shuffle-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shuffle-icon"})))};var St=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-upload-icon",d:"M4.143 17.286l-.001 3.142h15.715v-3.142H23v6.285H1v-6.285h3.143zM12 0l9.429 9.429-2.2 2.2L13.57 5.97v9.743H10.43V5.971L4.77 11.63l-2.2-2.2L12 0z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-upload-icon"})),s.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-upload-icon"})));var kt=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-bring-to-front-icon",d:"M21 16a2 2 0 012 2v4a2 2 0 01-2 2H3a2 2 0 01-2-2v-4a2 2 0 012-2h18zM12.006 1l5.996 5.996-1.414 1.414-3.578-3.577V12h-2.008V4.833L7.418 8.417 6.004 7.003 12.006 1z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{d:"M0 0H24V24H0z"}),s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-bring-to-front-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-bring-to-front-icon"})));var Ct=({highlight:t="currentColor",width:e=48,height:i=48})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},s.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("g",{fill:t,transform:"translate(13 13)"},s.createElement("path",{d:"M22 3.701h-1.642V1.644l-2.06-.001V0h2.538c.421 0 .682.174.827.32.322.322.337.748.337.83v2.551z"}),s.createElement("path",{d:"M1.643 3.701H0V1.165C0 .743.174.482.32.336.64.016 1.06 0 1.147 0H3.701v1.643H1.644l-.001 2.058z"}),s.createElement("path",{d:"M13.7232174 1.5486087L17.4249565 1.5486087 17.4249565 0 13.7232174 0z"}),s.createElement("path",{d:"M9.15008696 1.5486087L12.8508696 1.5486087 12.8508696 0 9.15008696 0z"}),s.createElement("path",{d:"M4.57504348 1.5486087L8.27678261 1.5486087 8.27678261 0 4.57504348 0z"}),s.createElement("path",{d:"M0 8.27582609L1.5486087 8.27582609 1.5486087 4.57504348 0 4.57504348z"}),s.createElement("path",{d:"M20.4513913 8.27582609L22 8.27582609 22 4.57504348 20.4513913 4.57504348z"}),s.createElement("path",{d:"M0 12.8508696L1.5486087 12.8508696 1.5486087 9.14913043 0 9.14913043z"}),s.createElement("path",{d:"M0 17.4249565L1.5486087 17.4249565 1.5486087 13.7232174 0 13.7232174z"}),s.createElement("path",{d:"M20.4513913 12.8508696L22 12.8508696 22 9.14913043 20.4513913 9.14913043z"}),s.createElement("path",{d:"M20.4513913 17.4249565L22 17.4249565 22 13.7232174 20.4513913 13.7232174z"}),s.createElement("path",{d:"M3.702 22H1.165c-.421 0-.682-.174-.828-.32-.322-.322-.337-.748-.337-.83v-2.552h1.643v2.059h2.059V22z"}),s.createElement("path",{d:"M20.853 22h-2.554v-1.642h2.057l.001-2.06H22v2.538c0 .42-.174.682-.319.827-.32.32-.742.337-.828.337"}),s.createElement("path",{d:"M4.57504348 22L8.27678261 22 8.27678261 20.4513913 4.57504348 20.4513913z"}),s.createElement("path",{d:"M9.15008696 22L12.8508696 22 12.8508696 20.4513913 9.15008696 20.4513913z"}),s.createElement("path",{d:"M13.7232174 22L17.4249565 22 17.4249565 20.4513913 13.7232174 20.4513913z"}))));var Tt=({highlight:t="currentColor",width:e=48,height:i=48})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{fill:t,d:"M29.967 13.005L26.984 13c-3.35 0-5.516 2.222-5.516 5.66v2.61h-2.999c-.26 0-.469.21-.469.47v3.78c0 .26.21.47.469.47h2.999v9.541c0 .26.21.469.469.469h3.912c.26 0 .47-.21.47-.469V25.99h3.506c.259 0 .469-.21.469-.47l.001-3.78a.47.47 0 00-.469-.47h-3.508v-2.212c0-1.064.254-1.603 1.639-1.603l2.01-.001c.258 0 .468-.21.468-.47v-3.51a.47.47 0 00-.468-.47z"})));var Et=({highlight:t="currentColor",width:e=48,height:i=48})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("g",{fill:t,transform:"translate(13 13)"},s.createElement("path",{d:"M15.125 0h-8.25A6.876 6.876 0 000 6.875v8.25A6.876 6.876 0 006.875 22h8.25A6.876 6.876 0 0022 15.125v-8.25A6.876 6.876 0 0015.125 0zm4.813 15.125a4.818 4.818 0 01-4.813 4.813h-8.25a4.818 4.818 0 01-4.813-4.813v-8.25a4.818 4.818 0 014.813-4.813h8.25a4.818 4.818 0 014.813 4.813v8.25z"}),s.createElement("path",{d:"M11 5.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zm0 8.938A3.442 3.442 0 017.562 11 3.441 3.441 0 0111 7.562 3.441 3.441 0 0114.438 11 3.442 3.442 0 0111 14.438z"}),s.createElement("circle",{cx:"16.913",cy:"5.088",r:"1"}))));var Rt=({highlight:t="currentColor",width:e=48,height:i=48})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},s.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("path",{fill:t,d:"M36 17.305c-.892.402-1.843.668-2.835.797a4.997 4.997 0 002.165-2.79 9.685 9.685 0 01-3.12 1.222 4.874 4.874 0 00-3.595-1.596c-2.723 0-4.916 2.267-4.916 5.047 0 .4.032.785.113 1.151-4.09-.205-7.71-2.215-10.141-5.278a5.18 5.18 0 00-.673 2.55c0 1.748.877 3.297 2.185 4.194a4.766 4.766 0 01-2.223-.621v.055c0 2.452 1.705 4.49 3.942 4.958-.4.113-.837.167-1.29.167-.315 0-.633-.019-.931-.087.637 1.999 2.446 3.468 4.597 3.516a9.73 9.73 0 01-6.1 2.152c-.404 0-.791-.018-1.178-.07a13.601 13.601 0 007.548 2.266c9.054 0 14.004-7.693 14.004-14.36 0-.224-.008-.439-.018-.653A9.958 9.958 0 0036 17.305z"})));var Dt=o.ZP.svg.attrs({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"})``;var It=({highlight:t="#565656",width:e=32,height:i=32})=>s.createElement(Dt,{width:e,height:i,viewBox:"0 0 32 32"},s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("g",{fill:t,transform:"translate(-8 -8)"},s.createElement("g",{transform:"translate(8 8)"},s.createElement("g",null,s.createElement("path",{d:"M.941 31.992h2.824v-.94L.941 31.05v-2.822h-.94v2.846s-.004.918.94.918"}),s.createElement("path",{d:"M31.974 31.051v-2.823h-.942v2.823h-2.823v.941h2.846s.919.003.919-.94"}),s.createElement("path",{d:"M4.62305882 31.9926588L8.38776471 31.9926588 8.38776471 31.0514824 4.62305882 31.0514824z"}),s.createElement("path",{d:"M9.32894118 31.9926588L13.0936471 31.9926588 13.0936471 31.0514824 9.32894118 31.0514824z"}),s.createElement("path",{d:"M14.0348235 31.9926588L17.7995294 31.9926588 17.7995294 31.0514824 14.0348235 31.0514824z"}),s.createElement("path",{d:"M18.7407059 31.9926588L22.5054118 31.9926588 22.5054118 31.0514824 18.7407059 31.0514824z"}),s.createElement("path",{d:"M23.4465882 31.9926588L27.2112941 31.9926588 27.2112941 31.0514824 23.4465882 31.0514824z"}),s.createElement("path",{d:"M0 .94v2.824h.941L.942.941h2.823V0H.919S0-.002 0 .94"}),s.createElement("path",{d:"M31.032 0H28.21v.94l2.823.002v2.822h.942V.92s.002-.92-.942-.92"}),s.createElement("path",{d:"M4.62305882 0.940423529L8.38776471 0.940423529 8.38776471 -0.000752941176 4.62305882 -0.000752941176z"}),s.createElement("path",{d:"M9.32894118 0.940423529L13.0936471 0.940423529 13.0936471 -0.000752941176 9.32894118 -0.000752941176z"}),s.createElement("path",{d:"M14.0348235 0.940423529L17.7995294 0.940423529 17.7995294 -0.000752941176 14.0348235 -0.000752941176z"}),s.createElement("path",{d:"M18.7407059 0.940423529L22.5054118 0.940423529 22.5054118 -0.000752941176 18.7407059 -0.000752941176z"}),s.createElement("path",{d:"M23.4465882 0.940423529L27.2112941 0.940423529 27.2112941 -0.000752941176 23.4465882 -0.000752941176z"}),s.createElement("path",{d:"M0 8.46324706L0.941176471 8.46324706 0.941176471 4.69854118 0 4.69854118z"}),s.createElement("path",{d:"M0 13.1691294L0.941176471 13.1691294 0.941176471 9.40442353 0 9.40442353z"}),s.createElement("path",{d:"M0 17.8750118L0.941176471 17.8750118 0.941176471 14.1103059 0 14.1103059z"}),s.createElement("path",{d:"M0 22.5808941L0.941176471 22.5808941 0.941176471 18.8161882 0 18.8161882z"}),s.createElement("path",{d:"M0 27.2867765L0.941176471 27.2867765 0.941176471 23.5220706 0 23.5220706z"}),s.createElement("path",{d:"M30.976 8.46324706L31.9171765 8.46324706 31.9171765 4.69854118 30.976 4.69854118z"}),s.createElement("path",{d:"M30.976 13.1691294L31.9171765 13.1691294 31.9171765 9.40442353 30.976 9.40442353z"}),s.createElement("path",{d:"M30.976 17.8750118L31.9171765 17.8750118 31.9171765 14.1103059 30.976 14.1103059z"}),s.createElement("path",{d:"M30.976 22.5808941L31.9171765 22.5808941 31.9171765 18.8161882 30.976 18.8161882z"}),s.createElement("path",{d:"M30.976 27.2867765L31.9171765 27.2867765 31.9171765 23.5220706 30.976 23.5220706z"}))))));var Ot=({highlight:t="#565656",width:e=32,height:i=48})=>s.createElement(Dt,{width:e,height:i,viewBox:"0 0 42 32"},s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("g",{fill:t,transform:"translate(-3 -8)"},s.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5"}))));var At=({highlight:t="#565656",width:e=26,height:i=46})=>s.createElement(Dt,{width:e,height:i,viewBox:"0 0 26 46"},s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("g",{fill:t,transform:"translate(-11 -1)"},s.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z",transform:"rotate(90 24 24)"}))));var Ft=({highlight:t="#565656",width:e=26,height:i=46})=>s.createElement(Dt,{width:e,height:i,viewBox:"0 0 26 46"},s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("g",{fill:t,transform:"translate(-11 -1)"},s.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z"}))));var Mt=({highlight:t="#565656",mask:e="#fff",width:i=32,height:r=32})=>s.createElement(Dt,{width:i,height:r,viewBox:"0 0 32 32"},s.createElement("defs",null,s.createElement("rect",{id:"photoeditorsdk-square-icon",width:"32",height:"32",x:"0.92",y:"0.707",rx:"1"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("g",{transform:"translate(-8 -8)"},s.createElement("g",{transform:"translate(7.08 7.293)"},s.createElement("mask",{fill:e},s.createElement("use",{xlinkHref:"#photoeditorsdk-square-icon"})),s.createElement("use",{fill:t,xlinkHref:"#photoeditorsdk-square-icon"})))));var Pt=({highlight:t="#565656",width:e=32,height:i=42})=>s.createElement(Dt,{width:e,height:i,viewBox:"0 0 32 42"},s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("g",{fill:t,transform:"translate(-8 -3)"},s.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5",transform:"rotate(90 24 24)"}))));var Bt=({main:t="#424242",highlight:e="#565656",width:i="48px",height:r="48px"})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("rect",{width:"28",height:"3",x:"12",y:"41",fill:t,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),s.createElement("rect",{width:"34",height:"28",x:"7",y:"8",fill:e,rx:"0.5",transform:"matrix(1 0 0 -1 0 44)"}),s.createElement("rect",{width:"3",height:"3",x:"8",y:"41",fill:t,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),s.createElement("rect",{width:"28",height:"3",x:"12",y:"37",fill:t,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),s.createElement("rect",{width:"28",height:"3",x:"12",y:"4",fill:t,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}),s.createElement("rect",{width:"3",height:"3",x:"8",y:"37",fill:t,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),s.createElement("rect",{width:"3",height:"3",x:"8",y:"4",fill:t,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"})));var zt=({main:t="#424242",highlight:e="#565656",width:i="48px",height:r="48px"})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("g",null,s.createElement("path",{fill:t,d:"M42 5a1 1 0 011 1v13a1 1 0 01-1 1H6a1 1 0 01-1-1V6a1 1 0 011-1h36zM21.505 18h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0029.51 18z"}),s.createElement("rect",{width:"22",height:"11",x:"20",y:"29",fill:t,rx:"1"}),s.createElement("rect",{width:"13",height:"10",x:"6",y:"23",fill:t,rx:"1"}),s.createElement("rect",{width:"22",height:"5",x:"20",y:"23",fill:t,rx:"1"}),s.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:e,rx:"1"}),s.createElement("rect",{width:"13",height:"9",x:"6",y:"34",fill:t,rx:"1"}))));var Lt=({main:t="#424242",highlight:e="#565656",width:i="48px",height:r="48px"})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("g",{transform:"translate(5 5)"},s.createElement("path",{fill:e,d:"M37 0a1 1 0 011 1v13a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1h36zM16.505 13h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0024.51 13z"}),s.createElement("rect",{width:"22",height:"11",x:"15",y:"24",fill:t,rx:"1"}),s.createElement("rect",{width:"13",height:"10",x:"1",y:"18",fill:t,rx:"1"}),s.createElement("rect",{width:"22",height:"5",x:"15",y:"18",fill:t,rx:"1"}),s.createElement("rect",{width:"7",height:"7",x:"4",y:"9",fill:t,rx:"1"}),s.createElement("rect",{width:"13",height:"9",x:"1",y:"29",fill:t,rx:"1"}))));var Nt=({main:t="#424242",highlight:e="#565656",width:i="48px",height:r="48px"})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("rect",{width:"26",height:"7",x:"7",y:"18",fill:t,rx:"1"}),s.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:t,rx:"1"}),s.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:t,rx:"1"}),s.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:t,rx:"1"}),s.createElement("rect",{width:"26",height:"21",x:"7",y:"27",fill:t,rx:"1"}),s.createElement("rect",{width:"26",height:"16",x:"7",y:"5",fill:e,rx:"1"})));var Ut=({main:t="#424242",highlight:e="#565656",width:i="48px",height:r="48px"})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("rect",{width:"26",height:"7",x:"7",y:"34",fill:t,rx:"1"}),s.createElement("rect",{width:"26",height:"32",x:"7",y:"5",fill:e,rx:"1"}),s.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:t,rx:"1"}),s.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:t,rx:"1"}),s.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:t,rx:"1"}),s.createElement("rect",{width:"26",height:"5",x:"7",y:"43",fill:t,rx:"1"})));var jt=({main:t="#424242",highlight:e="#565656",width:i="48px",height:r="48px"})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("rect",{width:"26",height:"7",x:"7",y:"28",fill:t,rx:"1"}),s.createElement("rect",{width:"26",height:"26",x:"7",y:"5",fill:e,rx:"1"}),s.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:t,rx:"1"}),s.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:t,rx:"1"}),s.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:t,rx:"1"}),s.createElement("rect",{width:"26",height:"11",x:"7",y:"37",fill:t,rx:"1"})));var Ht=({main:t="#424242",highlight:e="#565656",width:i="48px",height:r="48px"})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("rect",{width:"20",height:"34",x:"14",y:"10",fill:e,rx:"1.5"}),s.createElement("rect",{width:"3",height:"3",x:"14",y:"5",fill:t,rx:"1"})));var Wt=({main:t="#424242",highlight:e="#565656",shadow:i="#333333",width:r="48px",height:n="48px"})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:n,viewBox:"0 0 48 48"},s.createElement("defs",null,s.createElement("filter",{id:"photoeditorsdk-twitter-post-icon",width:"166.7%",height:"166.7%",x:"-33.3%",y:"-33.3%",filterUnits:"objectBoundingBox"},s.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1"}))),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:t,rx:"0.5"}),s.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:t,rx:"0.5"}),s.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:t,rx:"0.5"}),s.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:t,rx:"0.5"}),s.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:e,rx:"0.5"}),s.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:t,rx:"0.5"}),s.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:t,rx:"0.5"}),s.createElement("rect",{width:"9",height:"9",x:"8",y:"13",fill:i,filter:"url(#photoeditorsdk-twitter-post-icon)",rx:"1"}),s.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"})));var Gt=({main:t="#424242",highlight:e="#565656",width:i="48px",height:r="48px"})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:t,rx:"0.5"}),s.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:t,rx:"0.5"}),s.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:t,rx:"0.5"}),s.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:t,rx:"0.5"}),s.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:t,rx:"0.5"}),s.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:t,rx:"0.5"}),s.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:t,rx:"0.5"}),s.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:e,rx:"1"})));var Vt=({main:t="#424242",highlight:e="#565656",width:i="48px",height:r="48px"})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:r,viewBox:"0 0 48 48"},s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:e,rx:"0.5"}),s.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:t,rx:"0.5"}),s.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:t,rx:"0.5"}),s.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:t,rx:"0.5"}),s.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:t,rx:"0.5"}),s.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:t,rx:"0.5"}),s.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:t,rx:"0.5"}),s.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"})));var $t=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-delete-icon",d:"M20 6l-2.312 15.718A1.5 1.5 0 0116.204 23H5.796a1.5 1.5 0 01-1.484-1.282L2 6h18zM7 1a1 1 0 011-1h6a1 1 0 011 1v1h7v2H0V2h7V1z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-delete-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-delete-icon"})));var Zt=({height:t=3,width:e=102,x:i=-102,className:r,style:n})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,viewBox:"0 0 102 3",className:r,style:n},s.createElement("pattern",{id:"photoeditorsdk-slider-dots",fill:"currentColor",patternUnits:"userSpaceOnUse",width:"102",height:"3"},s.createElement("rect",{width:"3",height:"3",x:"99",y:"0",opacity:"0.5",rx:"1.5"}),s.createElement("rect",{width:"3",height:"3",x:"88",y:"0",opacity:"0.5",rx:"1.5"}),s.createElement("rect",{width:"3",height:"3",x:"77",y:"0",opacity:"0.5",rx:"1.5"}),s.createElement("rect",{width:"3",height:"3",x:"66",y:"0",rx:"1.5"}),s.createElement("rect",{width:"3",height:"3",x:"55",y:"0",opacity:"0.5",rx:"1.5"}),s.createElement("rect",{width:"3",height:"3",x:"44",y:"0",opacity:"0.5",rx:"1.5"}),s.createElement("rect",{width:"3",height:"3",x:"33",y:"0",opacity:"0.5",rx:"1.5"}),s.createElement("rect",{width:"3",height:"3",x:"22",y:"0",opacity:"0.5",rx:"1.5"}),s.createElement("rect",{width:"3",height:"3",x:"11",y:"0",rx:"1.5"})),s.createElement("rect",{fill:"url(#photoeditorsdk-slider-dots)",x:1.5*-e,y:"0",width:4*e,height:"3",transform:`translate(${i}, 0)`}));var Xt=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-duplicate-icon",d:"M3.429 8.571v12h12v-12h-12zM1.714 5.143h15.429c.947 0 1.714.767 1.714 1.714v15.429c0 .946-.767 1.714-1.714 1.714H1.714A1.714 1.714 0 010 22.286V6.857c0-.947.768-1.714 1.714-1.714zM22.286 0C23.232 0 24 .768 24 1.714v15.429c0 .947-.768 1.714-1.714 1.714H20.57V3.429L5.142 3.428V1.714C5.143.768 5.91 0 6.858 0h15.429z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},s.createElement("mask",{fill:"currentColor"},s.createElement("use",{xlinkHref:"#photoeditorsdk-duplicate-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-duplicate-icon"})));var Yt=()=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},s.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M2.087 7.115h7.66v15.32h5.027l.223-15.32h7.438V2.087H2.087v5.028zM14.075 24h-4.15a2.42 2.42 0 01-1.718-.711 2.423 2.423 0 01-.711-1.717V9.01H2.429c-.67 0-1.278-.273-1.718-.713A2.426 2.426 0 010 6.579V2.43C0 1.76.272 1.153.711.713A2.424 2.424 0 012.43 0h19.142c.671 0 1.278.272 1.718.713.439.44.711 1.047.711 1.718v4.148c0 .671-.272 1.278-.711 1.718-.44.44-1.047.713-1.718.713h-5.067v12.562c0 .67-.272 1.278-.711 1.717a2.42 2.42 0 01-1.718.711z"}));var qt=({className:t})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",transform:"scale(-1, 1)",className:t},s.createElement("title",null,"Flip Horizontal"),s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-flip-horizontal-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},s.createElement("mask",{fill:"none"},s.createElement("use",{xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})));var Kt=({className:t})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",className:t},s.createElement("title",null,"Flip Vertical"),s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-flip-vertical-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},s.createElement("mask",{fill:"none"},s.createElement("use",{xlinkHref:"#photoeditorsdk-flip-vertical-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(-90 41.417 8)",xlinkHref:"#photoeditorsdk-flip-vertical-icon"})));var Qt=({alt:t="Rotate",className:e})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 16 16",className:e},s.createElement("title",null,t),s.createElement("defs",null,s.createElement("path",{id:"photoeditorsdk-rotate-icon",d:"M132 0l1.25 1.57a8.01 8.01 0 0110.41.77 8.015 8.015 0 010 11.32c-.33.33-.67.62-1.04.859-1.38.991-3 1.481-4.62 1.481v-2c1.22 0 2.44-.37 3.47-1.111a6 6 0 00.77-9.129 5.992 5.992 0 00-7.73-.63L136 5h-5l1-5zm2.43 12.82c.5.38 1.06.67 1.66.87l-.64 1.89a7.56 7.56 0 01-1.48-.67l-.03-.01v-.01h-.02v-.01h-.01c0-.01-.01-.01-.01-.01h-.01v-.01h-.02v-.01h-.01l-.01-.01s-.01 0-.01-.01h-.01c-.2-.12-.4-.26-.6-.4zm-2.15-3.02c.18.6.47 1.17.83 1.68l-1.63 1.16v-.01s-.01 0-.01-.01c0 0 0-.01-.01-.01v-.01h-.01v-.01c-.01 0-.01-.01-.01-.01v-.01h-.01v-.01h-.01v-.01c0-.01-.01-.01-.01-.01v-.01c-.01 0-.01 0-.01-.01-.27-.39-.49-.79-.68-1.21-.01 0-.01-.01-.01-.01v-.01h-.01v-.02l-.01-.01c0-.02-.01-.02-.01-.02v-.02h-.01v-.02h-.01v-.03h-.01v-.02h-.01v-.02c-.01 0-.01 0-.01-.01v-.01c-.1-.23-.19-.47-.26-.7z"})),s.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-130)"},s.createElement("mask",{fill:"none"},s.createElement("use",{xlinkHref:"#photoeditorsdk-rotate-icon"})),s.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-rotate-icon"})));const Jt={adjustment:lt,filter:ut,library:pt,overlay:ft,focus:ht,sticker:mt,text:gt,textdesign:_t,frame:dt,transform:yt,brush:ct},te={left:st,right:at,center:ot},ee={addText:vt,openWebcam:bt,reset:xt,shuffle:wt,uploadImage:St},ie={undo:nt,redo:rt,close:et,export:it},re={categories:{[n.n.CommonCategory]:Ct,[n.n.FacebookCategory]:Tt,[n.n.TwitterCategory]:Rt,[n.n.InstagramCategory]:Et},crops:{[n.n.Custom]:It,[n.n.Square]:Mt,[n.n.ThreeByFour]:Pt,[n.n.FourByThree]:Ot,[n.n.NineBySixteen]:At,[n.n.SixteenByNine]:Ft,[n.n.FacebookPost]:Bt,[n.n.FacebookProfile]:zt,[n.n.FacebookTitle]:Lt,[n.n.InstagramLandscape]:Nt,[n.n.InstagramPortrait]:Ut,[n.n.InstagramSquare]:jt,[n.n.InstagramStory]:Ht,[n.n.TwitterPost]:Wt,[n.n.TwitterProfile]:Gt,[n.n.TwitterTitle]:Vt},dots:Zt,duplicate:Xt,edit:Yt,bringToFront:kt,delete:$t,flipHorizontal:qt,flipVertical:Kt,rotate:Qt},ne={[n.i.BRIGHTNESS]:G,[n.i.CONTRAST]:$,[n.i.SATURATION]:q,[n.i.CLARITY]:V,[n.i.SHADOWS]:K,[n.i.HIGHLIGHTS]:Y,[n.i.EXPOSURE]:Z,[n.i.GAMMA]:X,[n.i.BLACKS]:W,[n.i.WHITES]:tt,[n.i.TEMPERATURE]:J,[n.i.SHARPNESS]:Q},oe=j.Button.TextSecondary,se=o.ZP.span`
  font-size: 14px;
  padding: 3px 1px 2px;
  color: ${t=>t.theme.canvasActionBar.foreground};
  display: flex;
  align-self: center;
`;var ae=(0,r.aa)("scale","active")((0,r.Z)((({scale:t,active:e})=>{const{canZoomIn:i}=t,{canZoomOut:r}=t,{zoomLevel:o}=t;return-1!==[n.c.TRANSFORM,n.c.BRUSH,n.c.FOCUS,n.c.STICKER,n.c.TEXT,n.c.TEXT_DESIGN].indexOf(e.tool)?null:s.createElement(j.Bar.ButtonGroup,null,s.createElement(oe,{ariaLabel:"Zoom out",isDisabled:!r,onClick:t.out},"-"),s.createElement(se,null,o," %"),s.createElement(oe,{ariaLabel:"Zoom in",isDisabled:!i,onClick:t.in},"+"))})));se.defaultProps={theme:r.v};const le=(0,o.ZP)(j.Bar.ButtonGroup)`
  > :last-child {
    margin-left: 10px;
  }
  > :first-child {
    margin-left: 0;
  }
`;var ce=(0,r.aa)("config","editor","history","custom")((0,r.Z)((({config:t,editor:e,history:i,custom:o})=>{const a=t.locale.mainCanvasActions,{canUndo:l}=i,{canRedo:c}=i,u=t.config.mainCanvasActions,h=()=>{e.export()},d=()=>{if(e.activeStore.tool===n.c.TRANSFORM)return null;const t=o.getButton("mainCanvasActionUndo");return s.createElement(t,{key:"mainCanvasActionUndo",onClick:i.undo,isDisabled:!l,label:a.buttonUndo,ariaLabel:a.buttonUndo,icon:s.createElement(ie.undo,null)})},p=()=>{if(e.activeStore.tool===n.c.TRANSFORM)return null;const t=o.getButton("mainCanvasActionRedo");return s.createElement(t,{key:"mainCanvasActionRedo",onClick:i.redo,isDisabled:!c,label:a.buttonRedo,ariaLabel:a.buttonRedo,icon:s.createElement(ie.redo,null)})},f=()=>{const t=o.getButton("mainCanvasActionExport");return s.createElement(t,{key:"mainCanvasActionExport",onClick:h,label:a.buttonExport,ariaLabel:a.buttonExport,icon:s.createElement(ie.export,null)})},m=()=>{if(!t.displayCloseButton)return null;const i=o.getButton("mainCanvasActionClose");return s.createElement(i,{key:"mainCanvasActionClose","data-test":r.T.MainBarButtonClose,onClick:e.close,label:a.buttonClose,ariaLabel:a.buttonClose,icon:s.createElement(ie.close,null)})},g=u.map((t=>{switch(t){case n.a.UNDO:return d;case n.a.REDO:return p;case n.a.EXPORT:return f;case n.a.CLOSE:return m;default:return null}}));return s.createElement(j.Bar.Index,null,s.createElement(le,null,g[0]&&g[0]()||null,g[1]&&g[1]()||null),t.config.enableZoom?s.createElement(ae,null):null,s.createElement(le,null,g[2]&&g[2]()||null,g[3]&&g[3]()||null))})));const ue=(0,n.U)((0,r.ba)()),he=o.ZP.div`
  position: relative;
`;let de=class extends s.Component{constructor(t){super(t),this.onClick=t=>e=>{const{onAddSnapshot:r,config:n,onChange:o,colorPickerDirection:s,rect:a}=this.props,{activeIdentifier:l,showColorPicker:c,colorList:u}=this.state,h=u.find((e=>e.identifier===t));if(l!==h.identifier||c)c?this.setState({showColorPicker:!1}):(o(h.color),this.setState({activeIdentifier:t}),r&&r());else{this.UIComponent||i.e(77).then(i.bind(i,4077)).then((({ColorPicker:t})=>{this.UIComponent=t,this.forceUpdate()}));const{left:t,width:r,top:o,height:l}=e.currentTarget.getBoundingClientRect(),{left:c,top:u}=e.currentTarget.parentElement.getBoundingClientRect(),{colorPicker:h}=n.measurements.color,d=h.arrow.width/2;let p=t-c+r/2-2,f="bottom"===s?o-u+l+d:o-u-d,m=-24;const g=h.width-h.arrow.width-12;p>g&&(m+=p-g,p-=m);let _=!0;if("bottom"===s&&a){const t=a.height,e=o-a.top,i=t-(e+l),r=n.measurements.color.colorPicker.height+d;i<r&&(f=i-r),e+f<e+l/2&&(f+=d,_=!1)}this.setState({showColorPicker:!0,showColorPickerArrow:_,arrowOffset:p,topOffset:f,leftOffset:m})}},this.onChange=({color:t,colorString:e})=>{const{onChange:i}=this.props,{activeIdentifier:r,colorList:n}=this.state,o=n.findIndex((t=>t.identifier===r));if(-1!==o){const i=[...n];i[o]={identifier:n[o].identifier,colorString:e,color:t},this.setState({colorList:i})}i(t)},this.onChangeColorPicker=({color:t,colorString:e})=>{this.onChange({color:[t[0]/255,t[1]/255,t[2]/255,t[3]],colorString:e})},this.closeColorPicker=()=>{this.setState({showColorPicker:!1})},this.getColorPicker=()=>{const{activeColor:t,labelsColor:e,colorPickerDirection:i,onAddSnapshot:r}=this.props,{showColorPicker:n,showColorPickerArrow:o,arrowOffset:a,leftOffset:l,topOffset:c}=this.state;if(!this.UIComponent)return null;const u=this.UIComponent;return s.createElement(u,{color:ue.toJS(t),show:n,showArrow:o,direction:i,arrowOffset:a,leftOffset:l,topOffset:c,labelHex:e.hex,labelR:e.r,labelG:e.g,labelB:e.b,labelSliderOpacity:e.sliderOpacity,labelSliderHue:e.sliderHue,onChange:this.onChangeColorPicker,onRequestClose:this.closeColorPicker,onAddSnapshot:r})};const{colors:e}=this.props;this.state={activeIdentifier:"",activeSprite:"",colorList:[...e],showColorPicker:!1,showColorPickerArrow:!1,arrowOffset:0,leftOffset:0,topOffset:0},this.UIComponent=null}static getDerivedStateFromProps({activeSprite:t,activeColor:e},{activeSprite:i,colorList:n}){if(t!==i||!t){const i=(0,r.Q)(ue.toJS(e)),o=n.find((({colorString:t})=>t===i));return{activeSprite:t,activeIdentifier:o?o.identifier:""}}return null}render(){const{isDisabled:t,custom:e,config:i}=this.props,{activeIdentifier:n,colorList:o}=this.state,a=e.getColorItem(),l=i.assetProvider.getPath("controls","/tiled-background.png"),c=o.map((e=>s.createElement(a,{key:`${e.colorString}-item-${e.identifier}`,isActive:e.identifier===n,isDisabled:t,onClick:this.onClick(e.identifier),color:e.colorString,label:e.identifier,tiledBackgroundUrl:l})));return s.createElement(he,{"data-test":r.T.ColorList},c,this.getColorPicker())}};de.defaultProps={colorPickerDirection:"bottom",isDisabled:!1},de=(0,r.R)([(0,r.aa)("config","custom"),r.Z],de);const pe=t=>s.createElement(r.d.Consumer,null,(({rect:e})=>s.createElement(de,(0,n.N)((0,n.N)({},t),{rect:e}))));function fe(){return(0,s.useContext)(r._)}const me=(0,o.ZP)(j.Controls.Container)`
  cursor: none;
`,ge=o.ZP.div`
  position: absolute;
  width: 20px;
  height: 20px;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  border-width: 2px;
  border-style: solid;
  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 1);
`;class _e extends s.Component{constructor(t){super(t),this.INITIAL_POSITION={x:void 0,y:void 0},this.state=(0,n.N)((0,n.N)({},this.INITIAL_POSITION),{isDrawing:!1}),this.containerElementRef=null,this.getCursorCoordinates=t=>{let e=0,i=0;if(-1!==t.type.indexOf("touch")){const r=t;if(!r.touches.length)return(0,n.N)((0,n.N)({},this.INITIAL_POSITION),{height:0,width:0});e=r.touches[0].clientX,i=r.touches[0].clientY}else{const r=t;e=r.clientX,i=r.clientY}const r=this.containerElementRef.current.getBoundingClientRect();return{x:e-r.left,y:i-r.top,height:r.height,width:r.width}},this.draw=t=>{t.preventDefault(),t.stopPropagation(),this.touchDraw(t)},this.touchDraw=t=>{const{x:e,y:i}=this.getCursorCoordinates(t);void 0!==e&&void 0!==i&&(this.setState({x:e,y:i}),this.state.isDrawing&&this.brushTool.strokePosition({x:e,y:i}))},this.start=()=>{this.brushTool.clickableCanvas(!1),this.setState({isDrawing:!0}),this.brushTool.beginStroke()},this.stop=t=>{this.state.isDrawing&&(t.preventDefault(),t.stopPropagation(),this.setState({isDrawing:!1}),this.brushTool.endStroke(),this.brushTool.clickableCanvas(!0))},this.setInitialPosition=()=>{this.setState((0,n.N)({},this.INITIAL_POSITION))},this.mouseOut=t=>{const{config:e}=this.props;t.preventDefault(),t.stopPropagation();const i=this.brushTool.sizeOnScreenSpace/2,{x:r,y:n,height:o,width:s}=this.getCursorCoordinates(t);r&&n&&(r<0||n<0||r>s-i||n>o-i||n<e.measurements.mainCanvasActionBar.height)&&this.setInitialPosition()},this.touchEnd=t=>{t.preventDefault(),t.stopPropagation();const{x:e,y:i}=this.state;e&&i&&this.setInitialPosition()},this.getCursor=()=>{const{x:t,y:e}=this.state;if(t&&e){const t=(0,r.Q)(this.brushTool.color),e=`${this.brushTool.sizeOnScreenSpace}px`,i={left:`${this.state.x}px`,top:`${this.state.y}px`,borderColor:t,height:e,width:e};return s.createElement(ge,{style:i,"data-test":r.T.Cursor})}return null},this.containerElementRef=s.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!1})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)}get brushTool(){return this.props.brushTool}render(){return s.createElement(me,{ref:this.containerElementRef,"data-test":r.T.CursorContainer,onMouseMove:this.draw,onTouchMove:this.touchDraw,onMouseDown:this.start,onTouchStart:this.start,onMouseOut:this.mouseOut,onTouchEnd:this.touchEnd},this.getCursor())}}var ye=(0,r.aa)("brushTool","config")((0,r.Z)(_e));const ve=(t,e)=>void 0!==t&&void 0!==e&&!Number.isNaN(t)&&!Number.isNaN(e),be=(0,o.ZP)(j.Controls.Knob)`
  margin-top: -${t=>t.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
  margin-left: -${t=>t.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
`,{Container:xe}=j.Controls;class we extends s.Component{constructor(){super(...arguments),this.start=(t,{x:e,y:i})=>{ve(e,i)&&this.focusTool.setStart({x:e,y:i})},this.end=(t,{x:e,y:i})=>{ve(e,i)&&this.focusTool.setEnd({x:e,y:i})},this.onKnob1DragStart=(t,e)=>{this.focusTool.clickableCanvas(!1),this.start(t,e)},this.onKnob1DragStop=(t,e)=>{this.addSnapshot(e,this.historyLocale.focusPosition),this.start(t,e),this.focusTool.clickableCanvas(!0)},this.onKnob2DragStart=(t,e)=>{this.focusTool.clickableCanvas(!1),this.end(t,e)},this.onKnob2DragStop=(t,e)=>{this.addSnapshot(e,this.historyLocale.focusPosition),this.end(t,e),this.focusTool.clickableCanvas(!0)},this.addSnapshot=({x:t,y:e},i)=>{ve(t,e)&&this.focusTool.toolSnapshot(i)},this.getLine=()=>{const{height:t,width:e}=this.props.canvas.canvasSize,i=this.focusTool.startOnPreview,r=this.focusTool.endOnPreview;return s.createElement("svg",{focusable:"false",height:t,width:e},s.createElement("line",{x1:i.x,y1:i.y,x2:r.x,y2:r.y,strokeWidth:"2",stroke:"currentColor"}))}}get focusTool(){return this.props.focusTool}get historyLocale(){return this.focusTool.locale.history}render(){return s.createElement(xe,null,s.createElement(j.Controls.Line,null,this.getLine()),s.createElement(r.X.Draggable,{bounds:"parent",position:this.focusTool.startOnPreview,onStart:this.onKnob1DragStart,onDrag:this.start,onStop:this.onKnob1DragStop},s.createElement(be,null)),s.createElement(r.X.Draggable,{bounds:"parent",onStart:this.onKnob2DragStart,onDrag:this.end,onStop:this.onKnob2DragStop,position:this.focusTool.endOnPreview},s.createElement(be,null)))}}be.defaultProps={theme:r.v};var Se=(0,r.aa)("canvas","focusTool")((0,r.Z)(we));let ke=class extends s.Component{constructor(){super(...arguments),this.getKnobPosition=()=>{const{focusTool:t}=this.props,{origin:e,size:i}=t,r=i/2,n=Math.PI/2+t.rotation;return{x:e.x+r*Math.cos(n),y:e.y+r*Math.sin(n)}},this.onArea=(t,{x:e,y:i})=>{const{editor:r}=this.props,o=r.configStore.measurements.canvasControls.knob.size;if(ve(e,i)){const{canvas:t,focusTool:r}=this.props,{size:s,mirroredAreaWidth:a}=r,l=e+a/2,c=i+s/2,u=new n.C(this.getKnobPosition()),h=new n.C({x:e,y:i}).subtract(new n.C(this.areaPosition)),d=u.add(h);d.x>o&&d.x<t.canvasSize.width-o&&d.y>o&&d.y<t.canvasSize.height-o&&r.setOrigin({x:l,y:c})}},this.onKnob=(t,{x:e,y:i})=>{const{focusTool:r}=this.props;if(ve(e,i)){r.clickableCanvas(!1);const t=new n.C(r.origin),o=new n.C(e,i),s=t.subtract(o),a=s.magnitude,l=Math.PI/2+Math.atan2(s.y,s.x);r.setSize(2*a),r.setRotation(l)}},this.onAreaDragStop=(t,e)=>{const{focusTool:i}=this.props;this.addSnapshot(e,i.locale.history.focusPosition),this.onArea(t,e),i.clickableCanvas(!0)},this.onKnobDragStop=(t,e)=>{const{focusTool:i}=this.props;this.addSnapshot(e,i.locale.history.focusSize),this.onKnob(t,e),i.clickableCanvas(!0)},this.addSnapshot=({x:t,y:e},i)=>{const{focusTool:r}=this.props;ve(t,e)&&r.toolSnapshot(i)}}get areaPosition(){const{focusTool:t}=this.props,{origin:e,size:i,mirroredAreaWidth:r}=t;return{x:e.x-r/2,y:e.y-i/2}}render(){const{x:t,y:e}=this.areaPosition,{focusTool:i}=this.props;return s.createElement(j.Controls.Container,null,s.createElement(r.X.Draggable,{bounds:"parent",onStart:this.onKnob,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:this.getKnobPosition()},s.createElement(j.Controls.Knob,null)),s.createElement(r.X.Draggable,{onStart:this.onArea,onDrag:this.onArea,onStop:this.onAreaDragStop,position:{x:t,y:e},rotation:i.rotation},s.createElement(j.Controls.Area,{"data-test":r.T.Focus,height:i.size,width:i.mirroredAreaWidth})))}};ke=(0,r.R)([(0,r.aa)("focusTool","canvas","editor"),r.Z],ke);let Ce=class extends s.Component{constructor(){super(...arguments),this.state={knobAngle:2.35},this.onCircle=(t,{x:e,y:i})=>{if(ve(e,i)){const{focusTool:t}=this.props;t.setCenter({x:e+t.radius,y:i+t.radius})}},this.onKnob=(t,{x:e,y:i})=>{if(ve(e,i)){const{focusTool:t}=this.props,r=new n.C(e,i),o=new n.C(t.center.x,t.center.y).subtract(r),s=o.magnitude,a=-Math.atan2(o.y,o.x);this.setState({knobAngle:a}),t.setRadius(s)}},this.onCircleDragStart=(t,e)=>{const{focusTool:i}=this.props;i.clickableCanvas(!1),this.onCircle(t,e)},this.onCircleDragStop=(t,e)=>{const{focusTool:i}=this.props;this.addSnapshot(e,i.locale.history.focusPosition),this.onCircle(t,e),i.clickableCanvas(!0)},this.onKnobDragStart=(t,e)=>{const{focusTool:i}=this.props;i.clickableCanvas(!1),this.onKnob(t,e)},this.onKnobDragStop=(t,e)=>{const{focusTool:i}=this.props;this.addSnapshot(e,i.locale.history.focusSize),this.onKnob(t,e),i.clickableCanvas(!0)},this.addSnapshot=({x:t,y:e},i)=>{const{focusTool:r}=this.props;ve(t,e)&&r.toolSnapshot(i)}}componentDidMount(){this.setState({knobAngle:2.35})}render(){const{focusTool:t}=this.props,{knobAngle:e}=this.state,{center:i,radius:n}=t,o={x:i.x-n,y:i.y-n},a=Math.PI-e,l={x:i.x+n*Math.cos(a),y:i.y+n*Math.sin(a)};return s.createElement(j.Controls.Container,null,s.createElement(r.X.Draggable,{bounds:"parent",onStart:this.onKnobDragStart,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:l},s.createElement(j.Controls.Knob,null)),s.createElement(r.X.Draggable,{onStart:this.onCircleDragStart,onDrag:this.onCircle,onStop:this.onCircleDragStop,position:o},s.createElement(j.Controls.Circle,{"data-test":r.T.Focus,radius:n})))}};Ce=(0,r.R)([(0,r.aa)("focusTool","canvas"),r.Z],Ce);const Te=(0,r.Z)((()=>{const{focusTool:t}=fe(),{state:e}=t,i=(()=>{switch(e.identifier){case n.k.LINEAR:return Se;case n.k.RADIAL:return Ce;case n.k.MIRRORED:return ke;default:return null}})();return t.isOptionSelected&&i?s.createElement(i,null):null}));var Ee=(0,r.aa)("stickerTool","custom")((0,r.Z)((({stickerTool:t,custom:e})=>{const i=t.locale.canvasActions,r={[n.a.BRING_TO_FRONT]:{key:n.a.BRING_TO_FRONT,customButtonKey:"canvasActionBringToFront",onClick:e=>{e.stopPropagation(),t.bringToFront()},label:i.buttonBringToFront,icon:s.createElement(re.bringToFront,null)},[n.a.FLIP]:{key:n.a.FLIP,customButtonKey:"canvasActionFlip",onClick:e=>{e.stopPropagation(),t.flipHorizontally()},label:i.buttonFlipHorizontal,icon:s.createElement(re.flipHorizontal,null)},[n.a.DUPLICATE]:{key:n.a.DUPLICATE,customButtonKey:"canvasActionDuplicate",onClick:()=>t.duplicate(),label:i.buttonDuplicate,icon:s.createElement(re.duplicate,null)},[n.a.DELETE]:{key:n.a.DELETE,customButtonKey:"canvasActionDelete",onClick:e=>{e.stopPropagation(),t.delete()},label:i.buttonDelete,icon:s.createElement(re.delete,null)}},o=t.config.canvasActions.map((t=>r[t]?(({key:t,customButtonKey:i,onClick:r,label:n,icon:o})=>{const a=e.getButton(i);return s.createElement(a,{key:t,onClick:r,label:n,ariaLabel:n,icon:o})})(r[t]):null));return t.isStickerSelected?s.createElement(j.Bar.ButtonGroup,null,o):null})));var Re=(0,r.aa)("textTool","sprite","custom")((0,r.Z)((({textTool:t,sprite:e,custom:i})=>{const r=t.locale.canvasActions,o={[n.a.EDIT]:{key:n.a.EDIT,customButtonKey:"canvasActionEdit",onClick:()=>t.setEditMode(!0),label:r.buttonEdit,icon:s.createElement(re.edit,null)},[n.a.BRING_TO_FRONT]:{key:n.a.BRING_TO_FRONT,customButtonKey:"canvasActionBringToFront",onClick:e=>{e.stopPropagation(),t.bringToFront()},label:r.buttonBringToFront,icon:s.createElement(re.bringToFront,null)},[n.a.DUPLICATE]:{key:n.a.DUPLICATE,customButtonKey:"canvasActionDuplicate",onClick:()=>t.duplicate(),label:r.buttonDuplicate,icon:s.createElement(re.duplicate,null)},[n.a.DELETE]:{key:n.a.DELETE,customButtonKey:"canvasActionDelete",onClick:e=>{e.stopPropagation(),t.delete()},label:r.buttonDelete,icon:s.createElement(re.delete,null)}},a=t.config.canvasActions.map((t=>o[t]?(({key:t,customButtonKey:e,onClick:r,label:n,icon:o})=>{const a=i.getButton(e);return s.createElement(a,{key:t,onClick:r,label:n,ariaLabel:n,icon:o})})(o[t]):null));return e.isSpriteText?s.createElement(j.Bar.ButtonGroup,null,a):null})));var De=(0,r.aa)("textDesignTool","custom")((0,r.Z)((({textDesignTool:t,custom:e})=>{const i=t.locale.canvasActions,r={[n.a.EDIT]:{key:n.a.EDIT,customButtonKey:"canvasActionEdit",onClick:()=>t.setEditMode(!0),label:i.buttonEdit,icon:s.createElement(re.edit,null)},[n.a.BRING_TO_FRONT]:{key:n.a.BRING_TO_FRONT,customButtonKey:"canvasActionBringToFront",onClick:e=>{e.stopPropagation(),t.bringToFront()},label:i.buttonBringToFront,icon:s.createElement(re.bringToFront,null)},[n.a.INVERT]:{key:n.a.INVERT,customButtonKey:"canvasActionInvert",onClick:e=>{e.stopPropagation(),t.invertBackground()},label:i.buttonInvert,icon:s.createElement(re.flipHorizontal,null)},[n.a.DUPLICATE]:{key:n.a.DUPLICATE,customButtonKey:"canvasActionDuplicate",onClick:()=>t.duplicate(),label:i.buttonDuplicate,icon:s.createElement(re.duplicate,null)},[n.a.DELETE]:{key:n.a.DELETE,customButtonKey:"canvasActionDelete",onClick:e=>{e.stopPropagation(),t.delete()},label:i.buttonDelete,icon:s.createElement(re.delete,null)}},o=t.config.canvasActions.map((t=>r[t]?(({key:t,customButtonKey:i,onClick:r,label:n,icon:o})=>{const a=e.getButton(i);return s.createElement(a,{key:t,onClick:r,label:n,ariaLabel:n,icon:o})})(r[t]):null));return t.isTextDesignSelected?s.createElement(j.Bar.ButtonGroup,null,o):null})));let Ie=class extends s.Component{constructor(t){super(t),this.actionsRef=null,this.spriteControlPosition=()=>{const{config:t,sprite:e,canvas:{canvasSize:i}}=this.props,{controlPadding:r,controlOffset:o}=t.measurements.canvasControls.sprite,{x:s,y:a}=e.position,{height:l,width:c}=e.currentSprite.size,u=e.rotationWRTOutputRotation,h=this.actionsRef.current;let d=new n.C(0,0);if(h){const t=h.getBoundingClientRect();d=new n.C(t.width/2+o,t.height+o)}const p=Math.abs(c*Math.sin(u))+Math.abs(l*Math.cos(u)),f=new n.C(s,a-p/2-r-o).clamp(d,new n.C(i.width,i.height).subtract(d));return{left:f.x,top:f.y}},this.getSpriteControls=()=>{const{sprite:t}=this.props;switch(t.tool){case n.c.TEXT:return s.createElement(Re,null);case n.c.TEXT_DESIGN:return s.createElement(De,null);case n.c.STICKER:return s.createElement(Ee,null);default:return null}},this.actionsRef=s.createRef(),this.state={isMounted:!1}}componentDidMount(){this.setState({isMounted:!0})}render(){const{sprite:t}=this.props,{isMounted:e}=this.state,i=!t.isDragMode&&!t.isEditMode,o=this.spriteControlPosition();return s.createElement(j.Controls.SpriteActionsWrapper,{"data-test":r.T.SpriteActions,ref:this.actionsRef,show:i&&e,style:(0,n.N)({},o)},this.getSpriteControls())}};Ie=(0,r.R)([(0,r.aa)("sprite","config","editor","canvas"),r.Z],Ie);const{Corner:Oe}=j.Controls,{Draggable:Ae}=r.X;let Fe=new n.C(0,0),Me=new n.C(0,0);const Pe=(0,r.Z)((()=>{const{config:t,sprite:e}=fe(),{leftTopPosition:i,leftBottomPosition:o,rightTopPosition:a,rightBottomPosition:l}=e,{borderWidth:c}=t.measurements.canvasControls.corner,u=({clientX:t,clientY:i})=>{void 0!==t&&void 0!==i&&e.onCornerDrag(Me.subtract(Fe.subtract(new n.C(t,i))))},h=(t,r)=>{const{clientX:s,clientY:c}=t;Fe=new n.C(s,c),Me=new n.C((t=>{switch(t){case"leftTop":return i;case"leftBottom":return o;case"rightTop":return a;case"rightBottom":return l;default:return i}})(r)),e.clickableCanvas(!1),e.setDragMode(!0)},d=()=>{e.clickableCanvas(!0),e.setDragMode(!1),e.spriteSnapshot("size"),Fe=new n.C(0,0),Me=new n.C(0,0)};return s.createElement(s.Fragment,null,s.createElement(Ae,{onStop:d,onDrag:u,onStart:t=>h(t,"leftTop")},s.createElement(Oe,{"data-test":r.T.SpriteTopLeft,vertical:"top",horizontal:"left",borderWidth:c})),s.createElement(Ae,{onStop:d,onDrag:u,onStart:t=>h(t,"leftBottom")},s.createElement(Oe,{"data-test":r.T.SpriteBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:c})),s.createElement(Ae,{onStop:d,onDrag:u,onStart:t=>h(t,"rightTop")},s.createElement(Oe,{"data-test":r.T.SpriteTopRight,vertical:"top",horizontal:"right",borderWidth:c})),s.createElement(Ae,{onStop:d,onDrag:u,onStart:t=>h(t,"rightBottom")},s.createElement(Oe,{"data-test":r.T.SpriteBottomRight,vertical:"bottom",horizontal:"right",borderWidth:c})))})),Be=o.ZP.img`
  position: absolute;
  left: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`,ze=o.ZP.img`
  position: absolute;
  right: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`;let Le=new n.C(0,0),Ne=new n.C(0,0);var Ue=(0,r.aa)("sprite","config")((0,r.Z)((({sprite:t,config:e})=>{const i=t.leftMidPosition,o=t.rightMidPosition,a=e.assetProvider.getPath("controls","/arrow-left.png"),l=e.assetProvider.getPath("controls","/arrow-right.png"),c=(e,r)=>{t.setDragMode(!0),t.clickableCanvas(!1);const{clientX:s,clientY:a}=e;Le=new n.C(s,a),Ne=new n.C("left"===r?i:o)},u=()=>{t.clickableCanvas(!0),t.setDragMode(!1),t.addSnapshot(r.A.EDIT,t.textDesignLocale.padding),Le=new n.C(0,0),Ne=new n.C(0,0)},h=({clientX:e,clientY:i})=>{if(void 0!==e&&void 0!==i){const r=Ne.subtract(Le.subtract(new n.C(e,i)));t.onPaddingDrag(r)}};return s.createElement(s.Fragment,null,s.createElement(r.X.Draggable,{onStart:t=>c(t,"left"),onDrag:h,onStop:u},s.createElement(Be,{src:a})),s.createElement(r.X.Draggable,{onStart:t=>c(t,"right"),onDrag:h,onStop:u},s.createElement(ze,{src:l})))})));const je=(0,o.ZP)(j.Controls.Knob)`
  margin-left: -11px;
  margin-top: 0px;
  cursor: url(${t=>t.url}) 9 9, ew-resize;
  &:before {
    top: unset;
    bottom: 0px;
    left: calc(
      50% - ${t=>t.theme.measurements.canvasControls.knob.size/2}px
    );
  }
`;let He=new n.C(0,0),We=new n.C(0,0);je.defaultProps={theme:r.v};var Ge=(0,r.aa)("sprite","snapping","config")((0,r.Z)((({config:t,sprite:e,snapping:i})=>{const o=e.rightBottomHandlePosition,a=e.leftBottomHandlePosition,l={x:(o.x+a.x)/2,y:(o.y+a.y)/2},c=t.assetProvider.getPath("controls",`/${((t=(0,n.q)())=>!!t.match(/windows/i))()?"rotate-windows":"rotate-osx"}.png`);return s.createElement(r.X.Draggable,{onStart:({clientX:t,clientY:i})=>{He=new n.C(t,i),We=new n.C(l),e.setDragMode(!0),e.clickableCanvas(!1)},onDrag:t=>{(({clientX:t,clientY:r})=>{if(void 0!==t&&void 0!==r){const o=We.subtract(He.subtract(new n.C(t,r))),s=e.position,a=new n.C(s.x,s.y),l=o.subtract(a),c=Math.atan2(l.y,l.x)-Math.PI/2,u=i.snapToRotation(c,l,e.currentRect);e.setRotation(u)}})(t)},onStop:()=>{e.clickableCanvas(!0),e.setDragMode(!1),e.spriteSnapshot("rotation"),i.hideRotationGuides(),He=new n.C(0,0),We=new n.C(0,0)}},s.createElement(je,{url:c}))})));const Ve=(0,o.ZP)(j.Controls.Width)`
  cursor: ew-resize;
  @media all and (min-width: 0) and (max-width: 599px) {
    display: none;
  }
`,$e=(0,o.ZP)(Ve)`
  left: -3px;
  top: calc(
    50% - ${t=>t.theme.measurements.canvasControls.width.size/2}px
  );
`,Ze=(0,o.ZP)(Ve)`
  right: -3px;
  top: calc(
    50% - ${t=>t.theme.measurements.canvasControls.width.size/2}px
  );
`;let Xe=new n.C(0,0),Ye=new n.C(0,0);$e.defaultProps={theme:r.v},Ze.defaultProps={theme:r.v};var qe=(0,r.aa)("sprite","textTool")((0,r.Z)((({sprite:t,textTool:e})=>{const i=t.leftMidPadPosition,o=t.rightMidPadPosition,a=(e,r)=>{t.setDragMode(!0),t.clickableCanvas(!1);const{clientX:s,clientY:a}=e;Xe=new n.C(s,a),Ye=new n.C("left"===r?i:o)},l=()=>{t.clickableCanvas(!0),t.setDragMode(!1),t.addSnapshot(r.A.EDIT,t.textLocale.width),e.updateDefaultFontSize(),Xe=new n.C(0,0),Ye=new n.C(0,0)},c=({clientX:e,clientY:i})=>{if(void 0!==e&&void 0!==i){const r=Ye.subtract(Xe.subtract(new n.C(e,i)));t.onWidthDrag(r)}};return s.createElement(s.Fragment,null,s.createElement(r.X.Draggable,{onStart:t=>a(t,"left"),onDrag:c,onStop:l},s.createElement($e,null)),s.createElement(r.X.Draggable,{onStart:t=>a(t,"right"),onDrag:c,onStop:l},s.createElement(Ze,null)))})));const{Draggable:Ke}=r.X;let Qe=new n.C(0,0),Je=new n.C(0,0);const ti=(0,r.Z)((()=>{const{active:t,config:e,snapping:i,sprite:o}=fe();if(!(()=>{const e=t.tool,i=o.tool;return o.isSpriteSelected&&e===i})())return null;const{isSpriteText:a}=o,l=o.isSpriteTextDesign&&o.textDesignToolStore.isInverted,{height:c,width:u}=o.size,h=o.spritePosition,d=o.rotationWRTOutputRotation,{controlPadding:p}=e.measurements.canvasControls.sprite;return s.createElement(j.Controls.Container,null,s.createElement(Ke,{onStart:t=>{const{clientX:e,clientY:r}=t;Qe=new n.C(e,r),Je=new n.C(o.position),o.setDragMode(!0),i.updateGuides()},onDrag:({clientX:t,clientY:e})=>{const r=Je.subtract(Qe.subtract(new n.C(t,e))),{x:s,y:a}=i.snapToPosition({x:r.x,y:r.y},o.currentRect);o.setPosition({x:s,y:a})},onStop:()=>{Qe=new n.C(0,0),Je=new n.C(0,0),o.setDragMode(!1),o.spriteSnapshot("position"),i.hidePositionGuides()},rotation:d,position:h},s.createElement(j.Controls.Sprite,{"data-test":r.T.Sprite,onDoubleClick:t=>{t.preventDefault(),t.stopPropagation(),o.setEditMode(!0)},height:c,width:u},a&&s.createElement(qe,null)||null,l&&s.createElement(Ue,null)||null,s.createElement(Pe,null),s.createElement(j.Controls.RotateHandle,{x:u/2+p/2},s.createElement(Ge,null)))),s.createElement(Ie,null))})),{GridLine:ei}=j.Crop,ii=j.Crop.Mask,{Draggable:ri}=r.X,ni=(0,o.ZP)(z)`
  left: ${3}px;
  top: ${3}px;
  @media all and (min-width: 0) and (max-width: 599px) {
    left: 6px;
    top: 6px;
  }
`,oi=(0,o.ZP)(z)((t=>{const{desktop:e}=t.theme.measurements.canvasControls.corner.touchable,i=e/4-t.borderWidth;return o.iv`
    left: ${i-e}px;
    top: ${3}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: 6px;
    }
  `})),si=(0,o.ZP)(z)((t=>{const{desktop:e}=t.theme.measurements.canvasControls.corner.touchable,i=e/4-t.borderWidth;return o.iv`
    left: ${i-e}px;
    top: ${i-e}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: -30px;
    }
  `})),ai=(0,o.ZP)(z)((t=>{const{desktop:e}=t.theme.measurements.canvasControls.corner.touchable,i=e/4-t.borderWidth;return o.iv`
    top: ${i-e}px;
    left: ${3}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      top: -30px;
      left: 6px;
    }
  `}));var li=(0,r.aa)("transformTool")((0,r.Z)((({transformTool:t})=>{const{leftTopRespectFlip:e,leftBottomRespectFlip:i,rightTopRespectFlip:o,rightBottomRespectFlip:a}=t,{height:l,width:c}=t.cropMaskSize,{maxCropMaskSize:u,defaultCropMaskPosition:h}=t,{isFlippedHorizontal:d,isFlippedVertical:p}=t,f=u.width/2,m=u.height/2,g=(0,n.N)((0,n.N)({},u),{left:h.x,top:h.y}),_={height:l,width:c},y=t.isDragMode?{transition:"unset"}:{},v=t=>d?2*f-t:t,b=t=>p?2*m-t:t,x=(e,i,n)=>{const o=v(e),s=b(i);switch(r.G.getFlippedEdgeIndex(n,d,p)){case 0:t.onLeftTop({x:o,y:s});break;case 1:t.onLeftBottom({x:o,y:s});break;case 2:t.onRightTop({x:o,y:s});break;case 3:t.onRightBottom({x:o,y:s})}},w=(e,i,r)=>{t.setDragMode(!0),t.clickableCanvas(!1),x(e,i,r)},S=(t,e,i)=>{x(t,e,i)},k=(e,i,r)=>{t.setDragMode(!1),x(e,i,r),t.clickableCanvas(!0),t.addLocalSnapshot()},C=(e,i)=>{const r=v(e+c/2)-c/2,n=b(i+l/2)-l/2;t.changePosition({x:r,y:n})};return s.createElement("div",{style:(0,n.N)((0,n.N)({},g),{position:"absolute"})},s.createElement(ri,{bounds:"parent",position:e,onStart:(e,{x:i,y:r})=>{t.setDragMode(!0),t.clickableCanvas(!1),C(i,r)},onDrag:(t,{x:e,y:i})=>{C(e,i)},onStop:(e,{x:i,y:r})=>{t.setDragMode(!1),C(i,r),t.clickableCanvas(!0),t.addLocalSnapshot()}},s.createElement(ii,{style:(0,n.N)((0,n.N)({},_),y)})),s.createElement(ei,{style:(0,n.N)({left:e.x+c/3,top:e.y,height:l,width:1},y)}),s.createElement(ei,{style:(0,n.N)({left:e.x+c/3*2,top:e.y,height:l,width:1},y)}),s.createElement(ei,{style:(0,n.N)({left:e.x,top:e.y+l/3,height:1,width:c},y)}),s.createElement(ei,{style:(0,n.N)({left:e.x,top:e.y+l/3*2,height:1,width:c},y)}),s.createElement(ri,{bounds:"parent",position:(0,n.N)({},e),onStart:(t,{x:e,y:i})=>{w(e,i,0)},onDrag:(t,{x:e,y:i})=>{S(e,i,0)},onStop:(t,{x:e,y:i})=>{k(e,i,0)}},s.createElement(ni,{"data-test":r.T.CropTopLeft,vertical:"top",horizontal:"left",borderWidth:3,style:y})),s.createElement(ri,{bounds:"parent",position:i,onStart:(t,{x:e,y:i})=>{w(e,i,1)},onDrag:(t,{x:e,y:i})=>{S(e,i,1)},onStop:(t,{x:e,y:i})=>{k(e,i,1)}},s.createElement(ai,{"data-test":r.T.CropBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:3,style:y})),s.createElement(ri,{bounds:"parent",position:o,onStart:(t,{x:e,y:i})=>{w(e,i,2)},onDrag:(t,{x:e,y:i})=>{S(e,i,2)},onStop:(t,{x:e,y:i})=>{k(e,i,2)}},s.createElement(oi,{"data-test":r.T.CropTopRight,vertical:"top",horizontal:"right",borderWidth:3,style:y})),s.createElement(ri,{bounds:"parent",position:a,onStart:(t,{x:e,y:i})=>{w(e,i,3)},onDrag:(t,{x:e,y:i})=>{S(e,i,3)},onStop:(t,{x:e,y:i})=>{k(e,i,3)}},s.createElement(si,{"data-test":r.T.CropBottomRight,vertical:"bottom",horizontal:"right",borderWidth:3,style:y})))})));const ci=o.ZP.div`
  overflow: hidden;
  display: none;
  position: relative;
  transform: unset !important;
  vertical-align: bottom;
  ${t=>t.isVisible&&o.iv`
      display: inline-block;
    `}
`,ui=o.ZP.div`
  position: relative;
  cursor: pointer;
  display: flex;
  align-self: center;
`,hi=o.ZP.div`
  font-size: 15px;
  display: none;
  width: 33px;
  text-align: right;
  color: ${t=>t.theme.foreground};
  z-index: 1;
  margin: 2px;
  ${t=>t.isVisible&&o.iv`
      display: inline-block;
    `}
`,di=o.ZP.div`
  transform: translate(0, 0) !important;
`;class pi extends s.Component{constructor(){super(...arguments),this.SLIDER_WIDTH=213,this.MAX_ROTATION=45,this.DEGREES_PER_PIXEL=2*this.MAX_ROTATION/this.SLIDER_WIDTH,this.drag=(t,{x:e})=>{const{flipHorizontally:i,flipVertically:r}=this.transformTool.rotateFlipState;i!==r&&(e*=-1);const n=this.transformTool.defaultAngle-e*this.DEGREES_PER_PIXEL,o=Math.min(this.MAX_ROTATION,Math.max(n,-1*this.MAX_ROTATION));this.transformTool.setRotation(parseInt(`${o}`,10))},this.stop=()=>{this.transformTool.setDefaultAngle(this.transformTool.rotationInDegrees),this.transformTool.addLocalSnapshot()}}get transformTool(){return this.props.transformTool}render(){const{config:t,canvasWidth:e,transformTool:i}=this.props,{flipHorizontally:n,flipVertically:o}=this.transformTool.rotateFlipState,a=!t.isLayoutAdvanced||t.isLayoutAdvanced&&e>t.measurements.canvas.transform.minSliderWidth,l=!t.isLayoutAdvanced||t.isLayoutAdvanced&&e>t.measurements.canvas.transform.minValueWidth,c=this.transformTool.rotationInDegrees-this.transformTool.defaultAngle,u=n===o?-1*c:c,h=n!==o?-1*i.rotationInDegrees:i.rotationInDegrees;return s.createElement(ui,{"data-test":r.T.RotateSlider},s.createElement(r.X.Draggable,{axis:"x",position:{x:0,y:0},onStart:this.drag,onDrag:this.drag,onStop:this.stop,updateOnPosition:!0,disabled:!a},s.createElement(di,null,s.createElement(ci,{isVisible:a},s.createElement(re.dots,{width:90,height:15,x:u})),s.createElement(hi,{isVisible:l},h,"°"),s.createElement(ci,{isVisible:a},s.createElement(re.dots,{width:90,height:15,x:u})))))}}var fi=(0,r.aa)("transformTool","config")((0,r.Z)(pi));const mi=(0,o.ZP)(re.rotate)`
  height: 16px;
  width: 16px;
  transform: scaleX(-1);
`,gi=(0,o.ZP)(re.rotate)`
  height: 16px;
  width: 16px;
`,_i=(0,o.ZP)(re.flipHorizontal)`
  height: 16px;
  width: 16px;
`,yi=(0,o.ZP)(re.flipVertical)`
  height: 16px;
  width: 16px;
`,vi=o.ZP.div`
  display: inline-flex;
  transform: scale(0.9);
`;var bi=(0,r.aa)("transformTool","config","custom","canvas")((0,r.Z)((({transformTool:t,config:e,custom:i,canvas:n})=>{const o=t.locale.transformActions,a=n.canvasSize.width,l=!e.isLayoutAdvanced||e.isLayoutAdvanced&&a>e.measurements.canvas.transform.minFlipWidth,c=({customButtonKey:t,onClick:e,label:r,icon:n})=>{const o=i.getButton(t);return s.createElement(o,{key:r,onClick:e,label:r,ariaLabel:r,icon:n,style:{margin:"0 5px"}})},u=c({label:o.buttonFlipHorizontal,icon:s.createElement(_i,null),onClick:()=>{t.flipHorizontally()},customButtonKey:"transformActionFlipHorizontal"}),h=c({label:o.buttonFlipVertical,icon:s.createElement(yi,null),onClick:()=>{t.flipVertically()},customButtonKey:"transformActionFlipVertical"}),d=c({label:o.buttonRotateClockwise,icon:s.createElement(mi,null),onClick:t.rotateClockwise,customButtonKey:"transformActionRotateClockwise"}),p=c({label:o.buttonRotateAntiClockwise,icon:s.createElement(gi,null),onClick:t.rotateAntiClockwise,customButtonKey:"transformActionRotateAntiClockwise"}),f=e.isLayoutAdvanced?{transform:"rotate(180deg)"}:{};return s.createElement(vi,{style:f,"data-test":r.T.FlipRotateControls},t.config.enableFlip&&l&&u||null,t.config.enableFlip&&l&&h||null,t.config.enableRotation&&s.createElement(fi,{canvasWidth:a})||null,t.config.enableRotation&&p||null,t.config.enableRotation&&d||null)})));const xi=j.Bar.Index,{Backdrop:wi}=j.Crop;var Si=(0,r.aa)("transformTool","canvas","config")((0,r.Z)((({transformTool:t,canvas:e,config:i})=>{const{leftTopRespectFlip:r,leftBottomRespectFlip:o,rightTopRespectFlip:a}=t,{height:l}=t.cropMaskSize,{height:c,width:u}=e.canvasSize,{defaultCropMaskPosition:h}=t,d=t.isDragMode?{transition:"unset"}:{};return s.createElement(j.Controls.Container,null,s.createElement(wi,{style:(0,n.N)({left:0,top:0,width:u,height:r.y+h.y},d)}),s.createElement(wi,{style:(0,n.N)({left:0,top:r.y+h.y,width:h.x+r.x,height:l},d)}),s.createElement(wi,{style:(0,n.N)({left:a.x+h.x,top:a.y+h.y,width:u-a.x-h.x,height:l},d)}),s.createElement(wi,{style:(0,n.N)({left:0,top:o.y+h.y,width:u,height:c-o.y-h.y+i.measurements.basicToolControlBar.controlsBarHeight},d)}),s.createElement(li,null),i.isLayoutAdvanced?s.createElement(xi,{bottom:!0},s.createElement(bi,null)):null)})));const ki=(0,o.ZP)(j.Controls.Container)`
  ${t=>t.activeCursor?o.iv`
          cursor: move;
        `:""}
  z-index: ${t=>t.theme.measurements.zIndex.canvas.crop.dragImage};
`;class Ci extends s.Component{constructor(t){super(t),this.INITIAL_POSITION={x:void 0,y:void 0},this.state=(0,n.N)((0,n.N)({},this.INITIAL_POSITION),{isDragging:!1}),this.containerRef=null,this.getCursorCoordinates=t=>{let e=0,i=0;if(-1!==t.type.indexOf("touch")){const r=t;if(!r.touches.length)return this.INITIAL_POSITION;e=r.touches[0].clientX,i=r.touches[0].clientY}else{const r=t;e=r.clientX,i=r.clientY}const r=this.containerRef.current.getBoundingClientRect();return{x:e-r.left,y:i-r.top}},this.move=t=>{if(this.scale.canDrag){const{x:e,y:i}=this.getCursorCoordinates(t);if(void 0!==e&&void 0!==i&&this.state.isDragging){const t={x:this.state.x-e,y:this.state.y-i};this.scale.setOffset(t)}}},this.touchDrag=t=>{if(this.scale.canDrag){const{x:e,y:i}=this.getCursorCoordinates(t);void 0!==e&&void 0!==i&&this.setState({x:e,y:i,isDragging:!0})}},this.drag=t=>{t.preventDefault(),this.touchDrag(t)},this.stop=()=>{this.scale.canDrag&&(this.scale.savePosition(),this.setState((0,n.N)((0,n.N)({},this.INITIAL_POSITION),{isDragging:!1})))},this.touchEnd=t=>{t.preventDefault(),t.stopPropagation();const{x:e,y:i}=this.state;e&&i&&this.setState((0,n.N)((0,n.N)({},this.INITIAL_POSITION),{isDragging:!1}))},this.containerRef=s.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!0})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)}get scale(){return this.props.scale}render(){return s.createElement(ki,{ref:this.containerRef,onMouseMove:this.move,onTouchMove:this.move,onMouseDown:this.drag,onTouchStart:this.touchDrag,onMouseUp:this.stop,onTouchEnd:this.touchEnd,activeCursor:this.scale.canDrag})}}var Ti=(0,r.aa)("scale")((0,r.Z)(Ci));const Ei=(0,r.Z)((({children:t})=>{const e=(0,s.useRef)(null),{active:i,sprite:r,canvas:o}=fe(),{canvasSize:a}=o;return s.createElement(j.Controls.Wrapper,{"aria-hidden":!0,ref:e,onClick:t=>{if(t.preventDefault(),t.stopPropagation(),o.isCanvasClickable){let{clientX:i}=t,{clientY:r}=t;if(-1!==t.type.indexOf("touch")){const e=t;if(!e.touches.length)return;i=e.touches[0].clientX,r=e.touches[0].clientY}const n=e.current.getBoundingClientRect(),s=i-n.left,a=r-n.top;o.getContainersAtPreviewPoint({x:s,y:a})}},onKeyDown:t=>{"Tab"===t.code&&r.selectLast()},height:a.height,width:a.width},t,(()=>{switch(i.tool){case n.c.FOCUS:return s.createElement(Te,null);case n.c.TEXT:case n.c.TEXT_DESIGN:case n.c.STICKER:return s.createElement(ti,null);case n.c.BRUSH:return s.createElement(ye,null);case n.c.TRANSFORM:return s.createElement(Si,null);default:return s.createElement(j.Controls.Container,null,s.createElement(Ti,null))}})())})),Ri=o.ZP.div`
  display: ${({isVisible:t})=>t?"block":"none"};
  position: absolute;
  z-index: ${t=>t.theme.measurements.zIndex.canvas.snappingGuide};
`;var Di=({isVisible:t,className:e})=>s.createElement(Ri,{isVisible:t,className:e});const Ii=(0,o.ZP)(Di)`
  background: ${t=>t.theme.snapping.positionGuideColor};
  ${t=>"horizontal"===t.direction?o.iv`
        width: 100%;
        height: 2px;
        top: ${()=>t.position}px;
      `:o.iv`
      width: 2px;
      height: 100%;
      left: ${()=>t.position}px;
    `}
`,Oi=(0,o.ZP)(Di)`
  border: none;
  border-top: 2px dashed ${t=>t.theme.snapping.rotationGuideColor};
  background: transparent;
  left: ${({position:t})=>t.x}px;
  top: ${({position:t})=>t.y}px;
  transform: rotate(${({rotation:t})=>t}rad);
  width: 200%;
`,Ai=o.ZP.div`
  position: absolute;
  width: ${({width:t})=>t}px;
  height: ${({height:t})=>t}px;
  top: ${({top:t})=>t}px;
  left: ${({left:t})=>t}px;
  overflow: hidden;
`;var Fi=(0,r.aa)("snapping","editor")((0,r.Z)((({snapping:t,editor:e})=>{const{width:i,height:r}=e.getPreviewSize(),{x:n,y:o}=t.previewTopLeftPosition,a=t.positionGuides.map((({direction:t,value:e,isVisible:i},r)=>s.createElement(Ii,{key:`positionGuide-${r}`,direction:t,position:e,isVisible:i}))),l=t.rotationGuides.find((({isVisible:t})=>t));return s.createElement(Ai,{width:i,height:r,left:n,top:o},a,s.createElement(Oi,{key:"rotationGuide",rotation:l?l.value:0,position:l?l.position:{x:0,y:0},isVisible:!!l}))})));const Mi=o.ZP.img`
  z-index: 5;
  position: absolute;
  bottom: 30px;
  right: 30px;
`;var Pi=()=>s.createElement(Mi,{alt:"watermark",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKoAAAAvCAYAAABzC1HpAAAAAXNSR0IArs4c6QAAE7NJREFUeAHtnFlQVdeax2UQBAEFFUUccJ7nAVEDGqNeZxOjiRq9uVpJ3apUP3TnPZXHVKUqlYcMLzGxTXc00XSMxjjjiAMqKijOAiLiBIID89C//9J1antyjp6g1zZde1cd9t5rr/Fb/+//DXtr0EcffbS4WbNmvfi5hyuBl1UCF4KZmQvSl3V73HlZCfQSUN3DlcBLLwEXqC/9FrkTlARcoLo4+EtIwAXqX2Kb3Em6QHUx8JeQgAvUv8Q2uZN87kA9dOhQjzVr1kzyJ9qLFy+29ffMLXcl4E8CzxWot27diszIyJh67dq1XuvWrUt1DnrkyJGkr7/+ehHlS69fvx7lfOZeuxJ4mgRC0tLSJjytUqDPAeGUmJiYkpkzZ24+cODAqxUVFTVhYWFVP/7446zz588P6dWrV3ZVVVV4cHBwZVJS0u1A+3XruRJoEqM2NDQ027lz56CrV6+2siLMyclJhFGTpk+fvicxMfHu1KlTf83KypqwevXqpdHR0Xfee++9FdOmTTvWoUOHQhg1wbZzz64EApFAaCCVvOvcvHkzClM++ejRow0tW7Ys7datWy6g7QFjHo+Nja1S/QEDBhTjjx4pKCjoO3/+/PSQkJBGlbdr1+7W6dOnh5aWlkbU1NSEwLj1rVq1qrLPVcc9XAl4S6BJph9QxgLAJFjyG9i1EkAOuHfvXrvXX399U0RERJ0dBOAWHTt2bNCDBw8aAXD57t27h5w5c2bY3bt3O1A+6sSJEyN0xk1IyczMHAzb5lGv0rZ3z64ErASaxKj4nuEwYDX+aA0+7hmYMaywsLCrZVPbuVgSZs0CkCknT55MiYqKKh00aNBR/NPi1q1bV+ASVOOzhl66dKn9li1b5nXs2LHctnXPrgScEmgSUOvr6x/zbfFN4zHpN5wd2+uuXbsWHz58OGrYsGG78VuP23J7joyMrMNnbRcXF1cYHh5eb8vdsysBpwSaBNTmzZvXNzY2esAKcEOJ5BucHdvrffv2jYFBs32B1Na5fPlyn549e56298/jjA/d7cqVK4mDBw8+hwty63n0+SL6KC4ujiYXPRiLUzZx4kQjE1yjnjdu3OgwZMiQM927dy95EfN42cYIGKgS4NmzZ7ty7lhSUpKA39nmk08++Q/Mu/FJAW+t9+IImhJg227Lli1b4f3M3p87dy7+zp07ibQ/acuedEYpgkiDTZS7Yetp7DZt2pSMHj36DIFZtcoPHjw4ARclNjQ0tP7/Cqhbt24dRuDZ3s7TnlHqxlmzZu2S62TL7JkAtT8yScbXL7dAxSK9Wl1dHdWiRYvKFwnU8vLy8L179yrwbSsiio+Pv/7KK6/kyApqvr/88svY+/fvx9i5YxGrkf+dUaNGncNCPhZr7Nmzpx/7EUHmJ8vWJ86Jpf/klJSUoxDVE9OVAQFVgNu4ceNCJlHMZK/CUplc32My9xFgc5irw/Hjx9NYUIZzgrBpWp8+fTKdZXaS9kwQNVz9woCvskEDWcj2Tp06+fVVWVxcXl7eUNvenvPz85uhSEPfeeedNfKVtbF6hl9839ZpylkKytr/BuBr6XsDWQqflsNX38gtGYWK9PUMRT/gC6iUm3kDSs+8qXezkoPsylX1RZ/BP/zww0zO4aQDtz1JXr7GDqSsqKgohjeMiwHfg4SEhDzk2eLUqVNj2EsBMV99kBsfhayvMb9S3Qu0xCr9SFWOJ3bZRL08lesg4O4LqYnMDFCV9Vm/fv0b9FeM8j0RpGofEFD79etXTN60DNNzZOzYsRfV0HmIsVhYZwKicYsWLdqhZ5irXsg2etKkSR4NcrbRNcBqj3/aCwCsREtr1F5515EjR6ZbNvFuA/uajVS5XAoEWQlrdRIrs8lxMFJv5ngG5m2uOgD1gc5NPQj0OiLUzmqv4DDQfsT8FqSwfUHbtm2v27aAsKp9+/b37L3zDOv8AajLly9f76yDzGL49VQZaw53Pnte19u3b5/AnpS///77q+26AWu6jSPEtrh/IcQeR52AVDkAnwtJTe3du/d3kJCxcLRtiQyMonEdsnbt2tlSxgULFmyFrZ867YCAqo4A6zGi92RfQNUoAHI/Wv4ubJdFwr8MhkwViDZs2JDmbxa8aoXxe2ahsWbT3nrrrXTMXP6uXbvmqo0vsJLa8gB1ypQphsG18M8///zf5DeXlZXF3r5921OHOdTAiMn4eImAthwG2udkMvzjNmQk+gDG9mJN2KmAcXO0ZtyWlrDIMM0lKCiogfX9bfbs2ekSvl56YM4GyhUCLNH0eWfcuHHHLLuprdrpwKqcTk1NPfvw7vG/Yi6UWim7NmQ9CgBqjGoAEqNgKGCL33//PY3x6+fNm7eLOTYgn3G2F15Zj2GuB617k5ub24EUYE/axbP2Klj44vjx48/b+vv37++DLOLHjBlzEms2CGDFLV26dKM3WJBHQo8ePbItSNXeglTXuH9Gxqz7MSKQbMDCTr0qR67d7LpFWuTcTd2ffvppCnsWuWTJktXOPtWvvyMgoKoxVJ7Dpo0mF9p/woQJud4d6m0UFH48PT09TQJn4fWwRj4bGgIrDef5WYT/GIsQMBTLfPz888/B5GD3YTrCWNxIGOgKCuFzY6ljAKCNw2wYPwighNngjrJSJ+synxkwm2kDgJuxyZVz5sw5oPmjTEmsZ5ZlX5UBvN7KYrz99ts7L1y40BHgd1S5+oe5uymlBphCYY2Z3HfXMx1sXFdcoIELFy78T4GVdh6gspkeM/6w9sO/8tFY+wI7P8ZNss9RKiMr5NMRczpA5XV1dXtYQ0vm2MfWYw498Wf36F5+IIHYVCsLlaEIfZFHBj7xYd3z/DX6Cae8J+uIxb83L2j0zHnAdg9YT2/GOmWJxPncyhh5/2Ft8jdRqBrqxKqNrEttbW2E3LBff/11DHNOgpR+8E5nOvv3vg4YqPLNkpOTdxGkTMFHzbMgcXb42muvZX7zzTfLZConT578P0OHDjVUDxOFMdlQGGG/s76utVmbNm2a/v3338/kpUEcQr8nX9CfplnTiKbX024kihBMH2bjxHoI6Sr+agc7DmmzK7DNeX0sg7BawFzmta9YGEd+ukCK332JtWXiNowQUGk/hDUcGDhwYAH+VhECT5QfPWPGjM1iHsA9VCBlDnW020ZZAwCYLADAWCMAeTrto+0cCKrm8TO31G2EldfAsjfpZ5xAylrvQQRbWX9L5DtNFS37oJiGubTxlNUCoLouXbpkA6LBgKyS7yp+lmIwXgRzmCKQdu7c+TR7lMN9ihQIFysZS5L5iB2D1L/myvr2Y45LtCbvA8bdi7s3Z9WqVcvpLxdrcYRU4x1b75Fla4RUKmyZ86y5IW/jflnrwouiLljRPsxlrbU8zjZPuv7jDJ9QG4Eydm040d40aYl3VdE+iz+EUKsQlAGp6vTv3/8sGtxPEb53Gy0eYK5l4W1ZXPW777673h9I1RYTYjYOQYcBolQClvFsZjs9I+rfof5gWMNmKNeDxYsXb0bol2BzI2Q22rAwLkYvAZdmjbD5Vr3yxUwZplVfzDdOLgLgN34pa7sFQMr0jMBgkM6MlS3TJtOKQuSrTCZcZzsHXQOeEPuTwqKMYpsWKIX5F8AjRozYN3z48Cu8DMlXfR2WhS1QkYlhLoENOZkMC/3cFeBVH1AO0BjIvppX1tvp6xq+Y6aeaUzGikEpgiU3lSGrdECeKdno3vvQfDDN32ElT4iVsSB/h7H723qybMi3whfI5RbxIicKmZmg2FoXlCmB+rUQg99g2fbvfQ4YqLBPX8zoHDEIEwlasWLFfF/Aw787iTBrqe9ZFCZ2NEItZ6ETvCegewECd2Ibm6zgysNEvuoCVANCbRzgyGPRl/Glst58881VjH1KbQCJAbOcdStIa16t7wfTxKmuvlWwJoh5eyJ6rs3LBwn8UT3jX0lBYfXWKsPFuaazDsYxbTmbdtpIldNPneZmfwSb3wrwAEd9GGWH8YtUl400bXTNnMx4FvCs19zrmbUqMs+61yHfXGfAcd1mJrzW08Canf0/5oaprffBK+37gH435LFC0b2shiyR6mkfJF/vNrrH2kRJabC6RrGZm5EhLtd6yQeim+GL6Hz1ZcsCMv1ywGEgrPnkXzDnhZiBM/gaqaQXFuKzlcgs2Q6ZYJA0GDM6Ef9qoEyzNhbtXIV5X8Jie/jSYjEA7HiaaDMVwfxm+/M+W+Dg854nYtzt/Vz3jGc2xClI2pky+UmqYwEvFte9Dvw/E8jomk0yWs/GGCHbdjKxPDYAQ/k8bRnTtKWeaWf7B2D35LOpT+dhN09lKI+Rn/X7VIZJfmyejOUBhZWBc32MZ+bpXA9zNW6OXCJlGQiyEtS3DuIDD8gflvj/CyE8gPUPszfzYNfWyuVKWZyK4mwNVgZJQQnkDNvj0kTpXgqKe4jHtmkBQfZYLFmGs92TrgNiVCL5bgxUw8+whTSWiPugqJ9FFGJ+cuyvb9++2ZiN/ZiddJjitD5WIa2VQb0KUhkZRJqp/rSJPg/gz3RjPMN23hOXSbHMaH047zq6txsJAMzm2lSKnlFmTD8bbzZKSiSTqGe4EsakA7bb8sFhs+ZSOj2jzNSHsRR8GHeAuRozr/kCMhN0sRkFqm+BIzBpvfanNehgHp4gBh8yUWVkILrrrE2VP6prFMUqnccXtGVOGdj1wORxGkM/5aXVh4JTmKwZcvAwKooQMFDVB4plFNEqsNbnVBTV0aFPPxUgg4PDNo6R+wJWzHgQUhHuYQZzS1YwaxoF8CcgRoUNtxAMDNWHI5BergC1Y8eOZDbtJqZhj79xcMYHs5i7mPVTqkPAcIr2w3EhhsDOJ7zbaWHKDhBQDEcbTT7WWQdhRcDYBlSW4ZzP7bUFKhtpgMqmGQbUc4QzHpBUw3L5CGsMII388ssvl0vobKRhHJRsv+pa/1TXfOU1Fp82VP4om1wA+yaRrptAUNNDyqjquDA3sBYmz2yBCqt1/vTTT/9dfdiDiHclrHRTlkg+I0HVbOZVyoa2VR0pB67V3Ef5UzN3ANAHeZaS+skRQ6oewB7422+/1cvXJKecp6yD+vjiiy/+ATDruNa8mjFnw1xiNt3DulUwvSEd3XsfemWL4rUGVBfFxGR7OrHW8QRVp5BdnepLxrhdRY8sjHFbUNhO2dnZKci9BIwctf3KwjlBrcCOFFkn3MNp9Pm9XAxb1985IKCqMe/qT5BLzd+2bdur33777TIJkyj+v/11LDYi1TSWV25bYQjDQNJqXpftYWOmM/lIgF6mfhRBItQYgNiBdrEwQKGvfqnjSW4DamNifdWzAQN+lQmg5INSv1CgYax2AiqKUMrG7mUTxsFQ0fppA5nfdvzwy+pXm4IfepZItS/tlJc0Jpq3ZztwfWbJp1afqqvMgYIyrVHHo0DNXHv9aUTJquSX68UGZtJE6lIYNncd6bOZagvQDYOxkRdQ7njmF2UVDiXLQbZpmrNcLfVPOu8C8zxKoDcC2caqjPnehxy2wG7mgyHGMPJjXcZ3VB1fB8+rAGuyglX7HEuRjY/pISVkHEH6bqR+tg7t7pDkz3JkGMwjQN2SZx6fWDJ64403fl+5cuUS3MeZvFRYY+Vm+/I+B/GfpH3sXfi0eyLASWhnLN+jrvNXF4d5HKyT4KvOZ5999k+0zoAIoDYHnHEs8CjaewMXokjA8tcvPlIMi2r0lduzbaTlbFaYMwUi884mxgPY+04NBmxhbHAsgqymfpm3wGRC2Yx4gFXpHFPltGsFC0cCphIBz46vs+YA2Jo7y3SNCayTG2TLVQ8XIhrFuS2XinmHokBtAEYJczLspZcSqi/f0LajTmvAEuIs07NH2YTWkECFctu2vs6SAUFcK/m/yN+4Fs7nzmvVlT+qMejnjp2LrUPQG8XePdRKCtmzCu86tq7WiNJ43BlbLtlDTpHyXW2Zv3OTgIppWYofesDfWyotgsDpH3Pnzl1j35g4J/DVV18txrwe4JcHeNrCTvM//PDDr5113GtXAk4JBGz6bSMxGkzRmug/35Y5z7BPO175zUZjS32BVHUxWZFkCwyr4BY0WL/T2Y977UrAKYE/DVQi1CRo/B7+Sxf5bPI/cQMiMN9RmKPumPvOmKOTmKuhArW3+cHMRcrfkmnTRORjYW6NiXNOzL12JeCUwJ8GKgFHDb5IuaJnfJQwOfjyGeUwEyVm8Jpxm3xATH8kQVMKb4a2Ogckj6oUUBAB2SL8slz6qnTm/px13WtXAlYCfxqoemVov4ixnShPyX8u8QFpqBPWocb/PEZEt5io9oKNohUokGMbTvsNRLZh+Kd9xcAEOFdtX+7ZlYAvCfxpoPrqhAizWu4AH3O0JRVyXflT0iepRIJFfAwyhXfi/yWWpXwkqZlSG4SROskVeIkKPYloX/27Za4EmvTPpX2JTZ+j4ZN24nVrCn5oIknmbXwltJ9P1KJxE5IB6E0S+ZPJQW50fnGD2W8gteN5Femrb7fMlYAnD/asoiAHWUBerA1fSh374IMPvlPqSX3yUmA3IC3n3e5CEtVZ/jIBzzq+2/7/twSalEf1JRIliJWw9vds8+bNybzqO2TfUvmq55a5EvAngefio6pzfyC1z3j9dtDfJNxyVwJPk8BzM/1PG8h97krgWSTgAvVZpOe2fWEScIH6wkTtDvQsEnCB+izSc9u+MAm4QH1honYHehYJ8Jo+OP9ZOnDbuhL4V0tAGDVfh3/88cfmn9D+qwd0+3cl0BQJgM+a/wXEHL3v2Wd6kwAAAABJRU5ErkJggg=="});class Bi extends s.Component{constructor(t){super(t),this.init=()=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then((t=>{this.video.srcObject=t})).catch((()=>{this.props.modal.showActionModal({type:n.E.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{this.props.active.selectWebcam(!1)}})})):this.props.modal.showActionModal({type:n.E.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{this.props.active.selectWebcam(!1)}})},this.stop=()=>{const{active:t}=this.props;this.video.srcObject.getTracks().forEach((t=>{t.stop()})),this.video.srcObject=null,t.selectWebcam(!1)},this.captureAndCloseWebcam=()=>{this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight,this.canvas.getContext("2d").drawImage(this.video,0,0),this.props.active.newImage(this.canvas.toDataURL("image/webp")),this.stop()},this.videoRef=s.createRef()}componentDidMount(){this.canvas=document.createElement("canvas"),this.video=this.videoRef.current,this.init()}render(){const{editor:t}=this.props,{height:e,width:i}=t.getPreviewSize(),{measurements:n}=t.configStore,o=this.props.canvas.canvasSize.height,a=(o-e)/2,l=a<24+n.buttons.float.size?o-48-n.buttons.float.size/2:o-a+24,c=this.props.active.webcamLabel;return s.createElement(j.Wrapper,null,s.createElement(j.Bar.Index,{transparentBackgound:!0,style:{justifyContent:"flex-end"}},s.createElement(j.Bar.ButtonGroup,null,s.createElement(r.m,{ariaLabel:c,onClick:this.stop},c))),s.createElement(j.Webcam,{style:{height:e,width:i},autoPlay:!0,ref:this.videoRef}),s.createElement(j.Button.Float,{ariaLabel:"Click and Save",style:{top:l},onClick:this.captureAndCloseWebcam}))}}var zi=(0,r.aa)("active","canvas","modal","editor")((0,r.Z)(Bi));class Li extends s.Component{constructor(t){super(t),this.wrapperElementRef=null,this.timeout=null,this.updateDimensions=(t=!0)=>{t?(clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.update(t)}),100)):this.update(t)},this.update=(t=!0)=>{const e=this.wrapperElementRef.current;this.props.canvas.saveDimensions({width:e&&e.clientWidth||0,height:e&&e.clientHeight||0,render:t})},this.wrapperElementRef=s.createRef(),this.resizeObserver=new r.g((()=>{this.updateDimensions(!1)}))}componentDidMount(){this.updateDimensions(!1),window.addEventListener("resize",(()=>this.updateDimensions(!0))),this.wrapperElementRef.current&&this.resizeObserver.observe(this.wrapperElementRef.current)}componentWillUnmount(){window.removeEventListener("resize",(()=>this.updateDimensions(!0))),this.timeout&&clearTimeout(this.timeout)}render(){return s.createElement(j.Container,{"data-test":r.T.CanvasContainer,ref:this.wrapperElementRef},this.props.children)}}var Ni=(0,r.aa)("canvas")((0,r.Z)(Li));const Ui=(0,r.Z)((()=>{const t=(0,s.useRef)(null),{canvas:e,active:i,config:n}=fe();(0,s.useEffect)((()=>{const i=t.current;e.setCanvasElement(i)}),[]);const{licenseChecker:o}=n;return s.createElement(Ni,null,o&&o.isWhiteLabel()?null:s.createElement(Pi,null),i.isWebcam?s.createElement(zi,null):null,s.createElement(j.Element,{ref:t,"aria-label":"Canvas","data-test":r.T.Canvas}),s.createElement(Ei,null,s.createElement(Fi,null)))}));var ji=(0,r.aa)("textTool","textDesignTool","modal","config","custom")((0,r.Z)((({modal:t,textTool:e,textDesignTool:i,config:o,custom:a})=>{const{type:l,identifier:c,isVisible:u,modalProps:h,positionOffset:d}=t,{headerLabel:p,bodyLabel:f,confirmLabel:m,dismissLabel:g,handleClose:_,handleConfirm:y,handleDismiss:v}=h,b=a.getDialog();if(l===n.E.INFO)return s.createElement(r.X.InfoModal,{headerLabel:p,bodyLabel:f},s.createElement(b,{type:l,isVisible:u,identifier:c,position:d,handleClose:_,headerLabel:p,bodyLabel:f}));if(l===n.E.TEXT_EDIT){const{buttonSave:a,buttonClose:h}=e.locale.canvasControls,p={type:l,isVisible:t.isVisible,confirmLabel:a,dismissLabel:h,headerLabel:e.locale.canvasControls.inputText,maxLength:o.config.text.maxCharacterLimit};if(e.isTextSelected)return s.createElement(r.X.TextEditModal,(0,n.N)((0,n.N)({},p),{defaultText:r.P.defaultText(),handleConfirm:e.changeText,handleDismiss:e.setEditMode,text:e.text}),s.createElement(b,{type:l,isVisible:u,identifier:c,position:d,handleClose:_,confirmLabel:a,dismissLabel:h,headerLabel:e.locale.canvasControls.inputText}));if(i.isTextDesignSelected)return s.createElement(r.X.TextEditModal,(0,n.N)((0,n.N)({},p),{defaultText:r.M.defaultText(),handleConfirm:i.changeText,handleDismiss:i.setEditMode,text:i.text}),s.createElement(b,{type:l,isVisible:u,identifier:c,position:d,handleClose:_,confirmLabel:a,dismissLabel:h,headerLabel:e.locale.canvasControls.inputText}))}return s.createElement(r.X.ActionModal,{type:l,headerLabel:p,bodyLabel:f,confirmLabel:m,dismissLabel:g,handleClose:_,handleConfirm:y,handleDismiss:v},s.createElement(b,{type:l,isVisible:u,identifier:c,position:d,confirmLabel:m,dismissLabel:g,headerLabel:p,bodyLabel:f,handleClose:_}))})));const Hi=o.ZP.div`
  position: absolute;
  right: 8px;
  top: 8px;
`;class Wi extends s.Component{constructor(t){super(t),this.onChange=t=>{this.setState({value:t.replace(/[^\d.,-]/g,""),isSubmitted:!1})},this.onSubmit=()=>{const{getCorrectValue:t}=this.props,{isSubmitted:e,value:i}=this.state;e||this.setState({value:t(parseInt(i,10)||0).toString(),isSubmitted:!0})},this.state={isSubmitted:!1,value:t.value.toString()}}componentDidUpdate(t){const{value:e}=this.props;t.value!==e&&this.setState({value:e.toString()})}render(){const{id:t,isDisabled:e,label:i}=this.props,{value:n}=this.state;return s.createElement(r.X.Input.Text,{id:t,value:n,isDisabled:e,onChange:this.onChange,onBlur:this.onSubmit,onKeyUp:a(this.onSubmit)},s.createElement(Hi,null,s.createElement(r.X.Input.Label,{label:i,htmlFor:t})))}}var Gi=Wi;const Vi=o.ZP.div`
  display: inline-flex;
  justify-content: space-between;
  max-width: ${t=>t.theme.measurements.advancedUIToolControlBar.width}px;
`,$i=o.ZP.span`
  font-size: ${t=>t.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.body.case};
  margin-top: 10px;
  margin-right: 13px;
`;var Zi=({showLabel:t=!0,label:e,isDisabled:i,valueHeight:n,valueWidth:o,labelWidth:a,labelHeight:l,onSubmitWidth:c,onSubmitHeight:u})=>s.createElement("div",null,s.createElement(r.X.Input.Label,{label:e,show:t}),s.createElement(Vi,null,s.createElement(Gi,{id:"photoeditorsdk-transformScaleWidth",value:o,getCorrectValue:c,label:a,isDisabled:i}),s.createElement($i,null,"x"),s.createElement(Gi,{id:"photoeditorsdk-transformScaleHeight",value:n,getCorrectValue:u,label:l,isDisabled:i})));const Xi=(0,r.Z)((({tool:t,fullWidth:e=!1,icon:i,label:r,onClick:n})=>{const{custom:o}=fe();if(!(()=>{const[t,e]=(0,s.useState)([]);return(0,s.useEffect)((()=>{var t;if(void 0!==typeof window&&(null==(t=window.navigator)?void 0:t.mediaDevices)){let t=!0;const i=()=>{window.navigator.mediaDevices.enumerateDevices().then((i=>{t&&e(i.map((({deviceId:t,groupId:e,kind:i,label:r})=>({deviceId:t,groupId:e,kind:i,label:r}))))})).catch((()=>null))};return window.navigator.mediaDevices.addEventListener("devicechange",i),i(),()=>{t=!1,window.navigator.mediaDevices.removeEventListener("devicechange",i)}}return null}),[]),t})().some((({kind:t})=>"videoinput"===t)))return null;const a=o.getButton("toolControlBarSecondaryButton");return s.createElement(a,{tool:t,label:r,ariaLabel:r,onClick:n,fullWidth:e,icon:i})}))},463:(t,e,i)=>{"use strict";i.d(e,{a:()=>o,b:()=>o,d:()=>Yi,g:()=>Zi,k:()=>js,l:()=>zs,m:()=>Ls,p:()=>no,q:()=>qs,u:()=>ds,v:()=>mt,x:()=>Ns,z:()=>Vs,A:()=>B,B:()=>Bs,C:()=>Bo,D:()=>Us,E:()=>u,F:()=>$s,G:()=>ti,H:()=>Zs,I:()=>Xs,K:()=>Ys,L:()=>uo,M:()=>De,N:()=>Gs,O:()=>rt,P:()=>ke,Q:()=>C,R:()=>h,S:()=>si,T:()=>y,U:()=>Ve,V:()=>Ks,W:()=>Qs,X:()=>Js,Y:()=>p,Z:()=>Yr,_:()=>Kr,$:()=>Qr,aa:()=>en,ba:()=>d});var r=i(8821),n=i(9163),o=i(7294),s=i(3935),a=i(4155),l=Object.getOwnPropertySymbols,c=Object.prototype.propertyIsEnumerable,u=(t,e)=>{var i={};for(var n in t)r.D.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&l)for(var n of l(t))e.indexOf(n)<0&&c.call(t,n)&&(i[n]=t[n]);return i},h=(t,e,i,n)=>{for(var o,s=n>1?void 0:n?(0,r.K)(e,i):e,a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&(0,r.v)(e,i,s),s},d=(0,r.R)(((t,e)=>{(0,r.T)(t,{$mobx:()=>Ji,FlowCancellationError:()=>ze,IDerivationState:()=>at,ObservableMap:()=>Oi,ObservableSet:()=>Pi,Reaction:()=>ie,_allowStateChanges:()=>Ft,_allowStateChangesInsideComputed:()=>Bt,_allowStateReadsEnd:()=>kt,_allowStateReadsStart:()=>St,_endAction:()=>At,_getAdministration:()=>$i,_getGlobalState:()=>$t,_interceptReads:()=>je,_isComputingDerivation:()=>gt,_resetGlobalState:()=>Zt,_startAction:()=>Ot,action:()=>_e,autorun:()=>xe,comparer:()=>P,computed:()=>dt,configure:()=>Re,createAtom:()=>F,decorate:()=>De,entries:()=>Ke,extendObservable:()=>Oe,extendShallowObservable:()=>Ie,flow:()=>Ne,get:()=>ei,getAtom:()=>Vi,getDebugName:()=>Zi,getDependencyTree:()=>Ae,getObserverTree:()=>Me,has:()=>ti,intercept:()=>He,isAction:()=>ve,isArrayLike:()=>v,isBoxedObservable:()=>Lt,isComputed:()=>Ge,isComputedProp:()=>Ve,isFlowCancellationError:()=>Le,isObservable:()=>Ze,isObservableArray:()=>Di,isObservableMap:()=>Fi,isObservableObject:()=>Gi,isObservableProp:()=>Xe,isObservableSet:()=>Bi,keys:()=>Ye,observable:()=>ot,observe:()=>ii,onBecomeObserved:()=>Ce,onBecomeUnobserved:()=>Te,onReactionError:()=>re,reaction:()=>ke,remove:()=>Je,runInAction:()=>ye,set:()=>Qe,spy:()=>pe,toJS:()=>si,trace:()=>ai,transaction:()=>ci,untracked:()=>bt,values:()=>qe,when:()=>ui});var n=[];Object.freeze(n);var o={};Object.freeze(o);var s={};function l(){return"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:s}function c(){return++Vt.mobxGuid}function u(t){throw h(!1,t),"X"}function h(t,e){if(!t)throw new Error("[mobx] "+(e||"An invariant failed, however the error is obfuscated because this is an production build."))}function d(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}var p=function(){};function f(t){return null!==t&&"object"==typeof t}function m(t){if(null===t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function g(t,e,i){Object.defineProperty(t,e,{enumerable:!1,writable:!0,configurable:!0,value:i})}function _(t,e,i){Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!0,value:i})}function y(t,e){var i="isMobX"+t;return e.prototype[i]=!0,function(t){return f(t)&&!0===t[i]}}function v(t){return Array.isArray(t)||Di(t)}function b(t){return void 0!==l().Map&&t instanceof l().Map}function x(t){return t instanceof Set}function w(t){for(var e=[];;){var i=t.next();if(i.done)break;e.push(i.value)}return e}function S(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function k(t){return null===t?null:"object"==typeof t?""+t:t}function C(t,e){for(var i=t.next();!i.done;)e(i.value),i=t.next()}function T(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function E(t,e){_(t,T(),e)}function R(t){return t[T()]=I,t}function D(){return"function"==typeof Symbol&&Symbol.toStringTag||"@@toStringTag"}function I(){return this}var O=function(){function t(t){void 0===t&&(t="Atom@"+c()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=at.NOT_TRACKING}return t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.reportObserved=function(){return Jt(this)},t.prototype.reportChanged=function(){Kt(),function(t){if(t.lowestObserverState===at.STALE)return;t.lowestObserverState=at.STALE;for(var e=t.observers,i=e.length;i--;){var r=e[i];r.dependenciesState===at.UP_TO_DATE&&(r.isTracing!==ct.NONE&&te(r,t),r.onBecomeStale()),r.dependenciesState=at.STALE}}(this),Qt()},t.prototype.toString=function(){return this.name},t}(),A=y("Atom",O);function F(t,e,i){void 0===e&&(e=p),void 0===i&&(i=p);var r=new O(t);return Ce(r,e),Te(r,i),r}function M(t,e){return t===e}var P={identity:M,structural:function(t,e){return Yi(t,e)},default:function(t,e){return function(t,e){return"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}(t,e)||M(t,e)},shallow:function(t,e){return Yi(t,e,1)}},B=function(t,e){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function z(t,e){function i(){this.constructor=t}B(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var L=function(){return(L=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function N(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,n,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}function U(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(N(arguments[e]));return t}var j={},H={};function W(t,e){var i=e?j:H;return i[t]||(i[t]={configurable:!0,enumerable:e,get:function(){return G(this),this[t]},set:function(e){G(this),this[t]=e}})}function G(t){if(!0!==t.__mobxDidRunLazyInitializers){var e=t.__mobxDecorators;if(e)for(var i in g(t,"__mobxDidRunLazyInitializers",!0),e){var r=e[i];r.propertyCreator(t,r.prop,r.descriptor,r.decoratorTarget,r.decoratorArguments)}}}function V(t,e){return function(){var i,r=function(r,n,o,s){if(!0===s)return e(r,n,o,r,i),null;if(!Object.prototype.hasOwnProperty.call(r,"__mobxDecorators")){var a=r.__mobxDecorators;g(r,"__mobxDecorators",L({},a))}return r.__mobxDecorators[n]={prop:n,propertyCreator:e,descriptor:o,decoratorTarget:r,decoratorArguments:i},W(n,t)};return $(arguments)?(i=n,r.apply(null,arguments)):(i=Array.prototype.slice.call(arguments),r)}}function $(t){return(2===t.length||3===t.length)&&"string"==typeof t[1]||4===t.length&&!0===t[3]}function Z(t,e,i){return Ze(t)?t:Array.isArray(t)?ot.array(t,{name:i}):m(t)?ot.object(t,void 0,{name:i}):b(t)?ot.map(t,{name:i}):x(t)?ot.set(t,{name:i}):t}function X(t){return t}function Y(t){h(t);var e=V(!0,(function(e,i,r,n,o){Ni(e,i,r?r.initializer?r.initializer.call(e):r.value:void 0,t)})),i=(void 0!==a&&a.env,e);return i.enhancer=t,i}var q={deep:!0,name:void 0,defaultDecorator:void 0},K={deep:!1,name:void 0,defaultDecorator:void 0};function Q(t){return null==t?q:"string"==typeof t?{name:t,deep:!0}:t}function J(t){return t.defaultDecorator?t.defaultDecorator.enhancer:!1===t.deep?X:Z}Object.freeze(q),Object.freeze(K);var tt=Y(Z),et=Y((function(t,e,i){return null==t||Gi(t)||Di(t)||Fi(t)||Bi(t)?t:Array.isArray(t)?ot.array(t,{name:i,deep:!1}):m(t)?ot.object(t,void 0,{name:i,deep:!1}):b(t)?ot.map(t,{name:i,deep:!1}):x(t)?ot.set(t,{name:i,deep:!1}):u(!1)})),it=Y(X),rt=Y((function(t,e,i){return Yi(t,e)?e:t}));var nt={box:function(t,e){arguments.length>2&&st("box");var i=Q(e);return new zt(t,J(i),i.name,!0,i.equals)},shallowBox:function(t,e){return arguments.length>2&&st("shallowBox"),ot.box(t,{name:e,deep:!1})},array:function(t,e){arguments.length>2&&st("array");var i=Q(e);return new Si(t,J(i),i.name)},shallowArray:function(t,e){return arguments.length>2&&st("shallowArray"),ot.array(t,{name:e,deep:!1})},map:function(t,e){arguments.length>2&&st("map");var i=Q(e);return new Oi(t,J(i),i.name)},shallowMap:function(t,e){return arguments.length>2&&st("shallowMap"),ot.map(t,{name:e,deep:!1})},set:function(t,e){arguments.length>2&&st("set");var i=Q(e);return new Pi(t,J(i),i.name)},object:function(t,e,i){"string"==typeof arguments[1]&&st("object");var r=Q(i);return Oe({},t,e,r)},shallowObject:function(t,e){return"string"==typeof arguments[1]&&st("shallowObject"),ot.object(t,{},{name:e,deep:!1})},ref:it,shallow:et,deep:tt,struct:rt},ot=function(t,e,i){if("string"==typeof arguments[1])return tt.apply(null,arguments);if(Ze(t))return t;var r=m(t)?ot.object(t,e,i):Array.isArray(t)?ot.array(t,e):b(t)?ot.map(t,e):x(t)?ot.set(t,e):t;if(r!==t)return r;u(!1)};function st(t){u("Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}Object.keys(nt).forEach((function(t){return ot[t]=nt[t]}));var at,lt,ct,ut=V(!1,(function(t,e,i,r,n){var o=i.get,s=i.set,a=n[0]||{};!function(t,e,i){var r=Li(t);i.name=r.name+"."+e,i.context=t,r.values[e]=new Nt(i),Object.defineProperty(t,e,function(t){return ji[t]||(ji[t]={configurable:Vt.computedConfigurable,enumerable:!1,get:function(){return Hi(this).read(this,t)},set:function(e){Hi(this).write(this,t,e)}})}(e))}(t,e,L({get:o,set:s},a))})),ht=ut({equals:P.structural}),dt=function(t,e,i){if("string"==typeof e)return ut.apply(null,arguments);if(null!==t&&"object"==typeof t&&1===arguments.length)return ut.apply(null,arguments);var r="object"==typeof e?e:{};return r.get=t,r.set="function"==typeof e?e:r.set,r.name=r.name||t.name||"",new Nt(r)};dt.struct=ht,(lt=at||(at={}))[lt.NOT_TRACKING=-1]="NOT_TRACKING",lt[lt.UP_TO_DATE=0]="UP_TO_DATE",lt[lt.POSSIBLY_STALE=1]="POSSIBLY_STALE",lt[lt.STALE=2]="STALE",function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(ct||(ct={}));var pt=function(t){this.cause=t};function ft(t){return t instanceof pt}function mt(t){switch(t.dependenciesState){case at.UP_TO_DATE:return!1;case at.NOT_TRACKING:case at.STALE:return!0;case at.POSSIBLY_STALE:for(var e=St(!0),i=xt(),r=t.observing,n=r.length,o=0;o<n;o++){var s=r[o];if(Ut(s)){if(Vt.disableErrorBoundaries)s.get();else try{s.get()}catch(t){return wt(i),kt(e),!0}if(t.dependenciesState===at.STALE)return wt(i),kt(e),!0}}return Ct(t),wt(i),kt(e),!1}}function gt(){return null!==Vt.trackingDerivation}function _t(t){var e=t.observers.length>0;Vt.computationDepth>0&&e&&u(!1),!Vt.allowStateChanges&&(e||"strict"===Vt.enforceActions)&&u(!1)}function yt(t,e,i){var r=St(!0);Ct(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++Vt.runId;var n,o=Vt.trackingDerivation;if(Vt.trackingDerivation=t,!0===Vt.disableErrorBoundaries)n=e.call(i);else try{n=e.call(i)}catch(t){n=new pt(t)}return Vt.trackingDerivation=o,function(t){for(var e=t.observing,i=t.observing=t.newObserving,r=at.UP_TO_DATE,n=0,o=t.unboundDepsCount,s=0;s<o;s++){0===(a=i[s]).diffValue&&(a.diffValue=1,n!==s&&(i[n]=a),n++),a.dependenciesState>r&&(r=a.dependenciesState)}for(i.length=n,t.newObserving=null,o=e.length;o--;){0===(a=e[o]).diffValue&&Yt(a,t),a.diffValue=0}for(;n--;){var a;1===(a=i[n]).diffValue&&(a.diffValue=0,Xt(a,t))}r!==at.UP_TO_DATE&&(t.dependenciesState=r,t.onBecomeStale())}(t),t.observing.length,kt(r),n}function vt(t){var e=t.observing;t.observing=[];for(var i=e.length;i--;)Yt(e[i],t);t.dependenciesState=at.NOT_TRACKING}function bt(t){var e=xt(),i=t();return wt(e),i}function xt(){var t=Vt.trackingDerivation;return Vt.trackingDerivation=null,t}function wt(t){Vt.trackingDerivation=t}function St(t){var e=Vt.allowStateReads;return Vt.allowStateReads=t,e}function kt(t){Vt.allowStateReads=t}function Ct(t){if(t.dependenciesState!==at.UP_TO_DATE){t.dependenciesState=at.UP_TO_DATE;for(var e=t.observing,i=e.length;i--;)e[i].lowestObserverState=at.UP_TO_DATE}}var Tt=0,Et=1,Rt=Object.getOwnPropertyDescriptor((function(){}),"name");Rt&&Rt.configurable;function Dt(t,e){var i=function(){return It(t,e,this,arguments)};return i.isMobxAction=!0,i}function It(t,e,i,r){var n=Ot(t,i,r);try{return e.apply(i,r)}catch(t){throw n.error=t,t}finally{At(n)}}function Ot(t,e,i){var r=le()&&!!t,n=0;if(r){n=Date.now();var o=i&&i.length||0,s=new Array(o);if(o>0)for(var a=0;a<o;a++)s[a]=i[a];ue({type:"action",name:t,object:e,arguments:s})}var l=xt();Kt();var c={prevDerivation:l,prevAllowStateChanges:Mt(!0),prevAllowStateReads:St(!0),notifySpy:r,startTime:n,actionId:Et++,parentActionId:Tt};return Tt=c.actionId,c}function At(t){Tt!==t.actionId&&u("invalid action stack. did you forget to finish an action?"),Tt=t.parentActionId,void 0!==t.error&&(Vt.suppressReactionErrors=!0),Pt(t.prevAllowStateChanges),kt(t.prevAllowStateReads),Qt(),wt(t.prevDerivation),t.notifySpy&&de({time:Date.now()-t.startTime}),Vt.suppressReactionErrors=!1}function Ft(t,e){var i,r=Mt(t);try{i=e()}finally{Pt(r)}return i}function Mt(t){var e=Vt.allowStateChanges;return Vt.allowStateChanges=t,e}function Pt(t){Vt.allowStateChanges=t}function Bt(t){var e,i=Vt.computationDepth;Vt.computationDepth=0;try{e=t()}finally{Vt.computationDepth=i}return e}var zt=function(t){function e(e,i,r,n,o){void 0===r&&(r="ObservableValue@"+c()),void 0===n&&(n=!0),void 0===o&&(o=P.default);var s=t.call(this,r)||this;return s.enhancer=i,s.name=r,s.equals=o,s.hasUnreportedChange=!1,s.value=i(e,void 0,r),n&&le()&&ce({type:"create",name:s.name,newValue:""+s.value}),s}return z(e,t),e.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.prototype.set=function(t){var e=this.value;if((t=this.prepareNewValue(t))!==Vt.UNCHANGED){var i=le();i&&ue({type:"update",name:this.name,newValue:t,oldValue:e}),this.setNewValue(t),i&&de()}},e.prototype.prepareNewValue=function(t){if(_t(this),pi(this)){var e=mi(this,{object:this,type:"update",newValue:t});if(!e)return Vt.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value,this.name),this.equals(this.value,t)?Vt.UNCHANGED:t},e.prototype.setNewValue=function(t){var e=this.value;this.value=t,this.reportChanged(),gi(this)&&yi(this,{type:"update",object:this,newValue:t,oldValue:e})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return fi(this,t)},e.prototype.observe=function(t,e){return e&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),_i(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return k(this.get())},e}(O);zt.prototype[S()]=zt.prototype.valueOf;var Lt=y("ObservableValue",zt),Nt=function(){function t(t){this.dependenciesState=at.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=at.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+c(),this.value=new pt(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=ct.NONE,h(t.get,"missing option for computed: get"),this.derivation=t.get,this.name=t.name||"ComputedValue@"+c(),t.set&&(this.setter=Dt(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?P.structural:P.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return t.prototype.onBecomeStale=function(){!function(t){if(t.lowestObserverState!==at.UP_TO_DATE)return;t.lowestObserverState=at.POSSIBLY_STALE;for(var e=t.observers,i=e.length;i--;){var r=e[i];r.dependenciesState===at.UP_TO_DATE&&(r.dependenciesState=at.POSSIBLY_STALE,r.isTracing!==ct.NONE&&te(r,t),r.onBecomeStale())}}(this)},t.prototype.onBecomeUnobserved=function(){},t.prototype.onBecomeObserved=function(){},t.prototype.get=function(){this.isComputing&&u("Cycle detected in computation "+this.name+": "+this.derivation),0!==Vt.inBatch||0!==this.observers.length||this.keepAlive?(Jt(this),mt(this)&&this.trackAndCompute()&&function(t){if(t.lowestObserverState===at.STALE)return;t.lowestObserverState=at.STALE;for(var e=t.observers,i=e.length;i--;){var r=e[i];r.dependenciesState===at.POSSIBLY_STALE?r.dependenciesState=at.STALE:r.dependenciesState===at.UP_TO_DATE&&(t.lowestObserverState=at.UP_TO_DATE)}}(this)):mt(this)&&(this.warnAboutUntrackedRead(),Kt(),this.value=this.computeValue(!1),Qt());var t=this.value;if(ft(t))throw t.cause;return t},t.prototype.peek=function(){var t=this.computeValue(!1);if(ft(t))throw t.cause;return t},t.prototype.set=function(t){if(this.setter){h(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else h(!1,!1)},t.prototype.trackAndCompute=function(){le()&&ce({object:this.scope,type:"compute",name:this.name});var t=this.value,e=this.dependenciesState===at.NOT_TRACKING,i=this.computeValue(!0),r=e||ft(t)||ft(i)||!this.equals(t,i);return r&&(this.value=i),r},t.prototype.computeValue=function(t){var e;if(this.isComputing=!0,Vt.computationDepth++,t)e=yt(this,this.derivation,this.scope);else if(!0===Vt.disableErrorBoundaries)e=this.derivation.call(this.scope);else try{e=this.derivation.call(this.scope)}catch(t){e=new pt(t)}return Vt.computationDepth--,this.isComputing=!1,e},t.prototype.suspend=function(){this.keepAlive||(vt(this),this.value=void 0)},t.prototype.observe=function(t,e){var i=this,r=!0,n=void 0;return xe((function(){var o=i.get();if(!r||e){var s=xt();t({type:"update",object:i,newValue:o,oldValue:n}),wt(s)}r=!1,n=o}))},t.prototype.warnAboutUntrackedRead=function(){},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return k(this.get())},t}();Nt.prototype[S()]=Nt.prototype.valueOf;var Ut=y("ComputedValue",Nt),jt=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED"],Ht=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Wt=!0,Gt=!1,Vt=function(){var t=l();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(Wt=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new Ht).version&&(Wt=!1),Wt?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new Ht):(setTimeout((function(){Gt||u("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new Ht)}();function $t(){return Vt}function Zt(){var t=new Ht;for(var e in t)-1===jt.indexOf(e)&&(Vt[e]=t[e]);Vt.allowStateChanges=!Vt.enforceActions}function Xt(t,e){var i=t.observers.length;i&&(t.observersIndexes[e.__mapid]=i),t.observers[i]=e,t.lowestObserverState>e.dependenciesState&&(t.lowestObserverState=e.dependenciesState)}function Yt(t,e){if(1===t.observers.length)t.observers.length=0,qt(t);else{var i=t.observers,r=t.observersIndexes,n=i.pop();if(n!==e){var o=r[e.__mapid]||0;o?r[n.__mapid]=o:delete r[n.__mapid],i[o]=n}delete r[e.__mapid]}}function qt(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,Vt.pendingUnobservations.push(t))}function Kt(){Vt.inBatch++}function Qt(){if(0==--Vt.inBatch){oe();for(var t=Vt.pendingUnobservations,e=0;e<t.length;e++){var i=t[e];i.isPendingUnobservation=!1,0===i.observers.length&&(i.isBeingObserved&&(i.isBeingObserved=!1,i.onBecomeUnobserved()),i instanceof Nt&&i.suspend())}Vt.pendingUnobservations=[]}}function Jt(t){var e=Vt.trackingDerivation;return null!==e?(e.runId!==t.lastAccessedBy&&(t.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(0===t.observers.length&&Vt.inBatch>0&&qt(t),!1)}function te(t,e){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+e.name+"'"),t.isTracing===ct.BREAK){var i=[];ee(Ae(t),i,1),new Function("debugger;\n/*\nTracing '"+t.name+"'\n\nYou are entering this break point because derivation '"+t.name+"' is being traced and '"+e.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof Nt?t.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+i.join("\n")+"\n*/\n    ")()}}function ee(t,e,i){e.length>=1e3?e.push("(and many more)"):(e.push(""+new Array(i).join("\t")+t.name),t.dependencies&&t.dependencies.forEach((function(t){return ee(t,e,i+1)})))}var ie=function(){function t(t,e,i,r){void 0===t&&(t="Reaction@"+c()),void 0===r&&(r=!1),this.name=t,this.onInvalidate=e,this.errorHandler=i,this.requiresObservable=r,this.observing=[],this.newObserving=[],this.dependenciesState=at.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+c(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=ct.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Vt.pendingReactions.push(this),oe())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){if(!this.isDisposed){if(Kt(),this._isScheduled=!1,mt(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&le()&&ce({name:this.name,type:"scheduled-reaction"})}catch(t){this.reportExceptionInDerivation(t)}}Qt()}},t.prototype.track=function(t){Kt();var e,i=le();i&&(e=Date.now(),ue({name:this.name,type:"reaction"})),this._isRunning=!0;var r=yt(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&vt(this),ft(r)&&this.reportExceptionInDerivation(r.cause),i&&de({time:Date.now()-e}),Qt()},t.prototype.reportExceptionInDerivation=function(t){var e=this;if(this.errorHandler)this.errorHandler(t,this);else{if(Vt.disableErrorBoundaries)throw t;var i="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Vt.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(i,t),le()&&ce({type:"error",name:this.name,message:i,error:""+t}),Vt.globalReactionErrorHandlers.forEach((function(i){return i(t,e)}))}},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Kt(),vt(this),Qt()))},t.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t.$mobx=this,t},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(t){void 0===t&&(t=!1),ai(this,t)},t}();function re(t){return Vt.globalReactionErrorHandlers.push(t),function(){var e=Vt.globalReactionErrorHandlers.indexOf(t);e>=0&&Vt.globalReactionErrorHandlers.splice(e,1)}}var ne=function(t){return t()};function oe(){Vt.inBatch>0||Vt.isRunningReactions||ne(se)}function se(){Vt.isRunningReactions=!0;for(var t=Vt.pendingReactions,e=0;t.length>0;){100==++e&&(console.error("Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+t[0]),t.splice(0));for(var i=t.splice(0),r=0,n=i.length;r<n;r++)i[r].runReaction()}Vt.isRunningReactions=!1}var ae=y("Reaction",ie);function le(){return!!Vt.spyListeners.length}function ce(t){if(Vt.spyListeners.length)for(var e=Vt.spyListeners,i=0,r=e.length;i<r;i++)e[i](t)}function ue(t){ce(L(L({},t),{spyReportStart:!0}))}var he={spyReportEnd:!0};function de(t){ce(t?L(L({},t),{spyReportEnd:!0}):he)}function pe(t){return Vt.spyListeners.push(t),d((function(){Vt.spyListeners=Vt.spyListeners.filter((function(e){return e!==t}))}))}function fe(){u(!1)}function me(t){return function(e,i,r){if(r){if(r.value)return{value:Dt(t,r.value),enumerable:!1,configurable:!0,writable:!0};var n=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Dt(t,n.call(this))}}}return ge(t).apply(this,arguments)}}function ge(t){return function(e,i,r){Object.defineProperty(e,i,{configurable:!0,enumerable:!1,get:function(){},set:function(e){g(this,i,_e(t,e))}})}}var _e=function(t,e,i,r){return 1===arguments.length&&"function"==typeof t?Dt(t.name||"<unnamed action>",t):2===arguments.length&&"function"==typeof e?Dt(t,e):1===arguments.length&&"string"==typeof t?me(t):!0!==r?me(e).apply(null,arguments):void(t[e]=Dt(t.name||e,i.value))};function ye(t,e){return It("string"==typeof t?t:t.name||"<unnamed action>","function"==typeof t?t:e,this,void 0)}function ve(t){return"function"==typeof t&&!0===t.isMobxAction}function be(t,e,i){g(t,e,Dt(e,i.bind(t)))}function xe(t,e){void 0===e&&(e=o);var i,r=e&&e.name||t.name||"Autorun@"+c();if(!e.scheduler&&!e.delay)i=new ie(r,(function(){this.track(a)}),e.onError,e.requiresObservable);else{var n=Se(e),s=!1;i=new ie(r,(function(){s||(s=!0,n((function(){s=!1,i.isDisposed||i.track(a)})))}),e.onError,e.requiresObservable)}function a(){t(i)}return i.schedule(),i.getDisposer()}_e.bound=function(t,e,i,r){return!0===r?(be(t,e,i.value),null):i?{configurable:!0,enumerable:!1,get:function(){return be(this,e,i.value||i.initializer.call(this)),this[e]},set:fe}:{enumerable:!1,configurable:!0,set:function(t){be(this,e,t)},get:function(){}}};var we=function(t){return t()};function Se(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:we}function ke(t,e,i){void 0===i&&(i=o),"boolean"==typeof i&&(i={fireImmediately:i});var r,n=i.name||"Reaction@"+c(),s=_e(n,i.onError?function(t,e){return function(){try{return e.apply(this,arguments)}catch(e){t.call(this,e)}}}(i.onError,e):e),a=!i.scheduler&&!i.delay,l=Se(i),u=!0,h=!1,d=i.compareStructural?P.structural:i.equals||P.default,p=new ie(n,(function(){u||a?f():h||(h=!0,l(f))}),i.onError,i.requiresObservable);function f(){if(h=!1,!p.isDisposed){var e=!1;p.track((function(){var i=t(p);e=u||!d(r,i),r=i})),u&&i.fireImmediately&&s(r,p),!u&&!0===e&&s(r,p),u&&(u=!1)}}return p.schedule(),p.getDisposer()}function Ce(t,e,i){return Ee("onBecomeObserved",t,e,i)}function Te(t,e,i){return Ee("onBecomeUnobserved",t,e,i)}function Ee(t,e,i,r){var n="function"==typeof r?Vi(e,i):Vi(e),o="function"==typeof r?r:i,s=n[t];return"function"!=typeof s?u(!1):(n[t]=function(){s.call(this),o.call(this)},function(){n[t]=s})}function Re(t){var e=t.enforceActions,i=t.computedRequiresReaction,r=t.computedConfigurable,n=t.disableErrorBoundaries,o=t.arrayBuffer,s=t.reactionScheduler,a=t.reactionRequiresObservable,c=t.observableRequiresReaction;if(!0===t.isolateGlobalState&&((Vt.pendingReactions.length||Vt.inBatch||Vt.isRunningReactions)&&u("isolateGlobalState should be called before MobX is running any reactions"),Gt=!0,Wt&&(0==--l().__mobxInstanceCount&&(l().__mobxGlobals=void 0),Vt=new Ht)),void 0!==e){var h=void 0;switch(e){case!0:case"observed":h=!0;break;case!1:case"never":h=!1;break;case"strict":case"always":h="strict";break;default:u("Invalid value for 'enforceActions': '"+e+"', expected 'never', 'always' or 'observed'")}Vt.enforceActions=h,Vt.allowStateChanges=!(!0===h||"strict"===h)}void 0!==i&&(Vt.computedRequiresReaction=!!i),void 0!==a&&(Vt.reactionRequiresObservable=!!a),void 0!==c&&(Vt.observableRequiresReaction=!!c,Vt.allowStateReads=!Vt.observableRequiresReaction),void 0!==r&&(Vt.computedConfigurable=!!r),void 0!==n&&(!0===n&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on."),Vt.disableErrorBoundaries=!!n),"number"==typeof o&&Ei(o),s&&function(t){var e=ne;ne=function(i){return t((function(){return e(i)}))}}(s)}function De(t,e){var i="function"==typeof t?t.prototype:t,r=function(t){var r=e[t];Array.isArray(r)||(r=[r]);var n=Object.getOwnPropertyDescriptor(i,t),o=r.reduce((function(e,r){return r(i,t,e)}),n);o&&Object.defineProperty(i,t,o)};for(var n in e)r(n);return t}function Ie(t,e,i){return Oe(t,e,i,K)}function Oe(t,e,i,r){var n=(r=Q(r)).defaultDecorator||(!1===r.deep?it:tt);G(t),Li(t,r.name,n.enhancer),Kt();try{for(var o=Object.getOwnPropertyNames(e),s=0,a=o.length;s<a;s++){var l=o[s],c=Object.getOwnPropertyDescriptor(e,l),u=(i&&l in i?i[l]:c.get?ut:n)(t,l,c,!0);u&&Object.defineProperty(t,l,u)}}finally{Qt()}return t}function Ae(t,e){return Fe(Vi(t,e))}function Fe(t){var e={name:t.name};return t.observing&&t.observing.length>0&&(e.dependencies=function(t){var e=[];return t.forEach((function(t){-1===e.indexOf(t)&&e.push(t)})),e}(t.observing).map(Fe)),e}function Me(t,e){return Pe(Vi(t,e))}function Pe(t){var e={name:t.name};return function(t){return t.observers&&t.observers.length>0}(t)&&(e.observers=function(t){return t.observers}(t).map(Pe)),e}var Be=0;function ze(){this.message="FLOW_CANCELLED"}function Le(t){return t instanceof ze}function Ne(t){1!==arguments.length&&u("Flow expects one 1 argument and cannot be used as decorator");var e=t.name||"<unnamed flow>";return function(){var i,r=this,n=arguments,o=++Be,s=_e(e+" - runid: "+o+" - init",t).apply(r,n),a=void 0,l=new Promise((function(t,r){var n=0;function l(t){var i;a=void 0;try{i=_e(e+" - runid: "+o+" - yield "+n++,s.next).call(s,t)}catch(t){return r(t)}u(i)}function c(t){var i;a=void 0;try{i=_e(e+" - runid: "+o+" - yield "+n++,s.throw).call(s,t)}catch(t){return r(t)}u(i)}function u(e){if(!e||"function"!=typeof e.then)return e.done?t(e.value):(a=Promise.resolve(e.value)).then(l,c);e.then(u,r)}i=r,l(void 0)}));return l.cancel=_e(e+" - runid: "+o+" - cancel",(function(){try{a&&Ue(a);var t=s.return(void 0),e=Promise.resolve(t.value);e.then(p,p),Ue(e),i(new ze)}catch(t){i(t)}})),l}}function Ue(t){"function"==typeof t.cancel&&t.cancel()}function je(t,e,i){var r;if(Fi(t)||Di(t)||Lt(t))r=$i(t);else{if(!Gi(t))return u(!1);if("string"!=typeof e)return u(!1);r=$i(t,e)}return void 0!==r.dehancer?u(!1):(r.dehancer="function"==typeof e?e:i,function(){r.dehancer=void 0})}function He(t,e,i){return"function"==typeof i?function(t,e,i){return $i(t,e).intercept(i)}(t,e,i):function(t,e){return $i(t).intercept(e)}(t,e)}function We(t,e){if(null==t)return!1;if(void 0!==e){if(!1===Gi(t))return!1;if(!t.$mobx.values[e])return!1;var i=Vi(t,e);return Ut(i)}return Ut(t)}function Ge(t){return arguments.length>1?u(!1):We(t)}function Ve(t,e){return"string"!=typeof e?u(!1):We(t,e)}function $e(t,e){if(null==t)return!1;if(void 0!==e){if(Gi(t)){var i=t.$mobx;return i.values&&!!i.values[e]}return!1}return Gi(t)||!!t.$mobx||A(t)||ae(t)||Ut(t)}function Ze(t){return 1!==arguments.length&&u(!1),$e(t)}function Xe(t,e){return"string"!=typeof e?u(!1):$e(t,e)}function Ye(t){return Gi(t)?t.$mobx.getKeys():Fi(t)||Bi(t)?w(t.keys()):Di(t)?t.map((function(t,e){return e})):u(!1)}function qe(t){return Gi(t)?Ye(t).map((function(e){return t[e]})):Fi(t)?Ye(t).map((function(e){return t.get(e)})):Bi(t)?w(t.values()):Di(t)?t.slice():u(!1)}function Ke(t){return Gi(t)?Ye(t).map((function(e){return[e,t[e]]})):Fi(t)?Ye(t).map((function(e){return[e,t.get(e)]})):Bi(t)?w(t.entries()):Di(t)?t.map((function(t,e){return[e,t]})):u(!1)}function Qe(t,e,i){if(2!==arguments.length||Bi(t))if(Gi(t)){var r=t.$mobx,n=r.values[e];n?r.write(t,e,i):Ni(t,e,i,r.defaultEnhancer)}else if(Fi(t))t.set(e,i);else if(Bi(t))t.add(e);else{if(!Di(t))return u(!1);"number"!=typeof e&&(e=parseInt(e,10)),h(e>=0,"Not a valid index: '"+e+"'"),Kt(),e>=t.length&&(t.length=e+1),t[e]=i,Qt()}else{Kt();var o=e;try{for(var s in o)Qe(t,s,o[s])}finally{Qt()}}}function Je(t,e){if(Gi(t))t.$mobx.remove(e);else if(Fi(t))t.delete(e);else if(Bi(t))t.delete(e);else{if(!Di(t))return u(!1);"number"!=typeof e&&(e=parseInt(e,10)),h(e>=0,"Not a valid index: '"+e+"'"),t.splice(e,1)}}function ti(t,e){if(Gi(t)){var i=$i(t);return i.getKeys(),!!i.values[e]}return Fi(t)||Bi(t)?t.has(e):Di(t)?e>=0&&e<t.length:u(!1)}function ei(t,e){return ti(t,e)?Gi(t)?t[e]:Fi(t)?t.get(e):Di(t)?t[e]:u(!1):void 0}function ii(t,e,i,r){return"function"==typeof i?function(t,e,i,r){return $i(t,e).observe(i,r)}(t,e,i,r):function(t,e,i){return $i(t).observe(e,i)}(t,e,i)}ze.prototype=Object.create(Error.prototype);var ri={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function ni(t,e,i,r){return r.detectCycles&&t.set(e,i),i}function oi(t,e,i){if(!e.recurseEverything&&!Ze(t))return t;if("object"!=typeof t)return t;if(null===t)return null;if(t instanceof Date)return t;if(Lt(t))return oi(t.get(),e,i);if(Ze(t)&&Ye(t),!0===e.detectCycles&&null!==t&&i.has(t))return i.get(t);if(Di(t)||Array.isArray(t)){var r=ni(i,t,[],e),n=t.map((function(t){return oi(t,e,i)}));r.length=n.length;for(var o=0,s=n.length;o<s;o++)r[o]=n[o];return r}if(Bi(t)||Object.getPrototypeOf(t)===Set.prototype){if(!1===e.exportMapsAsObjects){var a=ni(i,t,new Set,e);return t.forEach((function(t){a.add(oi(t,e,i))})),a}var l=ni(i,t,[],e);return t.forEach((function(t){l.push(oi(t,e,i))})),l}if(Fi(t)||Object.getPrototypeOf(t)===Map.prototype){if(!1===e.exportMapsAsObjects){var c=ni(i,t,new Map,e);return t.forEach((function(t,r){c.set(r,oi(t,e,i))})),c}var u=ni(i,t,{},e);return t.forEach((function(t,r){u[r]=oi(t,e,i)})),u}var h=ni(i,t,{},e);for(var d in t)h[d]=oi(t[d],e,i);return h}function si(t,e){var i;return"boolean"==typeof e&&(e={detectCycles:e}),e||(e=ri),e.detectCycles=void 0===e.detectCycles?!0===e.recurseEverything:!0===e.detectCycles,e.detectCycles&&(i=new Map),oi(t,e,i)}function ai(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=!1;"boolean"==typeof t[t.length-1]&&(i=t.pop());var r=li(t);if(!r)return u(!1);r.isTracing===ct.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=i?ct.BREAK:ct.LOG}function li(t){switch(t.length){case 0:return Vt.trackingDerivation;case 1:return Vi(t[0]);case 2:return Vi(t[0],t[1])}}function ci(t,e){void 0===e&&(e=void 0),Kt();try{return t.apply(e)}finally{Qt()}}function ui(t,e,i){return 1===arguments.length||e&&"object"==typeof e?di(t,e):hi(t,e,i||{})}function hi(t,e,i){var r;"number"==typeof i.timeout&&(r=setTimeout((function(){if(!o.$mobx.isDisposed){o();var t=new Error("WHEN_TIMEOUT");if(!i.onError)throw t;i.onError(t)}}),i.timeout)),i.name=i.name||"When@"+c();var n=Dt(i.name+"-effect",e),o=xe((function(e){t()&&(e.dispose(),r&&clearTimeout(r),n())}),i);return o}function di(t,e){var i,r=new Promise((function(r,n){var o=hi(t,r,L(L({},e),{onError:n}));i=function(){o(),n("WHEN_CANCELLED")}}));return r.cancel=i,r}function pi(t){return void 0!==t.interceptors&&t.interceptors.length>0}function fi(t,e){var i=t.interceptors||(t.interceptors=[]);return i.push(e),d((function(){var t=i.indexOf(e);-1!==t&&i.splice(t,1)}))}function mi(t,e){var i=xt();try{var r=t.interceptors;if(r)for(var n=0,o=r.length;n<o&&(h(!(e=r[n](e))||e.type,"Intercept handlers should return nothing or a change object"),e);n++);return e}finally{wt(i)}}function gi(t){return void 0!==t.changeListeners&&t.changeListeners.length>0}function _i(t,e){var i=t.changeListeners||(t.changeListeners=[]);return i.push(e),d((function(){var t=i.indexOf(e);-1!==t&&i.splice(t,1)}))}function yi(t,e){var i=xt(),r=t.changeListeners;if(r){for(var n=0,o=(r=r.slice()).length;n<o;n++)r[n](e);wt(i)}}var vi=function(){var t=!1,e={};return Object.defineProperty(e,"0",{set:function(){t=!0}}),Object.create(e)[0]=1,!1===t}(),bi=0,xi=function(){};!function(t,e){void 0!==Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,e):void 0!==t.prototype.__proto__?t.prototype.__proto__=e:t.prototype=e}(xi,Array.prototype),Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach((function(t){Object.defineProperty(xi.prototype,t,{configurable:!0,writable:!0,value:Array.prototype[t]})}));var wi=function(){function t(t,e,i,r){this.array=i,this.owned=r,this.values=[],this.lastKnownLength=0,this.atom=new O(t||"ObservableArray@"+c()),this.enhancer=function(i,r){return e(i,r,t+"[..]")}}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.dehanceValues=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},t.prototype.intercept=function(t){return fi(this,t)},t.prototype.observe=function(t,e){return void 0===e&&(e=!1),e&&t({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),_i(this,t)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(t){if("number"!=typeof t||t<0)throw new Error("[mobx.array] Out of range: "+t);var e=this.values.length;if(t!==e)if(t>e){for(var i=new Array(t-e),r=0;r<t-e;r++)i[r]=void 0;this.spliceWithArray(e,0,i)}else this.spliceWithArray(t,e-t)},t.prototype.updateArrayLength=function(t,e){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=e,e>0&&t+e+1>bi&&Ei(t+e+1)},t.prototype.spliceWithArray=function(t,e,i){var r=this;_t(this.atom);var o=this.values.length;if(void 0===t?t=0:t>o?t=o:t<0&&(t=Math.max(0,o+t)),e=1===arguments.length?o-t:null==e?0:Math.max(0,Math.min(e,o-t)),void 0===i&&(i=n),pi(this)){var s=mi(this,{object:this.array,type:"splice",index:t,removedCount:e,added:i});if(!s)return n;e=s.removedCount,i=s.added}var a=(i=0===i.length?i:i.map((function(t){return r.enhancer(t,void 0)}))).length-e;this.updateArrayLength(o,a);var l=this.spliceItemsIntoValues(t,e,i);return(0!==e||0!==i.length)&&this.notifyArraySplice(t,i,l),this.dehanceValues(l)},t.prototype.spliceItemsIntoValues=function(t,e,i){var r;if(i.length<1e4)return(r=this.values).splice.apply(r,U([t,e],i));var n=this.values.slice(t,t+e);return this.values=this.values.slice(0,t).concat(i,this.values.slice(t+e)),n},t.prototype.notifyArrayChildUpdate=function(t,e,i){var r=!this.owned&&le(),n=gi(this),o=n||r?{object:this.array,type:"update",index:t,newValue:e,oldValue:i}:null;r&&ue(L(L({},o),{name:this.atom.name})),this.atom.reportChanged(),n&&yi(this,o),r&&de()},t.prototype.notifyArraySplice=function(t,e,i){var r=!this.owned&&le(),n=gi(this),o=n||r?{object:this.array,type:"splice",index:t,removed:i,added:e,removedCount:i.length,addedCount:e.length}:null;r&&ue(L(L({},o),{name:this.atom.name})),this.atom.reportChanged(),n&&yi(this,o),r&&de()},t}(),Si=function(t){function e(e,i,r,n){void 0===r&&(r="ObservableArray@"+c()),void 0===n&&(n=!1);var o=t.call(this)||this,s=new wi(r,i,o,n);if(_(o,"$mobx",s),e&&e.length){var a=Mt(!0);o.spliceWithArray(0,0,e),Pt(a)}return vi&&Object.defineProperty(s.array,"0",ki),o}return z(e,t),e.prototype.intercept=function(t){return this.$mobx.intercept(t)},e.prototype.observe=function(t,e){return void 0===e&&(e=!1),this.$mobx.observe(t,e)},e.prototype.clear=function(){return this.splice(0)},e.prototype.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),t.map((function(t){return Di(t)?t.peek():t})))},e.prototype.replace=function(t){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,t)},e.prototype.toJS=function(){return this.slice()},e.prototype.toJSON=function(){return this.toJS()},e.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},e.prototype.find=function(t,e,i){void 0===i&&(i=0);var r=this.findIndex.apply(this,arguments);return-1===r?void 0:this.get(r)},e.prototype.findIndex=function(t,e,i){void 0===i&&(i=0);for(var r=this.peek(),n=r.length,o=i;o<n;o++)if(t.call(e,r[o],o,this))return o;return-1},e.prototype.splice=function(t,e){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(t);case 2:return this.$mobx.spliceWithArray(t,e)}return this.$mobx.spliceWithArray(t,e,i)},e.prototype.spliceWithArray=function(t,e,i){return this.$mobx.spliceWithArray(t,e,i)},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.$mobx;return i.spliceWithArray(i.values.length,0,t),i.values.length},e.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},e.prototype.shift=function(){return this.splice(0,1)[0]},e.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.$mobx;return i.spliceWithArray(0,0,t),i.values.length},e.prototype.reverse=function(){var t=this.slice();return t.reverse.apply(t,arguments)},e.prototype.sort=function(t){var e=this.slice();return e.sort.apply(e,arguments)},e.prototype.remove=function(t){var e=this.$mobx.dehanceValues(this.$mobx.values).indexOf(t);return e>-1&&(this.splice(e,1),!0)},e.prototype.move=function(t,e){function i(t){if(t<0)throw new Error("[mobx.array] Index out of bounds: "+t+" is negative");var e=this.$mobx.values.length;if(t>=e)throw new Error("[mobx.array] Index out of bounds: "+t+" is not smaller than "+e)}if(i.call(this,t),i.call(this,e),t!==e){var r,n=this.$mobx.values;r=t<e?U(n.slice(0,t),n.slice(t+1,e+1),[n[t]],n.slice(e+1)):U(n.slice(0,e),[n[t]],n.slice(e,t),n.slice(t+1)),this.replace(r)}},e.prototype.get=function(t){var e=this.$mobx;if(e){if(t<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},e.prototype.set=function(t,e){var i=this.$mobx,r=i.values;if(t<r.length){_t(i.atom);var n=r[t];if(pi(i)){var o=mi(i,{type:"update",object:this,index:t,newValue:e});if(!o)return;e=o.newValue}(e=i.enhancer(e,n))!==n&&(r[t]=e,i.notifyArrayChildUpdate(t,e,n))}else{if(t!==r.length)throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+r.length);i.spliceWithArray(t,0,[e])}},e}(xi);E(Si.prototype,(function(){this.$mobx.atom.reportObserved();var t=this,e=0;return R({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})})),Object.defineProperty(Si.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(t){this.$mobx.setArrayLength(t)}}),g(Si.prototype,D(),"Array"),["indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach((function(t){var e=Array.prototype[t];h("function"==typeof e,"Base function not defined on Array prototype: '"+t+"'"),g(Si.prototype,t,(function(){return e.apply(this.peek(),arguments)}))})),["every","filter","forEach","map","some"].forEach((function(t){h("function"==typeof Array.prototype[t],"Base function not defined on Array prototype: '"+t+"'"),g(Si.prototype,t,(function(e,i){var r=this,n=this.$mobx;return n.atom.reportObserved(),n.dehanceValues(n.values)[t]((function(t,n){return e.call(i,t,n,r)}),i)}))})),["reduce","reduceRight"].forEach((function(t){g(Si.prototype,t,(function(){var e=this,i=this.$mobx;i.atom.reportObserved();var r=arguments[0];return arguments[0]=function(t,n,o){return n=i.dehanceValue(n),r(t,n,o,e)},i.values[t].apply(i.values,arguments)}))})),function(t,e){for(var i=0;i<e.length;i++)g(t,e[i],t[e[i]])}(Si.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var ki=Ci(0);function Ci(t){return{enumerable:!1,configurable:!1,get:function(){return this.get(t)},set:function(e){this.set(t,e)}}}function Ti(t){Object.defineProperty(Si.prototype,""+t,Ci(t))}function Ei(t){for(var e=bi;e<t;e++)Ti(e);bi=t}Ei(1e3);var Ri=y("ObservableArrayAdministration",wi);function Di(t){return f(t)&&Ri(t.$mobx)}var Ii={},Oi=function(){function t(t,e,i){if(void 0===e&&(e=Z),void 0===i&&(i="ObservableMap@"+c()),this.enhancer=e,this.name=i,this.$mobx=Ii,this._keysAtom=F(this.name+".keys()"),"function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return t.prototype._has=function(t){return this._data.has(t)},t.prototype.has=function(t){var e=this;if(!Vt.trackingDerivation)return this._has(t);var i=this._hasMap.get(t);if(!i){var r=i=new zt(this._has(t),X,this.name+"."+Ai(t)+"?",!1);this._hasMap.set(t,r),Te(r,(function(){return e._hasMap.delete(t)}))}return i.get()},t.prototype.set=function(t,e){var i=this._has(t);if(pi(this)){var r=mi(this,{type:i?"update":"add",object:this,newValue:e,name:t});if(!r)return this;e=r.newValue}return i?this._updateValue(t,e):this._addValue(t,e),this},t.prototype.delete=function(t){var e=this;if((_t(this._keysAtom),pi(this))&&!(n=mi(this,{type:"delete",object:this,name:t})))return!1;if(this._has(t)){var i=le(),r=gi(this),n=r||i?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return i&&ue(L(L({},n),{name:this.name,key:t})),ci((function(){e._keysAtom.reportChanged(),e._updateHasMapEntry(t,!1),e._data.get(t).setNewValue(void 0),e._data.delete(t)})),r&&yi(this,n),i&&de(),!0}return!1},t.prototype._updateHasMapEntry=function(t,e){var i=this._hasMap.get(t);i&&i.setNewValue(e)},t.prototype._updateValue=function(t,e){var i=this._data.get(t);if((e=i.prepareNewValue(e))!==Vt.UNCHANGED){var r=le(),n=gi(this),o=n||r?{type:"update",object:this,oldValue:i.value,name:t,newValue:e}:null;r&&ue(L(L({},o),{name:this.name,key:t})),i.setNewValue(e),n&&yi(this,o),r&&de()}},t.prototype._addValue=function(t,e){var i=this;_t(this._keysAtom),ci((function(){var r=new zt(e,i.enhancer,i.name+"."+Ai(t),!1);i._data.set(t,r),e=r.value,i._updateHasMapEntry(t,!0),i._keysAtom.reportChanged()}));var r=le(),n=gi(this),o=n||r?{type:"add",object:this,name:t,newValue:e}:null;r&&ue(L(L({},o),{name:this.name,key:t})),n&&yi(this,o),r&&de()},t.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},t.prototype.values=function(){var t=this,e=this.keys();return R({next:function(){var i=e.next(),r=i.done,n=i.value;return{done:r,value:r?void 0:t.get(n)}}})},t.prototype.entries=function(){var t=this,e=this.keys();return R({next:function(){var i=e.next(),r=i.done,n=i.value;return{done:r,value:r?void 0:[n,t.get(n)]}}})},t.prototype.forEach=function(t,e){var i=this;this._keysAtom.reportObserved(),this._data.forEach((function(r,n){return t.call(e,i.get(n),n,i)}))},t.prototype.merge=function(t){var e=this;return Fi(t)&&(t=t.toJS()),ci((function(){var i=Mt(!0);try{m(t)?Object.keys(t).forEach((function(i){return e.set(i,t[i])})):Array.isArray(t)?t.forEach((function(t){var i=N(t,2),r=i[0],n=i[1];return e.set(r,n)})):b(t)?t.constructor!==Map?u("Cannot initialize from classes that inherit from Map: "+t.constructor.name):t.forEach((function(t,i){return e.set(i,t)})):null!=t&&u("Cannot initialize map from "+t)}finally{Pt(i)}})),this},t.prototype.clear=function(){var t=this;ci((function(){bt((function(){t._data.forEach((function(e,i){return t.delete(i)}))}))}))},t.prototype.replace=function(t){var e=this;return ci((function(){var i=function(t){if(b(t)||Fi(t))return t;if(Array.isArray(t))return new Map(t);if(m(t)){var e=new Map;for(var i in t)e.set(i,t[i]);return e}return u("Cannot convert to map from '"+t+"'")}(t),r=new Map,n=!1;if(C(e._data.keys(),(function(t){if(!i.has(t))if(e.delete(t))n=!0;else{var o=e._data.get(t);r.set(t,o)}})),C(i.entries(),(function(t){var i=N(t,2),o=i[0],s=i[1],a=e._data.has(o);if(e.set(o,s),e._data.has(o)){var l=e._data.get(o);r.set(o,l),a||(n=!0)}})),!n)if(e._data.size!==r.size)e._keysAtom.reportChanged();else for(var o=e._data.keys(),s=r.keys(),a=o.next(),l=s.next();!a.done;){if(a.value!==l.value){e._keysAtom.reportChanged();break}a=o.next(),l=s.next()}e._data=r})),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var t=this,e={};return this.forEach((function(i,r){return e["symbol"==typeof r?r:Ai(r)]=t.get(r)})),e},t.prototype.toJS=function(){return new Map(this)},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var t=this;return this.name+"[{ "+w(this.keys()).map((function(e){return Ai(e)+": "+t.get(e)})).join(", ")+" }]"},t.prototype.observe=function(t,e){return _i(this,t)},t.prototype.intercept=function(t){return fi(this,t)},t}();function Ai(t){return t&&t.toString?t.toString():new String(t).toString()}E(Oi.prototype,(function(){return this.entries()})),_(Oi.prototype,D(),"Map");var Fi=y("ObservableMap",Oi),Mi={},Pi=function(){function t(t,e,i){if(void 0===e&&(e=Z),void 0===i&&(i="ObservableSet@"+c()),this.name=i,this.$mobx=Mi,this._data=new Set,this._atom=F(this.name),"function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(t,r){return e(t,r,i)},t&&this.replace(t)}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.clear=function(){var t=this;ci((function(){bt((function(){t._data.forEach((function(e){t.delete(e)}))}))}))},t.prototype.forEach=function(t,e){var i=this;this._atom.reportObserved(),this._data.forEach((function(r){t.call(e,r,r,i)}))},Object.defineProperty(t.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this;if((_t(this._atom),pi(this))&&!(n=mi(this,{type:"add",object:this,newValue:t})))return this;if(!this.has(t)){ci((function(){e._data.add(e.enhancer(t,void 0)),e._atom.reportChanged()}));var i=le(),r=gi(this),n=r||i?{type:"add",object:this,newValue:t}:null;r&&yi(this,n)}return this},t.prototype.delete=function(t){var e=this;if(pi(this)&&!(n=mi(this,{type:"delete",object:this,oldValue:t})))return!1;if(this.has(t)){var i=le(),r=gi(this),n=r||i?{type:"delete",object:this,oldValue:t}:null;return ci((function(){e._atom.reportChanged(),e._data.delete(t)})),r&&yi(this,n),!0}return!1},t.prototype.has=function(t){return this._atom.reportObserved(),this._data.has(this.dehanceValue(t))},t.prototype.entries=function(){var t=0,e=w(this.keys()),i=w(this.values());return R({next:function(){var r=t;return t+=1,r<i.length?{value:[e[r],i[r]],done:!1}:{done:!0}}})},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){this._atom.reportObserved();var t,e=this,i=0;return void 0!==this._data.values?t=w(this._data.values()):(t=[],this._data.forEach((function(e){return t.push(e)}))),R({next:function(){return i<t.length?{value:e.dehanceValue(t[i++]),done:!1}:{done:!0}}})},t.prototype.replace=function(t){var e=this;return Bi(t)&&(t=t.toJS()),ci((function(){var i=Mt(!0);try{Array.isArray(t)||x(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!=t&&u("Cannot initialize set from "+t)}finally{Pt(i)}})),this},t.prototype.observe=function(t,e){return _i(this,t)},t.prototype.intercept=function(t){return fi(this,t)},t.prototype.toJS=function(){return new Set(this)},t.prototype.toString=function(){return this.name+"[ "+w(this.keys()).join(", ")+" ]"},t}();E(Pi.prototype,(function(){return this.values()})),_(Pi.prototype,D(),"Set");var Bi=y("ObservableSet",Pi),zi=function(){function t(t,e,i){this.target=t,this.name=e,this.defaultEnhancer=i,this.values={}}return t.prototype.read=function(t,e){return this.target===t||(this.illegalAccess(t,e),this.values[e])?this.values[e].get():void 0},t.prototype.write=function(t,e,i){var r=this.target;r!==t&&this.illegalAccess(t,e);var n=this.values[e];if(n instanceof Nt)n.set(i);else{if(pi(this)){if(!(a=mi(this,{type:"update",object:r,name:e,newValue:i})))return;i=a.newValue}if((i=n.prepareNewValue(i))!==Vt.UNCHANGED){var o=gi(this),s=le(),a=o||s?{type:"update",object:r,oldValue:n.value,name:e,newValue:i}:null;s&&ue(L(L({},a),{name:this.name,key:e})),n.setNewValue(i),o&&yi(this,a),s&&de()}}},t.prototype.remove=function(t){if(this.values[t]){var e=this.target;if(pi(this))if(!(o=mi(this,{object:e,name:t,type:"remove"})))return;try{Kt();var i=gi(this),r=le(),n=this.values[t].get();this.keys&&this.keys.remove(t),delete this.values[t],delete this.target[t];var o=i||r?{type:"remove",object:e,oldValue:n,name:t}:null;r&&ue(L(L({},o),{name:this.name,key:t})),i&&yi(this,o),r&&de()}finally{Qt()}}},t.prototype.illegalAccess=function(t,e){console.warn("Property '"+e+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(t,e){return _i(this,t)},t.prototype.intercept=function(t){return fi(this,t)},t.prototype.getKeys=function(){var t=this;return void 0===this.keys&&(this.keys=new Si(Object.keys(this.values).filter((function(e){return t.values[e]instanceof zt})),X,"keys("+this.name+")",!0)),this.keys.slice()},t}();function Li(t,e,i){void 0===e&&(e=""),void 0===i&&(i=Z);var r=t.$mobx;return r||(m(t)||(e=(t.constructor.name||"ObservableObject")+"@"+c()),e||(e="ObservableObject@"+c()),_(t,"$mobx",r=new zi(t,e,i)),r)}function Ni(t,e,i,r){var n=Li(t);if(pi(n)){var o=mi(n,{object:t,name:e,type:"add",newValue:i});if(!o)return;i=o.newValue}i=(n.values[e]=new zt(i,r,n.name+"."+e,!1)).value,Object.defineProperty(t,e,function(t){return Ui[t]||(Ui[t]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,t)},set:function(e){this.$mobx.write(this,t,e)}})}(e)),n.keys&&n.keys.push(e),function(t,e,i,r){var n=gi(t),o=le(),s=n||o?{type:"add",object:e,name:i,newValue:r}:null;o&&ue(L(L({},s),{name:t.name,key:i})),n&&yi(t,s),o&&de()}(n,t,e,i)}var Ui=Object.create(null),ji=Object.create(null);function Hi(t){return t.$mobx||(G(t),t.$mobx)}var Wi=y("ObservableObjectAdministration",zi);function Gi(t){return!!f(t)&&(G(t),Wi(t.$mobx))}function Vi(t,e){if("object"==typeof t&&null!==t){if(Di(t))return void 0!==e&&u(!1),t.$mobx.atom;if(Bi(t))return t.$mobx;if(Fi(t)){var i=t;return void 0===e?i._keysAtom:((r=i._data.get(e)||i._hasMap.get(e))||u(!1),r)}var r;if(G(t),e&&!t.$mobx&&t[e],Gi(t))return e?((r=t.$mobx.values[e])||u(!1),r):u(!1);if(A(t)||Ut(t)||ae(t))return t}else if("function"==typeof t&&ae(t.$mobx))return t.$mobx;return u(!1)}function $i(t,e){return t||u("Expecting some object"),void 0!==e?$i(Vi(t,e)):A(t)||Ut(t)||ae(t)||Fi(t)||Bi(t)?t:(G(t),t.$mobx?t.$mobx:void u(!1))}function Zi(t,e){return(void 0!==e?Vi(t,e):Gi(t)||Fi(t)||Bi(t)?$i(t):Vi(t)).name}var Xi=Object.prototype.toString;function Yi(t,e,i){return void 0===i&&(i=-1),qi(t,e,i)}function qi(t,e,i,r,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;if("function"!==o&&"object"!==o&&"object"!=typeof e)return!1;t=Ki(t),e=Ki(e);var s=Xi.call(t);if(s!==Xi.call(e))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e)}var a="[object Array]"===s;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var l=t.constructor,c=e.constructor;if(l!==c&&!("function"==typeof l&&l instanceof l&&"function"==typeof c&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1}if(0===i)return!1;i<0&&(i=-1),n=n||[];for(var u=(r=r||[]).length;u--;)if(r[u]===t)return n[u]===e;if(r.push(t),n.push(e),a){if((u=t.length)!==e.length)return!1;for(;u--;)if(!qi(t[u],e[u],i-1,r,n))return!1}else{var h=Object.keys(t),d=void 0;if(u=h.length,Object.keys(e).length!==u)return!1;for(;u--;)if(!Qi(e,d=h[u])||!qi(t[d],e[d],i-1,r,n))return!1}return r.pop(),n.pop(),!0}function Ki(t){return Di(t)?t.peek():b(t)||Fi(t)||x(t)||Bi(t)?w(t.entries()):t}function Qi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Ji="$mobx";"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:pe,extras:{getDebugName:Zi},$mobx:Ji})})),p=(0,r.R)(((t,e)=>{var r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,l="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),h=Object.prototype.toString,d=Math.max,p=Math.min,f=function(){return u.Date.now()};function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==h.call(t)}(t))return NaN;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var i=o.test(t);return i||s.test(t)?a(t.slice(2),i?2:8):n.test(t)?NaN:+t}e.exports=function(t,e,i){var r,n,o,s,a,l,c=0,u=!1,h=!1,_=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var i=r,o=n;return r=n=void 0,c=e,s=t.apply(o,i)}function v(t){return c=t,a=setTimeout(x,e),u?y(t):s}function b(t){var i=t-l;return void 0===l||i>=e||i<0||h&&t-c>=o}function x(){var t=f();if(b(t))return w(t);a=setTimeout(x,function(t){var i=e-(t-l);return h?p(i,o-(t-c)):i}(t))}function w(t){return a=void 0,_&&r?y(t):(r=n=void 0,s)}function S(){var t=f(),i=b(t);if(r=arguments,n=this,l=t,i){if(void 0===a)return v(l);if(h)return a=setTimeout(x,e),y(l)}return void 0===a&&(a=setTimeout(x,e)),s}return e=g(e)||0,m(i)&&(u=!!i.leading,o=(h="maxWait"in i)?d(g(i.maxWait)||0,e):o,_="trailing"in i?!!i.trailing:_),S.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=l=n=a=void 0},S.flush=function(){return void 0===a?s:w(f())},S}})),f=(0,r.R)(((t,e)=>{var r="Expected a function",n=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,u="object"==typeof self&&self&&self.Object===Object&&self,h=c||u||Function("return this")(),d=Object.prototype.toString,p=Math.max,f=Math.min,m=function(){return h.Date.now()};function g(t,e,i){var n,o,s,a,l,c,u=0,h=!1,d=!1,g=!0;if("function"!=typeof t)throw new TypeError(r);function v(e){var i=n,r=o;return n=o=void 0,u=e,a=t.apply(r,i)}function b(t){return u=t,l=setTimeout(w,e),h?v(t):a}function x(t){var i=t-c;return void 0===c||i>=e||i<0||d&&t-u>=s}function w(){var t=m();if(x(t))return S(t);l=setTimeout(w,function(t){var i=e-(t-c);return d?f(i,s-(t-u)):i}(t))}function S(t){return l=void 0,g&&n?v(t):(n=o=void 0,a)}function k(){var t=m(),i=x(t);if(n=arguments,o=this,c=t,i){if(void 0===l)return b(c);if(d)return l=setTimeout(w,e),v(c)}return void 0===l&&(l=setTimeout(w,e)),a}return e=y(e)||0,_(i)&&(h=!!i.leading,s=(d="maxWait"in i)?p(y(i.maxWait)||0,e):s,g="trailing"in i?!!i.trailing:g),k.cancel=function(){void 0!==l&&clearTimeout(l),u=0,n=c=o=l=void 0},k.flush=function(){return void 0===l?a:S(m())},k}function _(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function y(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==d.call(t)}(t))return NaN;if(_(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=_(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var i=s.test(t);return i||a.test(t)?l(t.slice(2),i?2:8):o.test(t)?NaN:+t}e.exports=function(t,e,i){var n=!0,o=!0;if("function"!=typeof t)throw new TypeError(r);return _(i)&&(n="leading"in i?!!i.leading:n,o="trailing"in i?!!i.trailing:o),g(t,e,{leading:n,maxWait:e,trailing:o})}}));class m{constructor(){this.enabled=!0,this.threshold=20,this.snapToHorizontalCenter=!0,this.snapToVerticalCenter=!0,this.snapToLeft=.1,this.snapToRight=.1,this.snapToTop=.1,this.snapToBottom=.1}}class g{constructor(){this.enabled=!0,this.threshold=20,this.angles=[0,45,90,135,180,225,270,315]}}const _={};(0,r.T)(_,{isMobile:()=>r.A});const y=r.W,v=(t,e,[i,r],n=0)=>{const o=t[e];if(o){if(o<i)return console.error(`${e} must be greater than or equal to ${i}`),i;if(o>r)return console.error(`${e} must be less than or equal to ${r}`),r}return o||n},b=(t,e,i=[1,1,1,1])=>{const r=t[e];let n=!0;return r&&r.forEach((t=>{t<0&&(console.error(`${t} in ${e} must be greater than or equal to 0`),n=!1),t>1&&(console.error(`${t} in ${e} must be less than or equal to 1`),n=!1)})),n&&r||i},x=({rotation:t,flipHorizontally:e,flipVertically:i})=>{let n=t;return e&&(n=(0,r.o)(n)),i&&(n=(t=>-t)(n)),n};class w{constructor(t){this.isEmpty=!1,this.isValid=!1,this.isWhiteLabel=()=>this.isValid&&this.licenseChecker.isWhiteLabel(),this.areCustomAssetsAllowed=()=>this.isEmpty||this.isValid&&this.licenseChecker.areCustomAssetsAllowed(),t&&0!==t.length?(this.licenseChecker=new r.S.LicenseChecker(t),this.isValid=this.licenseChecker.validate()):""===t&&(this.isEmpty=!0)}isToolAllowed(t){return!this.licenseChecker||!this.isValid||this.licenseChecker.isToolAllowed(t)}}const S=t=>{let e=Number(t).toString(16);return e.length<2&&(e=`0${e}`),e},k=(t,e,i)=>`#${S(255*t)}${S(255*e)}${S(255*i)}`,C=t=>{if((0,r.O)(t)){const[e,i,r,n]=t;return`rgba(${255*e}, ${255*i}, ${255*r}, ${n})`}if((0,r.M)(t)){const{r:e,g:i,b:r,a:n}=t;return`rgba(${255*e}, ${255*i}, ${255*r}, ${n})`}if((0,r.J)(t)){const[e,i,r]=t;return k(e,i,r)}if((0,r.y)(t)){const{r:e,g:i,b:r}=t;return k(e,i,r)}return t},T=t=>t.map((t=>({identifier:t.name,color:t.color,colorString:C(t.color)}))),E={black:[0,0,0,1],white:[1,1,1,1],gray:[191/255,191/255,191/255,1],blue:[.4,134/255,1,1],skyBlue:[.4,.8,1,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[1,247/255,99/255,1]},R={transparent:[0,0,0,0],black:[0,0,0,1],white:[1,1,1,1],blue:[.4,134/255,1,1],skyBlue:[.4,.8,1,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[1,247/255,99/255,1]},D=[r.c.LIBRARY,[r.c.TRANSFORM,r.c.FILTER,r.c.ADJUSTMENT],[r.c.FOCUS,r.c.FRAME,r.c.OVERLAY],[r.c.TEXT,r.c.TEXT_DESIGN,r.c.STICKER,r.c.BRUSH]],I={license:"",order:"default",language:"en",theme:"dark",layout:"advanced",mainCanvasActions:[r.a.UNDO,r.a.REDO,r.a.EXPORT,r.a.CLOSE],displayResizeWarning:!1,displayCloseWarning:!0,displayCanvasRendererWarning:!0,displayToolControlBarTitle:!0,engine:{crossOrigin:"anonymous",downscaleOptions:{maxMegaPixels:{desktop:10,mobile:5}},preferredRenderer:(()=>{const t=document.createElement("canvas"),e=t.getContext("webgl")||t.getContext("experimental-webgl");return e&&e instanceof WebGLRenderingContext})()?"webgl":"canvas"},enableZoom:!0,forceCrop:!1,assetBaseUrl:"assets/",defaultTool:r.c.FILTER,tools:D,snapping:new class{constructor(){this.position=new m,this.rotation=new g}},filter:new class{constructor(){this.categories=[],this.flattenCategories=!1,this.categoryHeaderType=r.b.CARD,this.enablePreviewThumbnails=!1}},focus:new class{constructor(){this.items=[]}},adjustment:new class{constructor(){this.categories=[],this.flattenCategories=!1}},library:new class{constructor(){this.enableWebcam=!1,this.enableUpload=!1,this.flattenCategories=!1,this.categoryHeaderType=r.b.CARD}},overlay:new class{constructor(){this.items=[]}},sticker:new class{constructor(){this.categories=[],this.canvasActions=[r.a.BRING_TO_FRONT,r.a.FLIP,r.a.DUPLICATE,r.a.DELETE],this.flattenCategories=!1,this.categoryHeaderType=r.b.CARD,this.enableCustomUpload=!0,this.customStickerTintMode="none"}},text:new class{constructor(){this.fonts=[],this.canvasActions=[r.a.EDIT,r.a.BRING_TO_FRONT,r.a.DUPLICATE,r.a.DELETE],this.disableAutoScaling=!1}},textdesign:new class{constructor(){this.items=[],this.canvasActions=[r.a.EDIT,r.a.BRING_TO_FRONT,r.a.INVERT,r.a.DUPLICATE,r.a.DELETE]}},frame:new class{constructor(){this.items=[]}},brush:new class{constructor(){this.defaultSize=.05,this.defaultHardness=.5}},transform:new class{constructor(){this.categories=[],this.enableRotation=!0,this.enableFlip=!0,this.flattenCategories=!1,this.categoryHeaderType=r.b.TEXT}},export:{image:{exportType:r.d.IMAGE,format:r.e.PNG,quality:.9,enableDownload:!0},filename:"photoeditorsdk-export"},custom:{}},O={[r.i.BRIGHTNESS]:0,[r.i.SATURATION]:0,[r.i.CONTRAST]:0,[r.i.GAMMA]:0,[r.i.CLARITY]:0,[r.i.EXPOSURE]:0,[r.i.SHADOWS]:0,[r.i.HIGHLIGHTS]:0,[r.i.WHITES]:0,[r.i.BLACKS]:0,[r.i.TEMPERATURE]:0,[r.i.SHARPNESS]:0},A=(0,r.U)(d()),F=(0,r.U)(d()),M=(0,r.U)(d());class P{constructor(){this.snapshots=[],this.observeIndex=M.observable.box(-1)}addSnapshot(t){this.index===this.snapshots.length-1?this.snapshots=this.snapshots.concat(JSON.stringify(t)):this.snapshots=[...this.snapshots.slice(0,this.index+1),JSON.stringify(t)],this.observeIndex.set(this.snapshots.length-1)}getCurrentState(){return this.snapshots[this.index]}reset(){this.snapshots=[],this.observeIndex.set(-1)}undo(){return this.canUndo?(this.observeIndex.set(this.index-1),JSON.parse(this.getCurrentState())):null}redo(){return this.canRedo?(this.observeIndex.set(this.index+1),JSON.parse(this.getCurrentState())):null}discardSnapshotsfromIndex(t){t>0&&t<this.snapshots.length-1&&(this.snapshots=this.snapshots.slice(0,t),this.observeIndex.set(this.snapshots.length-1))}get index(){return this.observeIndex.get()}get canUndo(){return this.index>0}get canRedo(){return this.snapshots.length-1>this.index}}var B,z;h([M.computed],P.prototype,"index",1),h([M.computed],P.prototype,"canUndo",1),h([M.computed],P.prototype,"canRedo",1),(z=B||(B={})).ADD="add",z.EDIT="edit",z.DELETE="delete";class L{constructor(t){this.localTransformStartIndex=null,this.awaitHistoryChange=!1,this.isDirtySinceSave=!1,this.undo=()=>(0,r.Z)(this,null,(function*(){if(!this.awaitHistoryChange){this.awaitHistoryChange=!0;const t=this.appHistoryManager.undo();yield this.applyState(t),this.awaitHistoryChange=!1,this.canUndo||(this.isDirtySinceSave=!1)}})),this.redo=()=>(0,r.Z)(this,null,(function*(){if(!this.awaitHistoryChange){this.awaitHistoryChange=!0;const t=this.appHistoryManager.redo();yield this.applyState(t),this.awaitHistoryChange=!1}})),this.editor=t,this.appHistoryManager=new P}get canUndo(){return this.appHistoryManager.canUndo}get canRedo(){return this.appHistoryManager.canRedo}getHistoryState(){const t=F.toJS(this.editor.adjustmentsToolStore.state),e=F.toJS(this.editor.filterToolStore.state),i=this.editor.focusToolStore.getFocusStateForHistory(),n=F.toJS(this.editor.overlayToolStore.state),o=F.toJS(this.editor.frameToolStore.state),s=this.editor.brushToolStore.strokes||{strokes:[]},a=this.editor.spriteStore.getSpriteHistoryState(),l=this.editor.transformToolStore.serializableState;return{[r.c.ADJUSTMENT]:t,[r.c.FILTER]:e,[r.c.FOCUS]:i,[r.c.OVERLAY]:n,[r.c.FRAME]:o,[r.c.BRUSH]:s,sprite:a,[r.c.TRANSFORM]:l}}addInitialSnapshot(){const t=this.getHistoryState();this.appHistoryManager.addSnapshot({state:t,type:B.ADD,description:"Initial State"})}addSnapshot(t=this.getHistoryState(),e,i){t&&((t.sprite||t.transform)&&(t=(0,r.N)((0,r.N)({},this.getHistoryState()),t)),this.appHistoryManager.addSnapshot({state:t,type:e,description:i}),this.editor.configStore.events.onHistoryChange(),this.isDirtySinceSave||(this.isDirtySinceSave=!0))}saveTransformLocalSnapshotIndex(){null===this.localTransformStartIndex&&(this.localTransformStartIndex=this.appHistoryManager.snapshots.length)}removeTransformLocalSnapshots(){null!==this.localTransformStartIndex&&(this.appHistoryManager.discardSnapshotsfromIndex(this.localTransformStartIndex-1),this.localTransformStartIndex=null)}applyState(t){return(0,r.Z)(this,arguments,(function*({state:t}){try{if(t){const e=Object.keys(t);for(const i of e)switch(i){case r.c.FILTER:yield this.editor.filterToolStore.updateStateFromHistory(t[i]);break;case r.c.ADJUSTMENT:yield this.editor.adjustmentsToolStore.updateStateFromHistory(t[i]);break;case r.c.OVERLAY:yield this.editor.overlayToolStore.updateStateFromHistory(t[i]);break;case r.c.FRAME:yield this.editor.frameToolStore.updateStateFromHistory(t[i]);break;case r.c.FOCUS:yield this.editor.focusToolStore.updateStateFromHistory(t[i],this.editor.canvasStore.sizeVector);break;case r.c.BRUSH:yield this.editor.brushToolStore.updateStateFromHistory(t[i]);break;case"sprite":yield this.editor.spriteStore.updateStateFromHistory(t[i]);break;case"localTransform":yield this.editor.transformToolStore.updateLocalStateFromHistory(t.localTransform);break;case r.c.TRANSFORM:this.editor.outputContainer.pauseChildrenUpdates(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(t[i],!1),this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.onLeave(),this.editor.outputContainer.resumeChildrenUpdates(),yield this.editor.wait()}yield this.editor.renderPromise()}}catch(t){console.error(t),this.editor.modalStore.showActionModal({type:r.E.ERROR,identifier:"unexpectedError",error:t,handleConfirm:()=>{window.location.reload()}})}}))}isDirty(){return this.appHistoryManager.snapshots.length>1}reset(){this.appHistoryManager.reset(),this.isDirtySinceSave=!1}}h([F.action],L.prototype,"undo",2),h([F.action],L.prototype,"redo",2),h([F.computed],L.prototype,"canUndo",1),h([F.computed],L.prototype,"canRedo",1);class N{constructor(t,e){this.assets=[],this.entityMapper=t=>"items"in t?this.categoryMapper(t):this.itemMapper(t),this.categoryMapper=t=>t?(0,r.N)((0,r.N)({},t),{thumbnailURI:this.getCategoryURI(t),name:this.config.locale[t.identifier]||t.name,items:t.items.map(this.itemMapper)}):null,this.itemMapper=t=>(0,r.N)((0,r.N)({},t),{thumbnailURI:this.getItemURI(t),name:this.config.locale[t.identifier]||("name"in t?t.name:"")}),this.getCategoryURI=t=>t.thumbnailURI&&((0,r.r)(t.thumbnailURI)||"data:image"===t.thumbnailURI.substr(0,10))?t.thumbnailURI:this.config.getAssetPath(t[this.config.categoryKey]||""),this.getItemURI=t=>"thumbnailURI"in t&&((0,r.r)(t.thumbnailURI)||"data:image"===t.thumbnailURI.substr(0,10))?t.thumbnailURI:this.config.getAssetPath(t[this.config.itemKey]||""),this.config=e,this.assets=t.map(this.entityMapper).filter(Boolean)}static isCategory(t){return Object.prototype.hasOwnProperty.call(t,"items")}get categories(){return this.assets.reduce(((t,e)=>N.isCategory(e)?[...t,e]:void 0),[]).filter(Boolean)}get items(){return this.assets.reduce(((t,e)=>N.isCategory(e)?[...t,...e.items]:[...t,e]),[]).filter(Boolean)}}const U=(0,r.U)(d());class j{constructor(t,e){this.from=t,this.to=e}contains(t){return this.from<=t&&t<=this.to}clamp(t){return Math.min(Math.max(this.from,t),this.to)}}const H=new j(-1,1);class W{constructor(t){this.editAdjustments=({type:t,value:e})=>{const i=H.clamp(e);this.state[t]=i},this.reset=()=>{U.runInAction((()=>{-1===this.indexInContainer&&(Object.keys(O).forEach((t=>{this.state[t]=O[t]})),this.orderHelper.removeIndex(r.c.ADJUSTMENT))}))},this.setAdjustmentEffect=t=>{const e=this.orderHelper.addIndex(r.c.ADJUSTMENT);return this.effect?this.effect.setProperties(t):this.effect=this.engineMediator.engine.addAdjustments(t,this.engineMediator.image.container,e),this.effect.getProperties()},this.removeAdjustmentEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),-1===this.indexInContainer&&(this.effect=void 0))},this.engineMediator=t,this.state=O}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}get orderHelper(){return this.engineMediator.orderHelper}}h([U.observable],W.prototype,"state",2),h([U.action],W.prototype,"editAdjustments",2),h([U.action],W.prototype,"reset",2);class G{constructor(t){this.dirty=A.observable.box(!1),this.editAdjustments=({type:t,value:e})=>{this.pureSetAdjustment({type:t,value:e}),this.editor.render()},this.toolSnapshot=()=>{this.dirty.set(!0),this.addSnapshot(B.EDIT,r.c.ADJUSTMENT)},this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)},this.toggleOptionSelection=t=>{this.selectedOption=t},this.pureSetAdjustment=({type:t,value:e})=>{const i=this.adjustmentsStore.setAdjustmentEffect({[t]:e});this.adjustmentsStore.editAdjustments({type:t,value:i[t]})},this.pureReset=()=>{this.dirty.set(!1),this.adjustmentsStore.removeAdjustmentEffect(),this.adjustmentsStore.reset(),this.selectedOption=""},this.reset=()=>{this.pureReset(),this.addSnapshot(B.DELETE,this.locale.controls.buttonReset),this.editor.render()},this.updateStateFromHistory=t=>{A.runInAction((()=>{Object.keys(t).forEach((e=>{this.pureSetAdjustment({type:e,value:t[e]})}))}))},this.updateStateFromSerialization=t=>{this.updateStateFromHistory(t)},this.editor=t,this.adjustmentsStore=new W(this.editor.engineMediator),this.selectedOption="";const e=this.editor.assetProvider.getAssets("adjustment");this.entityManager=new N(e,(0,r.N)((0,r.N)({},this.config),{categoryKey:"",itemKey:"thumbnailURI",locale:(0,r.N)((0,r.N)({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("adjustment")}))}get selectedAdjustmentType(){return this.selectedOption}get isDirty(){return this.dirty.get()}get state(){return this.adjustmentsStore.state}get selectedOptionLabel(){const t=this.items.find((t=>!!t&&t.identifier===this.selectedOption));return t?t.name:""}get brightness(){return this.state.brightness}get saturation(){return this.state.saturation}get contrast(){return this.state.contrast}get gamma(){return this.state.gamma}get clarity(){return this.state.clarity}get exposure(){return this.state.exposure}get shadows(){return this.state.shadows}get highlights(){return this.state.highlights}get whites(){return this.state.whites}get blacks(){return this.state.blacks}get temperature(){return this.state.temperature}get sharpness(){return this.state.sharpness}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config[r.c.ADJUSTMENT]}get locale(){return this.editor.configStore.locale[r.c.ADJUSTMENT]}}h([A.observable],G.prototype,"selectedOption",2),h([A.observable],G.prototype,"dirty",2),h([A.action],G.prototype,"editAdjustments",2),h([A.action],G.prototype,"toggleOptionSelection",2),h([A.action],G.prototype,"pureSetAdjustment",2),h([A.action],G.prototype,"pureReset",2),h([A.action],G.prototype,"reset",2),h([A.action],G.prototype,"updateStateFromHistory",2),h([A.action],G.prototype,"updateStateFromSerialization",2),h([A.computed],G.prototype,"selectedAdjustmentType",1),h([A.computed],G.prototype,"isDirty",1),h([A.computed],G.prototype,"state",1),h([A.computed],G.prototype,"selectedOptionLabel",1),h([A.computed],G.prototype,"brightness",1),h([A.computed],G.prototype,"saturation",1),h([A.computed],G.prototype,"contrast",1),h([A.computed],G.prototype,"gamma",1),h([A.computed],G.prototype,"clarity",1),h([A.computed],G.prototype,"exposure",1),h([A.computed],G.prototype,"shadows",1),h([A.computed],G.prototype,"highlights",1),h([A.computed],G.prototype,"whites",1),h([A.computed],G.prototype,"blacks",1),h([A.computed],G.prototype,"temperature",1),h([A.computed],G.prototype,"sharpness",1),h([A.computed],G.prototype,"categories",1),h([A.computed],G.prototype,"items",1),h([A.computed],G.prototype,"config",1),h([A.computed],G.prototype,"locale",1);const V=(0,r.U)(d()),$=(0,r.U)(d()),Z={identifier:"identity",intensity:1,isDuotone:!1},X=new j(0,1);class Y{constructor(t){this.changeIdentifier=t=>{this.state.identifier=t},this.changeIfDuotone=t=>{this.state.isDuotone=t},this.changeIntensity=t=>{const e=X.clamp(t);this.state.intensity=e},this.reset=()=>{-1===this.indexInContainer&&(this.state.identifier=Z.identifier,this.state.intensity=Z.intensity,this.removeIndex())},this.setFilterEffect=({identifier:t,intensity:e,isDuotone:i})=>{const n=this.state;this.changeIdentifier(t),this.changeIntensity(e),this.changeIfDuotone(i),this.removeFilterEffect();const o=this.engineMediator.orderHelper.addIndex(r.c.FILTER);return new Promise(i?(i,r)=>{this.engineMediator.engine.addDuoToneFilterFromAssets(t,this.engineMediator.image.container,o).then((t=>{this.effect=t,this.effect.setProperties({colorIntensity:e}),i()})).catch((t=>{this.fallbackOnError(n),r(t)}))}:(i,r)=>{this.engineMediator.engine.addLUTFilterFromAssets(t,this.engineMediator.image.container,o).then((t=>{this.effect=t,this.effect.setProperties({intensity:e}),i()})).catch((t=>{this.fallbackOnError(n),r(t)}))})},this.removeFilterEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),-1===this.indexInContainer&&(this.effect=void 0))},this.setEffectProperties=({intensity:t})=>this.effect?(this.state.isDuotone?this.effect.setProperties({colorIntensity:t}):this.effect.setProperties({intensity:t}),this.effect.getProperties()):null,this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex(r.c.FILTER)},this.fallbackOnError=t=>{this.changeIdentifier(t.identifier),this.changeIntensity(t.intensity),"identity"===t.identifier&&this.removeIndex()},this.engineMediator=t,this.state=Z}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}}h([$.observable],Y.prototype,"state",2),h([$.action],Y.prototype,"changeIdentifier",2),h([$.action],Y.prototype,"changeIfDuotone",2),h([$.action],Y.prototype,"changeIntensity",2),h([$.action],Y.prototype,"reset",2);const q="identity";class K{constructor(t){this.selectFilter=(t,e=1)=>(0,r.Z)(this,null,(function*(){t!==this.identifier&&(yield this.filterStore.setFilterEffect({identifier:t,intensity:e,isDuotone:this.isOptionDuoTone(t)}),this.editor.render(),this.addSnapshot(B.ADD,r.c.FILTER))})),this.changeIntensity=t=>{const e=this.isOptionDuoTone(this.identifier),i=this.filterStore.setEffectProperties({intensity:t});if(i){const t=e?i.colorIntensity:i.intensity;this.filterStore.changeIntensity(t),this.editor.render()}},this.setImageAndGetPreviews=()=>(0,r.Z)(this,null,(function*(){const{image:t}=this.editor.activeStore.state;yield this.editor.previewThumbnails.addImageToContainer(t),yield this.getAllFilterPreview()})),this.getAllFilterPreview=()=>(0,r.Z)(this,null,(function*(){const t=this.entityManager.items.map((t=>({identifier:t.identifier,isDuotone:this.isOptionDuoTone(t.identifier)}))),e=yield this.editor.previewThumbnails.getAllFilterPreviewThumbnails(t);yield this.editor.wait();const{config:i}=this,n=this.editor.configStore.assetProvider.getAssets("filter").map((t=>(0,r.N)((0,r.N)({},t),{items:t.items.map((t=>(0,r.N)((0,r.N)({},t),{thumbnailURI:e[t.identifier]})))})));this.entityManager=new N(n,(0,r.N)((0,r.N)({},i),{categoryKey:"thumbnailURI",itemKey:"thumbnailURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")}))})),this.toolSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.controls.sliderIntensity)},this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)},this.pureReset=()=>{this.selectedCategory=q,this.filterStore.removeFilterEffect(),this.filterStore.reset()},this.reset=()=>{this.pureReset(),this.addSnapshot(B.DELETE,this.locale.controls.buttonReset),this.editor.render()},this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory===t?q:t},this.updateStateFromSerialization=({identifier:t,intensity:e})=>{const i=this.doesFilterAssetExist(t);if(i){const n=(0,r.G)(i);return this.filterStore.setFilterEffect({identifier:t,intensity:e,isDuotone:n})}return new Promise(((e,i)=>{i(new Error(`Filter Asset ${t} doesn't exist`))}))},this.updateStateFromHistory=t=>(0,r.Z)(this,null,(function*(){return"identity"===t.identifier?(this.pureReset(),new Promise((t=>{t()}))):this.filterStore.setFilterEffect(t)})),this.doesFilterAssetExist=t=>this.entityManager.items.find((e=>t===e.identifier)),this.isOptionDuoTone=t=>{const e=this.doesFilterAssetExist(t);return!!e&&(0,r.G)(e)},this.editor=t,this.selectedCategory=q,this.filterStore=new Y(this.editor.engineMediator);const{config:e}=this,i=this.editor.configStore.assetProvider.getAssets("filter");this.entityManager=new N(i,(0,r.N)((0,r.N)({},e),{categoryKey:"thumbnailURI",itemKey:"thumbnailURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")}))}get state(){return this.filterStore.state}get identifier(){return this.state.identifier}get intensity(){return this.state.intensity}get isDuotone(){return this.state.isDuotone}get selectedCategoryIdentifier(){return this.selectedCategory}get isOptionSelected(){return"identity"!==this.identifier}get config(){return this.editor.configStore.config[r.c.FILTER]}get locale(){return this.editor.configStore.locale[r.c.FILTER]}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}}h([V.observable],K.prototype,"selectedCategory",2),h([V.observable],K.prototype,"entityManager",2),h([V.action],K.prototype,"selectFilter",2),h([V.action],K.prototype,"changeIntensity",2),h([V.action],K.prototype,"pureReset",2),h([V.action],K.prototype,"reset",2),h([V.action],K.prototype,"toggleCategorySelection",2),h([V.action],K.prototype,"updateStateFromSerialization",2),h([V.action],K.prototype,"updateStateFromHistory",2),h([V.computed],K.prototype,"state",1),h([V.computed],K.prototype,"identifier",1),h([V.computed],K.prototype,"intensity",1),h([V.computed],K.prototype,"isDuotone",1),h([V.computed],K.prototype,"selectedCategoryIdentifier",1),h([V.computed],K.prototype,"isOptionSelected",1),h([V.computed],K.prototype,"config",1),h([V.computed],K.prototype,"locale",1),h([V.computed],K.prototype,"categories",1),h([V.computed],K.prototype,"items",1);const Q=(0,r.U)(d()),J=(0,r.U)(d());function tt(t){return t&&"object"==typeof t&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function et(t,e){return e&&!0===e.clone&&tt(t)?it(function(t){return Array.isArray(t)?[]:{}}(t),t,e):t}function it(t,e,i){return Array.isArray(e)?Array.isArray(t)?e:et(e,i):function(t,e,i){const r={};return tt(t)&&Object.keys(t).forEach((e=>{r[e]=et(t[e],i)})),Object.keys(e).forEach((n=>{const o=tt(e[n])&&t[n];r[n]=o?it(t[n],e[n],i):et(e[n],i)})),r}(t,e,i)}function rt(t,e=null){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce(((t,i)=>it(t,i,e)))}class nt extends r.g{onExport(t){this.emit(r.h.EXPORT,t)}onClose(){this.emit(r.h.CLOSE)}onHistoryChange(){this.emit(r.h.HISTORY_CHANGE)}onEditorReady(){this.emit(r.h.EDITOR_READY)}onErrorImageLoading(t){this.emit(r.h.ERROR_IMAGE_LOADING,t)}onImageLoaded(){this.emit(r.h.IMAGE_LOAD)}onStickerUploadedAdd(t){this.emit(r.h.STICKER_UPLOAD_ADD,t)}onToolChanged(t){this.emit(r.h.TOOL_ENTER,t)}}const ot={common:{error:"Fehler",warning:"Warnung",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Farbe",sliderOpacity:"Farbe Transparenz"}}},mainCanvasActions:{buttonExport:"Bild Exportieren",buttonUndo:"Rückgängig machen",buttonRedo:"Wiederholen",buttonClose:"Schließen"},infoModals:{exporting:{heading:"Exportieren...",body:"Einen Moment bitte..."},saving:{heading:"Speichere...",body:"Einen Moment bitte..."},loading:{heading:"Lade...",body:"Einen Moment bitte..."},resizing:{heading:"Bild wird bearbeitet...",body:"Einen Moment bitte..."},loadingFonts:{heading:"Lade Schriftarten...",body:"Einen Moment bitte..."},stickerLoading:{heading:"Lade Sticker...",body:"Einen Moment bitte..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Gründe haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht unterstützt",buttonYes:"Neu Laden"},rendering:{headingDelimiter:":",body:"Beim Rendern des Bildes ist ein Fehler aufgetreten",buttonYes:"Neu Laden"},fontLoading:{headingDelimiter:":",heading:"Laden von Schriftarten ist fehlgeschlagen",body:"Die folgenden Schriftarten konnten nicht geladen werden: ${error}",buttonNo:"Schließen"},webcamUnavailable:{headingDelimiter:":",body:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})",buttonYes:"Schließen"},stickerLoading:{headingDelimiter:":",body:"Laden des Stickers fehlgeschlagen.",buttonNo:"Schließen"},unexpectedError:{headingDelimiter:":",body:"Ein unerwarteter Fehler ist aufgetreten, ${error}",buttonYes:"Neu Laden"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Bild verkleinert",body:"Ihr Bild übersteigt die maximale Grösse von ${megapixels} megapixels und wurde auf ${width}x${height} Pixel verkleinert",buttonYes:"Weiter"},discardChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die Änderungen verwerfen wollen?",buttonYes:"Änderungen verwerfen",buttonNo:"Änderungen beibehalten"},unsavedChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die Änderungen verwerfen wollen?",buttonYes:"Beenden ohne zu speichern",buttonNo:"Schließen"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Ihre Daten wurden von einem veralteten Format geladen und könnten anders aussehen",buttonYes:"Änderungen anwenden",buttonNo:"Abbrechen"},unsupportedWebGLRenderer:{body:"Es wurde ein Problem im Browser festgestellt, welches zu langen Ladezeiten führen kann. Bitte probieren sie einen anderen Browser.",buttonYes:"Weiter"}},library:{title:"Bibliothek",controls:{buttonUpload:"Bild Hochladen",buttonWebcamOpen:"Webcam Öffnen",buttonWebcamClose:"Webcam Schließen",placeholderSearch:"Bibliothek durchsuchen",noResults:"Keine Ergebnisse"}},filter:{title:"Filter",controls:{buttonReset:"Zurücksetzen",sliderIntensity:"Filter Intensität"},categories:{[r._.DuoTone]:"DuoTone",[r._.BW]:"B & W",[r._.Vintage]:"Vintage",[r._.Smooth]:"Smooth",[r._.Cold]:"Cold",[r._.Warm]:"Warm",[r._.Legacy]:"Legacy"},items:{[r.j.Inferno]:"Inferno",[r.j.Chestnut]:"Chestnut",[r.j.Fixie]:"Fixie",[r.j.Fridge]:"Fridge",[r.j.Sunny70s]:"Sunny 70s",[r.j.FlatBlack]:"Flat Black",[r.j.Mellow]:"Mellow",[r.j.HardStuff]:"Hard Stuff",[r.j.Oldtimer]:"Oldtimer",[r.j.AD1920]:"1920 A.D.",[r.j.Ancient]:"Ancient",[r.j.Kalmen]:"Kalmen",[r.j.Joran]:"Joran",[r.j.Polaroid]:"Polaroid",[r.j.Zephyr]:"Zephyr",[r.j.Levante]:"Levante",[r.j.Greyed]:"Greyed",[r.j.Classic]:"Classic",[r.j.Colorful]:"Colorful",[r.j.Snappy]:"Snappy",[r.j.Candy]:"Candy",[r.j.Creamy]:"Creamy",[r.j.LowFire]:"Low Fire",[r.j.Colla]:"Colla",[r.j.Sunrise]:"Sunrise",[r.j.Moss]:"Moss",[r.j.Food]:"Food",[r.j.Glam]:"Glam",[r.j.Gobblin]:"Gobblin",[r.j.HighCarb]:"High Carb",[r.j.Hicon]:"Hicon",[r.j.K1]:"K1",[r.j.K6]:"K6",[r.j.Pebble]:"Pebble",[r.j.Keen]:"Keen",[r.j.Lemon]:"Lemon",[r.j.Litho]:"Litho",[r.j.Lomo]:"Lomo",[r.j.Lomo100]:"Lomo 100",[r.j.Lucid]:"Lucid",[r.j.Neat]:"Neat",[r.j.Pumpkin]:"Pumpkin",[r.j.Solanus]:"Solanus",[r.j.Pale]:"Pale",[r.j.Pitched]:"Pitched",[r.j.Weathered]:"Weathered",[r.j.GreenGap]:"Green Gap",[r.j.PolaSX]:"Pola SX",[r.j.Pro400]:"Pro 400",[r.j.Quozi]:"Quozi",[r.j.Sepia]:"Sepia",[r.j.Settled]:"Settled",[r.j.Seventies]:"Seventies",[r.j.Soft]:"Soft",[r.j.Steel]:"Steel",[r.j.Summer]:"Summer",[r.j.Golden]:"Golden",[r.j.Tender]:"Tender",[r.j.Twilight]:"Twilight",[r.j.Softy]:"Softy",[r.j.Dusty]:"Dusty",[r.j.Desert]:"Desert",[r.j.Peach]:"Peach",[r.j.Clash]:"Clash",[r.j.Plum]:"Plum",[r.j.Breezy]:"Breezy",[r.j.DeepBlue]:"Deep Blue",[r.j.Frog]:"Frog",[r.j.Sunset]:"Sunset"}},adjustment:{title:"Korrekturen",controls:{buttonReset:"Zurücksetzen"},categories:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",saturation:"Sättigung",contrast:"Kontrast",gamma:"Gamma",sharpness:"Schärfe",clarity:"Klarheit",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",whites:"Weiß",blacks:"Schwarz",temperature:"Temperatur"}},focus:{title:"Weichzeichnen",controls:{buttonReset:"Zurücksetzen",sliderIntensity:"Focus Intensität"},items:{radial:"Kreisförmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gaußsch"},history:{focusPosition:"Focus Position",focusSize:"Focus Größe"}},overlay:{title:"Overlays",controls:{buttonReset:"Zurücksetzen",sliderOpacity:"Overlay Transparenz",carouselBlendMode:"Overlay Mischmodus",blendModeNormal:"Normal",blendModeOverlay:"Überblenden",blendModeHardLight:"Hartes Licht",blendModeSoftLight:"Weiches Licht",blendModeMultiply:"Multiplizieren",blendModeDarken:"Abdunkeln",blendModeLighten:"Aufhellen",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Transparenz",tabBlendMode:"Mischmodus"},items:{[r.m.Bokeh]:"Bokeh",[r.m.Chop]:"Chop",[r.m.Clouds]:"Clouds",[r.m.Golden]:"Golden",[r.m.Grain]:"Grain",[r.m.Hearts]:"Hearts",[r.m.LightLeak1]:"Light Leak 1",[r.m.LightLeak2]:"Light Leak 2",[r.m.Metal]:"Metal",[r.m.Mosaic]:"Mosaic",[r.m.Painting]:"Painting",[r.m.Paper]:"Paper",[r.m.Rain]:"Rain",[r.m.Vintage]:"Vintage",[r.m.Wall1]:"Wall",[r.m.Wall2]:"Wall 2",[r.m.Wood]:"Wood"}},sticker:{title:"Sticker",controls:{buttonUpload:"Sticker Hochladen",sliderOpacity:"Sticker Transparenz",selectColor:"Stickerfarbe",tabColor:"Farbe",tabOpacity:"Transparenz"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Löschen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren",buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"Neuer Text",dropdownFontFamily:"Schriftart",textFontSize:"Schriftgröße",selectAlignment:"Ausrichtung",selectFontColor:"Schriftfarbe",selectBackgroundColor:"Hintergrundfarbe",sliderLineSpacing:"Zeilenabstand",tabColor:"Farbe",tabBgColor:"Hintergrund",tabAlignment:"Ausrichtung",tabLineHeight:"Zeilenhöhe",tabFontSize:"Schriftgröße"},canvasControls:{placeholderText:"Etwas aufschreiben",buttonSave:"Fertig",buttonClose:"Abbrechen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonDelete:"Löschen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"Neues Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Textfarbe",tabColor:"Farbe",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Etwas aufschreiben mit Style",buttonSave:"Done",buttonClose:"Schließen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonInvert:"Invertieren",buttonDelete:"Löschen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Rahmen",controls:{buttonReset:"Zurücksetzen",sliderOpacity:"Rahmen Transparenz",sliderSize:"Rahmen Dicke",selectColor:"Rahmen Farbe",tabColor:"Farbe",tabOpacity:"Transparenz",tabSize:"Dicke"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Malen",controls:{buttonReset:"Zurücksetzen",sliderSize:"Dicke",sliderHardness:"Härte",selectColor:"Farbe",tabSize:"Dicke",tabHardness:"Härte",tabColor:"Farbe"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Zuschneiden",controls:{buttonReset:"Zurücksetzen",checkboxKeepResolution:"Fixiere Auflösung",inputCropSize:"Bildgröße",inputHeight:"h",inputWidth:"b",tabFlipAndRotate:"Spiegeln & Drehen",tabResolution:"Auflösung",tabCropSize:"Bildgröße"},categories:{imgly_transforms_common:"Standard",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Titel",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln",buttonRotateClockwise:"Drehe im Uhrzeigersinn",buttonRotateAntiClockwise:"Drehe gegen Uhrzeigersinn"}}},st={common:{error:"Error",warning:"Warning",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Color",sliderOpacity:"Color Opacity"}}},mainCanvasActions:{buttonExport:"Export Image",buttonUndo:"Undo",buttonRedo:"Redo",buttonClose:"Close"},infoModals:{exporting:{heading:"Exporting...",body:"Just a few seconds..."},saving:{heading:"Saving...",body:"Just a few seconds..."},loading:{heading:"Loading...",body:"Just a few seconds..."},resizing:{heading:"Resizing...",body:"Just a few seconds..."},loadingFonts:{heading:"Loading Fonts...",body:"Just a few seconds..."},stickerLoading:{heading:"Loading Sticker...",body:"Just a few seconds..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported",buttonYes:"Reload"},rendering:{headingDelimiter:":",body:"An error has occurred while rendering the image",buttonYes:"Reload"},fontLoading:{headingDelimiter:":",heading:"Failed to load font",body:"The following fonts could not be loaded: ${error}",buttonNo:"Close"},webcamUnavailable:{headingDelimiter:":",body:"Unable to display webcam image (Error: ${error})",buttonYes:"Close"},stickerLoading:{headingDelimiter:":",body:"Unable to load the sticker",buttonNo:"Close"},unexpectedError:{headingDelimiter:":",body:"An unexpected error has occured ${error}",buttonYes:"Reload"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Image resized",body:"Your image exceeds the maximum size of ${megapixels} megapixels and has been resized to ${width}x${height} pixels",buttonYes:"Continue"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Your data was restored from a legacy data format and might look different",buttonYes:"Apply changes",buttonNo:"Cancel"},discardChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to discard the changes?",buttonYes:"Discard changes",buttonNo:"Keep Changes"},unsavedChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to exit?",buttonYes:"Exit without saving",buttonNo:"Cancel"},unsupportedWebGLRenderer:{body:"A problem has been detected in the browser that could cause long loading times. Please try a different browser.",buttonYes:"Continue"}},library:{title:"Library",controls:{buttonUpload:"Upload Image",buttonWebcamOpen:"Open Webcam",buttonWebcamClose:"Close Webcam",placeholderSearch:"Search Library",noResults:"No Results"}},filter:{title:"Filters",controls:{buttonReset:"Remove Filter",sliderIntensity:"Filter Intensity"},categories:{[r._.DuoTone]:"DuoTone",[r._.BW]:"B & W",[r._.Vintage]:"Vintage",[r._.Smooth]:"Smooth",[r._.Cold]:"Cold",[r._.Warm]:"Warm",[r._.Legacy]:"Legacy"},items:{[r.j.Inferno]:"Inferno",[r.j.Chestnut]:"Chestnut",[r.j.Fixie]:"Fixie",[r.j.Fridge]:"Fridge",[r.j.Sunny70s]:"Sunny 70s",[r.j.FlatBlack]:"Flat Black",[r.j.Mellow]:"Mellow",[r.j.HardStuff]:"Hard Stuff",[r.j.Oldtimer]:"Oldtimer",[r.j.AD1920]:"1920 A.D.",[r.j.Ancient]:"Ancient",[r.j.Kalmen]:"Kalmen",[r.j.Joran]:"Joran",[r.j.Polaroid]:"Polaroid",[r.j.Zephyr]:"Zephyr",[r.j.Levante]:"Levante",[r.j.Greyed]:"Greyed",[r.j.Classic]:"Classic",[r.j.Colorful]:"Colorful",[r.j.Snappy]:"Snappy",[r.j.Candy]:"Candy",[r.j.Creamy]:"Creamy",[r.j.LowFire]:"Low Fire",[r.j.Colla]:"Colla",[r.j.Sunrise]:"Sunrise",[r.j.Moss]:"Moss",[r.j.Food]:"Food",[r.j.Glam]:"Glam",[r.j.Gobblin]:"Gobblin",[r.j.HighCarb]:"High Carb",[r.j.Hicon]:"Hicon",[r.j.K1]:"K1",[r.j.K6]:"K6",[r.j.Pebble]:"Pebble",[r.j.Keen]:"Keen",[r.j.Lemon]:"Lemon",[r.j.Litho]:"Litho",[r.j.Lomo]:"Lomo",[r.j.Lomo100]:"Lomo 100",[r.j.Lucid]:"Lucid",[r.j.Neat]:"Neat",[r.j.Pumpkin]:"Pumpkin",[r.j.Solanus]:"Solanus",[r.j.Pale]:"Pale",[r.j.Pitched]:"Pitched",[r.j.Weathered]:"Weathered",[r.j.GreenGap]:"Green Gap",[r.j.PolaSX]:"Pola SX",[r.j.Pro400]:"Pro 400",[r.j.Quozi]:"Quozi",[r.j.Sepia]:"Sepia",[r.j.Settled]:"Settled",[r.j.Seventies]:"Seventies",[r.j.Soft]:"Soft",[r.j.Steel]:"Steel",[r.j.Summer]:"Summer",[r.j.Golden]:"Golden",[r.j.Tender]:"Tender",[r.j.Twilight]:"Twilight",[r.j.Softy]:"Softy",[r.j.Dusty]:"Dusty",[r.j.Desert]:"Desert",[r.j.Peach]:"Peach",[r.j.Clash]:"Clash",[r.j.Plum]:"Plum",[r.j.Breezy]:"Breezy",[r.j.DeepBlue]:"Deep Blue",[r.j.Frog]:"Frog",[r.j.Sunset]:"Sunset"}},adjustment:{title:"Adjust",controls:{buttonReset:"Reset Adjustment"},categories:{basics:"Basic",refinements:"Refinements"},items:{brightness:"Brightness",saturation:"Saturation",contrast:"Contrast",gamma:"Gamma",sharpness:"Sharpness",clarity:"Clarity",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",whites:"Whites",blacks:"Blacks",temperature:"Temperature"}},focus:{title:"Focus",controls:{buttonReset:"Remove Focus",sliderIntensity:"Focus Intensity"},items:{radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"},history:{focusPosition:"Focus Position",focusSize:"Focus Size"}},overlay:{title:"Overlays",controls:{buttonReset:"Remove Overlay",sliderOpacity:"Overlay Opacity",carouselBlendMode:"Overlay Blend mode",blendModeNormal:"Normal",blendModeOverlay:"Overlay",blendModeHardLight:"Hard Light",blendModeSoftLight:"Soft Light",blendModeMultiply:"Multiply",blendModeDarken:"Darken",blendModeLighten:"Lighten",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Opacity",tabBlendMode:"Blend Mode"},items:{[r.m.Bokeh]:"Bokeh",[r.m.Chop]:"Chop",[r.m.Clouds]:"Clouds",[r.m.Golden]:"Golden",[r.m.Grain]:"Grain",[r.m.Hearts]:"Hearts",[r.m.LightLeak1]:"Light Leak 1",[r.m.LightLeak2]:"Light Leak 2",[r.m.Metal]:"Metal",[r.m.Mosaic]:"Mosaic",[r.m.Painting]:"Painting",[r.m.Paper]:"Paper",[r.m.Rain]:"Rain",[r.m.Vintage]:"Vintage",[r.m.Wall1]:"Wall",[r.m.Wall2]:"Wall 2",[r.m.Wood]:"Wood"}},sticker:{title:"Stickers",controls:{buttonUpload:"Upload Sticker",sliderOpacity:"Sticker Opacity",selectColor:"Sticker Color",tabColor:"Color",tabOpacity:"Opacity"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate",buttonFlipHorizontal:"Flip",buttonFlipVertical:"Flip"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"New Text",dropdownFontFamily:"Font Family",textFontSize:"Font Size",selectAlignment:"Alignment",selectFontColor:"Font Color",selectBackgroundColor:"Background Color",sliderLineSpacing:"Line Spacing",tabColor:"Color",tabBgColor:"Bg Color",tabAlignment:"Alignment",tabLineHeight:"Line Height",tabFontSize:"Font Size"},canvasControls:{placeholderText:"Write Something",buttonSave:"Done",buttonClose:"Cancel",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"New Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Text Color",tabColor:"Color",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Write Something With Style",buttonSave:"Done",buttonClose:"Schließen",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonInvert:"Invert",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Frames",controls:{buttonReset:"Remove Frame",sliderOpacity:"Frame Opacity",sliderSize:"Frame Size",selectColor:"Frame Color",tabColor:"Color",tabOpacity:"Opacity",tabSize:"Size"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Brush",controls:{buttonReset:"Remove Brush",sliderSize:"Brush Size",sliderHardness:"Brush Hardness",selectColor:"Brush Color",tabSize:"Size",tabHardness:"Hardness",tabColor:"Color"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Transform",controls:{buttonReset:"Reset to default",checkboxKeepResolution:"Keep Resolution",inputCropSize:"Crop Size",inputHeight:"h",inputWidth:"w",tabFlipAndRotate:"Flip & Rotate",tabResolution:"Resolution",tabCropSize:"Crop Size"},categories:{imgly_transforms_common:"Common",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Title",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Flip Horizontal",buttonFlipVertical:"Flip Vertical",buttonRotateClockwise:"Rotate Clockwise",buttonRotateAntiClockwise:"Rotate Counterclockwise"}}},at=t=>"de"===t?ot:st,lt={headline1:{size:16,letterSpacing:1.5,case:"uppercase"},headline2:{size:14,letterSpacing:.8,case:"uppercase"},body:{size:13,letterSpacing:0,case:"none"},label:{size:13,letterSpacing:0,case:"capitalize"},basicUICardLabel:{size:12,letterSpacing:0,case:"capitalize"},button1:{size:12,letterSpacing:1.2,case:"uppercase"},button2:{size:14,letterSpacing:0,case:"capitalize"},basicUITabLabel:{size:14,letterSpacing:.8,case:"uppercase"}},ct={toast:2,controlsBar:5,buttonGroup:5,toolControlBar:6,toolbar:7,label:10,disable:11,canvas:{knob:4,bar:5,controls:5,snappingGuide:1,crop:{grid:2,dragImage:3,backdrop:4},webcam:{backdrop:7}},input:{list:6},button:{float:5},dialog:{base:100,backdrop:1,container:2},colorItem:{overlay:2,background:1,tiledBackground:0}},ut=()=>{const t=166/3;return{advancedUIToolbar:{width:55,itemHeight:48,seperatorHeight:20,marginBottom:0},advancedUIToolControlBar:{width:230,padding:"16px 24px",marginBottom:0},advancedCard:{small:{height:t,width:t},medium:{height:87,width:87},large:{height:86,width:182}},advancedSpacer:8,basicCanvasOffset:28,basicUIToolbar:{openHeight:88,closeHeight:40},basicToolControlBar:{itemsBarHeight:72,controlsBarHeight:80,maxHeight:116,maxWidth:300},basicCard:{medium:{height:56,width:90},large:{height:60,width:110}},basicSpacer:8,mainCanvasActionBar:{height:50},crop:{minSize:50},canvas:{marginTop:0,transform:{minSliderWidth:435,minValueWidth:235,minFlipWidth:160}},canvasControls:{sprite:{controlOffset:16,rotateHandle:{height:16},minSize:30,controlPadding:16},knob:{size:16,touchable:{desktop:24}},corner:{size:14,touchable:{desktop:24,mobile:48},borderWidth:4},width:{size:14}},buttons:{float:{size:56}},colorItem:{size:20},color:{colorPicker:{width:214,height:370,saturationSlider:{height:150},thumb:{size:14},arrow:{width:36}}},fontSystem:lt,zIndex:ct}};var ht=({primary:t="#365afc",background:e="#0B0B0B",foreground:i="#FFFFFF"}={primary:"#365afc",background:"#0B0B0B",foreground:"#FFFFFF"})=>{const r="rgba(255, 255, 255, 0.90)",n="rgba(255, 255, 255, 0.60)",o="rgba(255, 255, 255, 0.38)",s="#424242",a="#333333",l="#242424",c="#0B0B0B",u="rgba(255, 255, 255, 0.08)",h="rgba(0, 0, 0, 0.3)",d="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",provider:"google"},background:e,foreground:i,primary:t,warning:"#ffba5c",error:"#c2393a",success:"#39c26c",focusOutlineColor:"rgba(255, 255, 255, 0.12)",scrollbar:{handleColor:"rgba(255, 255, 255, 0.2)"},button:{outlinedBorderColor:a,activeForeground:t,containedPrimaryBackground:t,containedPrimaryForeground:r,outlinedPrimaryBackground:l,outlinedPrimaryForeground:r,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:n,textPrimaryForeground:t,textSecondaryForeground:n,outlinedInactiveOverlayColor:h,textInactiveOpacity:"0.5",hoverOverlayColor:u},checkbox:{background:a,foreground:i,activeForeground:i,activeBackground:t,inactiveOpacity:d,hoverOpacity:"0.8"},modal:{background:l,bodyForeground:r,headerForeground:n,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:a,foreground:r,activeBorderColor:t,activeOverlayColor:"rgba(89, 121, 252, 0.20)",labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:r,inactiveOverlayColor:h,hoverOverlayColor:u},tabTitle:{foreground:n,background:"transparent",activeBackground:"transparent",activeBorderColor:t,activeForeground:r},dropdown:{background:"transparent",foreground:r,hoverBorderColor:n,borderColor:a,caretColor:o,listBackground:a,listBorderColor:a,listItemHoverBackground:s,listForeground:n,listShadow:"0 12px 17px 2px rgba(0,0,0,0.14),\n        0 5px 22px 4px rgba(0,0,0,0.12),\n        0 7px 8px -4px rgba(0,0,0,0.20)",inactiveOpacity:d},textInput:{foreground:r,hoverBorderColor:"rgba(255, 255, 255, 0.40)",background:"transparent",borderColor:a,inactiveOpacity:d},slider:{trackColor:"rgba(255, 255, 255, 0.4)",activeTrackColor:t,thumbBackground:"#171717",thumbBorderColor:t,inactiveOpacity:d,hoverOpacity:"0.7"},selectColor:{activeBorderColor:t,inactiveOpacity:d},toolbar:{foreground:r,background:l,activeBackground:"transparent",activeForeground:t,borderColor:"transparent"},tooltip:{background:s,foreground:r},toolControlBar:{background:"rgba(23, 23, 23, 0.9)",borderColor:"transparent",shadow:"none",separatorColor:a,titleForeground:n,inputLabelForeground:n,inputLabelInactiveOpacity:d},mainCanvasActionBar:{background:"linear-gradient(0deg, transparent 0%,  rgba(0, 0, 0, 0.6) 98%)",foreground:r,borderColor:"none"},canvasActionBar:{background:s,foreground:r,separatorColor:o},canvas:{background:c,controlsOutline:"rgba(255, 255, 255, 0.5)",controlsColor:"#ffffff",cropBackdrop:"rgba(0, 0, 0, 0.5)"},colorPicker:{listBackground:a,listShadow:"0 12px 17px 2px rgba(0,0,0,0.14),\n        0 5px 22px 4px rgba(0,0,0,0.12),\n        0 7px 8px -4px rgba(0,0,0,0.20)",controlsColor:"#ffffff",inputBorderColor:s},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:i,background:c},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#424242",highlight:"#565656",shadow:"#333333"}}}};var dt=({primary:t="#1e47fb",background:e="#FBFBFB",foreground:i="#000000"}={primary:"#1e47fb",background:"#FBFBFB",foreground:"#000000"})=>{const r="rgba(0, 0, 0, 0.90)",n="rgba(0, 0, 0, 0.60)",o="rgba(0, 0, 0, 0.38)",s="#CCCCCC",a="#D4D4D4",l="#E6E6E6",c="#EEEEEE",u="#FBFBFB",h="rgba(125, 125, 125, 0.12)",d="rgba(0, 0, 0, 0.3)",p="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",provider:"google"},background:e,foreground:i,primary:t,warning:"#ffb045",error:"#c01a1b",success:"#17c658",focusOutlineColor:"rgba(125, 125, 125, 0.12)",scrollbar:{handleColor:"rgba(0, 0, 0, 0.2)"},button:{outlinedBorderColor:a,activeForeground:t,containedPrimaryBackground:t,containedPrimaryForeground:"rgba(255, 255, 255, 0.9)",outlinedPrimaryBackground:l,outlinedPrimaryForeground:r,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:n,textPrimaryForeground:t,textSecondaryForeground:n,outlinedInactiveOverlayColor:d,textInactiveOpacity:"0.5",hoverOverlayColor:h},checkbox:{background:a,foreground:i,activeForeground:i,activeBackground:t,inactiveOpacity:p,hoverOpacity:"0.8"},modal:{background:l,bodyForeground:r,headerForeground:n,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:a,foreground:r,activeBorderColor:t,activeOverlayColor:"rgba(30, 71, 251, 0.2)",labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:"rgba(255, 255, 255, 0.87)",inactiveOverlayColor:d,hoverOverlayColor:h},tabTitle:{foreground:n,background:"transparent",activeBackground:"transparent",activeBorderColor:t,activeForeground:r},dropdown:{background:"transparent",foreground:r,hoverBorderColor:n,borderColor:a,listBackground:a,caretColor:o,listForeground:n,listBorderColor:a,listItemHoverBackground:s,listShadow:"0 8px 10px 1px rgba(0,0,0,0.14),\n        0 3px 14px 2px rgba(0,0,0,0.12),\n        0 5px 5px -3px rgba(0,0,0,0.20)",inactiveOpacity:p},textInput:{foreground:r,hoverBorderColor:r,background:"transparent",borderColor:a,inactiveOpacity:p},slider:{trackColor:s,activeTrackColor:t,thumbBackground:c,thumbBorderColor:t,inactiveOpacity:p,hoverOpacity:"0.7"},selectColor:{activeBorderColor:t,inactiveOpacity:p},toolbar:{foreground:r,background:a,activeBackground:"transparent",activeForeground:t,borderColor:"transparent"},tooltip:{background:s,foreground:r},toolControlBar:{background:"rgba(238, 238, 238, 0.9)",borderColor:c,shadow:"none",separatorColor:a,titleForeground:n,inputLabelForeground:n,inputLabelInactiveOpacity:p},mainCanvasActionBar:{background:"transparent",foreground:r,borderColor:"none"},canvasActionBar:{background:s,foreground:r,separatorColor:o},canvas:{background:u,controlsOutline:"rgba(255, 255, 255, 0.6)",controlsColor:"#ffffff",cropBackdrop:"rgba(255, 255, 255, 0.3)"},colorPicker:{listBackground:a,listShadow:"0 8px 10px 1px rgba(0,0,0,0.14),\n        0 3px 14px 2px rgba(0,0,0,0.12),\n        0 5px 5px -3px rgba(0,0,0,0.20)",controlsColor:"#ffffff",inputBorderColor:s},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:i,background:u},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#B8B8B8",highlight:"#E6E6E6",shadow:"#D4D4D4"}}}};const pt=ht(),ft=ut(),mt=(0,r.N)((0,r.N)({},pt),{measurements:ft}),gt=(t,e)=>{const i=(t=>"light"===t?dt:ht)(t);if(e&&e[t]){const{primary:n,background:o,foreground:s}=e[t],a={primary:n,background:o,foreground:s};return rt([i(Object.keys(a).reduce(((t,e)=>a[e]?(0,r.N)((0,r.N)({},t),{[e]:a[e]}):t),{})),e[t]])}return i()||pt},_t=["canvas","advancedUIToolbar","advancedUIToolControlBar","basicUIToolbar","mainCanvasActionBar","colorItem","fontSystem"],yt={config:I,locale:st,theme:pt,measurements:ft};class vt{constructor(){this.checkDefaultToolAvailability=(t,e)=>-1!==e.indexOf(t),this.state=J.observable(yt),this.events=new nt,this.licenseChecker=null}saveConfig(t){t.mainCanvasActions&&4!==t.mainCanvasActions.length&&(t.mainCanvasActions.length=4);const e=rt([I,t]);this.licenseChecker=new w(e.license),this.licenseChecker.areCustomAssetsAllowed()||(e.sticker.enableCustomUpload=!1);const i=((t,e)=>e&&e[t]?rt([at(t),e[t]]):at(t)||st)(e.language,e.custom.languages),n=gt(e.theme,e.custom.themes),o=(t=>{const e=ut();if(t){const i={};return Object.keys(t).forEach((e=>{-1!==_t.indexOf(e)&&(i[e]=t[e])})),rt([e,i])}return e})(e.custom.measurements),{provider:s}=e.library,a=[];e.adjustment.categories=e.adjustment.categories.reduce(((t,e)=>(t.push((0,r.N)((0,r.N)({},e),{items:e.items.filter((t=>!!r.Q[t.identifier]||(a.push(t.identifier),!1)))})),t)),[]),0!==a.length&&console.error(`The following identifier are incorrect for the adjustment tool: ${a.join(", ")}`),delete e.language,delete e.custom.languages,delete e.custom.themes,delete e.library.provider;let l=e.tools.reduce(((t,e)=>"object"==typeof e?[...t,...e]:[...t,e]),[]);l.length||(console.error("Empty list input for tools"),l=D.reduce(((t,e)=>"object"==typeof e?[...t,...e]:[...t,e]),[])),l=l.filter((t=>this.licenseChecker.isToolAllowed(t)));this.checkDefaultToolAvailability(e.defaultTool,l)||(this.licenseChecker.isToolAllowed(e.defaultTool)&&console.warn(`Configured default tool ${e.defaultTool} is not a part of configured list of tools: [${l.join(" ")}]`),[e.defaultTool]=l),e.tools=l,this.state.config=e,this.state.locale=i,this.state.theme=n,this.state.measurements=o;const c=this.buildCustomAssetsConfig();return this.assetProvider=new r.X(c,this.licenseChecker.areCustomAssetsAllowed()),this.loadThemeFont(),s}get config(){return this.state.config}get locale(){return this.state.locale}get theme(){return this.state.theme}get measurements(){return this.state.measurements}get tools(){return this.config.tools.reduce(((t,e)=>"string"==typeof e?[...t,e]:[...t,"",...e]),[])}get defaultTool(){return this.config.defaultTool}get isOrderDefault(){return"default"===this.config.order}get isLayoutAdvanced(){return"advanced"===this.config.layout}get displayCloseButton(){return-1!==this.config.mainCanvasActions.indexOf(r.a.CLOSE)}loadThemeFont(){const{typography:t}=this.theme;t.skipLoading||this.assetProvider.getFontManager().injectFonts([t])}buildCustomAssetsConfig(){const t=this.tools,e=J.toJS(this.state.config),i=this.state.config.assetBaseUrl,{theme:n}=this.state,o=-1!==t.indexOf(r.c.FILTER)?e[r.c.FILTER]:void 0,s=-1!==t.indexOf(r.c.FOCUS)?e[r.c.FOCUS]:void 0,a=-1!==t.indexOf(r.c.ADJUSTMENT)?e[r.c.ADJUSTMENT]:void 0;return{basePath:i,theme:n,filter:o,focus:s,sticker:-1!==t.indexOf(r.c.STICKER)?e[r.c.STICKER]:void 0,frame:-1!==t.indexOf(r.c.FRAME)?e[r.c.FRAME]:void 0,overlay:-1!==t.indexOf(r.c.OVERLAY)?e[r.c.OVERLAY]:void 0,transform:-1!==t.indexOf(r.c.TRANSFORM)?e[r.c.TRANSFORM]:void 0,text:-1!==t.indexOf(r.c.TEXT)?e[r.c.TEXT]:void 0,adjustment:a,textdesign:-1!==t.indexOf(r.c.TEXT_DESIGN)?e[r.c.TEXT_DESIGN]:void 0}}}h([J.action],vt.prototype,"saveConfig",1),h([J.computed],vt.prototype,"config",1),h([J.computed],vt.prototype,"locale",1),h([J.computed],vt.prototype,"theme",1),h([J.computed],vt.prototype,"measurements",1),h([J.computed],vt.prototype,"tools",1),h([J.computed],vt.prototype,"defaultTool",1),h([J.computed],vt.prototype,"isOrderDefault",1),h([J.computed],vt.prototype,"isLayoutAdvanced",1),h([J.computed],vt.prototype,"displayCloseButton",1);class bt{constructor(t){this.editor=t}setBackgroundImage(t){this.container?this.container.setData({image:t,originalImage:t}):this.container=this.engine.addImage({image:t,originalImage:t,blendMode:r.l.NORMAL,opacity:1})}getchildren(){return this.container.getChildren()}addImageToContainer(){return new Promise(((t,e)=>{const{image:i}=this.editor.activeStore;if((t=>t instanceof HTMLImageElement)(i))this.setBackgroundImage(i),t();else{const r=this.editor.libraryStore.getRawUrl(i);this.getImageElement(r).then((e=>{this.setBackgroundImage(e),t()})).catch((t=>{e({identifier:"imageLoading",message:t.message})}))}}))}getImageElement(t){return new Promise(((e,i)=>{const r=new Image;r.addEventListener("load",(()=>{e(r)})),r.addEventListener("error",(t=>{i(t)})),r.crossOrigin=this.editor.configStore.config.engine.crossOrigin,r.src=t}))}getImgageContainerId(){return this.container?this.container.getID():""}get engine(){return this.editor.engine}}class xt{constructor(t){this.applyNewImageTransform=()=>{const{size:t,width:e,height:i}=this.editor.engineMediator.image.container.getBounds(),n=this.container;n.setTransform(r.z.IDENTITY),n.setResolution(t),n.setPivot(.5,.5),n.setPosition({x:e/2,y:i/2})},this.editor=t}get engine(){return this.editor.engine}get container(){return this.engine.getOutputContainer()}}const wt=(0,r.U)(d()),St=(0,r.U)(d()),kt=(0,r.U)(d()),Ct=(t,e)=>new Promise(((i,r)=>{const n=new Image;n.onload=()=>{i(n)},n.onerror=()=>{r(new Error(`Failed to load image with src:${t}`))},n.crossOrigin=e,n.src=t})),Tt=(t,e)=>new Promise(((i,r)=>{((t,e)=>new Promise(((i,r)=>{const n=new XMLHttpRequest;n.onload=()=>{const e=new FileReader;e.onloadend=()=>{"string"==typeof e.result&&"data:image"===e.result.substr(0,10)?i(e.result):r(new Error(`The image could not be loaded from ${t}`))},e.onerror=t=>{r(t)},e.readAsDataURL(n.response)},n.open("GET",t),n.responseType="blob",n.withCredentials="use-credentials"===e,n.send()})))(t,e).then((t=>{const e=new Image;e.addEventListener("load",(()=>{i(e)})),e.src=t})).catch((()=>{Ct(t,e).then((t=>i(t))).catch((t=>{r(t)}))}))})),Et=t=>(0,r.Z)(void 0,[t],(function*({url:t,image:e,crossOrigin:i="anonymous"}){try{return e&&e.src&&"data:"===e.src.substr(0,5)||e&&e.src&&e.src.includes(".svg")?e:"string"==typeof t&&"data:"===t.substr(0,5)||"string"==typeof t&&t.includes(".svg")?Ct(t,i):Tt(t||e.src,i)}catch(t){throw new Error(t)}})),Rt={tool:null,isWebcam:!1,image:""};class Dt{constructor(t){this.setImage=t=>(0,r.Z)(this,null,(function*(){const{crossOrigin:e}=this.editor.configStore.config.engine;"string"==typeof t&&(this.state.image=yield Et({url:(0,r.r)(t)?t:this.editor.assetProvider.getPath(t),crossOrigin:e})),t instanceof HTMLImageElement&&(this.state.image=yield Et({image:t,crossOrigin:e})),this.isWebcam&&(this.state.isWebcam=!1)})),this.newImage=t=>{this.editor.init(t)},this.editor=t,this.state=kt.observable(Rt)}selectTool(t){const{licenseChecker:e}=this.editor.configStore;if(this.state.tool!==t&&(null==e?void 0:e.isToolAllowed(t)))switch(this.editor.onToolChange(this.state.tool,t),this.state.tool=t,this.editor.configStore.events.onToolChanged(t),t){case r.c.TEXT:this.editor.spriteStore.textToolStore.addOrselect();break;case r.c.TEXT_DESIGN:this.editor.spriteStore.textDesignToolStore.addOrselect();break;case r.c.BRUSH:this.editor.brushToolStore.initSize();break;case r.c.TRANSFORM:this.editor.transformToolStore.applyDefaultCrop()}}selectWebcam(t){this.state.isWebcam=t}get webcamLabel(){return this.editor.libraryStore.locale.controls.buttonWebcamClose}get tool(){return this.state.tool}get isWebcam(){return this.state.isWebcam}get image(){return this.state.image}}h([kt.action],Dt.prototype,"selectTool",1),h([kt.action],Dt.prototype,"selectWebcam",1),h([kt.action],Dt.prototype,"setImage",2),h([kt.action],Dt.prototype,"newImage",2),h([kt.computed],Dt.prototype,"webcamLabel",1),h([kt.computed],Dt.prototype,"tool",1),h([kt.computed],Dt.prototype,"isWebcam",1),h([kt.computed],Dt.prototype,"image",1);const It=(0,r.U)(d()),Ot={height:150,width:150};class At{constructor(t){this.canvasClickDisabled=It.observable.box(!1),this.editor=t,this.state=It.observable(At.initialState)}setCanvasElement(t){this.canvas=t,this.editor.engineMediator.preview.createPreview(t),this.updateCanvasDimensions(),this.editor.init(this.editor.configStore.config.image)}updateCanvasDimensions(){const t=Ve.devicePixelRatio;this.canvas.width=this.canvasSize.width*t,this.canvas.height=this.canvasSize.height*t,this.canvas.style.width=`${this.canvasSize.width}px`,this.canvas.style.height=`${this.canvasSize.height}px`}saveDimensions({height:t,width:e,render:i}){const r=this.editor.configStore.isLayoutAdvanced?0:this.editor.configStore.measurements.basicCanvasOffset;t-r>Ot.height&&e>Ot.width&&(this.state.canvasSize.height=t-r,this.state.canvasSize.width=e,i&&this.editor.resize())}disableCanvasClick(){this.canvasClickDisabled.set(!0)}enableCanvasClick(){this.canvasClickDisabled.set(!1)}get isCanvasClickable(){return!this.canvasClickDisabled.get()}get canvasSize(){return this.state.canvasSize}get sizeVector(){return r.C.fromSize(this.state.canvasSize)}get sizeVectorMagnitude(){return this.sizeVector.magnitude}getContainersAtPreviewPoint(t){const e=this.editor.engine.getContainersAtPreviewPoint(t,this.editor.engineMediator.preview.previewTransformWithoutDpr).map((t=>t.getID())).filter((t=>t!==this.editor.engineMediator.image.getImgageContainerId()));this.editor.spriteStore.onCanvasClick(e)}}At.initialState={canvasSize:Ot},h([It.action],At.prototype,"setCanvasElement",1),h([It.action],At.prototype,"updateCanvasDimensions",1),h([It.action],At.prototype,"saveDimensions",1),h([It.action],At.prototype,"disableCanvasClick",1),h([It.action],At.prototype,"enableCanvasClick",1),h([It.computed],At.prototype,"isCanvasClickable",1),h([It.computed],At.prototype,"canvasSize",1),h([It.computed],At.prototype,"sizeVector",1),h([It.computed],At.prototype,"sizeVectorMagnitude",1);const Ft=(0,r.U)(d()),Mt={type:null,identifier:null,isVisible:!1,error:""};class Pt{constructor(t){this.showActionModal=({type:t,identifier:e,error:i,handleConfirm:r,handleDismiss:n})=>{this.resetHandlers(),this.state.isVisible=!0,this.state.identifier=e,this.state.type=t,this.state.error=i||"",this.handleConfirm=r,this.handleDismiss=n},this.hideModal=()=>{this.state.isVisible=!1,this.state.type=null,this.state.error="",this.state.identifier=null,this.resetHandlers()},this.resetHandlers=()=>{this.handleConfirm=null,this.handleDismiss=null},this.configStore=t.configStore,this.state=Ft.observable(Mt)}showInfoModal(t){this.resetHandlers(),this.state.isVisible=!0,this.state.type=r.E.INFO,this.state.identifier=t,this.state.error=""}showTextEditModal(){this.resetHandlers(),this.state.isVisible=!0,this.state.type=r.E.TEXT_EDIT,this.state.identifier="inputText",this.state.error=""}get modalProps(){const{isVisible:t}=this.state,e=this.getModalLocale();if(e){const{bodyLabel:i,headerLabel:r,buttonYes:n,buttonNo:o}=e;return{headerLabel:r,bodyLabel:i,confirmLabel:n,dismissLabel:o,isVisible:t,handleClose:this.hideModal,handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss}}return{isVisible:!1}}get isVisible(){return this.state.isVisible}get type(){return this.state.type}get identifier(){return this.state.identifier}get positionOffset(){const{isLayoutAdvanced:t,measurements:{basicCanvasOffset:e,advancedUIToolControlBar:i,advancedUIToolbar:r},isOrderDefault:n}=this.configStore,o=(i.width+r.width)*(n?1:-1);return t?{x:o/2,y:0}:{x:0,y:-e}}getModalLocale(){const{identifier:t,error:e,type:i}=this.state,{locale:n}=this.configStore;if(!i||!t||i===r.E.TEXT_EDIT)return null;if(i&&t&&n[`${i}Modals`]&&n[`${i}Modals`][t]){const o=n[`${i}Modals`][t];let{body:s}=o;s&&"object"==typeof e?Object.keys(e).forEach((t=>{s=s.replace(`\${${t}}`,e[t])})):s&&(s=s.replace("${error}",e));let a=o.heading;if(i===r.E.ERROR||i===r.E.WARNING){const t={error:n.common.error,warning:n.common.warning};a=`${"error"===i?t.error:t.warning}${o.headingDelimiter||""} ${o.header||""}`}return{bodyLabel:s,headerLabel:a,buttonYes:o.buttonYes,buttonNo:o.buttonNo}}return null}}h([Ft.action],Pt.prototype,"showActionModal",2),h([Ft.action],Pt.prototype,"showInfoModal",1),h([Ft.action],Pt.prototype,"showTextEditModal",1),h([Ft.action],Pt.prototype,"hideModal",2),h([Ft.computed],Pt.prototype,"modalProps",1),h([Ft.computed],Pt.prototype,"isVisible",1),h([Ft.computed],Pt.prototype,"type",1),h([Ft.computed],Pt.prototype,"identifier",1),h([Ft.computed],Pt.prototype,"positionOffset",1);const Bt=(0,r.U)(d());class zt{constructor(t){this.defaultScale=1,this.SCALE_LEVELS=[8.33,12.5,16.66,25,33.33,50,66.66,100,125,150,200,300,400,500,600].map((t=>t/100)),this.state={position:{x:0,y:0},scaleIndex:-1},this.offset={x:0,y:0},this.in=()=>{this.canZoomIn&&(this.state.scaleIndex+=1,this.scaleRender())},this.out=()=>{if(this.canZoomOut){this.state.scaleIndex-=1;const{canDragX:t,canDragY:e,maxOffsetX:i,maxOffsetY:r}=this.checkOffset({x:0,y:0});e||(this.offset.y=r),t||(this.offset.x=i),this.savePosition(),this.scaleRender()}},this.setOffset=t=>{const{canDragX:e,canDragY:i}=this.checkOffset(t);e&&(this.offset.x=t.x),i&&(this.offset.y=t.y),this.scaleRender()},this.editor=t}setInitialTransform(t=0){const{transform:e}=this.editor.engineMediator.preview;Bt.runInAction((()=>{this.setDefaultScale(Math.abs(t||e.scale.x)),this.setPosition(e.position)}))}resetScale(){this.state.scaleIndex=-1}resetPosition(){const{width:t,height:e}=this.editor.canvasStore.canvas;this.setPosition({x:t/2,y:e/2})}resetOffset(){this.offset={x:0,y:0}}setPosition(t){this.state.position.x=t.x,this.state.position.y=t.y}savePosition(){this.setPosition(this.getPositionWithOffset()),this.offset={x:0,y:0}}setDefaultScale(t){if(1!==this.defaultScale){const t=this.SCALE_LEVELS.findIndex((t=>t===this.defaultScale));-1!==t&&(this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,t),...this.SCALE_LEVELS.slice(t+1)])}const e=this.SCALE_LEVELS.findIndex(((e,i)=>0===i?t<e:i===this.SCALE_LEVELS.length-1?e<t:this.SCALE_LEVELS[i-1]<t&&t<e));if(-1!==e)this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,e),t,...this.SCALE_LEVELS.slice(e)],e===this.state.scaleIndex&&this.resetScale(),this.state.scaleIndex=e,this.defaultScale=t;else{const e=this.SCALE_LEVELS.findIndex((e=>e===t));e===this.state.scaleIndex&&this.resetScale(),-1!==e&&(this.state.scaleIndex=e,this.defaultScale=t)}}setScaleToDefault(){this.state.scaleIndex=this.defaultIndex}checkOffset(t){const e=window.devicePixelRatio||1,{scaledSize:i}=this,{previewSize:r}=this,n=this.editor.engineMediator.preview.initialTransform.position,o=this.getPositionWithOffset(t),s=(i.width-r.width)*e/2,a=(i.height-r.height)*e/2,l=n.x-o.x,c=n.y-o.y,u=Math.abs(l)-s,h=Math.abs(c)-a;return{canDragX:u<0,canDragY:h<0,maxOffsetX:l>0?-u:u,maxOffsetY:c>0?-h:h}}calculateScale(t=0,e=this.previewSize,i=this.defaultScale){const{width:n,height:o}=e,s=new r.C({x:n,y:o}),a=new r.C(Math.abs(s.x*Math.cos(t))+Math.abs(s.y*Math.sin(t)),Math.abs(s.x*Math.sin(t))+Math.abs(s.y*Math.cos(t))),l=s.subtract(a).divide(2).multiply(i).abs;return l.y>l.x?2*l.y/s.y+i:2*l.x/s.x+i}get defaultIndex(){return this.SCALE_LEVELS.findIndex((t=>t===this.defaultScale))}getPositionWithOffset(t=this.offset){const{position:e}=this;return{x:e.x-t.x,y:e.y-t.y}}scaleRender(t=!1){const e=this.editor.scale.getPositionWithOffset(),i=t?this.defaultScale:this.scale,r={x:i,y:i};this.editor.engineMediator.preview.container.setScale(r),this.editor.engineMediator.preview.container.setPosition(e),this.editor.engineMediator.preview.savePreviewTransform({scale:r,position:e,rotation:0}),t||this.editor.render()}get scale(){const t=this.state.scaleIndex;return-1!==t?this.SCALE_LEVELS[t]:this.defaultScale}get zoomLevel(){const t=window.devicePixelRatio||1;return(this.scale/t*100).toFixed(1)}get canDrag(){return this.defaultScale<this.scale}get canZoomOut(){return this.state.scaleIndex>this.defaultIndex}get canZoomIn(){return this.SCALE_LEVELS.length-1>this.state.scaleIndex}get position(){return this.state.position}get scaledSize(){const t=this.state.scaleIndex,e=-1!==t?this.SCALE_LEVELS[t]:this.defaultScale,{previewSize:i}=this;return{width:i.width*e/this.defaultScale,height:i.height*e/this.defaultScale}}get previewSize(){return this.editor.getPreviewSize()}}h([Bt.observable],zt.prototype,"state",2),h([Bt.action],zt.prototype,"in",2),h([Bt.action],zt.prototype,"out",2),h([Bt.action],zt.prototype,"setInitialTransform",1),h([Bt.action],zt.prototype,"resetScale",1),h([Bt.action],zt.prototype,"resetPosition",1),h([Bt.action],zt.prototype,"setPosition",1),h([Bt.action],zt.prototype,"savePosition",1),h([Bt.action],zt.prototype,"setDefaultScale",1),h([Bt.action],zt.prototype,"setScaleToDefault",1),h([Bt.computed],zt.prototype,"scale",1),h([Bt.computed],zt.prototype,"zoomLevel",1),h([Bt.computed],zt.prototype,"canDrag",1),h([Bt.computed],zt.prototype,"canZoomOut",1),h([Bt.computed],zt.prototype,"canZoomIn",1),h([Bt.computed],zt.prototype,"position",1),h([Bt.computed],zt.prototype,"scaledSize",1);const Lt=(0,r.U)(d()),Nt=/^data:image\/(.+?);base64,/;class Ut{constructor(t){this.applySerialization=(t,e,i,n)=>(0,r.Z)(this,null,(function*(){this.editor.resetToolStates();const o=this.editor.activeStore.tool===r.c.TRANSFORM;o||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.reset(),o||this.editor.transformToolStore.onLeave();const s=new e(this.editor),a="Unexpected error occured",l=e.deserializeImage(t);if(l.image&&l.image.data){const t=l.image.data;yield this.editor.setImage(t),this.editor.scale.defaultScale=1,this.editor.scale.resetOffset(),this.editor.transformToolStore.reset(),this.editor.activeStore.setImage(t),yield this.editor.engineMediator.image.addImageToContainer(),this.editor.engineMediator.output.applyNewImageTransform(),this.editor.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.editor.transformToolStore.setCropDefaults(),this.editor.historyStore.addInitialSnapshot(),this.editor.transformToolStore.saveTransforms()}const c=s.deserializeTransformation(t);if(c){yield this.applyStateOnUI(c);const e=s.deserialize(t);e?(yield this.applyStateOnUI(e),yield this.editor.render(),"loading"===this.editor.modalStore.identifier&&this.editor.modalStore.hideModal(),i()):n(a)}else n(a)})),this.editor=t}serialize({image:t}={image:!1}){const e=this.editor.activeStore.tool===r.c.TRANSFORM;return this.editor.modalStore.showInfoModal("saving"),new Promise(((n,o)=>{i.e(528).then(i.bind(i,5528)).then((i=>(0,r.Z)(this,[i],(function*({Serializer:i}){try{e&&this.editor.transformToolStore.onLeave(),yield this.editor.wait(),this.editor.transformToolStore.applyDefaultCrop(!1);const{originalImage:o}=this.editor.imageContainer.getData(),s=this.editor.engineMediator.output.container.getResolution(),a={width:o.width,height:o.height},l=new i(this.editor.transformToolStore.defaultCropMaskPosition,this.editor.transformToolStore.maxCropMaskSize,s,a,this.editor.engine.getRootContainers()[0],this.editor.engine.getOutputContainer()),c={[r.c.ADJUSTMENT]:Lt.toJS(this.editor.adjustmentsToolStore.state),[r.c.FILTER]:Lt.toJS(this.editor.filterToolStore.state),[r.c.FOCUS]:Lt.toJS(this.editor.focusToolStore.serializableState),[r.c.OVERLAY]:Lt.toJS(this.editor.overlayToolStore.state),[r.c.FRAME]:Lt.toJS(this.editor.frameToolStore.state),[r.c.BRUSH]:this.editor.brushToolStore.strokes||{strokes:[]}},{sprite:u,customStickers:h}=yield this.editor.spriteStore.serializableState();let d,p;if(u.spriteIdList=u.spriteIdList.sort(((t,e)=>u.common[t].order-u.common[e].order)),c.sprite=u,c.customStickers=h,c.transform=this.editor.transformToolStore.serializableState,t){const t=Ut.getDataURL(o);p=(t=>t.match(/^data:([^;]+)/)[1])(t),d=(t=>t.replace(Nt,""))(t)}this.editor.modalStore.hideModal(),n(l.serialise(c,d,p)),e&&this.editor.transformToolStore.onEnter()}catch(t){this.editor.modalStore.hideModal(),o(t)}}))))}))}deserialize(t){return this.editor.modalStore.showInfoModal("loading"),new Promise(((e,n)=>{try{i.e(528).then(i.bind(i,5528)).then((({Deserializer:i})=>{i.checkIsSerialisationValid(t)?this.applySerialization(t,i,e,n):(this.editor.modalStore.hideModal(),this.editor.modalStore.showActionModal({type:r.E.WARNING,identifier:"unsupportedSerializationVersion",handleConfirm:()=>this.applySerialization(t,i,e,n)}))}))}catch(t){"loading"===this.editor.modalStore.identifier&&this.editor.modalStore.hideModal(),n(t)}}))}static getDataURL(t){if(t instanceof HTMLImageElement){const{src:e}=t;if((t=>Nt.test(t))(e))return e}if(t instanceof HTMLCanvasElement)return t.toDataURL(r.e.PNG);const e=document.createElement("canvas");e.width=t.width,e.height=t.height;return e.getContext("2d").drawImage(t,0,0),e.toDataURL(r.e.PNG)}applyStateOnUI(t){return(0,r.Z)(this,null,(function*(){const e=this.editor.activeStore.tool===r.c.TRANSFORM;try{t.transform&&(e||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(t.transform,!0),yield this.editor.wait(),e||(this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),yield this.editor.wait(),this.editor.transformToolStore.onLeave())),t.filter&&(yield this.editor.filterToolStore.updateStateFromSerialization(t.filter)),t.adjustment&&this.editor.adjustmentsToolStore.updateStateFromSerialization(t.adjustment),t.focus&&(yield this.editor.focusToolStore.updateStateFromSerialization(t.focus)),t.overlay&&(yield this.editor.overlayToolStore.updateStateFromSerialization(t.overlay)),t.sprite&&(t.sprite.spriteIdList=t.sprite.spriteIdList.sort(((e,i)=>t.sprite.common[e].order-t.sprite.common[i].order)),yield this.editor.spriteStore.updateStateFromSerialization(t.sprite,t.customStickers)),t.brush&&this.editor.brushToolStore.updateStateFromHistory(t.brush),t.frame&&(yield this.editor.frameToolStore.updateStateFromSerialization(t.frame)),this.editor.outputContainer.updateChildrenContainers()}catch(t){console.error(t),this.editor.modalStore.showActionModal({type:r.E.ERROR,identifier:"unexpectedError",error:t,handleConfirm:()=>{window.location.reload()}})}}))}}const jt={identifier:"identity",opacity:1,width:0,color:E.white},Ht=(0,r.U)(d()),Wt=(0,r.U)(d()),Gt=new j(0,1);class Vt{constructor(t){this.changeIdentifier=t=>{this.state.identifier=t},this.changeOpacity=t=>{const e=Gt.clamp(t);this.state.opacity=e},this.changeWidth=t=>{this.state.width=t},this.changeColor=t=>{this.state.color=t},this.reset=()=>{-1===this.indexInContainer&&(this.state.identifier=jt.identifier,this.state.opacity=jt.opacity,this.state.width=jt.width,this.state.color=jt.color,this.removeIndex())},this.removeFrameEffect=()=>{this.effect&&(this.engine.removeEffect(this.effect),this.effect=void 0)},this.setEffectProperties=t=>this.effect?(this.removeIndex(),this.effect.setProperties(t),this.effect.getProperties()):null,this.setFrameEffect=({identifier:t,width:e,opacity:i,color:n})=>{const o=(0,r.N)({},this.state);this.changeIdentifier(t),this.changeWidth(e),this.changeOpacity(i),this.changeColor(n),this.removeFrameEffect();const s=this.engineMediator.orderHelper.addSprite(t);return new Promise(((r,a)=>{this.engine.addFrameFromAssets(t,this.engineMediator.image.container,s).then((t=>{this.effect=t,this.effect.setProperties({tintColor:n,opacity:i,width:e}),r()})).catch((t=>{this.changeIdentifier(o.identifier),this.changeOpacity(o.opacity),this.changeWidth(o.width),this.changeColor(o.color),"identity"===o.identifier&&this.removeIndex(),a(t)}))}))},this.removeIndex=()=>{this.engineMediator.orderHelper.removeSprite(this.state.identifier)},this.engineMediator=t,this.state=jt}get engine(){return this.engineMediator.engine}get imageContainer(){return this.engineMediator.image.container}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}}h([Wt.observable],Vt.prototype,"state",2),h([Wt.action],Vt.prototype,"changeIdentifier",2),h([Wt.action],Vt.prototype,"changeOpacity",2),h([Wt.action],Vt.prototype,"changeWidth",2),h([Wt.action],Vt.prototype,"changeColor",2),h([Wt.action],Vt.prototype,"reset",2);class $t{constructor(t){this.colorList=Ve.defaultColors,this.selectFrame=t=>(0,r.Z)(this,null,(function*(){if(t!==this.identifier){const e=.1*this.editor.shortestOutputSide;yield this.frameStore.setFrameEffect({identifier:t,width:e,opacity:1,color:jt.color}),this.editor.render(),this.addSnapshot(B.ADD,r.c.FRAME)}})),this.changeOpacity=t=>{const e=this.frameStore.setEffectProperties({opacity:t});e&&(this.frameStore.changeOpacity(e.opacity),this.editor.render())},this.changeWidth=t=>{const e=this.frameStore.setEffectProperties({width:t});e&&(this.frameStore.changeWidth(e.width),this.editor.render())},this.changeColor=t=>{const e=this.frameStore.setEffectProperties({tintColor:t});e&&(this.frameStore.changeColor(e.tintColor),this.editor.render())},this.colorSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.controls.selectColor)},this.toolSnapshot=t=>{this.addSnapshot(B.EDIT,t)},this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)},this.pureReset=()=>{this.frameStore.removeFrameEffect(),this.frameStore.reset()},this.reset=()=>{this.pureReset(),this.addSnapshot(B.DELETE,this.locale.controls.buttonReset),this.editor.render()},this.updateStateFromHistory=t=>"identity"===t.identifier?(this.pureReset(),new Promise((t=>{t()}))):this.frameStore.setFrameEffect(t),this.updateStateFromSerialization=t=>(0,r.Z)(this,null,(function*(){return this.entityManager.items.find((e=>e.identifier===t.identifier))?this.frameStore.setFrameEffect(t):new Promise(((t,e)=>{e(new Error("Frame Asset doesn't exist"))}))})),this.editor=t,this.frameStore=new Vt(this.editor.engineMediator);const e=this.editor.assetProvider.getAssets("frame"),{config:i}=this;this.entityManager=new N(e,(0,r.N)((0,r.N)({},i),{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("frame")})),jt.color=Ht.toJS(b(this.config,"defaultColor",jt.color)),this.config.colors&&this.config.colors.length>0&&(this.colorList=T(Ht.toJS(this.config.colors)))}get state(){return this.frameStore.state}get identifier(){return this.state.identifier}get color(){return this.state.color}get size(){return this.state.width}get tintable(){const t=this.entityManager.items.find((t=>t.identifier===this.identifier));return t&&t.tintable||!1}get opacity(){return this.state.opacity}get minSize(){return.05*this.editor.shortestOutputSide}get maxSize(){return.3*this.editor.shortestOutputSide}get config(){return this.editor.configStore.config[r.c.FRAME]}get locale(){return this.editor.configStore.locale[r.c.FRAME]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}get isOptionSelected(){return"identity"!==this.identifier}}h([Ht.action],$t.prototype,"selectFrame",2),h([Ht.action],$t.prototype,"changeOpacity",2),h([Ht.action],$t.prototype,"changeWidth",2),h([Ht.action],$t.prototype,"changeColor",2),h([Ht.action],$t.prototype,"pureReset",2),h([Ht.action],$t.prototype,"reset",2),h([Ht.action],$t.prototype,"updateStateFromHistory",2),h([Ht.action],$t.prototype,"updateStateFromSerialization",2),h([Ht.computed],$t.prototype,"state",1),h([Ht.computed],$t.prototype,"identifier",1),h([Ht.computed],$t.prototype,"color",1),h([Ht.computed],$t.prototype,"size",1),h([Ht.computed],$t.prototype,"tintable",1),h([Ht.computed],$t.prototype,"opacity",1),h([Ht.computed],$t.prototype,"minSize",1),h([Ht.computed],$t.prototype,"maxSize",1),h([Ht.computed],$t.prototype,"config",1),h([Ht.computed],$t.prototype,"locale",1),h([Ht.computed],$t.prototype,"localeColor",1),h([Ht.computed],$t.prototype,"items",1),h([Ht.computed],$t.prototype,"isOptionSelected",1);const Zt=(0,r.U)(d()),Xt={categories:[],query:""};class Yt{constructor(t){this.initProvider=t=>{t&&(this.libraryProvider=new t)},this.fetchImages=(t="")=>(0,r.Z)(this,null,(function*(){if(this.libraryProvider){let e=null;try{const i=yield this.libraryProvider.getCategories(),r=yield this.libraryProvider.searchImages(t);e=i.map(((t,e)=>{const i=r.filter((e=>e.category===t.name));return{identifier:t.name,name:t.name,thumbnailURI:t.coverImageUrl,items:i.map((i=>({name:i.title||`image${e}`,identifier:`${t.name}-${i.title}-${e}`,thumbnailURI:i.thumbUrl,rawUrl:i.rawUrl,authorName:i.authorName,authorAvatar:i.authorAvatar})))}})).filter((t=>t.items.length))}catch(t){console.log(t)}Zt.runInAction((()=>{this.state.query=t,this.state.categories=e}))}})),this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory!==t?t:""},this.getRawUrl=t=>{const e=this.items.findIndex((e=>e.identifier===t));return-1!==e?this.items[e].rawUrl:t},this.configStore=t.configStore,this.state=Zt.observable(Xt),this.selectedCategory=""}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.state.categories}get items(){return this.state.categories.map((t=>t.items)).reduce(((t,e)=>[...t,...e]),[])}get query(){return this.state.query}get config(){return this.configStore.config[r.c.LIBRARY]}get locale(){return this.configStore.locale[r.c.LIBRARY]}}h([Zt.observable],Yt.prototype,"selectedCategory",2),h([Zt.action],Yt.prototype,"initProvider",2),h([Zt.action],Yt.prototype,"fetchImages",2),h([Zt.action],Yt.prototype,"toggleCategorySelection",2),h([Zt.computed],Yt.prototype,"selectedCategoryIdentifier",1),h([Zt.computed],Yt.prototype,"categories",1),h([Zt.computed],Yt.prototype,"items",1),h([Zt.computed],Yt.prototype,"query",1),h([Zt.computed],Yt.prototype,"config",1),h([Zt.computed],Yt.prototype,"locale",1);const qt=(0,r.U)(d()),Kt=(0,r.U)(d()),Qt={identifier:"identity",opacity:1,blendMode:r.l.LIGHTEN},Jt=new j(0,1);class te{constructor(t,e){this.changeIdentifier=t=>{this.state.identifier=t},this.changeOpacity=t=>{const e=Jt.clamp(t);this.state.opacity=e},this.changeBlendMode=t=>{this.state.blendMode=t},this.reset=()=>{-1===this.indexInContainer&&(this.state.identifier=Qt.identifier,this.state.opacity=Qt.opacity,this.state.blendMode=Qt.blendMode,this.removeIndex())},this.correctOverlayFlip=()=>{const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();this.effect&&(this.effect.setFlipHorizontally(t),this.effect.setFlipVertically(e))},this.removeOverlayEffect=()=>{this.effect&&(this.removeIndex(),this.engineMediator.engine.removeEffect(this.effect),this.effect=void 0)},this.setEffectProperties=t=>this.effect?(this.effect.setProperties(t),this.effect.getProperties()):null,this.setOverlayEffect=({identifier:t,blendMode:e,opacity:i})=>{const n=(0,r.N)({},this.state);this.changeIdentifier(t),this.changeOpacity(i),this.changeBlendMode(e),this.removeOverlayEffect();const o=this.engineMediator.orderHelper.addIndex(r.c.OVERLAY);return new Promise(((r,s)=>{this.engineMediator.engine.addOverlayFromAssets(t,this.engineMediator.image.container,o).then((t=>{this.effect=t,this.effect.setProperties({blendMode:e,opacity:i}),this.correctOverlayFlip(),r()})).catch((t=>{this.changeIdentifier(n.identifier),this.changeOpacity(n.opacity),this.changeBlendMode(n.blendMode),"identity"===n.identifier&&this.removeIndex(),s(t)}))}))},this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex(r.c.OVERLAY)},this.engineMediator=t,this.editor=e,this.state=Qt}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}}h([Kt.observable],te.prototype,"state",2),h([Kt.action],te.prototype,"changeIdentifier",2),h([Kt.action],te.prototype,"changeOpacity",2),h([Kt.action],te.prototype,"changeBlendMode",2),h([Kt.action],te.prototype,"reset",2),h([Kt.action],te.prototype,"correctOverlayFlip",2);class ee{constructor(t){this.selectOverlay=t=>(0,r.Z)(this,null,(function*(){if(t!==this.identifier){const e=this.defaultBlendModeForIdentifier(t);yield this.overlayStore.setOverlayEffect({identifier:t,opacity:1,blendMode:e}),this.addSnapshot(B.ADD,r.c.OVERLAY),this.editor.render()}})),this.changeOpacity=t=>{const e=this.overlayStore.setEffectProperties({opacity:t});e&&(this.overlayStore.changeOpacity(e.opacity),this.editor.render())},this.toolSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.controls.sliderOpacity)},this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)},this.changeBlendMode=t=>{const e=this.overlayStore.setEffectProperties({blendMode:t});e&&(this.overlayStore.changeBlendMode(e.blendMode),this.addSnapshot(B.EDIT,this.locale.controls.carouselBlendMode),this.editor.render())},this.pureReset=()=>{this.overlayStore.removeOverlayEffect(),this.overlayStore.reset()},this.reset=()=>{this.pureReset(),this.addSnapshot(B.DELETE,this.locale.controls.buttonReset),this.editor.render()},this.updateStateFromSerialization=t=>(0,r.Z)(this,null,(function*(){return this.entityManager.items.find((e=>e.identifier===t.identifier))?this.overlayStore.setOverlayEffect(t):new Promise(((e,i)=>{i(new Error(`Overlay Asset ${t.identifier} doesn't exist`))}))})),this.updateStateFromHistory=t=>(0,r.Z)(this,null,(function*(){return"identity"===t.identifier?(this.pureReset(),new Promise((t=>{t()}))):this.overlayStore.setOverlayEffect(t)})),this.correctOverlayFlip=()=>{this.overlayStore.correctOverlayFlip()},this.defaultBlendModeForIdentifier=t=>{const e=this.entityManager.items.findIndex((e=>e.identifier===t));return-1!==e?this.entityManager.items[e].defaultBlendMode:r.l.LIGHTEN},this.editor=t,this.overlayStore=new te(this.editor.engineMediator,t);const e=this.editor.assetProvider.getAssets("overlay"),{config:i}=this;this.entityManager=new N(e,(0,r.N)((0,r.N)({},i),{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("overlay")}))}get state(){return this.overlayStore.state}get identifier(){return this.overlayStore.state.identifier}get opacity(){return this.overlayStore.state.opacity}get blendMode(){return this.overlayStore.state.blendMode}get isOptionSelected(){return"identity"!==this.identifier}get config(){return this.editor.configStore.config[r.c.OVERLAY]}get locale(){return this.editor.configStore.locale[r.c.OVERLAY]}get items(){return this.entityManager.items}get allBlendModes(){const t=this.locale.controls;return Object.keys(r.l).map((e=>{const i=r.l[e],n=`blendMode${i.charAt(0).toUpperCase()}${i.slice(1)}`;return{identifier:i,value:t[n]}}))}}h([qt.action],ee.prototype,"selectOverlay",2),h([qt.action],ee.prototype,"changeOpacity",2),h([qt.action],ee.prototype,"changeBlendMode",2),h([qt.action],ee.prototype,"pureReset",2),h([qt.action],ee.prototype,"reset",2),h([qt.action],ee.prototype,"updateStateFromSerialization",2),h([qt.action],ee.prototype,"updateStateFromHistory",2),h([qt.action],ee.prototype,"correctOverlayFlip",2),h([qt.computed],ee.prototype,"state",1),h([qt.computed],ee.prototype,"identifier",1),h([qt.computed],ee.prototype,"opacity",1),h([qt.computed],ee.prototype,"blendMode",1),h([qt.computed],ee.prototype,"isOptionSelected",1),h([qt.computed],ee.prototype,"config",1),h([qt.computed],ee.prototype,"locale",1),h([qt.computed],ee.prototype,"items",1),h([qt.computed],ee.prototype,"allBlendModes",1);var ie=t=>{const e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),n=new Uint8Array(r);for(let t=0;t<e.length;t+=1)n[t]=e.charCodeAt(t);return new Blob([r],{type:i})};class re{static isImageElement(t){return t instanceof HTMLImageElement}constructor({license:t,assetProvider:e,crossOrigin:i}){this.crossOrigin=i,this.engine=new r.$({license:t,crossOrigin:i,assetProvider:e,downscaleOptions:{maxDimensions:{width:100,height:100}}})}getAllFilterPreviewThumbnails(t){return new Promise(((e,i)=>{const n={};t.reduce(((t,e)=>(0,r.Z)(this,null,(function*(){const i=yield t;return i.identifier&&(n[i.identifier]=i.imageData),this.getFilterPreviewThumbnail(e)}))),Promise.resolve({identifier:"",imageData:""})).then((t=>{n[t.identifier]=t.imageData,e(n)})).catch((t=>{i(t)}))}))}getFilterPreviewThumbnail({identifier:t,isDuotone:e}){return""!==t?(this.effect&&(this.engine.removeEffect(this.effect),this.effect.getIndexInParent()||(this.effect=void 0)),new Promise(e?(e,i)=>{this.engine.addDuoToneFilterFromAssets(t,this.container).then((n=>{n.setProperties({colorIntensity:.5}),this.effect=n,this.engine.export(r.d.DATA_URL,r.e.PNG,.2).then((i=>{e({identifier:t,imageData:i})})).catch((t=>{i(t)}))})).catch((t=>{i(t)}))}:(e,i)=>{this.engine.addLUTFilterFromAssets(t,this.container).then((n=>{n.setProperties({intensity:1}),this.effect=n,this.engine.export(r.d.DATA_URL,r.e.PNG,.2).then((i=>{e({identifier:t,imageData:i})})).catch((t=>{i(t)}))})).catch((t=>{i(t)}))})):new Promise((t=>t({identifier:"",imageData:""})))}addImageToContainer(t){return new Promise(((e,i)=>{let r;re.isImageElement(t)?(r=t,this.setBackgroundImage(r),e()):this.getImageElement(t).then((t=>{r=t,this.setBackgroundImage(r),e()})).catch((t=>{i({identifier:"imageLoading",message:t.message})}))}))}getImageElement(t){return new Promise(((e,i)=>{const r=new Image;r.addEventListener("load",(()=>{e(r)})),r.addEventListener("error",(t=>{i(t)})),r.crossOrigin=this.crossOrigin,r.src=t}))}setBackgroundImage(t){this.container?this.container.setData({image:t}):this.container=this.engine.addImage({image:t,blendMode:r.l.NORMAL,opacity:1});const{size:e}=this.container.getBounds();this.engine.getOutputContainer().setResolution(e)}}const ne=(0,r.U)(d()),oe={size:0,color:E.white,hardness:0,maximumSize:.125,minimumSize:0,maximumHardness:1,minimumHardness:0};class se{constructor(t){this.colorList=Ve.defaultColors,this.dirty=ne.observable.box(!1),this.id="",this.containerId=()=>this.id,this.initSize=()=>{const{minimumSize:t,maximumSize:e}=this.state,{size:i}=this;0===i&&this.changeSize(v(this.config,"defaultSize",[t,e]))},this.changeColor=t=>{this.state.color=t},this.changeSize=t=>{this.state.size=t},this.changeRelativeSize=t=>{const{maximumSize:e,minimumSize:i}=this.state;this.state.size=(e-i)*t/100+i},this.changeHardness=t=>{this.state.hardness=t},this.reset=()=>{this.pureReset(),this.addSnapshot(B.DELETE,this.locale.controls.buttonReset),this.editor.render()},this.editor=t,this.state=(0,r.N)((0,r.N)({},oe),{hardness:v(this.config,"defaultHardness",[oe.minimumHardness,oe.maximumHardness]),color:ne.toJS(b(this.config,"defaultColor",oe.color))}),this.config.colors&&this.config.colors.length>0&&(this.colorList=T(ne.toJS(this.config.colors)))}addSnapshot(t,e){this.editor.addSnapshot(void 0,t,e)}clickableCanvas(t){this.editor.clickableCanvas(t)}beginStroke(t=[]){if(!this.drawingContainer){const e=this.editor.orderHelper.addSprite(r.c.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:t},this.editor.imageContainer,e)}this.id=this.drawingContainer.getID(),this.drawingContainer.beginStroke({id:"imgly_brush_radial",color:ne.toJS(this.state.color),size:this.state.size,hardness:this.state.hardness})}strokePosition(t){if(this.drawingContainer){const e=this.editor.previewToWorld(t,!1);this.drawingContainer.addPointToCurrentStroke(e),this.editor.render()}}endStroke(){this.drawingContainer&&(this.drawingContainer.endStroke(),this.editor.render(),this.strokes=this.drawingContainer.getData(),this.addSnapshot(B.EDIT,this.locale.history.brushStroke),this.dirty.set(!0))}updateStateFromHistory(t){if(t=t||{strokes:[]},this.drawingContainer){if(this.strokes&&this.strokes.strokes.length===t.strokes.length)return;this.strokes=t,this.drawingContainer.setData(this.strokes),0!==t.strokes.length&&this.dirty.set(!0)}else{const e=this.editor.orderHelper.addSprite(r.c.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:t.strokes},this.editor.imageContainer,e),this.strokes=this.drawingContainer.getData()}this.id=this.drawingContainer.getID()}pureReset(){this.dirty.set(!1),this.strokes={strokes:[]},this.drawingContainer&&(this.editor.engine.removeContainer(this.drawingContainer),this.drawingContainer=void 0)}get config(){return this.editor.configStore.config[r.c.BRUSH]}get locale(){return this.editor.configStore.locale[r.c.BRUSH]}get localeColor(){return this.editor.configStore.locale.common.color}get color(){return this.state.color}get size(){return this.state.size}get relativeSize(){const{size:t,maximumSize:e,minimumSize:i}=this.state;return 100*(t-i)/(e-i)}get sizeOnScreenSpace(){const t=this.editor.engineMediator.engine.getSmallerOutputSide();return this.editor.worldToPreview(this.state.size*t)}get hardness(){return this.state.hardness}get isDirty(){return this.dirty.get()}}h([ne.observable],se.prototype,"state",2),h([ne.observable],se.prototype,"dirty",2),h([ne.action],se.prototype,"initSize",2),h([ne.action],se.prototype,"changeColor",2),h([ne.action],se.prototype,"changeSize",2),h([ne.action],se.prototype,"changeRelativeSize",2),h([ne.action],se.prototype,"changeHardness",2),h([ne.action],se.prototype,"clickableCanvas",1),h([ne.action],se.prototype,"beginStroke",1),h([ne.action],se.prototype,"strokePosition",1),h([ne.action],se.prototype,"endStroke",1),h([ne.action],se.prototype,"updateStateFromHistory",1),h([ne.action],se.prototype,"reset",2),h([ne.computed],se.prototype,"config",1),h([ne.computed],se.prototype,"locale",1),h([ne.computed],se.prototype,"localeColor",1),h([ne.computed],se.prototype,"color",1),h([ne.computed],se.prototype,"size",1),h([ne.computed],se.prototype,"relativeSize",1),h([ne.computed],se.prototype,"sizeOnScreenSpace",1),h([ne.computed],se.prototype,"hardness",1),h([ne.computed],se.prototype,"isDirty",1);const ae=(0,r.U)(d());var le;!function(t){t.LEADING="leading",t.CENTER="center",t.TRAILING="trailing"}(le||(le={}));const ce={horizontalGuides:[],verticalGuides:[],rotationGuides:[]};class ue{constructor(t){this.previewTopLeftPosition={x:0,y:0},this.getGuideValue=(t,e)=>{const{height:i,width:r}=this.editor.getPreviewSize(),{snapToLeft:n,snapToRight:o,snapToTop:s,snapToBottom:a}=this.configStore.config.snapping.position,l=Math.min(i,r);let c=0;return"bottom"===e?c=Math.round(i-l*a):"top"===e?c=Math.round(l*s):"right"===e?c=Math.round(r-l*o):"left"===e?c=Math.round(l*n):"vertical"===t&&"center"===e?c=Math.round(r/2):"horizontal"===t&&"center"===e&&(c=Math.round(i/2)),c},this.getVerticalGuidesFromConfig=()=>{const{snapToVerticalCenter:t,snapToLeft:e,snapToRight:i}=this.configStore.config.snapping.position,r=[];return t&&r.push({value:this.getGuideValue("vertical","center"),edge:le.CENTER,isVisible:!1,direction:"vertical"}),e&&r.push({value:this.getGuideValue("vertical","left"),edge:le.LEADING,isVisible:!1,direction:"vertical"}),i&&r.push({value:this.getGuideValue("vertical","right"),edge:le.TRAILING,isVisible:!1,direction:"vertical"}),r},this.getHorizontalGuidesFromConfig=()=>{const{snapToHorizontalCenter:t,snapToTop:e,snapToBottom:i}=this.configStore.config.snapping.position,r=[];return t&&r.push({value:this.getGuideValue("horizontal","center"),edge:le.CENTER,isVisible:!1,direction:"horizontal"}),e&&r.push({value:this.getGuideValue("horizontal","top"),edge:le.LEADING,isVisible:!1,direction:"horizontal"}),i&&r.push({value:this.getGuideValue("horizontal","bottom"),edge:le.TRAILING,isVisible:!1,direction:"horizontal"}),r},this.getRotationGuidesFromConfig=()=>{const{angles:t}=this.configStore.config.snapping.rotation,e=[];t.forEach((t=>{e.push(t),e.push(t+360),e.push(t-360)}));return e.filter(((t,i)=>e.indexOf(t)===i)).map((t=>({value:t*Math.PI/180,edge:le.CENTER,isVisible:!1,position:{x:0,y:0}})))},this.getSpriteDimensions=({leftTop:t,leftBottom:e,rightTop:i,rightBottom:r})=>{const n=Math.min(t.y,i.y,e.y,r.y),o=Math.max(t.y,i.y,e.y,r.y),s=Math.min(t.x,i.x,e.x,r.x),a=Math.max(t.x,i.x,e.x,r.x);return{height:Math.round(o-n),width:Math.round(a-s)}},this.mapRange=({value:t,fromMin:e,fromLength:i,toMin:r,toLength:n})=>(t-e)*n/i+r,this.updateGuides=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig()},this.mapToSnapSystem=(t,e,i,r)=>{if(0===e.length)return t;if(e[0]>t)return t-i;for(let n=0;n<e.length-1;n+=1){const o=e[n],s=e[n+1];let a=o+i,l=s-i,c=0;r&&(c=n*i*2,a+=c,l+=c+2*i);const u=1e-5;if(o<=t&&t<=s)return t<=o+u?o+c:t>=s-u?s+c+(r?2*i:0):this.mapRange({value:t,fromMin:o,fromLength:s-o,toMin:a,toLength:l-a})}return r?t+(e.length-1)*i*2+i:t},this.mapFromSnapSystem=(t,e,i,r)=>{if(0===e.length)return t;if(e[0]>t)return t>=e[0]-i?e[0]:t+i;let n=t;for(let o=0;o<e.length-1;o+=1){const s=e[o],a=e[o+1],l=s+i;let c=a-i,u=a;if(r&&(c+=2*i,u+=2*i,n=t-o*i*2),s<=n&&n<=u)return l<=n&&n<=c?this.mapRange({value:n,fromMin:l,fromLength:c-l,toMin:s,toLength:a-s}):n<l?s:a}n-=3*i;const o=e[e.length-1];return n<=o?o:n},this.centerSnapValue=(t,e)=>{const i=.5*e,{value:r,edge:n}=t;let o=r;return n===le.LEADING?o+=i:n===le.TRAILING&&(o-=i),o},this.mapSnappingGuidesToCenter=(t,e)=>{const i=[];return t.forEach((t=>{i.push(this.centerSnapValue(t,e))})),i},this.calcSnapThresholdInRadians=(t,e)=>0===t?0:e/t,this.calculatePreviewTopLeftPosition=()=>{const t=this.editor.engineMediator.preview.container.getPosition(),e=this.editor.getPreviewSize(),i=Ve.devicePixelRatio;this.previewTopLeftPosition={x:t.x/i-e.width/2,y:t.y/i-e.height/2}},this.snapToRotation=(t,e,i)=>{const{rotationGuides:n}=this.state,{enabled:o,threshold:s}=this.configStore.config.snapping.rotation,{x:a,y:l}=this.previewTopLeftPosition,{width:c}=this.editor.getPreviewSize();let u=(t+2*Math.PI)%(2*Math.PI);if(o){const o=new r.C(e).magnitude,h=n.map((t=>t.value)).sort(((t,e)=>t-e)),d=this.calcSnapThresholdInRadians(o,s);if(!this.rotationOffset){const e=this.mapToSnapSystem(t,h,d,!1);this.rotationOffset=e-u}u=this.mapFromSnapSystem(u+this.rotationOffset,h,d,!1);const p={x:i.position.x-a-c,y:i.position.y-l};return n.forEach((t=>{t.isVisible=t.value===u,t.position=p})),u}return t},this.snapToPosition=(t,e)=>{const{horizontalGuides:i,verticalGuides:n}=this.state,{enabled:o,threshold:s}=this.configStore.config.snapping.position,a=new r.C(this.previewTopLeftPosition),{height:l,width:c}=this.getSpriteDimensions(e),{x:u,y:h}=new r.C(t).subtract(a);if(o){const t=this.mapSnappingGuidesToCenter(i,l).sort(((t,e)=>t-e)),e=this.mapSnappingGuidesToCenter(n,c).sort(((t,e)=>t-e));if(!this.positionOffset){const i=this.mapToSnapSystem(u,e,s,!0),n=this.mapToSnapSystem(h,t,s,!0);this.positionOffset=new r.C(i,n).subtract(new r.C(u,h))}let o=this.mapFromSnapSystem(u+this.positionOffset.x,e,s,!0),d=this.mapFromSnapSystem(h+this.positionOffset.y,t,s,!0);return o=Math.round(o),d=Math.round(d),i.forEach((t=>{const e=Math.round(this.centerSnapValue(t,l));t.isVisible=e===d})),n.forEach((t=>{const e=Math.round(this.centerSnapValue(t,c));t.isVisible=e===o})),new r.C(o,d).add(a)}return{x:u,y:h}},this.editor=t,this.configStore=t.configStore,this.state=ae.observable(ce),this.rotationOffset=null,this.positionOffset=null,this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig(),this.state.rotationGuides=this.getRotationGuidesFromConfig()}hidePositionGuides(){this.positionOffset=null,this.state.verticalGuides=this.state.verticalGuides.map((t=>(0,r.N)((0,r.N)({},t),{isVisible:!1}))),this.state.horizontalGuides=this.state.horizontalGuides.map((t=>(0,r.N)((0,r.N)({},t),{isVisible:!1})))}hideRotationGuides(){this.rotationOffset=null,this.state.rotationGuides=this.state.rotationGuides.map((t=>(0,r.N)((0,r.N)({},t),{isVisible:!1})))}get positionGuides(){const{verticalGuides:t,horizontalGuides:e}=this.state;return[...t,...e]}get rotationGuides(){return this.state.rotationGuides}}h([ae.observable],ue.prototype,"state",2),h([ae.action],ue.prototype,"snapToRotation",2),h([ae.action],ue.prototype,"snapToPosition",2),h([ae.action],ue.prototype,"hidePositionGuides",1),h([ae.action],ue.prototype,"hideRotationGuides",1),h([ae.computed],ue.prototype,"positionGuides",1),h([ae.computed],ue.prototype,"rotationGuides",1);const he=(0,r.U)(d());function de(t,e=null){return new Promise(((i,n)=>{const o=new Image;o.addEventListener("load",(()=>{const t=document.createElement("canvas"),n=t.getContext("2d");t.width=o.width,t.height=o.height,e&&(t.width=e,t.height=e*o.height/o.width),n.drawImage(o,0,0,t.width,t.height),i(t.toDataURL(r.f.PNG))})),o.addEventListener("error",(()=>{n()})),o.src=t}))}const pe=t=>new Promise(((e,i)=>{const n=new FileReader;n.onload=n=>(0,r.Z)(void 0,null,(function*(){try{const{result:i}=n.target,o=yield de(i,150);e({stickerURI:i,thumbnailURI:o,name:t.name||"",type:t.type,identifier:(0,r.H)()})}catch(t){i(t)}})),n.onerror=t=>{i(t)},n.readAsDataURL(t)})),fe=(0,r.U)(d()),me={identifier:"identity",opacity:1,tintColor:E.white,tintMode:"none",resizeMode:"keepAspect"},ge={},_e="identity",ye="imgly_sticker_custom";class ve{constructor(t){this.state=fe.observable.map(ge),this.customStickers=[],this.colorList=Ve.defaultColors,this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},this.doesStickerAssetExist=t=>-1!==this.entityManager.items.findIndex((e=>e.identifier===t)),this.add=t=>{const e=this.entityManager.items.find((e=>e.identifier===t)),i=e?e.tintMode:me.tintMode,r=e?e.resizeMode:me.resizeMode;this.editor.spriteStore.addSticker({state:{identifier:t,tintMode:i,tintColor:me.tintColor,opacity:me.opacity,resizeMode:r}})},this.duplicate=()=>{if(this.id){const t=this.editor.spriteStore.getDuplicateContainerTransform(this.id),e=this.editor.spriteStore.getDuplicateContainerFlip(this.id),{flipHorizontally:i,flipVertically:r}=this.editor.outputContainer.getData();this.editor.spriteStore.addSticker({state:{identifier:this.identifier,tintColor:fe.toJS(this.tintColor),tintMode:this.tintMode,resizeMode:this.resizeMode,opacity:this.opacity,flipHorizontally:i!==e.flipHorizontally,flipVertically:r!==e.flipVertically},transform:t})}},this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)},this.flipHorizontally=()=>{this.id&&this.editor.spriteStore.flipHorizontally(this.id)},this.delete=()=>{if(this.id){const t=this.id;this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast()}},this.updateStateFromHistory=(t,e)=>{this.setState(t,e),this.editor.spriteStore.setContainerProperties(t,e)},this.setState=(t,e)=>{const i=this.state.get(t);i?("opacity"in e&&(i.opacity=e.opacity),e.tintColor&&(i.tintColor=e.tintColor),e.tintMode&&(i.tintMode=e.tintMode),e.resizeMode&&(i.resizeMode=e.resizeMode),this.state.set(t,i)):this.state.set(t,{identifier:e.identifier,opacity:e.opacity,tintMode:e.tintMode,resizeMode:e.resizeMode,tintColor:e.tintColor?e.tintColor:me.tintColor})},this.changeOpacity=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{opacity:t});const i=this.editor.spriteStore.getContainerProperties(this.id);e.opacity=i.opacity,this.state.set(this.id,e)}}},this.changeTintColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){const{tintMode:i}=this.entityManager.items.find((t=>t.identifier===this.identifier));this.editor.spriteStore.setContainerProperties(this.id,{tintColor:t,tintMode:i});const r=this.editor.spriteStore.getContainerProperties(this.id);e.tintColor=r.tintColor,e.tintMode=r.tintMode||me.tintMode,this.state.set(this.id,e)}}},this.tintColorSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.history.color)},this.addFiles=t=>(0,r.Z)(this,null,(function*(){if(this.editor.modalStore.showInfoModal("loading"),t.length){let e=0;const i=[];for(e=0;e<t.length;e+=1)i.push(pe(t[e]));try{const e=yield Promise.all(i);this.addCustomStickerAsset(e),this.editor.configStore.events.onStickerUploadedAdd(e.map((({identifier:e,stickerURI:i},r)=>({identifier:e,stickerURI:i,file:t[r]}))))}catch(t){this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading")}}})),this.addCustomStickerAsset=t=>(0,r.Z)(this,null,(function*(){const e=[];t.forEach((({stickerURI:t,thumbnailURI:i,name:r,identifier:n,type:o})=>{e.push({stickerURI:t,thumbnailURI:i,name:r,tintMode:this.customStickerTintMode,resizeMode:"keepAspect",identifier:n}),this.customStickers.push({identifier:n,type:o,stickerURI:t,name:r})}));const i=this.locale.categories[ye];this.editor.assetProvider.addCustomStickerAsset(e,ye,i);const n=this.editor.assetProvider.getAssets("sticker"),{config:o}=this;this.entityManager=new N(n,(0,r.N)((0,r.N)({},o),{categoryKey:"thumbnailURI",itemKey:"stickerURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("sticker")})),this.selectedCategory=ye,this.editor.modalStore.hideModal()})),this.toolSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.history.opacity)},this.addSnapshot=(t,e)=>{this.currentSticker&&this.editor.spriteStore.addSnapshot(t,e)},this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory===t?_e:t},this.pureReset=()=>{this.state=fe.observable.map(ge)},this.editor=t,this.selectedCategory=_e;const{config:e}=this,i=this.editor.assetProvider.getAssets("sticker");this.entityManager=new N(i,(0,r.N)((0,r.N)({},e),{categoryKey:"thumbnailURI",itemKey:"stickerURI",locale:(0,r.N)((0,r.N)({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("sticker")})),me.tintColor=fe.toJS(b(this.config,"defaultTintColor",me.tintColor)),this.config.colors&&this.config.colors.length>0&&(this.colorList=T(fe.toJS(this.config.colors)))}get isStickerSelected(){return this.editor.spriteStore.isSpriteSticker}get isCustomStickerEnabled(){return this.config.enableCustomUpload}get customStickerTintMode(){return this.config.customStickerTintMode}get currentSticker(){if(this.isStickerSelected){const t=this.state.get(this.id);if(t)return t}}get identifier(){if(this.isStickerSelected){const t=this.state.get(this.id);if(t)return t.identifier}return"none"}get id(){return this.isStickerSelected?this.editor.spriteStore.id:void 0}get opacity(){return this.currentSticker?this.currentSticker.opacity:me.opacity}get tintMode(){return this.currentSticker?this.currentSticker.tintMode:me.tintMode}get resizeMode(){return this.currentSticker?this.currentSticker.resizeMode:me.resizeMode}get tintable(){return!!this.currentSticker&&("solid"===this.currentSticker.tintMode||"colorized"===this.currentSticker.tintMode)}get tintColor(){return this.currentSticker?this.currentSticker.tintColor:me.tintColor}get config(){return this.editor.configStore.config[r.c.STICKER]}get locale(){return this.editor.configStore.locale[r.c.STICKER]}get localeColor(){return this.editor.configStore.locale.common.color}get selectedCategoryIdentifier(){return this.selectedCategory}get items(){return this.entityManager.items}get categories(){return this.entityManager.categories}}h([fe.observable],ve.prototype,"selectedCategory",2),h([fe.observable],ve.prototype,"entityManager",2),h([fe.action],ve.prototype,"selectLast",2),h([fe.action],ve.prototype,"add",2),h([fe.action],ve.prototype,"duplicate",2),h([fe.action],ve.prototype,"bringToFront",2),h([fe.action],ve.prototype,"flipHorizontally",2),h([fe.action],ve.prototype,"delete",2),h([fe.action],ve.prototype,"updateStateFromHistory",2),h([fe.action],ve.prototype,"setState",2),h([fe.action],ve.prototype,"changeOpacity",2),h([fe.action],ve.prototype,"changeTintColor",2),h([fe.action],ve.prototype,"addFiles",2),h([fe.action],ve.prototype,"addCustomStickerAsset",2),h([fe.action],ve.prototype,"toggleCategorySelection",2),h([fe.action],ve.prototype,"pureReset",2),h([fe.computed],ve.prototype,"isStickerSelected",1),h([fe.computed],ve.prototype,"isCustomStickerEnabled",1),h([fe.computed],ve.prototype,"customStickerTintMode",1),h([fe.computed],ve.prototype,"currentSticker",1),h([fe.computed],ve.prototype,"identifier",1),h([fe.computed],ve.prototype,"id",1),h([fe.computed],ve.prototype,"opacity",1),h([fe.computed],ve.prototype,"tintMode",1),h([fe.computed],ve.prototype,"resizeMode",1),h([fe.computed],ve.prototype,"tintable",1),h([fe.computed],ve.prototype,"tintColor",1),h([fe.computed],ve.prototype,"config",1),h([fe.computed],ve.prototype,"locale",1),h([fe.computed],ve.prototype,"localeColor",1),h([fe.computed],ve.prototype,"selectedCategoryIdentifier",1),h([fe.computed],ve.prototype,"items",1),h([fe.computed],ve.prototype,"categories",1);const be=(0,r.U)(d()),xe={text:"Write Something",identifier:"imgly_font_open_sans_bold",fontSize:73.3,defaultFontSize:73.3,fontFamily:"Open Sans",fontStyle:"",fontWeight:"bold",lineHeight:1,alignment:"center",textColor:E.white,backgroundColor:E.transparent||[0,0,0,0],width:0},we={},Se={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"SemiBold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular",lighter:"Lighter"};class ke{constructor(t){this.state=be.observable.map(we),this.colorList=Ve.defaultColors,this.backgroundColorList=Ve.defaultBackgroundColors,this.loadingObservable=be.observable.box(!1),this.loadfonts=t=>{if(this.fontsLoaded)t();else{const e=this.editor.assetProvider.getFontManager(),i=this.editor.assetProvider.getFontAssetsForText().map((t=>t.identifier));e.loadFontsWithIdentifiers(i).then((()=>{this.loadingObservable.set(!0),t()})).catch((t=>{console.error(t),this.editor.modalStore.showActionModal({type:r.E.ERROR,identifier:"fontLoading",error:t})}))}},this.doesTextAssetExist=t=>-1!==this.editor.assetProvider.getFontAssets().findIndex((e=>e.identifier===t)),this.validFontWithConfig=t=>this.fonts.find((e=>e.identifier===t))||this.fonts[0],this.addOrselect=()=>{this.state.size?this.selectLast():this.add()},this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},this.add=()=>{this.loadfonts((()=>{this.editor.spriteStore.addText({state:{identifier:xe.identifier,text:xe.text,textColor:xe.textColor,backgroundColor:xe.backgroundColor,lineHeight:xe.lineHeight,alignment:xe.alignment,fontSize:0}})}))},this.duplicate=()=>{if(this.id){const t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addText({state:{identifier:this.identifier,text:this.text,textColor:be.toJS(this.textColor),lineHeight:this.lineHeight,alignment:this.alignment,fontSize:this.fontSize,backgroundColor:be.toJS(this.backgroundColor),width:this.width},transform:t})}},this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)},this.delete=()=>{if(this.id){const t=this.id;this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast()}},this.setEditMode=t=>{this.editor.spriteStore.setEditMode(t)},this.changeFont=t=>{const e=this.fonts.find((e=>e.identifier===t));this.changeIdentifier(e,this.id),this.id&&this.addSnapshot(B.EDIT,this.locale.history.fontFamily)},this.changeIdentifier=(t,e)=>{be.runInAction((()=>{if(t&&e){const i=this.state.get(e);if(i){this.editor.spriteStore.setContainerProperties(e,{fontIdentifier:t.identifier},!0);const r=this.editor.spriteStore.getContainerProperties(e);i.identifier=r.fontIdentifier,i.fontFamily=t.fontFamily,i.fontStyle=t.fontStyle,i.fontWeight=t.fontWeight,i.fontSize=r.fontSize,i.width=r.width,i.defaultFontSize=i.fontSize,this.state.set(e,i)}}}))},this.changeFontSize=(t,e=!1)=>{if(this.id){const i=this.state.get(this.id);i&&(i.fontSize=t,e&&(i.defaultFontSize=t),this.state.set(this.id,i))}},this.updateDefaultFontSize=()=>{if(this.id){const t=this.state.get(this.id);t&&(t.defaultFontSize=t.fontSize,this.state.set(this.id,t))}},this.changeSize=(t,e)=>{const i=this.state.get(t);i&&(i.width=e.width,i.fontSize=e.fontSize,i.defaultFontSize=e.fontSize,this.state.set(t,i))},this.changeWidth=t=>{if(this.id){const e=this.state.get(this.id);e&&(e.width=t,this.state.set(this.id,e))}},this.changeText=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{text:t},!0);let i=this.editor.spriteStore.getContainerProperties(this.id);const r=this.editor.outputContainer.getSizeInOutputSpace(),n=this.editor.spriteStore.getSize(this.id);this.config.disableAutoScaling||n.height>r.height&&this.editor.spriteStore.setContainerProperties(this.id,{fontSize:this.calculateFitFontSize(this.id,r.height)},!0),i=this.editor.spriteStore.getContainerProperties(this.id),e.text=i.text,e.fontSize=i.fontSize,e.defaultFontSize=i.fontSize,this.state.set(this.id,e),this.addSnapshot(B.EDIT,this.locale.history.edit)}}},this.calculateFitFontSize=(t,e)=>{if(!ke.measureContext){const t=document.createElement("canvas");ke.measureContext=t.getContext("2d")}const i=this.editor.spriteStore.getContainerProperties(t),n=this.editor.engine.assetProvider.getFontManager().getFontWithId(i.fontIdentifier),o=this.config.minFontSizeForAutoScaling,s=(0,r.Y)(ke.measureContext,i.text,n,i.fontSize,i.lineHeight,i.width,n.textMetrics),a=Math.min(Math.floor(i.fontSize*(e/s.height)),1),l=Math.round(i.fontSize);let c=0,u=l-a,h=Math.floor(2*(l-a)),d=u;for(;c<=h;){u=c+Math.floor((h-c)/2);const t=(0,r.Y)(ke.measureContext,i.text,n,u,i.lineHeight,i.width,n.textMetrics);if(e<t.height)h=u-1,d=u-1;else{if(!(e>t.height)){d=u;break}if(c=u+1,a+u>=l)return l}}return o&&d<o?o:d},this.changeLineHeight=t=>{if(this.id){const e=this.state.get(this.id);if(e&&t){this.editor.spriteStore.setContainerProperties(this.id,{lineHeight:t},!0);const i=this.editor.spriteStore.getContainerProperties(this.id);e.lineHeight=i.lineHeight,this.state.set(this.id,e)}}},this.changeColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{textColor:t});const i=this.editor.spriteStore.getContainerProperties(this.id);e.textColor=i.textColor,this.state.set(this.id,e)}}},this.changeBackgroundColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{backgroundColor:t});const i=this.editor.spriteStore.getContainerProperties(this.id);e.backgroundColor=i.backgroundColor,this.state.set(this.id,e)}}},this.colorSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.history.textColor)},this.backgroundColorSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.history.backgroundColor)},this.changeAlignment=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{alignment:t});const i=this.editor.spriteStore.getContainerProperties(this.id);e.alignment=i.alignment,this.state.set(this.id,e),this.addSnapshot(B.EDIT,this.locale.history.alignment)}}},this.toolSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.history.lineSpacing)},this.addSnapshot=(t,e)=>{this.currentText&&this.editor.spriteStore.addSnapshot(t,e)},this.updateStateFromHistory=(t,e)=>{this.setState(t,e),this.editor.spriteStore.setContainerProperties(t,e)},this.setState=(t,e)=>{const i=this.state.get(t);if(i)e.alignment&&(i.alignment=e.alignment),e.text&&(i.text=e.text),e.lineHeight&&(i.lineHeight=e.lineHeight),e.textColor&&(i.textColor=e.textColor),e.backgroundColor&&(i.backgroundColor=e.backgroundColor),e.fontIdentifier&&(i.identifier=e.fontIdentifier),e.fontSize&&(i.fontSize=e.fontSize,i.defaultFontSize=e.fontSize),e.width&&(i.width=e.width);else{const i=this.validFontWithConfig(e.fontIdentifier);i&&this.state.set(t,{text:e.text,identifier:i.identifier,alignment:e.alignment,textColor:e.textColor?e.textColor:xe.textColor,backgroundColor:e.backgroundColor?e.backgroundColor:xe.backgroundColor,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontSize:e.fontSize,fontWeight:i.fontWeight,lineHeight:e.lineHeight,width:e.width,defaultFontSize:e.fontSize})}},this.setFontSize=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{fontSize:t},!0);const i=this.editor.spriteStore.getContainerProperties(this.id);e.fontSize=i.fontSize,e.defaultFontSize=i.fontSize,this.state.set(this.id,e)}}},this.pureReset=()=>{this.state=be.observable.map(we)},this.editor=t,this.fonts.find((t=>t.identifier===xe.identifier))||(xe.identifier=this.fonts[0].identifier),xe.textColor=be.toJS(b(this.config,"defaultColor",xe.textColor)),xe.backgroundColor=be.toJS(b(this.config,"defaultBackgroundColor",xe.backgroundColor)),xe.text=this.locale.canvasControls.placeholderText,this.config.colors&&this.config.colors.length>0&&(this.colorList=T(be.toJS(this.config.colors))),this.config.backgroundColors&&this.config.backgroundColors.length>0&&(this.backgroundColorList=T(be.toJS(this.config.backgroundColors)))}static defaultText(){return xe.text}static getDisplayFontStyle(t){const e=t.fontWeight&&"regular"!==Se[t.fontWeight].toLowerCase()?Se[t.fontWeight]:"",i=t.fontStyle&&"normal"!==t.fontStyle.toLowerCase()?t.fontStyle:"";return`${t.fontFamily.toLowerCase().includes(e.toLowerCase())?"":e} ${i}`.trim()}get isEditMode(){return this.editor.spriteStore.isEditMode}get isTextSelected(){return this.editor.spriteStore.isSpriteText}get fontsLoaded(){return this.loadingObservable.get()}get currentText(){if(this.isTextSelected){const t=this.state.get(this.id);if(t)return t}}get text(){return this.currentText?this.currentText.text:xe.text}get fontSize(){return this.currentText?this.currentText.fontSize:xe.fontSize}get defaultFontSize(){return this.currentText?this.currentText.defaultFontSize:xe.defaultFontSize}get width(){return this.currentText?this.currentText.width:xe.width}get fontFamily(){return this.currentText?this.currentText.fontFamily:xe.fontFamily}get fontStyle(){return this.currentText?this.currentText.fontStyle:xe.fontStyle}get fontWeight(){return this.currentText?this.currentText.fontWeight:xe.fontWeight}get lineHeight(){return this.currentText?this.currentText.lineHeight:xe.lineHeight}get identifier(){return this.currentText?this.currentText.identifier:xe.identifier}get id(){return this.isTextSelected?this.editor.spriteStore.id:void 0}get alignment(){return this.currentText?this.currentText.alignment:xe.alignment}get textColor(){return this.currentText?this.currentText.textColor:xe.textColor}get backgroundColor(){return this.currentText?this.currentText.backgroundColor:xe.backgroundColor}get config(){return this.editor.configStore.config[r.c.TEXT]}get locale(){return this.editor.configStore.locale[r.c.TEXT]}get localeColor(){return this.editor.configStore.locale.common.color}get rawOptions(){return this.editor.assetProvider.getFontAssetsForText()}get fonts(){return this.rawOptions.reduce(((t,e)=>this.rawOptions.find((t=>t.identifier===e.identifier))?[...t,{identifier:e.identifier,fontFamily:e.fontFamily,fontStyle:e.fontStyle||"",fontWeight:e.fontWeight||""}]:t),[])}get fontFamilies(){return[...new Set(this.fonts)]}}h([be.action],ke.prototype,"addOrselect",2),h([be.action],ke.prototype,"selectLast",2),h([be.action],ke.prototype,"add",2),h([be.action],ke.prototype,"duplicate",2),h([be.action],ke.prototype,"bringToFront",2),h([be.action],ke.prototype,"delete",2),h([be.action],ke.prototype,"setEditMode",2),h([be.action],ke.prototype,"changeFont",2),h([be.action],ke.prototype,"changeIdentifier",2),h([be.action],ke.prototype,"changeFontSize",2),h([be.action],ke.prototype,"updateDefaultFontSize",2),h([be.action],ke.prototype,"changeSize",2),h([be.action],ke.prototype,"changeWidth",2),h([be.action],ke.prototype,"changeText",2),h([be.action],ke.prototype,"changeLineHeight",2),h([be.action],ke.prototype,"changeColor",2),h([be.action],ke.prototype,"changeBackgroundColor",2),h([be.action],ke.prototype,"changeAlignment",2),h([be.action],ke.prototype,"updateStateFromHistory",2),h([be.action],ke.prototype,"setState",2),h([be.action],ke.prototype,"setFontSize",2),h([be.action],ke.prototype,"pureReset",2),h([be.computed],ke.prototype,"isEditMode",1),h([be.computed],ke.prototype,"isTextSelected",1),h([be.computed],ke.prototype,"fontsLoaded",1),h([be.computed],ke.prototype,"currentText",1),h([be.computed],ke.prototype,"text",1),h([be.computed],ke.prototype,"fontSize",1),h([be.computed],ke.prototype,"defaultFontSize",1),h([be.computed],ke.prototype,"width",1),h([be.computed],ke.prototype,"fontFamily",1),h([be.computed],ke.prototype,"fontStyle",1),h([be.computed],ke.prototype,"fontWeight",1),h([be.computed],ke.prototype,"lineHeight",1),h([be.computed],ke.prototype,"identifier",1),h([be.computed],ke.prototype,"id",1),h([be.computed],ke.prototype,"alignment",1),h([be.computed],ke.prototype,"textColor",1),h([be.computed],ke.prototype,"backgroundColor",1),h([be.computed],ke.prototype,"config",1),h([be.computed],ke.prototype,"locale",1),h([be.computed],ke.prototype,"localeColor",1),h([be.computed],ke.prototype,"rawOptions",1),h([be.computed],ke.prototype,"fonts",1),h([be.computed],ke.prototype,"fontFamilies",1);const Ce=(0,r.U)(d()),Te={identifier:"imgly_text_design_blocks",color:E.white,isInverted:!1,text:"Write Something With Style",seed:0,padding:0,width:0},Ee={imgly_text_design_blocks:835,imgly_text_design_rotated:6,imgly_text_design_blocks_light:3,imgly_text_design_equal_width:727,imgly_text_design_masked:259,imgly_text_design_celebrate:579,imgly_text_design_sunshine:77,imgly_text_design_masked_badge:683,imgly_text_design_blocks_condensed:673,imgly_text_design_celebrate_simple:425,imgly_text_design_equal_width_fat:961,imgly_text_design_watercolor:671,imgly_text_design_particles:683,imgly_text_design_masked_speech_bubble:317,imgly_text_design_masked_speech_bubble_comic:229,imgly_text_design_multiline:831},Re={};class De{constructor(t){this.state=Ce.observable.map(Re),this.colorList=Ve.defaultColors,this.fontsLoaded=!1,this.loadfonts=t=>{if(this.fontsLoaded)t();else{const e=this.editor.assetProvider.getFontManager(),i=this.editor.assetProvider.getFontAssetsForTextDesign().map((t=>t.identifier));e.loadFontsWithIdentifiers(i).then((()=>{this.fontsLoaded=!0,t()})).catch((t=>{console.error(t),this.editor.modalStore.showActionModal({type:r.E.ERROR,identifier:"fontLoading",error:i[0]})}))}},this.doesTextDesignAssetExist=t=>-1!==this.entityManager.items.findIndex((e=>e.identifier===t)),this.addOrselect=()=>{this.state.size?this.selectLast():this.add()},this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},this.add=()=>{this.loadfonts((()=>{this.editor.spriteStore.addTextDesign({state:{identifier:Te.identifier,text:Te.text,color:Te.color,isInverted:Te.isInverted,seed:Ee[Te.identifier]||Te.seed,padding:0}})}))},this.updateStateFromHistory=(t,e)=>{const i=this.state.get(t);e.identifier===i.identifier?(this.setState(t,e),this.editor.spriteStore.setContainerProperties(t,e)):this.changeIdentifier(e.identifier,!1,e.seed,t)},this.setState=(t,e)=>{const i=this.state.get(t);i?(e.inverted&&(i.isInverted=e.inverted),e.seed&&(i.seed=e.seed),e.color&&(i.color=e.color),e.padding&&(i.padding=e.padding),e.width&&(i.width=e.width)):this.state.set(t,{width:e.width,text:e.text,isInverted:e.inverted,identifier:e.identifier,seed:e.seed,color:e.color?e.color:Te.color,padding:e.padding})},this.changeText=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{text:t},!0);const i=this.editor.spriteStore.getContainerProperties(this.id);e.text=i.text,this.state.set(this.id,e),this.addSnapshot(B.EDIT,this.locale.history.edit)}}},this.setEditMode=t=>{this.editor.spriteStore.setEditMode(t)},this.duplicate=()=>{if(this.id){const t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addTextDesign({state:{identifier:this.identifier,text:this.text,color:Ce.toJS(this.color),isInverted:this.isInverted,seed:this.seed,padding:this.padding,width:this.width},transform:t})}},this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)},this.addSnapshot=(t,e)=>{this.currentTextDesign&&this.editor.spriteStore.addSnapshot(t,e)},this.delete=(t=this.id)=>{t&&(this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast())},this.changeSeed=()=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{seed:-1},!0);const e=this.editor.spriteStore.getContainerProperties(this.id);t.seed=e.seed,this.state.set(this.id,t),this.addSnapshot(B.EDIT,this.locale.history.shuffle)}}},this.changeIdentifier=(t,e=!0,i=null,r=this.id)=>{if(r&&t!==this.identifier){const n=this.state.get(r),o=this.editor.spriteStore.getContainerTransform(r);this.editor.spriteStore.addTextDesign({spriteId:r,state:{identifier:t,text:n.text,color:Ce.toJS(n.color),isInverted:n.isInverted,seed:i||Ee[t]||n.seed,padding:n.padding,width:n.width},transform:o},e,!0)}},this.changeColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{color:t});const i=this.editor.spriteStore.getContainerProperties(this.id);e.color=i.color,this.state.set(this.id,e)}}},this.colorSnapshot=()=>{this.addSnapshot(B.EDIT,this.locale.history.color)},this.invertBackground=()=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{inverted:!t.isInverted},!0);const e=this.editor.spriteStore.getContainerProperties(this.id);t.isInverted=e.inverted,this.state.set(this.id,t),this.addSnapshot(B.EDIT,this.locale.history.invert)}}},this.changeWidth=t=>{if(this.id){const e=this.state.get(this.id);e&&(e.width=t,this.state.set(this.id,e))}},this.changePadding=t=>{if(this.id){const e=this.state.get(this.id);e&&(e.padding=t,this.state.set(this.id,e))}},this.pureReset=()=>{this.state=Ce.observable.map(Re)},this.editor=t;const e=this.editor.assetProvider.getAssets("textdesign");this.entityManager=new N(e,(0,r.N)((0,r.N)({},this.config),{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:{},getAssetPath:this.editor.getAssetPath("textdesign")})),this.entityManager.items.find((t=>t.identifier===Te.identifier))||(Te.identifier=this.entityManager.items[0].identifier),Te.text=this.locale.canvasControls.placeholderText,Te.color=Ce.toJS(b(this.config,"defaultColor",Te.color)),this.config.colors&&this.config.colors.length>0&&(this.colorList=T(Ce.toJS(this.config.colors)))}static defaultText(){return Te.text}get isTextDesignSelected(){return this.editor.spriteStore.isSpriteTextDesign}get isEditMode(){return this.editor.spriteStore.isEditMode}get currentTextDesign(){if(this.isTextDesignSelected&&this.id){const t=this.state.get(this.id);if(t)return t}}get id(){return this.isTextDesignSelected?this.editor.spriteStore.id:void 0}get text(){return this.currentTextDesign?this.currentTextDesign.text:Te.text}get seed(){return this.currentTextDesign?this.currentTextDesign.seed:Te.seed}get padding(){return this.currentTextDesign?this.currentTextDesign.padding:Te.padding}get width(){return this.currentTextDesign?this.currentTextDesign.width:Te.width}get identifier(){return this.currentTextDesign?this.currentTextDesign.identifier:null}get isInverted(){return this.currentTextDesign?this.currentTextDesign.isInverted:Te.isInverted}get color(){return this.currentTextDesign?this.currentTextDesign.color:Te.color}get config(){return this.editor.configStore.config[r.c.TEXT_DESIGN]}get locale(){return this.editor.configStore.locale[r.c.TEXT_DESIGN]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}}h([Ce.action],De.prototype,"addOrselect",2),h([Ce.action],De.prototype,"selectLast",2),h([Ce.action],De.prototype,"add",2),h([Ce.action],De.prototype,"updateStateFromHistory",2),h([Ce.action],De.prototype,"setState",2),h([Ce.action],De.prototype,"changeText",2),h([Ce.action],De.prototype,"setEditMode",2),h([Ce.action],De.prototype,"duplicate",2),h([Ce.action],De.prototype,"bringToFront",2),h([Ce.action],De.prototype,"delete",2),h([Ce.action],De.prototype,"changeSeed",2),h([Ce.action],De.prototype,"changeIdentifier",2),h([Ce.action],De.prototype,"changeColor",2),h([Ce.action],De.prototype,"invertBackground",2),h([Ce.action],De.prototype,"changeWidth",2),h([Ce.action],De.prototype,"changePadding",2),h([Ce.action],De.prototype,"pureReset",2),h([Ce.computed],De.prototype,"isTextDesignSelected",1),h([Ce.computed],De.prototype,"isEditMode",1),h([Ce.computed],De.prototype,"currentTextDesign",1),h([Ce.computed],De.prototype,"id",1),h([Ce.computed],De.prototype,"text",1),h([Ce.computed],De.prototype,"seed",1),h([Ce.computed],De.prototype,"padding",1),h([Ce.computed],De.prototype,"width",1),h([Ce.computed],De.prototype,"identifier",1),h([Ce.computed],De.prototype,"isInverted",1),h([Ce.computed],De.prototype,"color",1),h([Ce.computed],De.prototype,"config",1),h([Ce.computed],De.prototype,"locale",1),h([Ce.computed],De.prototype,"localeColor",1),h([Ce.computed],De.prototype,"items",1);const Ie=t=>({height:t.y,width:t.x}),Oe={},Ae="none",Fe={x:0,y:0};class Me{constructor(t){this.state=he.observable.map(Oe),this.selectedId=he.observable.box(Ae),this.editMode=he.observable.box(!1),this.dragMode=he.observable.box(!1),this.minLength=0,this.addSticker=(t,e=!0)=>(0,r.Z)(this,null,(function*(){yield this.addStickerAsync(t,e)})),this.addStickerAsync=(t,...e)=>(0,r.Z)(this,[t,...e],(function*({spriteId:t,state:e,transform:i},n=!0){return new Promise(((o,s)=>{i=this.getInitialTransform(i);const{identifier:a}=e,l=this.editor.orderHelper.addSprite(a);this.editor.engine.addStickerFromAssets(a,this.editor.engineMediator.image.container,l).then((s=>(0,r.Z)(this,null,(function*(){t&&s.setData({id:t});const l=s.getID();this.container[l]=s,this.editor.orderHelper.renameSprite(a,l);const c=this.getSize(l);let u;if(c.width*=s.getScale().x,c.height*=s.getScale().y,s.setPivot(.5,.5),i.scale)u=i.scale;else if(i.size)u={x:i.size.width/c.width,y:i.size.height/c.height};else{const t=.4*this.editor.shortestOutputSide,e=Me.magnitude(t)/Me.sizeMagnitude(s.getSizeInWorldSpace());u={x:e,y:e}}const{flipHorizontally:h,flipVertically:d}=this.editor.outputContainer.getData();s.setFlipHorizontally(h),s.setFlipVertically(d),s.setTransform({position:i.position,scale:u,rotation:i.rotation}),void 0!==e.flipHorizontally&&s.setFlipHorizontally(e.flipHorizontally!==h),void 0!==e.flipVertically&&s.setFlipVertically(e.flipVertically!==d),this.setContainerProperties(l,(0,r.N)({},e));const p=s.getData();this.setInitialSpriteState(l,r.c.STICKER),this.stickerToolStore.setState(l,(0,r.N)((0,r.N)({},p),{identifier:a})),yield this.editor.renderPromise(),n&&(this.selectedId.set(l),this.addSnapshot(B.ADD,this.stickerLocale.add)),o()})))).catch((t=>{console.error(t),s()}))}))})),this.addText=(t,e=!0)=>(0,r.Z)(this,null,(function*(){yield this.addTextAsync(t,e)})),this.addTextAsync=({spriteId:t,state:e,transform:i},n=!0)=>new Promise(((o,s)=>{i=this.getInitialTransform(i);const a=this.editor.orderHelper.addSprite(e.identifier),l=this.editor.shortestOutputSide,c={fontIdentifier:e.identifier,text:e.text,width:e.width||.6*l,fontSize:e.fontSize||.1*l,lineHeight:e.lineHeight,alignment:e.alignment,textColor:e.textColor,backgroundColor:e.backgroundColor};this.editor.engine.addTextWithFontLoading(c,this.editor.engineMediator.image.container,a).then((s=>(0,r.Z)(this,null,(function*(){t&&s.setData({id:t});const a=s.getID();this.container[a]=s,this.editor.orderHelper.renameSprite(e.identifier,this.id);const{flipHorizontally:l,flipVertically:c}=this.editor.outputContainer.getData();s.setFlipHorizontally(l),s.setFlipVertically(c),s.setPivot(.5,.5),s.setPosition(i.position),s.setRotation(i.rotation),this.setInitialSpriteState(a,r.c.TEXT);const u=s.getData();this.textToolStore.setState(a,(0,r.N)({},u)),yield this.editor.renderPromise(),n&&(this.selectedId.set(a),this.addSnapshot(B.ADD,this.textLocale.add)),o()})))).catch((t=>{console.error(t),s()}))})),this.addTextDesign=(t,e=!0,i=!1)=>(0,r.Z)(this,null,(function*(){yield this.addTextDesignAsync(t,e,i)})),this.addTextDesignAsync=({spriteId:t,state:e,transform:i},n=!0,o=!1)=>new Promise(((s,a)=>{i=this.getInitialTransform(i);const l=this.editor.orderHelper.addSprite(e.identifier),c=this.editor.shortestOutputSide,u={width:e.width||.6*c,text:e.text,color:e.color,inverted:e.isInverted,seed:e.seed,padding:e.padding};this.editor.engine.addTextDesignAsync(e.identifier,u,this.editor.engineMediator.image.container,l).then((a=>(0,r.Z)(this,null,(function*(){t&&(o&&(this.pureRemoveSprite(t),this.textDesignToolStore.state.delete(t)),a.setData({id:t}));const l=a.getID();this.container[l]=a,this.editor.orderHelper.renameSprite(e.identifier,this.id);const{flipHorizontally:c,flipVertically:u}=this.editor.outputContainer.getData();a.setFlipHorizontally(c),a.setFlipVertically(u),a.setPivot(.5,.5),a.setPosition(i.position),a.setRotation(i.rotation),this.setInitialSpriteState(l,r.c.TEXT_DESIGN);const h=a.getData();this.textDesignToolStore.setState(l,(0,r.N)((0,r.N)({},h),{identifier:e.identifier})),yield this.editor.renderPromise(),n&&(this.selectedId.set(l),this.addSnapshot(B.ADD,this.textDesignLocale.add)),s()})))).catch((t=>{console.error(t),a()}))})),this.spriteLocalTransform=()=>({position:this.editor.previewToOutput(this.position),size:this.size,rotation:this.rotation}),this.clickableCanvas=t=>{this.editor.clickableCanvas(t)},this.setContainerProperties=(t,e,i=!1)=>{this.container[t].setData(e),i&&this.updatePositionAndSize(),this.editor.render()},this.setContainerPosition=(t,e)=>{this.container[t].setPosition(e)},this.pureRemoveSprite=t=>{this.editor.engine.removeContainer(this.container[t]);return-1===this.container[t].getIndexInParent()&&(delete this.container[t],this.state.delete(t),this.editor.orderHelper.removeSprite(t),!0)},this.deleteSprite=(t=this.id)=>{const e=this.state.get(t);e.tool===r.c.STICKER?this.stickerToolStore.delete():e.tool===r.c.TEXT?this.textToolStore.delete():e.tool===r.c.TEXT_DESIGN&&this.textDesignToolStore.delete()},this.removeSprite=t=>{this.pureRemoveSprite(t)&&(this.selectLast(),this.spriteSnapshot("delete"),this.editor.render())},this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)},this.spriteSnapshot=t=>{this.addSnapshot(B.EDIT,this.historyLocale[t])},this.updateStateFromHistory=t=>(0,r.Z)(this,null,(function*(){const e=Object.keys(this.container),i=t.spriteIdList;if(i.length!==e.length){const n=e.filter((t=>-1===i.indexOf(t))),o=i.filter((t=>-1===e.indexOf(t)));n.forEach((t=>{this.pureRemoveSprite(t)}));for(let e=0;e<o.length;e+=1){const i=o[e],n=t.common?t.common[i]:void 0,s=t.text?t.text[i]:void 0,a=t.sticker?t.sticker[i]:void 0,l=t.textdesign?t.textdesign[i]:void 0;if(n){const t={spriteId:i,transform:{size:n.size?Ie(r.C.fromSize(n.size)):void 0,position:new r.C(n.position),rotation:n.rotation}};s?yield this.addNewText(t,s):l?yield this.addNewTextDesign(t,l):a&&(yield this.addNewSticker(t,(0,r.N)((0,r.N)({},a),{flipHorizontally:n.flipHorizontally,flipVertically:n.flipVertically})))}}}else this.updateSpriteStateFromHistory(t)})),this.addNewText=(t,e)=>(0,r.Z)(this,null,(function*(){if(!this.textToolStore.doesTextAssetExist(e.identifier))throw new Error(`Text identifier ${e.identifier} doesn't exist`);yield this.addTextAsync((0,r.N)((0,r.N)({},t),{state:e}),!1)})),this.addNewTextDesign=(t,e)=>(0,r.Z)(this,null,(function*(){if(!this.textDesignToolStore.doesTextDesignAssetExist(e.identifier))throw new Error(`TextDesign identifier ${e.identifier} doesn't exist`);yield this.addTextDesignAsync((0,r.N)((0,r.N)({},t),{state:e}),!1)})),this.addNewSticker=(t,e)=>(0,r.Z)(this,null,(function*(){if(!this.stickerToolStore.doesStickerAssetExist(e.identifier))throw new Error(`Sticker identifier ${e.identifier} doesn't exist`);yield this.addStickerAsync((0,r.N)((0,r.N)({},t),{state:e}),!1)})),this.updateSpriteStateFromHistory=t=>(0,r.Z)(this,null,(function*(){Object.keys(this.container).forEach((e=>{const i=t.common?t.common[e]:void 0,n=t.sticker?t.sticker[e]:void 0,o=t.text?t.text[e]:void 0,s=t.textdesign?t.textdesign[e]:void 0,a=this.state.get(e);if(a&&i){this.state.set(e,a);const t=this.container[e];t.setPosition(new r.C(i.position)),t.setRotation(i.rotation),a.rotation=t.getRotation(),void 0!==i.flipHorizontally&&t.setFlipHorizontally(i.flipHorizontally),void 0!==i.flipVertically&&t.setFlipVertically(i.flipVertically),n?(t.setSizeInWorldSpace(i.size),this.stickerToolStore.updateStateFromHistory(e,n)):o?this.textToolStore.updateStateFromHistory(e,(0,r.N)((0,r.N)({},o),{fontIdentifier:o.identifier})):s&&this.textDesignToolStore.updateStateFromHistory(e,(0,r.N)((0,r.N)({},s),{inverted:s.isInverted})),this.updatePositionAndSize(e)}}))})),this.getSpriteHistoryState=()=>{const t=he.toJS(this.state),e=he.toJS(this.textToolStore.state),i=he.toJS(this.textDesignToolStore.state),n={common:t,[r.c.STICKER]:he.toJS(this.stickerToolStore.state),[r.c.TEXT]:e,[r.c.TEXT_DESIGN]:i,spriteIdList:Object.keys(this.container)};return Object.keys(n.common).forEach((t=>{n.common[t].size=this.container[t].getSizeInWorldSpace(),n.common[t].position=this.container[t].getPosition(),n.common[t].order=this.container[t].getIndexInParent()})),n},this.updateStateFromSerialization=(t,e)=>(0,r.Z)(this,null,(function*(){if(e&&e.length)try{const t=yield Promise.all(e.map((t=>(0,r.Z)(this,[t],(function*({svg:t,raster:e,name:i,identifier:n}){const o=(null==t?void 0:t.data)?r.f.SVG:e.type,s=`data:${o};base64,${(null==t?void 0:t.data)||e.data}`;return{stickerURI:s,thumbnailURI:yield de(s,150),name:i,type:o,identifier:n}})))));yield this.stickerToolStore.addCustomStickerAsset(t)}catch(t){this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading")}for(let e=0;e<t.spriteIdList.length;e+=1){const i=t.spriteIdList[e],n=t.common?t.common[i]:void 0,o=t.sticker?t.sticker[i]:void 0,s=t.text?t.text[i]:void 0,a=t.textdesign?t.textdesign[i]:void 0;if(n){let{size:t}=n;t&&(t={width:this.editor.worldToPreview(n.size.width),height:this.editor.worldToPreview(n.size.height)});const{flipHorizontally:e,flipVertically:l}=this.editor.outputContainer.getData(),c=this.editor.outputContainer.getRotation(),u=l!==e?n.rotation-c:n.rotation+c,h=l!==e?-u:u,d={spriteId:i,transform:{size:t,position:n.position,rotation:h}};if(s){const t=this.textToolStore.validFontWithConfig(s.identifier);s.identifier=null==t?void 0:t.identifier,yield this.addNewText(d,s)}else a?yield this.addNewTextDesign(d,a):o&&(yield this.addNewSticker(d,(0,r.N)((0,r.N)({},o),{flipHorizontally:n.flipHorizontally,flipVertically:n.flipVertically})))}}})),this.serializableState=()=>(0,r.Z)(this,null,(function*(){const t=this.editor.spriteStore.getSpriteHistoryState();Object.keys(t.common).forEach((e=>{const{flipHorizontally:i,flipVertically:r}=this.editor.outputContainer.getData(),n=this.editor.outputContainer.getRotation(),o=r!==i?-t.common[e].rotation:t.common[e].rotation;t.common[e].rotation=r!==i?o+n:o-n}));const e=yield Promise.all(this.editor.spriteStore.stickerToolStore.customStickers.map((t=>(0,r.Z)(this,[t],(function*({identifier:t,type:e,stickerURI:i,name:n}){const o={identifier:t,name:n,raster:{data:"",type:r.f.JPEG}};if(e===r.f.SVG&&(o.svg={data:i.split(",")[1]}),e===r.f.JPEG||e===r.f.PNG)[,o.raster.data]=i.split(","),o.raster.type=e;else{const t=yield de(i);[,o.raster.data]=t.split(","),o.raster.type=r.f.PNG}return o})))));return{sprite:t,customStickers:e}})),this.updateCanvasControls=()=>{Object.keys(this.container).forEach((t=>{this.updatePositionAndSize(t,!0);const e=this.state.get(t);if(e)if(e.tool===r.c.TEXT){const e=this.getContainerProperties(t);this.textToolStore.changeSize(t,e)}else if(e.tool===r.c.TEXT_DESIGN){const e=this.getContainerProperties(t);this.textToolStore.changeWidth(e.width)}}))},this.setEditMode=t=>{this.currentSprite&&-1!==[r.c.TEXT,r.c.TEXT_DESIGN].indexOf(this.tool)&&(t?this.editor.modalStore.showTextEditModal():this.editor.modalStore.hideModal(),this.editMode.set(t))},this.setDragMode=t=>{this.dragMode.set(t)},this.setPosition=t=>{const e=this.currentSprite,i=this.container[this.id];if(e&&i){i.setPosition(this.editor.previewToWorld(t));const{position:r}=this.getSizePositionFromContainer();e.position.x=r.x,e.position.y=r.y,this.state.set(this.id,e),this.editor.render()}},this.setSize=t=>{const e=this.currentSprite;e&&(e.size.width=t.width,e.size.height=t.height,this.state.set(this.id,e))},this.setRotation=t=>{const e=this.currentSprite;if(e){const{flipHorizontally:i,flipVertically:r}=this.editor.outputContainer.getData(),n=this.editor.outputContainer.getRotation(),o=x({rotation:t+n,flipHorizontally:i,flipVertically:r});this.container[this.id].setRotation(o),e.rotation=this.container[this.id].getRotation(),this.state.set(this.id,e),this.editor.render()}},this.onCanvasClick=t=>{this.isEditMode||this.selectHighestOrderSprite(t)},this.select=t=>{const e=this.state.get(t);if(e){this.editor.activeStore.tool!==e.tool&&this.editor.activeStore.selectTool(e.tool),this.selectedId.set(t)}},this.selectLast=()=>{const t=this.editor.orderHelper.getLastSpriteId();t&&this.select(t)},this.selectNext=()=>{if(this.currentSprite){const t=this.container[this.id].getIndexInParent();if(t){const e=Object.keys(this.container).find((e=>this.container[e].getIndexInParent()===t-1));e&&this.select(e)}}},this.deselect=()=>{this.selectedId.set(Ae)},this.bringToFront=t=>{const e=this.editor.orderHelper.bringToFront(t);this.container[t].setIndexInParent(e),this.spriteSnapshot("order"),this.editor.render()},this.flipHorizontally=t=>{const e=this.state.get(t),i=this.container[t];i.setFlipHorizontally(!i.getFlipHorizontally()),e.flipHorizontally=i.getFlipHorizontally(),this.spriteSnapshot("flip"),this.state.set(t,e),this.editor.render()},this.pureReset=()=>{this.selectedId.set(Ae),Array.from(this.state.keys()).forEach((t=>{this.pureRemoveSprite(t)})),this.stickerToolStore.pureReset(),this.textToolStore.pureReset(),this.textDesignToolStore.pureReset()},this.selectHighestOrderSprite=t=>{const e=this.editor.brushToolStore.containerId();if((t=t.filter((t=>t!==e))).length<1)return void this.deselect();let i="",r=0;t.forEach((t=>{const e=this.container[t],n=e&&e.getIndexInParent()||0;n>=r&&(r=n,i=t)})),this.select(i)},this.onCornerDrag=({x:t,y:e})=>{if(this.currentSprite){const i=new r.C(this.currentSprite.position),n=new r.C(t,e),o=n.subtract(i).magnitude,s=this.getSize(),a=2*o/Me.sizeMagnitude(s);if(o>this.minLength)if(this.isSpriteSticker)if("unrestricted"!==this.stickerToolStore.resizeMode)this.setStickerSize({width:s.width*a,height:s.height*a});else{const t=this.rotationWRTOutputRotation,e=n.subtract(i),r=Math.cos(t),o=Math.sin(t),s=Math.max(Math.abs(e.x*r*2+e.y*o*2),this.minLength),a=Math.max(Math.abs(e.x*-o*2+e.y*r*2),this.minLength);this.setStickerSize({width:s,height:a})}else this.isSpriteText?this.setTextSize(s.width*a):this.isSpriteTextDesign&&this.setTextDesignScale(a);this.editor.render()}},this.onWidthDrag=({x:t,y:e})=>{const i=new r.C(this.currentSprite.position),n=new r.C(t,e).subtract(i).magnitude,o=this.editor.previewToWorld(2*n);if(o>this.minLength&&(this.setContainerProperties(this.id,{width:o},!0),this.isSpriteText)){const t=this.getContainerProperties(this.id);this.textToolStore.changeWidth(t.width)}},this.onPaddingDrag=({x:t,y:e})=>{if(this.isSpriteTextDesign){let i=this.getContainerProperties(this.id);const n=new r.C(this.currentSprite.position),o=new r.C(t,e).subtract(n).magnitude,s=Math.max(this.editor.previewToWorld(o)-i.width/2,0);this.setContainerProperties(this.id,{padding:s},!0),this.isSpriteTextDesign&&(i=this.getContainerProperties(this.id),this.textDesignToolStore.changePadding(i.padding))}},this.correctTextFlip=()=>{const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();Object.values(this.container).forEach((i=>{("text"===i.type||"text-design"===i.type)&&(i.setFlipHorizontally(t),i.setFlipVertically(e))}))},this.reverseTextHorizontally=()=>{Object.values(this.container).forEach((t=>{("text"===t.type||"text-design"===t.type)&&t.setFlipHorizontally(!t.getFlipHorizontally())}))},this.reverseTextVertically=()=>{Object.values(this.container).forEach((t=>{("text"===t.type||"text-design"===t.type)&&t.setFlipVertically(!t.getFlipVertically())}))},this.getOutputProperties=()=>this.editor.outputContainer.getData(),this.getContainerProperties=t=>this.container[t].getData(),this.getContainerTransform=t=>this.container[t].getTransform(),this.getDuplicateContainerTransform=t=>{const e=this.container[t].getTransform(),i=.1*this.editor.shortestOutputSide,n=new r.C(e.position).add(new r.C(i,i));return(0,r.N)((0,r.N)({},e),{position:n})},this.getDuplicateContainerFlip=t=>({flipHorizontally:this.container[t].getFlipHorizontally(),flipVertically:this.container[t].getFlipVertically()}),this.updatePositionAndSize=(t=this.id,e=!1)=>{const{position:i,size:r}=this.getSizePositionFromContainer(t),n=this.state.get(t);if(n){if(n.position.x=i.x,n.position.y=i.y,n.size.width=r.width,n.size.height=r.height,e){const e=this.container[t].getRotation();this.container[t].setRotation(e),n.rotation=this.container[t].getRotation()}this.state.set(t,n)}},this.getInitialTransform=t=>{const e=this.editor.outputToWorld(Fe);if(!t){return{rotation:this.editor.outputContainer.getRotation(),position:e}}return(0,r.N)({position:e},t)},this.setInitialSpriteState=(t,e)=>{const i=this.container[t],{position:n,size:o}=this.getSizePositionFromContainer(t),s=i.getRotation(),a=e===r.c.STICKER&&i.getFlipHorizontally(),l=e===r.c.STICKER&&i.getFlipVertically();this.state.set(t,{tool:e,position:n,rotation:s,size:o,flipHorizontally:a,flipVertically:l})},this.setStickerSize=t=>{const e=this.container[this.id];e.setSizeInWorldSpace(this.editor.previewSizeToWorld(t));const i=this.currentSprite;i&&(i.size=this.editor.worldSizeToPreview(e.getSizeInWorldSpace()),this.state.set(this.id,i))},this.setTextSize=t=>{let e=this.getContainerProperties(this.id);const i={width:this.editor.previewToWorld(t)},n=i.width/e.width,o={fontSize:Math.round(e.fontSize*n)},s=this.isSpriteText?(0,r.N)((0,r.N)({},i),o):i;i.width>this.minLength&&o.fontSize&&(this.setContainerProperties(this.id,s,!0),e=this.getContainerProperties(this.id),this.textToolStore.changeFontSize(e.fontSize,!0),this.textToolStore.changeWidth(e.width))},this.setTextDesignScale=t=>{let e=this.getContainerProperties(this.id);const i=e.width*t;if(i>this.minLength){this.setContainerProperties(this.id,{width:i},!0);const{width:t}=this.getContainerProperties(this.id);this.textDesignToolStore.changeWidth(t),e=this.getContainerProperties(this.id),this.textDesignToolStore.changePadding(e.padding)}},this.getSizePositionFromContainer=(t=this.id)=>{const e=this.container[t];if(e){return{position:this.editor.worldToPreview(e.getPosition()),size:this.editor.worldSizeToPreview(e.getSizeInWorldSpace())}}return{position:{x:0,y:0},size:{height:1,width:1}}},this.getSize=(t=this.id)=>{const e=this.container[t];return e?this.editor.worldSizeToPreview(e.getSizeInWorldSpace()):{width:0,height:0}},this.editor=t,this.container={},this.stickerToolStore=new ve(t),this.textToolStore=new ke(t),this.textDesignToolStore=new De(t),this.rect=new ti(this.editor,this),this.minLength=this.editor.configStore.measurements.canvasControls.sprite.minSize/Math.sqrt(2)}static magnitude(t,e){return new r.C(t,e||t).magnitude}static sizeMagnitude(t){return Math.sqrt(t.width*t.width+t.height*t.height)}get currentSprite(){return this.isSpriteSelected?this.state.get(this.id):void 0}get padding(){return this.textDesignToolStore.padding}get isEditMode(){return this.editMode.get()}get isDragMode(){return this.dragMode.get()}get id(){return this.selectedId.get()}get isSpriteSelected(){return this.id!==Ae}get position(){return this.currentSprite?this.currentSprite.position:void 0}get tool(){return this.currentSprite?this.currentSprite.tool:void 0}get size(){return this.currentSprite?this.currentSprite.size:void 0}get rotation(){return this.currentSprite?this.currentSprite.rotation:void 0}get rotationWRTOutputRotation(){if(this.currentSprite){const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData(),i=this.editor.outputContainer.getRotation();return x({rotation:this.currentSprite.rotation-i,flipHorizontally:t,flipVertically:e})}}get flipHorizontal(){return this.currentSprite?this.currentSprite.flipHorizontally:void 0}get isSpriteSticker(){return this.tool===r.c.STICKER}get isSpriteText(){return this.tool===r.c.TEXT}get isSpriteTextDesign(){return this.tool===r.c.TEXT_DESIGN}get spritePosition(){if(this.currentSprite){const{x:t,y:e}=this.currentSprite.position,{height:i,width:r}=this.currentSprite.size;return{x:Math.round(t-r/2),y:Math.round(e-i/2)}}}get currentRect(){return this.currentSprite?this.rect:void 0}get leftTopPosition(){return this.currentSprite?this.rect.leftTop:void 0}get leftBottomPosition(){return this.currentSprite?this.rect.leftBottom:void 0}get leftMidPosition(){return this.currentSprite?this.rect.leftMid:void 0}get leftMidPadPosition(){if(this.currentSprite){const{leftMid:t}=this.rect;return{x:t.x-this.editor.worldToPreview(this.padding),y:t.y}}}get rightTopPosition(){return this.currentSprite?this.rect.rightTop:void 0}get rightBottomPosition(){return this.currentSprite?this.rect.rightBottom:void 0}get rightMidPosition(){return this.currentSprite?this.rect.rightMid:void 0}get rightMidPadPosition(){if(this.currentSprite){const{rightMid:t}=this.rect;return{x:t.x+this.editor.worldToPreview(this.padding),y:t.y}}}get leftBottomHandlePosition(){return this.currentSprite?this.rect.leftBottomHandle:void 0}get rightBottomHandlePosition(){return this.currentSprite?this.rect.rightBottomHandle:void 0}get historyLocale(){return this.isSpriteSticker?this.stickerLocale:this.isSpriteText?this.textDesignLocale:this.textLocale}get stickerLocale(){return this.editor.configStore.locale[r.c.STICKER].history}get textLocale(){return this.editor.configStore.locale[r.c.TEXT].history}get textDesignLocale(){return this.editor.configStore.locale[r.c.TEXT_DESIGN].history}}h([he.action],Me.prototype,"addSticker",2),h([he.action],Me.prototype,"addStickerAsync",2),h([he.action],Me.prototype,"addText",2),h([he.action],Me.prototype,"addTextAsync",2),h([he.action],Me.prototype,"addTextDesign",2),h([he.action],Me.prototype,"addTextDesignAsync",2),h([he.action],Me.prototype,"clickableCanvas",2),h([he.action],Me.prototype,"setContainerProperties",2),h([he.action],Me.prototype,"setContainerPosition",2),h([he.action],Me.prototype,"pureRemoveSprite",2),h([he.action],Me.prototype,"deleteSprite",2),h([he.action],Me.prototype,"removeSprite",2),h([he.action],Me.prototype,"addSnapshot",2),h([he.action],Me.prototype,"updateStateFromHistory",2),h([he.action],Me.prototype,"addNewText",2),h([he.action],Me.prototype,"addNewTextDesign",2),h([he.action],Me.prototype,"addNewSticker",2),h([he.action],Me.prototype,"updateSpriteStateFromHistory",2),h([he.action],Me.prototype,"updateStateFromSerialization",2),h([he.action],Me.prototype,"updateCanvasControls",2),h([he.action],Me.prototype,"setEditMode",2),h([he.action],Me.prototype,"setDragMode",2),h([he.action],Me.prototype,"setPosition",2),h([he.action],Me.prototype,"setSize",2),h([he.action],Me.prototype,"setRotation",2),h([he.action],Me.prototype,"onCanvasClick",2),h([he.action],Me.prototype,"select",2),h([he.action],Me.prototype,"selectLast",2),h([he.action],Me.prototype,"selectNext",2),h([he.action],Me.prototype,"deselect",2),h([he.action],Me.prototype,"bringToFront",2),h([he.action],Me.prototype,"flipHorizontally",2),h([he.action],Me.prototype,"pureReset",2),h([he.action],Me.prototype,"onCornerDrag",2),h([he.action],Me.prototype,"onWidthDrag",2),h([he.action],Me.prototype,"onPaddingDrag",2),h([he.action],Me.prototype,"correctTextFlip",2),h([he.action],Me.prototype,"reverseTextHorizontally",2),h([he.action],Me.prototype,"reverseTextVertically",2),h([he.computed],Me.prototype,"currentSprite",1),h([he.computed],Me.prototype,"padding",1),h([he.computed],Me.prototype,"isEditMode",1),h([he.computed],Me.prototype,"isDragMode",1),h([he.computed],Me.prototype,"id",1),h([he.computed],Me.prototype,"isSpriteSelected",1),h([he.computed],Me.prototype,"position",1),h([he.computed],Me.prototype,"tool",1),h([he.computed],Me.prototype,"size",1),h([he.computed],Me.prototype,"rotation",1),h([he.computed],Me.prototype,"rotationWRTOutputRotation",1),h([he.computed],Me.prototype,"flipHorizontal",1),h([he.computed],Me.prototype,"isSpriteSticker",1),h([he.computed],Me.prototype,"isSpriteText",1),h([he.computed],Me.prototype,"isSpriteTextDesign",1),h([he.computed],Me.prototype,"spritePosition",1),h([he.computed],Me.prototype,"currentRect",1),h([he.computed],Me.prototype,"leftTopPosition",1),h([he.computed],Me.prototype,"leftBottomPosition",1),h([he.computed],Me.prototype,"leftMidPosition",1),h([he.computed],Me.prototype,"leftMidPadPosition",1),h([he.computed],Me.prototype,"rightTopPosition",1),h([he.computed],Me.prototype,"rightBottomPosition",1),h([he.computed],Me.prototype,"rightMidPosition",1),h([he.computed],Me.prototype,"rightMidPadPosition",1),h([he.computed],Me.prototype,"leftBottomHandlePosition",1),h([he.computed],Me.prototype,"rightBottomHandlePosition",1),h([he.computed],Me.prototype,"historyLocale",1),h([he.computed],Me.prototype,"stickerLocale",1),h([he.computed],Me.prototype,"textLocale",1),h([he.computed],Me.prototype,"textDesignLocale",1);const Pe=(0,r.U)(d()),Be=(0,r.U)(d()),ze=(0,r.U)(d()),Le={position:{x:0,y:0},size:{height:0,width:0},lockResolution:!1,forceDimensions:!1,ratio:"*"},Ne={identifier:"identity",outputRotation:0,rotationInDegrees:0,flipHorizontally:!1,flipVertically:!1,cropState:ze.observable.map({})};class Ue{constructor(t,e){this.minCropSize=0,this.state=Ne,this.configStore=t.configStore,this.minCropSize=this.configStore.measurements.crop.minSize,this.defaults=e}changeIdentifier(t){this.state.identifier=t;this.state.cropState.get(t)||this.state.cropState.set(t,(0,r.N)({},Le))}changeRatio(t){const e=this.state.cropState.get(this.identifier);e&&this.state.cropState.set(this.identifier,(0,r.N)((0,r.N)({},e),{ratio:t}))}changeSize(t){const e=this.state.cropState.get(this.identifier);e&&(t.width&&t.width>0&&(e.size.width=Math.round(t.width)),t.height&&t.height>0&&(e.size.height=Math.round(t.height)),this.state.cropState.set(this.identifier,e))}changeHeight(t){const e=this.state.cropState.get(this.identifier);e&&t&&(e.size.height=Math.round(t),this.state.cropState.set(this.identifier,e))}changeWidth(t){const e=this.state.cropState.get(this.identifier);e&&t&&(e.size.width=Math.round(t),this.state.cropState.set(this.identifier,e))}changePositionX(t,e){const i=this.state.cropState.get(this.identifier);return!!(i&&t<=e-this.minCropSize&&t>=0)&&(i.position.x=Math.round(t),this.state.cropState.set(this.identifier,i),!0)}changePositionY(t,e){const i=this.state.cropState.get(this.identifier);return!!(i&&t<=e-this.minCropSize&&t>=0)&&(i.position.y=Math.round(t),this.state.cropState.set(this.identifier,i),!0)}changePosition(t,e){const i=this.state.cropState.get(this.identifier);return!!(i&&t.x<=e.width-this.minCropSize&&t.x>=0&&t.y<=e.height-this.minCropSize&&t.y>=0)&&(i.position.x=Math.round(t.x),i.position.y=Math.round(t.y),this.state.cropState.set(this.identifier,i),!0)}changeLockResolution(t){const e=this.state.cropState.get(this.identifier);e&&(e.lockResolution=void 0!==t?t:!e.lockResolution,this.state.cropState.set(this.identifier,e))}changeForceDimensions(t){const e=this.state.cropState.get(this.identifier);e&&(e.forceDimensions=t,this.state.cropState.set(this.identifier,e))}setRotation(t){this.state.rotationInDegrees=t}resetRotation(){this.state.rotationInDegrees=0}resetOutputRotation(){this.state.outputRotation=0}resetFlip(){this.state.flipHorizontally=!1,this.state.flipVertically=!1}updateFlip({flipHorizontally:t,flipVertically:e}){this.state.flipHorizontally=t,this.state.flipVertically=e}setOutputRotation(t){this.state.outputRotation=t}flipHorizontally(){this.state.flipHorizontally=!this.state.flipHorizontally}flipVertically(){this.state.flipVertically=!this.state.flipVertically}get flipCenter(){const{width:t,height:e}=this.defaults.maxCropMaskSize;return new r.C(t/2,e/2)}get isFlippedHorizontal(){return this.state.flipHorizontally}get isFlippedVertical(){return this.state.flipVertically}get identifier(){return this.state.identifier}get height(){return this.selectedCrop?this.selectedCrop.size.height:Le.size.height}get width(){return this.selectedCrop?this.selectedCrop.size.width:Le.size.width}get position(){return this.selectedCrop?this.selectedCrop.position:Le.position}get ratio(){return this.selectedCrop?this.selectedCrop.ratio:Le.ratio}get size(){return this.selectedCrop?this.selectedCrop.size:Le.size}get x(){return this.selectedCrop?this.selectedCrop.position.x:Le.position.x}get y(){return this.selectedCrop?this.selectedCrop.position.y:Le.position.y}get lockResolution(){return this.selectedCrop?this.selectedCrop.lockResolution:Le.lockResolution}get forceDimensions(){return this.selectedCrop?this.selectedCrop.forceDimensions:Le.forceDimensions}get selectedCrop(){return this.state.cropState.get(this.identifier)}get rotationInDegrees(){return this.state.rotationInDegrees}get outputRotation(){return this.state.outputRotation}}h([Be.observable],Ue.prototype,"state",2),h([Be.action],Ue.prototype,"changeIdentifier",1),h([Be.action],Ue.prototype,"changeRatio",1),h([Be.action],Ue.prototype,"changeSize",1),h([Be.action],Ue.prototype,"changeHeight",1),h([Be.action],Ue.prototype,"changeWidth",1),h([Be.action],Ue.prototype,"changePositionX",1),h([Be.action],Ue.prototype,"changePositionY",1),h([Be.action],Ue.prototype,"changePosition",1),h([Be.action],Ue.prototype,"changeLockResolution",1),h([Be.action],Ue.prototype,"changeForceDimensions",1),h([Be.action],Ue.prototype,"setRotation",1),h([Be.action],Ue.prototype,"resetRotation",1),h([Be.action],Ue.prototype,"resetOutputRotation",1),h([Be.action],Ue.prototype,"resetFlip",1),h([Be.action],Ue.prototype,"updateFlip",1),h([Be.action],Ue.prototype,"setOutputRotation",1),h([Be.action],Ue.prototype,"flipHorizontally",1),h([Be.action],Ue.prototype,"flipVertically",1),h([Be.computed],Ue.prototype,"flipCenter",1),h([Be.computed],Ue.prototype,"isFlippedHorizontal",1),h([Be.computed],Ue.prototype,"isFlippedVertical",1),h([Be.computed],Ue.prototype,"identifier",1),h([Be.computed],Ue.prototype,"height",1),h([Be.computed],Ue.prototype,"width",1),h([Be.computed],Ue.prototype,"position",1),h([Be.computed],Ue.prototype,"ratio",1),h([Be.computed],Ue.prototype,"size",1),h([Be.computed],Ue.prototype,"x",1),h([Be.computed],Ue.prototype,"y",1),h([Be.computed],Ue.prototype,"lockResolution",1),h([Be.computed],Ue.prototype,"forceDimensions",1),h([Be.computed],Ue.prototype,"selectedCrop",1),h([Be.computed],Ue.prototype,"rotationInDegrees",1),h([Be.computed],Ue.prototype,"outputRotation",1);const je=(0,r.U)(d());class He{constructor(t){this.transforms={output:JSON.stringify(r.z.IDENTITY),preview:JSON.stringify(r.z.IDENTITY)},this.editor=t,this.overlayOpacity=0,this.frameOpacity=0}static rotateOutput(t,e){switch(t%=360){case 90:case-270:return e.swapped.multiply(-1,1);case 180:case-180:return e.multiply(-1);case 270:case-90:return e.swapped.multiply(1,-1);default:return e}}onLeave(){const{flipHorizontally:t,flipVertically:e,rotation:i,outputRotation:n}=this.transformToolStore.rotateFlipState;"identity"!==this.editor.overlayToolStore.identifier&&this.editor.overlayToolStore.changeOpacity(this.overlayOpacity),"identity"!==this.editor.frameToolStore.identifier&&this.editor.frameToolStore.changeOpacity(this.frameOpacity);const o=this.editor.previewToWorld(new r.C(this.transformToolStore.leftTopRespectFlip).add(new r.C(this.transformToolStore.rightBottomRespectFlip)).divide(2).add(new r.C(this.transformToolStore.unRotatedDefaults.cropMaskPosition)),!0),s=this.engineMediator.preview.container,{outputContainer:a}=this.editor;a.setResolution(je.toJS(this.transformToolStore.localOutputImageSize)),a.setData({flipVertically:e,flipHorizontally:t});const l=s.getScale();this.editor.overlayToolStore.correctOverlayFlip(),this.saveTransforms();let c=1;if(this.transformToolStore.lockResolution){const{cropMaskSize:t,defaultImageSize:e}=this.transformToolStore,i=this.transformToolStore.maxCropMaskSize;c={height:t.height*e.height/i.height,width:t.width*e.width/i.width}.width/this.transformToolStore.localOutputImageSize.width}const u=c/(Math.abs(l.x)/this.transformToolStore.defaultScale),h={x:u,y:u},d=-(i-n);a.setTransform({scale:h,position:o,rotation:d}),this.editor.engineMediator.preview.updateTransform(0,!1),this.editor.scale.setInitialTransform(),this.editor.spriteStore.updateCanvasControls(),this.editor.focusToolStore.updateCanvasControls()}onEnter(){"identity"!==this.editor.overlayToolStore.identifier&&(this.overlayOpacity=this.editor.overlayToolStore.opacity,this.editor.overlayToolStore.changeOpacity(0)),"identity"!==this.editor.frameToolStore.identifier&&(this.frameOpacity=this.editor.frameToolStore.opacity,this.editor.frameToolStore.changeOpacity(0)),this.editor.scale.setScaleToDefault();const t=this.engineMediator.preview.container,{outputContainer:e}=this.editor,i=JSON.parse(this.transforms.preview);e.setResolution(je.toJS(this.transformToolStore.defaultImageSize)),t.setTransform(i),e.setTransform(JSON.parse(this.transforms.output));const r=i.scale;e.setData({flipVertically:!1,flipHorizontally:!1}),this.transformToolStore.transformStore.updateFlip({flipVertically:r.y<0,flipHorizontally:r.x<0}),this.engineMediator.preview.savePreviewTransform(i);const{scale:n}=this.engineMediator.preview.calculateTransform();this.editor.scale.setInitialTransform(n.x)}rotateOutputContainer(t=!1){this.editor.outputContainer.rotate90(t),this.transformToolStore.transformStore.setOutputRotation(this.editor.outputContainer.getRotation());const{rotation:e}=this.transformToolStore.rotateFlipState;this.engineMediator.preview.updateTransform(e),je.runInAction((()=>{this.editor.scale.setInitialTransform();const t=this.getScaleWithFlip(e);this.engineMediator.preview.container.setScale(t),this.transformToolStore.setCropDefaults(!0),this.transformToolStore.updateCropMask()})),this.editor.render()}applyPreviewTransform(){const{rotation:t,flipHorizontally:e,flipVertically:i}=this.transformToolStore.rotateFlipState,n=this.editor.scale.getPositionWithOffset(),o=this.getScaleWithFlip();let s=t;e&&(s=(0,r.o)(s)),i&&(s=(0,r.o)(s));const a={position:n,rotation:s,scale:o};this.engineMediator.preview.savePreviewTransform(a),this.engineMediator.preview.container.setTransform(a)}getScaleWithFlip(t=this.transformToolStore.rotateFlipState.rotation){const{flipHorizontally:e,flipVertically:i}=this.transformToolStore.rotateFlipState,r=e?-1:1,n=i?-1:1,o=this.editor.scale.calculateScale(t);return{x:o*r,y:o*n}}saveTransforms(){const t=JSON.stringify(this.engineMediator.preview.container.getTransform()),e=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:t,output:e}}saveTransformsBasedOnFlip(){const t=this.engineMediator.preview.container.getTransform(),{scale:e}=t,{flipVertically:i,flipHorizontally:n}=this.editor.outputContainer.getData(),o=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:JSON.stringify((0,r.N)((0,r.N)({},t),{scale:{x:n?-e.x:e.x,y:i?-e.y:e.y}})),output:o}}get engineMediator(){return this.editor.engineMediator}get transformToolStore(){return this.editor.transformToolStore}}const We="identity";class Ge{constructor(t){this.unRotatedDefaults={cropMaskPosition:{x:0,y:0},scale:1},this.defaultAngle=0,this.dragMode=Pe.observable.box(!1),this.minCropSize=0,this.localSnapshotEnabled=!0,this.defaults={cropMaskPosition:{x:0,y:0},maxCropMaskSize:{width:0,height:0},imageSize:{width:0,height:0},scale:1},this.localOutputSize={width:0,height:0},this.checkIfTransformThumbnailExits=t=>{let e=this.editor.configStore.config.assetBaseUrl;const{length:i}=e;if("/"!==e[i-1]&&(e+="/"),`${e}transform/`===t)return!1;const r=new Image;try{return r.src=t,!0}catch(t){return!1}},this.reset=()=>{this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.setDefaultAngle(0);0!==this.editor.outputContainer.getRotation()&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop(),this.editor.render()},this.changeLocalOutputSize=t=>{this.localOutputSize.height=Math.round(t.height),this.localOutputSize.width=Math.round(t.width)},this.changeDefaultScale=t=>{this.defaults.scale=t},this.changeLocalOutputHeight=t=>{this.localOutputSize.height=Math.round(t)},this.changeLocalOutputWidth=t=>{this.localOutputSize.width=Math.round(t)},this.changeLockResolution=()=>{this.transformStore.changeLockResolution(),this.addLocalSnapshot()},this.rotateClockwise=()=>{this.rotateOutputContainer(this.isFlippedVertical!==this.isFlippedHorizontal)},this.rotateAntiClockwise=()=>{this.rotateOutputContainer(this.isFlippedVertical===this.isFlippedHorizontal)},this.flipHorizontally=(t=!0)=>{this.transformStore.flipHorizontally(),this.editor.spriteStore.reverseTextHorizontally(),this.transformRender(t),t&&this.addLocalSnapshot()},this.flipVertically=(t=!0)=>{this.transformStore.flipVertically(),this.editor.spriteStore.reverseTextVertically(),this.transformRender(t),t&&this.addLocalSnapshot()},this.applyDefaultCrop=(t=!1)=>{if("identity"===this.identifier){const{identifier:e}=this.getMatchingItem();this.changeIdentifier(e,t)}},this.updateCropMask=()=>{this.changeIdentifier(this.identifier,!0)},this.onLeftTop=({x:t,y:e})=>{const i=this.getRatio(),n=this.rightBottom,{minCropMaskSize:o,maxCropMaskSize:s}=this,a=Math.min(Math.max(0,t),n.x-o.width),l=Math.min(Math.max(0,e),n.y-o.height),c=n.x-a,u=n.y-l,h={width:Math.max(this.minCropSize,Math.min(c,s.width-a)),height:Math.max(this.minCropSize,Math.min(u,s.height-l))};if("*"===i)this.changePosition({x:a,y:l})&&this.changeCropAndOutputSize(h);else{const t=this.proportionalSize(i,h),e=new r.C(n).rounded.subtract({x:t.width,y:t.height});this.changePosition(e)&&this.changeCropAndOutputSize(t)}},this.onLeftBottom=({x:t,y:e})=>{const i=this.getRatio(),r=this.rightTop,{minCropMaskSize:n,maxCropMaskSize:o}=this,s=Math.min(Math.max(0,t),r.x-n.width),a=Math.max(0,e,r.y+n.height),l=r.x-s,c=a-r.y,u={width:Math.max(1,Math.min(l,o.width-s)),height:Math.max(1,Math.min(c,o.height-r.y))};if("*"===i){this.changeCropAndOutputSize(u)&&this.changePositionX(s)}else{const t=this.proportionalSize(i,u);this.changePositionX(Math.round(r.x)-t.width)&&this.changeCropAndOutputSize(t)}},this.onRightTop=({x:t,y:e})=>{const i=this.getRatio(),r=this.leftBottom,{minCropMaskSize:n,maxCropMaskSize:o}=this,s=Math.max(0,t,r.x+n.width),a=Math.min(Math.max(0,e),r.y-n.height),l=s-r.x,c=r.y-a,u={width:Math.max(1,Math.min(l,o.width-r.x)),height:Math.max(1,Math.min(c,o.height-a))};if("*"===i)this.changePositionY(a)&&this.changeCropAndOutputSize(u);else{const t=this.proportionalSize(i,u);this.changePositionY(Math.round(r.y)-t.height)&&this.changeCropAndOutputSize(t)}},this.onRightBottom=({x:t,y:e})=>{const i=this.getRatio(),r=this.leftTop,{minCropMaskSize:n,maxCropMaskSize:o}=this,s=Math.max(0,t,r.x+n.width),a=Math.max(0,e,r.y+n.height),l=s-r.x,c=a-r.y,u={width:Math.max(1,Math.min(l,o.width-r.x)),height:Math.max(1,Math.min(c,o.height-r.y))};if("*"===i)this.changeCropAndOutputSize(u);else{const t=this.proportionalSize(i,u);this.changeCropAndOutputSize(t)}},this.onPixelWidth=t=>{const e=JSON.stringify(Pe.toJS(this.localOutputSize)),i=this.entityManager.items.find((t=>t.identifier===this.identifier)),r=this.defaults.imageSize;if(i&&i.ratio){let n=t,o=this.localOutputSize.height,{ratio:s}=i;if("*"===s&&this.lockResolution&&(s=this.localOutputSize.width/this.localOutputSize.height),"*"!==s||this.lockResolution){const t=Ge.placeCropMask(s,r);n=Math.max(Math.min(n,t.width),this.minCropSize),o=n/s,this.changeLocalOutputSize({height:o,width:n})}else n=Math.max(Math.min(t,r.width),this.minCropSize),this.changeLocalOutputWidth(n);return this.lockResolution||this.updatePreviewSizeWRTImageSize(),this.checkAndAddSnapshot(JSON.parse(e)),Math.round(n)}return t},this.onPixelHeight=t=>{const e=JSON.stringify(Pe.toJS(this.localOutputSize)),i=this.entityManager.items.find((t=>t.identifier===this.identifier)),r=this.defaults.imageSize;if(i&&i.ratio){let n=t,o=this.localOutputSize.width,{ratio:s}=i;if("*"===s&&this.lockResolution&&(s=this.localOutputSize.width/this.localOutputSize.height),"*"!==s||this.lockResolution){const t=Ge.placeCropMask(s,r);n=Math.max(Math.min(n,t.height),this.minCropSize),o=n*s,this.changeLocalOutputSize({height:n,width:o})}else n=Math.max(Math.min(t,r.height),this.minCropSize),this.changeLocalOutputHeight(n);return this.lockResolution||this.updatePreviewSizeWRTImageSize(),this.checkAndAddSnapshot(JSON.parse(e)),Math.round(n)}return t},this.closestRatioReducer=t=>(e,i)=>null===i||Math.abs(t-e.ratio)<Math.abs(t-i.ratio)?-1:1,this.closestDimensionsReducer=t=>(e,i)=>{if(null===i)return-1;const r=Math.abs(e.dimensions.x/e.dimensions.y),n=Math.abs(i.dimensions.x/i.dimensions.y);return r===n?e.dimensions.x*e.dimensions.y>i.dimensions.x*i.dimensions.y?-1:1:Math.abs(t-r)<Math.abs(t-n)?-1:1},this.getMatchingItem=()=>{const t=this.entityManager.items.findIndex((t=>"imgly_transform_common_custom"===t.identifier));if(-1!==t)return this.entityManager.items[t];const e=this.entityManager.items.findIndex((t=>"*"===t.ratio));if(-1!==e)return this.entityManager.items[e];const i=Pe.toJS(this.editor.outputContainer.getResolution()),r=Math.abs(i.width/i.height),[n]=this.entityManager.items.filter((t=>t.ratio&&"number"==typeof t.ratio)).sort(this.closestRatioReducer(r)),[o]=this.entityManager.items.filter((t=>t.dimensions&&!t.ratio)).sort(this.closestDimensionsReducer(r));if(!n||!o||!n.ratio&&!o.dimensions)return this.entityManager.items[0];if(!o||!o.dimensions)return n;if(!n||!n.ratio)return o;const s=Math.abs(o.dimensions.x/o.dimensions.y);return s===n.ratio||Math.abs(r-n.ratio)<Math.abs(r-s)?n:o},this.getTransform=t=>{let e=this.entityManager.items.find((e=>e.identifier===t));return e||(e=this.getMatchingItem()),e},this.editor=t,this.selectedCategory=We,this.transformStore=new Ue(t,this.defaults),this.transformations=new He(t);const e=this.config,{enableRotation:i,enableFlip:n}=e,o=u(e,["enableRotation","enableFlip"]),s=this.editor.assetProvider.getAssets("transform");this.entityManager=new N(s,(0,r.N)((0,r.N)({},o),{categoryKey:"",itemKey:"thumbnailURI",locale:(0,r.N)((0,r.N)({},this.locale.items),this.locale.categories),getAssetPath:this.editor.getAssetPath("transform")})),this.rect=new ti(this.editor,this.transformStore,"topLeft",!1,!1),this.rectForUi=new ti(this.editor,this.transformStore,"topLeft",!1,!0),this.minCropSize=this.editor.configStore.measurements.crop.minSize}static inRadians(t){return t*Math.PI/180}static placeCropMask(t,e){if(e.height*t>e.width){return{height:e.width/t,width:e.width,yChanged:!0}}const i=e.height*t;return{height:e.height,width:i,yChanged:!1}}changeIdentifier(t,e=!1){this.transformStore.changeIdentifier(t);const i=this.getCropMask(t,this.defaults.imageSize);i&&(this.transformStore.changeRatio(i.ratio),this.changeLocalOutputSize(i),this.updatePreviewSizeWRTImageSize(),void 0!==i.yChanged&&this.updateInitialCropMaskPosition(i.yChanged),i.dimensions&&this.changeLocalOutputSize({width:i.dimensions.x,height:i.dimensions.y}),e&&this.addLocalSnapshot())}setDragMode(t){this.dragMode.set(t)}getCropMask(t,e){const i=this.getTransform(t);if(i){const{ratio:t,forceDimensions:n,lockDimensions:o,dimensions:s=null}=i;if(n&&this.transformStore.changeForceDimensions(n),o&&this.transformStore.changeLockResolution(o),!t){const{x:t,y:n}=i.dimensions;return(0,r.N)((0,r.N)({},Ge.placeCropMask(t/n,e)),{ratio:null,dimensions:s})}switch(t){case"*":return this.changePosition({x:0,y:0}),(0,r.N)((0,r.N)({},e),{yChanged:void 0,ratio:"*",dimensions:s});default:return(0,r.N)((0,r.N)({},Ge.placeCropMask(i.ratio,e)),{ratio:i.ratio,dimensions:s})}}return null}setCropDefaults(t=!1){const e=this.editor.outputContainer.getResolution();this.setDefaultImageSize(e);const i=this.editor.getPreviewSize(),{position:r}=this.editor.engineMediator.preview.previewTransformWithoutDpr;this.setMaxCropSize(i),this.setDefaultCropPosition({x:r.x-i.width/2,y:r.y-i.height/2}),this.changeDefaultScale(this.editor.scale.defaultScale),t||(this.unRotatedDefaults.cropMaskPosition=this.defaultCropMaskPosition,this.unRotatedDefaults.scale=this.defaultScale)}setDefaultImageSize(t){this.defaults.imageSize=(0,r.N)({},Pe.toJS(t)),this.lockResolution||(this.localOutputSize=(0,r.N)({},Pe.toJS(t)))}setMaxCropSize(t){this.defaults.maxCropMaskSize.height=t.height,this.defaults.maxCropMaskSize.width=t.width}setDefaultCropPosition(t){this.defaults.cropMaskPosition.x=t.x,this.defaults.cropMaskPosition.y=t.y}resetCrop(){this.state.cropState=Pe.observable.map({}),this.state.identifier="identity"}toggleCategorySelection(t){this.selectedCategory=this.selectedCategory===t?We:t}pureReset(){this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.resetCrop()}changePosition(t){return this.transformStore.changePosition(t,this.defaults.maxCropMaskSize)}changePositionX(t){return this.transformStore.changePositionX(t,this.defaults.maxCropMaskSize.width)}changePositionY(t){return this.transformStore.changePositionY(t,this.defaults.maxCropMaskSize.height)}changeCropAndOutputHeight(t){return!!(t&&t>=this.minCropSize)&&(this.transformStore.changeHeight(t),this.lockResolution||this.changeLocalOutputHeight(t*this.defaults.imageSize.height/this.defaults.maxCropMaskSize.height),!0)}changeCropAndOutputWidth(t){return!!(t&&t>=this.minCropSize)&&(this.transformStore.changeWidth(t),this.lockResolution||this.changeLocalOutputWidth(t*this.defaults.imageSize.width/this.defaults.maxCropMaskSize.width),!0)}changeCropAndOutputSize(t){return{widthChanged:this.changeCropAndOutputHeight(t.height),heightChanged:this.changeCropAndOutputWidth(t.width)}}transformRender(t=!0){this.transformations.applyPreviewTransform(),t&&this.editor.render()}addLocalSnapshot(t=`Local ${this.locale.title}`){if(this.localSnapshotEnabled){const e=this.state,{cropState:i}=e,n=u(e,["cropState"]);this.editor.addLocalTransformSnapshot((0,r.N)((0,r.N)((0,r.N)({},n),this.cropState),{localOutputSize:Pe.toJS(this.localOutputSize),outputSize:this.engineMediator.output.container.getResolution(),defaults:Pe.toJS(this.defaults),previewTransform:this.engineMediator.preview.container.getTransform(),outputTransform:this.engineMediator.output.container.getTransform()}),t)}}updateLocalStateFromHistory(t){const{tool:e}=this.editor.activeStore;e===r.c.TRANSFORM&&(this.transformStore.changeLockResolution(t.lockResolution),this.transformStore.changeForceDimensions(t.forceDimensions),this.transformStore.changeIdentifier(t.identifier),this.transformStore.setRotation(t.rotationInDegrees),this.setDefaultAngle(t.rotationInDegrees),this.transformStore.setOutputRotation(t.outputRotation),this.transformStore.updateFlip(t),this.engineMediator.output.container.setRotation(t.outputRotation),this.setDefaultImageSize(t.defaults.imageSize),this.localOutputSize=t.defaults.imageSize,this.changeLocalOutputSize(t.localOutputSize),this.transformStore.changeSize(t.size),this.changePosition(t.position),this.setMaxCropSize(t.defaults.maxCropMaskSize),this.setDefaultCropPosition(t.defaults.cropMaskPosition),this.changeDefaultScale(t.defaults.scale),this.engineMediator.output.container.setResolution(t.outputSize),this.engineMediator.preview.container.setTransform(t.previewTransform),this.engineMediator.output.container.setTransform(t.outputTransform))}updateStateFromHistory(t){const{tool:e}=this.editor.activeStore;e!==r.c.TRANSFORM&&(this.engineMediator.output.container.setTransform(t.outputTransform),this.engineMediator.preview.container.setTransform(t.previewTransform),this.engineMediator.output.container.setResolution(t.outputSize),this.changeLocalOutputSize(t.outputSize))}get serializableState(){const{flipHorizontally:t,flipVertically:e}=this.rotateFlipState,i=180*this.editor.engineMediator.output.container.getRotation()/Math.PI%360,{identifier:r,rotationInDegrees:n}=this,o=n*Math.PI/180;let s=i+n;s=90*Math.round(s/90),s=s<0?s+360:s,s=(360-s)%360;const{start:a,end:l}=this.convertUIToOperationOptions(o,s);return{flipHorizontally:t,flipVertically:e,rotation:o,start:a,end:l,identifier:r,outputRotation:s}}getStartEndForOperation(t){const{leftTop:e,rightBottom:i,maxCropMaskSize:r}=this,n=e.y,o=e.x,s=i.x,a=i.y;switch(t){case 270:return{leftTop:{x:r.height-a,y:o},rightBottom:{x:r.height-n,y:s}};case 180:return{leftTop:{x:r.width-s,y:r.height-a},rightBottom:{x:r.width-o,y:r.height-n}};case 90:return{leftTop:{x:n,y:r.width-s},rightBottom:{x:a,y:r.width-o}};default:return{leftTop:{x:o,y:n},rightBottom:{x:s,y:a}}}}getStartEndForUI(t,e,i){const{maxCropMaskSize:r}=this,n=e.y,o=e.x,s=i.x,a=i.y;switch(t){case 90:return{leftTop:{x:n,y:r.height-s},rightBottom:{x:a,y:r.height-o}};case 180:return{leftTop:{x:r.width-s,y:r.height-a},rightBottom:{x:r.width-o,y:r.height-n}};case 270:return{leftTop:{x:r.width-a,y:o},rightBottom:{x:r.width-n,y:s}};default:return{leftTop:{x:o,y:n},rightBottom:{x:s,y:a}}}}convertOperationOptionsToUI({start:t,end:e,rotation:i,outputRotation:n}){const o=90===n||270===n,s=o?r.C.fromSize(this.defaultImageSize).swapped:r.C.fromSize(this.defaultImageSize),a=Math.cos(i),l=Math.sin(i),c=this.calculateScale(i),u=new r.C(Math.min(t.x,e.x),Math.min(t.y,e.y)),h=new r.C(Math.max(t.x,e.x),Math.max(t.y,e.y)).subtract(u).divide(2),d=u.add(h).multiply(s).subtract(s.multiply(.5)),p=new r.C(d.x*a-d.y*l,d.x*l+d.y*a).multiply(c),f=s.multiply(.5).add(p).divide(s),m=f.subtract(h.multiply(c)),g=f.add(h.multiply(c)),_=o?r.C.fromSize(this.maxCropMaskSize).swapped:r.C.fromSize(this.maxCropMaskSize),y=m.multiply(_),v=g.multiply(_),{leftTop:b,rightBottom:x}=this.getStartEndForUI(n,y,v);return{start:new r.C(b),end:new r.C(x)}}convertUIToOperationOptions(t,e){const i=90===e||270===e,n=i?r.C.fromSize(this.defaultImageSize).swapped:r.C.fromSize(this.defaultImageSize),o=i?r.C.fromSize(this.maxCropMaskSize).swapped:r.C.fromSize(this.maxCropMaskSize),s=Math.cos(-t),a=Math.sin(-t),l=this.calculateScale(t,i),{leftTop:c,rightBottom:u}=this.getStartEndForOperation(e),h=new r.C(c).divide(o),d=new r.C(u).divide(o).subtract(h).divide(2),p=h.add(d).multiply(n).subtract(n.multiply(.5)),f=new r.C(p.x*s-p.y*a,p.x*a+p.y*s).divide(l),m=n.multiply(.5).add(f).divide(n);return{start:m.subtract(d.divide(l)),end:m.add(d.divide(l))}}calculateScale(t,e=!1){const i=e?r.C.fromSize(this.defaultImageSize).swapped:r.C.fromSize(this.defaultImageSize),n=new r.C(Math.abs(i.x*Math.cos(t))+Math.abs(i.y*Math.sin(t)),Math.abs(i.x*Math.sin(t))+Math.abs(i.y*Math.cos(t))),o=i.subtract(n.clone()).divide(2).abs;return o.y>o.x?2*o.y/i.y+1:2*o.x/i.x+1}updateStateFromSerialization(t,e){this.localSnapshotEnabled=e,this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.setDefaultAngle(0),0!==this.editor.outputContainer.getRotation()&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop();const i=Math.round(180*t.rotation/Math.PI);this.transformStore.setRotation(i>180?i-360:i),this.applyOutputRotationFromSerialization(t),t.identifier&&this.transformStore.changeIdentifier(t.identifier);let n=t.outputRotation<0?t.outputRotation+360:t.outputRotation;if(n=(360-n)%360,t.start&&t.end){(0===t.end.x||0===t.end.y)&&(t.end.x=1,t.end.y=1);const{start:e,end:i}=this.convertOperationOptionsToUI({start:new r.C(t.start),end:new r.C(t.end),rotation:t.rotation,outputRotation:n});this.changePositionX(e.x),this.changePositionY(e.y);const o=i.x-e.x,s=i.y-e.y;this.transformStore.changeSize({width:o,height:s});const{maxCropMaskSize:a,imageSize:l}=this.defaults,c={height:s*l.height/a.height,width:o*l.width/a.width};this.changeLocalOutputSize(c)}this.editor.outputContainer.setData({flipHorizontally:t.flipHorizontally,flipVertically:t.flipVertically}),t.flipHorizontally&&this.flipHorizontally(!1),t.flipVertically&&this.flipVertically(!1),this.editor.overlayToolStore.correctOverlayFlip(),this.localSnapshotEnabled=!0}applyOutputRotationFromSerialization(t){if(void 0!==t.outputRotation)switch(t.outputRotation){case 90:this.transformations.rotateOutputContainer();break;case 180:this.transformations.rotateOutputContainer(),this.transformations.rotateOutputContainer();break;case 270:this.transformations.rotateOutputContainer(!0)}this.transformations.rotateOutputContainer(!0),this.transformations.rotateOutputContainer()}setDefaultAngle(t){this.defaultAngle=t}updateCanvasControls(t){const e=Pe.toJS(this.cropMaskPosition),i=Pe.toJS(this.cropMaskSize),r=Pe.toJS(this.defaults.maxCropMaskSize);this.changeCropAndOutputSize({height:r.height*i.height/t.height,width:r.width*i.width/t.width}),this.changePosition({y:r.height*e.y/t.height,x:r.width*e.x/t.width})}onLeave(){this.transformations.onLeave()}onEnter(){this.transformations.onEnter()}saveTransforms(){this.transformations.saveTransforms()}saveTransformsBasedOnFlip(){this.transformations.saveTransformsBasedOnFlip()}setRotation(t){this.transformStore.setRotation(t),this.transformRender()}rotateOutputContainer(t=!1){return(0,r.Z)(this,null,(function*(){this.setDragMode(!0),this.transformations.rotateOutputContainer(t),yield this.editor.wait(),this.setDragMode(!1)}))}applyInitialCrop(){const{identifier:t}=this.getMatchingItem();this.changeIdentifier(t,!1)}clickableCanvas(t){this.editor.clickableCanvas(t)}proportionalSize(t,e,i=this.defaults.maxCropMaskSize,r=this.minCropSize){const n={width:e.height*t,height:e.height};return(n.width>i.width||n.width<r||n.height<r)&&(n.width=e.width,n.height=e.width/t),n.width=Math.round(n.width),n.height=Math.round(n.height),n}checkAndAddSnapshot(t){const e=Pe.toJS(this.localOutputSize);(t.width!==e.width||t.height!==e.height)&&this.addLocalSnapshot()}updateInitialCropMaskPosition(t){const{cropMaskSize:e}=this,i=this.defaults.maxCropMaskSize;t?this.changePosition({x:0,y:Math.abs(i.height-e.height)/2}):this.changePosition({x:Math.abs(i.width-e.width)/2,y:0})}updatePreviewSizeWRTImageSize(){const t=Pe.toJS(this.localOutputSize),e=Pe.toJS(this.defaults.imageSize),i=Pe.toJS(this.defaults.maxCropMaskSize),r={height:i.height*t.height/e.height,width:i.width*t.width/e.width};this.transformStore.changeSize(r)}getScaleWithFlip(t=this.rotateFlipState.rotation){return this.transformations.getScaleWithFlip(t)}get cropState(){return this.transformStore.selectedCrop}get identifier(){return this.transformStore.identifier}get ratio(){return this.transformStore.ratio}get height(){return this.transformStore.height}get width(){return this.transformStore.width}get localOutputImageSize(){return this.localOutputSize}get localOutputHeight(){return this.localOutputSize.height}get localOutputWidth(){return this.localOutputSize.width}get lockResolution(){return this.transformStore.lockResolution}get forceDimensions(){return this.transformStore.forceDimensions}get rotationInDegrees(){return this.transformStore.rotationInDegrees}get outputRotation(){return this.transformStore.outputRotation}get isDragMode(){return this.dragMode.get()}get rotateFlipState(){const{flipHorizontally:t,flipVertically:e,rotationInDegrees:i,outputRotation:r}=this.transformStore.state;return{flipHorizontally:t,flipVertically:e,rotation:Ge.inRadians(i),outputRotation:r}}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config[r.c.TRANSFORM]}get locale(){return this.editor.configStore.locale[r.c.TRANSFORM]}get isOptionSelected(){return"identity"!==this.identifier}get leftTop(){return this.rect.leftTop}get leftBottom(){return this.rect.leftBottom}get rightTop(){return this.rect.rightTop}get rightBottom(){return this.rect.rightBottom}get isFlippedHorizontal(){return this.transformStore.isFlippedHorizontal}get isFlippedVertical(){return this.transformStore.isFlippedVertical}get leftTopRespectFlip(){return this.rectForUi.leftTop}get leftBottomRespectFlip(){return this.rectForUi.leftBottom}get rightTopRespectFlip(){return this.rectForUi.rightTop}get rightBottomRespectFlip(){return this.rectForUi.rightBottom}get cropMaskPosition(){return this.transformStore.position}get cropMaskSize(){return this.transformStore.size}get state(){return this.transformStore.state}get defaultImageSize(){return this.defaults.imageSize}get maxCropMaskSize(){return this.defaults.maxCropMaskSize}get minCropMaskSize(){const t=this.getRatio();return"*"===t||1===t?{width:this.minCropSize,height:this.minCropSize}:t>1?{width:this.minCropSize*t,height:this.minCropSize}:{width:this.minCropSize,height:this.minCropSize*t}}get defaultCropMaskPosition(){return this.defaults.cropMaskPosition}get defaultScale(){return this.defaults.scale}get engineMediator(){return this.editor.engineMediator}getRatio(){const t=this.getTransform(this.identifier);if(t){if(Object.prototype.hasOwnProperty.call(t,"ratio"))return this.lockResolution?this.localOutputWidth/this.localOutputHeight:t.ratio;const{x:e,y:i}=t.dimensions;return e/i}return"*"}}h([Pe.observable],Ge.prototype,"selectedCategory",2),h([Pe.observable],Ge.prototype,"defaults",2),h([Pe.observable],Ge.prototype,"localOutputSize",2),h([Pe.action],Ge.prototype,"changeIdentifier",1),h([Pe.action],Ge.prototype,"setDragMode",1),h([Pe.action],Ge.prototype,"setCropDefaults",1),h([Pe.action],Ge.prototype,"setDefaultImageSize",1),h([Pe.action],Ge.prototype,"setMaxCropSize",1),h([Pe.action],Ge.prototype,"setDefaultCropPosition",1),h([Pe.action],Ge.prototype,"resetCrop",1),h([Pe.action],Ge.prototype,"toggleCategorySelection",1),h([Pe.action],Ge.prototype,"pureReset",1),h([Pe.action],Ge.prototype,"reset",2),h([Pe.action],Ge.prototype,"changePosition",1),h([Pe.action],Ge.prototype,"changePositionX",1),h([Pe.action],Ge.prototype,"changePositionY",1),h([Pe.action],Ge.prototype,"changeCropAndOutputHeight",1),h([Pe.action],Ge.prototype,"changeCropAndOutputWidth",1),h([Pe.action],Ge.prototype,"changeCropAndOutputSize",1),h([Pe.action],Ge.prototype,"onLeave",1),h([Pe.action],Ge.prototype,"onEnter",1),h([Pe.action],Ge.prototype,"changeLocalOutputSize",2),h([Pe.action],Ge.prototype,"changeDefaultScale",2),h([Pe.action],Ge.prototype,"changeLocalOutputHeight",2),h([Pe.action],Ge.prototype,"changeLocalOutputWidth",2),h([Pe.action],Ge.prototype,"changeLockResolution",2),h([Pe.action],Ge.prototype,"setRotation",1),h([Pe.action],Ge.prototype,"rotateClockwise",2),h([Pe.action],Ge.prototype,"rotateAntiClockwise",2),h([Pe.action],Ge.prototype,"rotateOutputContainer",1),h([Pe.action],Ge.prototype,"flipHorizontally",2),h([Pe.action],Ge.prototype,"flipVertically",2),h([Pe.action],Ge.prototype,"applyDefaultCrop",2),h([Pe.action],Ge.prototype,"applyInitialCrop",1),h([Pe.action],Ge.prototype,"updateCropMask",2),h([Pe.action],Ge.prototype,"clickableCanvas",1),h([Pe.action],Ge.prototype,"onLeftTop",2),h([Pe.action],Ge.prototype,"onLeftBottom",2),h([Pe.action],Ge.prototype,"onRightTop",2),h([Pe.action],Ge.prototype,"onRightBottom",2),h([Pe.action],Ge.prototype,"proportionalSize",1),h([Pe.action],Ge.prototype,"onPixelWidth",2),h([Pe.action],Ge.prototype,"onPixelHeight",2),h([Pe.action],Ge.prototype,"updateInitialCropMaskPosition",1),h([Pe.action],Ge.prototype,"updatePreviewSizeWRTImageSize",1),h([Pe.computed],Ge.prototype,"cropState",1),h([Pe.computed],Ge.prototype,"identifier",1),h([Pe.computed],Ge.prototype,"ratio",1),h([Pe.computed],Ge.prototype,"height",1),h([Pe.computed],Ge.prototype,"width",1),h([Pe.computed],Ge.prototype,"localOutputImageSize",1),h([Pe.computed],Ge.prototype,"localOutputHeight",1),h([Pe.computed],Ge.prototype,"localOutputWidth",1),h([Pe.computed],Ge.prototype,"lockResolution",1),h([Pe.computed],Ge.prototype,"forceDimensions",1),h([Pe.computed],Ge.prototype,"rotationInDegrees",1),h([Pe.computed],Ge.prototype,"outputRotation",1),h([Pe.computed],Ge.prototype,"isDragMode",1),h([Pe.computed],Ge.prototype,"rotateFlipState",1),h([Pe.computed],Ge.prototype,"selectedCategoryIdentifier",1),h([Pe.computed],Ge.prototype,"categories",1),h([Pe.computed],Ge.prototype,"items",1),h([Pe.computed],Ge.prototype,"config",1),h([Pe.computed],Ge.prototype,"locale",1),h([Pe.computed],Ge.prototype,"isOptionSelected",1),h([Pe.computed],Ge.prototype,"leftTop",1),h([Pe.computed],Ge.prototype,"leftBottom",1),h([Pe.computed],Ge.prototype,"rightTop",1),h([Pe.computed],Ge.prototype,"rightBottom",1),h([Pe.computed],Ge.prototype,"isFlippedHorizontal",1),h([Pe.computed],Ge.prototype,"isFlippedVertical",1),h([Pe.computed],Ge.prototype,"leftTopRespectFlip",1),h([Pe.computed],Ge.prototype,"leftBottomRespectFlip",1),h([Pe.computed],Ge.prototype,"rightTopRespectFlip",1),h([Pe.computed],Ge.prototype,"rightBottomRespectFlip",1),h([Pe.computed],Ge.prototype,"cropMaskPosition",1),h([Pe.computed],Ge.prototype,"cropMaskSize",1),h([Pe.computed],Ge.prototype,"state",1),h([Pe.computed],Ge.prototype,"defaultImageSize",1),h([Pe.computed],Ge.prototype,"maxCropMaskSize",1),h([Pe.computed],Ge.prototype,"minCropMaskSize",1),h([Pe.computed],Ge.prototype,"defaultCropMaskPosition",1),h([Pe.computed],Ge.prototype,"defaultScale",1);class Ve{constructor(t){this.checkImageResize=()=>{this.engine.on(r.p.BEGAN_IMAGE_DOWNSCALING,(()=>{this.modalStore.showInfoModal("resizing")})),this.engine.on(r.p.IMAGE_DOWNSCALED,(({width:t,height:e})=>{const{maxMegaPixels:i}=this.configStore.config.engine.downscaleOptions,n=_.isMobile()?i.mobile:i.desktop;this.modalStore.hideModal(),this.modalStore.showActionModal({type:r.E.WARNING,identifier:"imageResized",handleConfirm:()=>{this.modalStore.hideModal()},error:{megapixels:`${n}`,width:`${t}`,height:`${e}`}})}))},this.init=t=>{this.historyStore.isDirty()?this.modalStore.showActionModal({type:r.E.WARNING,identifier:"discardChanges",handleConfirm:()=>{this.setImage(t),this.resetToolStates()},handleDismiss:()=>{this.setImage(t,!0)}}):this.setImage(t,!0).then((()=>{const{engine:t,displayCanvasRendererWarning:e}=this.configStore.config;"canvas"===t.preferredRenderer&&e&&this.modalStore.showActionModal({type:r.E.WARNING,identifier:"unsupportedWebGLRenderer",handleConfirm:()=>{this.modalStore.hideModal()}})})),this.historyStore.reset(),this.libraryStore.fetchImages()},this.setImage=(t,e=!1)=>(0,r.Z)(this,null,(function*(){try{this.modalStore.showInfoModal(this.configStore.config.displayResizeWarning?"resizing":"loading"),this.scale.defaultScale=1,this.scale.resetOffset(),yield this.activeStore.setImage(t),yield this.engineMediator.image.addImageToContainer(),this.engineMediator.output.applyNewImageTransform(),this.engineMediator.preview.updateTransform(),this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults(),this.historyStore.addInitialSnapshot();const{flipHorizontally:i,flipVertically:r}=this.transformToolStore.rotateFlipState;this.outputContainer.setData({flipVertically:r,flipHorizontally:i}),e?(this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls(),this.transformToolStore.resetCrop(),this.transformToolStore.applyDefaultCrop(),this.transformToolStore.saveTransformsBasedOnFlip(),this.transformToolStore.onEnter(),this.transformToolStore.setRotation(this.transformToolStore.rotationInDegrees),this.transformToolStore.onLeave(),this.transformToolStore.onEnter(),this.transformToolStore.onLeave()):this.transformToolStore.saveTransforms(),this.snappingStore.calculatePreviewTopLeftPosition(),yield this.renderPromise(),this.configStore.config.filter.enablePreviewThumbnails&&"webgl"===this.configStore.config.engine.preferredRenderer&&this.filterToolStore.setImageAndGetPreviews();this.activeStore.tool?this.configStore.events.onImageLoaded():this.onReady(),"imageResized"===this.modalStore.identifier||this.modalStore.hideModal()}catch(t){this.configStore.events.onErrorImageLoading(t),this.modalStore.hideModal(),this.modalStore.showActionModal({type:r.E.ERROR,identifier:t.identifier?t.identifier:"rendering",error:t,handleConfirm:()=>{window.location.reload()}})}})),this.onToolChange=(t,e=null,i=!0)=>{if(t!==e&&this.engineMediator.preview.container){if(-1!==[t,e].indexOf(r.c.TRANSFORM)){const{canvasSize:i}=this.canvasStore,n=this.configStore.measurements.basicToolControlBar.controlsBarHeight;if(t===r.c.TRANSFORM){this.transformToolStore.onLeave(),this.historyStore.removeTransformLocalSnapshots();const t=this.engineMediator.preview.container.getScale().x,e=this.engineMediator.output.container.getResolution(),{defaultImageSize:r}=this.transformToolStore;(1!==t||r.width!==e.width||r.height!==e.height)&&this.addSnapshot(void 0,B.EDIT,this.configStore.locale.transform.title),this.snappingStore.calculatePreviewTopLeftPosition(),this.configStore.isLayoutAdvanced||(this.canvasStore.state.canvasSize.height=i.height+n,this.resize(!0))}else e===r.c.TRANSFORM&&(this.configStore.isLayoutAdvanced||(this.canvasStore.state.canvasSize.height=i.height-n,this.resize(),this.render()),this.transformToolStore.onEnter(),this.transformToolStore.addLocalSnapshot(),this.historyStore.saveTransformLocalSnapshotIndex())}else this.scale.resetOffset(),this.scale.resetPosition(),this.scale.setScaleToDefault(),this.scale.scaleRender(!0);i&&this.render()}},this.resize=(t=!1)=>{try{this.transformToolStore.applyDefaultCrop(),this.canvasStore.updateCanvasDimensions();const e=St.toJS(this.transformToolStore.maxCropMaskSize),i=this.activeStore.tool===r.c.TRANSFORM;(!i||t)&&this.transformToolStore.onEnter();const n=this.engineMediator.preview.container.getRotation();if(this.engineMediator.preview.updateTransform(n)){this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults(),this.transformToolStore.updateCanvasControls(e),this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls();const r=this.transformToolStore.getScaleWithFlip(n);this.engineMediator.preview.container.setScale(r),(!i||t)&&(this.transformToolStore.onLeave(),this.transformToolStore.onEnter(),this.transformToolStore.onLeave()),this.snappingStore.calculatePreviewTopLeftPosition(),this.render()}}catch(t){this.modalStore.showActionModal({type:r.E.ERROR,identifier:"rendering",handleConfirm:()=>{window.location.reload()}})}},this.export=(t={})=>{var{preventExportEvent:e}=t,i=u(t,["preventExportEvent"]);return new Promise(((t,n)=>{this.modalStore.showInfoModal("exporting");const o=this.activeStore.tool===r.c.TRANSFORM;o&&this.transformToolStore.onLeave();const{config:s}=this.configStore,a=(0,r.N)((0,r.N)({},s.export.image),i),{exportType:l,format:c,quality:u,enableDownload:h}=a;this.engineMediator.engine.export(l,c,u).then((i=>{h&&this.triggerFileDownload(s.export.filename,c,l,i),e||this.configStore.events.onExport(i),t(i),o&&this.transformToolStore.onEnter(),this.modalStore.hideModal(),this.historyStore.isDirtySinceSave=!1})).catch((t=>{n(t),o&&this.transformToolStore.onEnter(),this.modalStore.hideModal()}))}))},this.serialize=({image:t}={image:!0})=>this.serializationMediator.serialize({image:t}),this.deserialize=t=>this.serializationMediator.deserialize(t),this.close=()=>{this.historyStore.isDirtySinceSave&&this.configStore.config.displayCloseWarning?this.modalStore.showActionModal({type:r.E.WARNING,identifier:"unsavedChanges",handleConfirm:()=>{this.configStore.events.onClose()}}):this.configStore.events.onClose()},this.hasChanges=()=>this.historyStore.isDirty(),this.wait=(t=0)=>new Promise((e=>setTimeout(e,t))),this.clickableCanvas=t=>(0,r.Z)(this,null,(function*(){t?(yield new Promise((t=>setTimeout(t,0))),this.canvasStore.enableCanvasClick()):this.canvasStore.disableCanvasClick()})),this.onReady=()=>(0,r.Z)(this,null,(function*(){const{layout:t,forceCrop:e}=this.configStore.config;if("advanced"===t&&this.activeStore.selectTool(this.configStore.defaultTool),e){const t=this.transformToolStore.localOutputImageSize,e=t.width/t.height,i=this.transformToolStore.entityManager.items.map((t=>t.ratio?t.ratio:t.dimensions.x/t.dimensions.y));-1!==i.indexOf("*")?console.error('ForceCrop will not work if "*" is one of the ratios'):-1===i.indexOf(parseFloat(e.toFixed(2)))&&this.activeStore.selectTool(r.c.TRANSFORM)}this.configStore.events.onEditorReady()})),this.addSnapshot=(t,e,i)=>{this.historyStore.addSnapshot(t,e,i)},this.addLocalTransformSnapshot=(t,e,i=B.EDIT)=>{this.historyStore.addSnapshot({localTransform:t},i,e)},this.resetToolStates=()=>{this.filterToolStore.pureReset(),this.focusToolStore.pureReset(),this.adjustmentsToolStore.pureReset(),this.overlayToolStore.pureReset(),this.frameToolStore.pureReset(),this.brushToolStore.pureReset(),this.spriteStore.pureReset(),this.transformToolStore.pureReset(),this.historyStore.reset(),this.render()},this.getAssetPath=t=>this.assetProvider.getPathForCategory(t),this.render=()=>(0,r.Z)(this,null,(function*(){yield this.renderPromise()})),this.applyFlipToPreview=t=>this.engineMediator.previewSpaceToFlippedPreviewSpace(t),this.getPreviewSize=()=>{const{width:t,height:e}=this.engine.getOutputDimensions();return t&&e?{width:Math.round(this.worldToPreview(this.outputToWorld(t))),height:Math.round(this.worldToPreview(this.outputToWorld(e)))}:{height:e,width:t}},this.triggerFileDownload=(t,e,i,n)=>{const o=t+(e===r.e.JPEG&&i!==r.d.MSBLOB?".jpeg":".png"),s=this.blobFromExportData(n);this.triggerBlobDownload(o,s)},this.triggerBlobDownload=(t,e)=>{if(navigator.msSaveBlob)navigator.msSaveBlob(e,t);else{const i=document.createElement("a"),n=URL.createObjectURL(e);i.href=n,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),((t=(0,r.q)())=>!!t.match(/iP(hone|od|ad)|AppleWebKit/))()||URL.revokeObjectURL(n)}},this.blobFromExportData=t=>"string"==typeof t?ie(t):t instanceof HTMLImageElement?ie(t.src):t,this.configStore=new vt;const e=this.configStore.saveConfig(t);if(this.engineMediator=new qe(this),this.serializationMediator=new Ut(this),this.spriteStore=new Me(this),this.scale=new zt(this),this.filterToolStore=new K(this),this.adjustmentsToolStore=new G(this),this.focusToolStore=new si(this),this.overlayToolStore=new ee(this),this.frameToolStore=new $t(this),this.brushToolStore=new se(this),this.transformToolStore=new Ge(this),this.libraryStore=new Yt(this),this.modalStore=new Pt(this),this.snappingStore=new ue(this),this.activeStore=new Dt(this),this.canvasStore=new At(this),this.historyStore=new L(this),this.modalStore.showInfoModal("loading"),this.libraryStore.initProvider(e),this.configStore.config.displayResizeWarning&&this.checkImageResize(),this.configStore.config.filter.enablePreviewThumbnails&&"webgl"===this.configStore.config.engine.preferredRenderer){const t=this.configStore.config.engine;this.previewThumbnails=new re((0,r.N)((0,r.N)({},t),{license:this.configStore.config.license,assetProvider:this.configStore.assetProvider}))}}static get defaultColors(){return Object.keys(E).map((t=>{const e=E[t];return{identifier:t,color:e,colorString:C(e)}}))}static get defaultBackgroundColors(){return Object.keys(R).map((t=>{const e=R[t];return{identifier:t,color:e,colorString:C(e)}}))}static get devicePixelRatio(){return window.devicePixelRatio||1}get shortestOutputSide(){const t=this.outputContainer.getBounds();return Math.min(t.width,t.height)}get assetProvider(){return this.configStore.assetProvider}get engine(){return this.engineMediator.engine}get imageContainer(){return this.engineMediator.image.container}get orderHelper(){return this.engineMediator.orderHelper}renderPromise(){return this.engineMediator.render(this.engineMediator.preview.container)}previewToWorld(t,e){return(0,r.P)(t),this.engineMediator.previewSpaceToWorldSpace(t,e)}worldToPreview(t){return(0,r.P)(t),this.engineMediator.worldSpaceToPreviewSpace(t)}worldSizeToPreview(t){return{width:this.engineMediator.worldSpaceToPreviewSpace(t.width),height:this.engineMediator.worldSpaceToPreviewSpace(t.height)}}previewSizeToWorld(t,e){return{width:this.engineMediator.previewSpaceToWorldSpace(t.width,e),height:this.engineMediator.previewSpaceToWorldSpace(t.height,e)}}outputToWorld(t){return(0,r.P)(t),this.engineMediator.outputSpaceToWorldSpace(t)}previewToOutput(t){return(0,r.P)(t),this.engineMediator.previewSpaceToOutputSpace(t)}get outputContainer(){return this.engineMediator.output.container}}function $e(t,e){return t.width/t.height>e.width/e.height?t.height/e.height:t.width/e.width}h([St.action],Ve.prototype,"resize",2),h([St.action],Ve.prototype,"export",2),h([St.action],Ve.prototype,"clickableCanvas",2);const Ze={transform:r.z.IDENTITY};class Xe{constructor(t){this.initialTransform=r.z.IDENTITY,this.editor=t,this.state=wt.observable(Ze)}createPreview(t){this.container=this.editor.engine.createPreview(t)}updateTransform(t=0,e=!0){const i=this.calculateTransform(t);return!!i.scale.x&&(e?this.saveInitialTransform(i):this.savePreviewTransform(i),this.container.setTransform(this.state.transform),!0)}saveInitialTransform(t){this.initialTransform=t,this.savePreviewTransform(t)}savePreviewTransform(t){wt.runInAction((()=>{this.state.transform.position=t.position,this.state.transform.scale=t.scale,this.state.transform.rotation=t.rotation;const e=Ve.devicePixelRatio;this.previewTransformWithoutDpr={position:new r.C(t.position).divide(e),scale:new r.C(t.scale).divide(e),rotation:t.rotation}}))}get transform(){return this.state.transform}get position(){return this.state.transform.position}get scale(){return this.state.transform.scale}get rotation(){return this.state.transform.rotation}calculateTransform(t=0){const e=Ve.devicePixelRatio,{width:i,height:n}=this.editor.canvasStore.canvasSize,o=this.editor.engine.getOutputDimensions();let s=$e({width:i,height:n},o),a=.95;window.innerWidth<600&&(a=.98),s*=a;const l=n-o.height*s,c=2*this.editor.configStore.measurements.mainCanvasActionBar.height;l<c&&(s=$e({width:i,height:n-c},o),s*=a),s*=e;const u={x:i*e/2,y:n*e/2},h={x:s,y:s};return new r.z(u,h,t)}}h([wt.action],Xe.prototype,"updateTransform",1),h([wt.action],Xe.prototype,"savePreviewTransform",1),h([wt.computed],Xe.prototype,"transform",1),h([wt.computed],Xe.prototype,"position",1),h([wt.computed],Xe.prototype,"scale",1),h([wt.computed],Xe.prototype,"rotation",1);class Ye{constructor(){this.imageContainerOrder=[],this.spriteContainerOrder=[]}static checkTool(t){if(-1!==[r.c.STICKER,r.c.TEXT,r.c.TEXT_DESIGN,r.c.BRUSH,r.c.FRAME].indexOf(t))throw new Error("addIndex is used for non sprites, for sprites use addSprite")}static remove(t,e){const i=e.findIndex((e=>e===t));-1!==i&&e.splice(i,1)}static indexForOrder(t,e,i){const r=t[i],n=e.findIndex((t=>t===i));if(-1!==n)return{index:n,order:e};const{length:o}=e;if(o){let n;for(n=0;n<o;n+=1){if(r<t[e[n]])return{index:n,order:e=[...e.slice(0,n),i,...e.slice(n)]}}}return e.push(i),{index:e.length-1,order:e}}addIndex(t){Ye.checkTool(t);const{index:e,order:i}=Ye.indexForOrder(Ye.IMAGE_CONTAINER_INDEX,this.imageContainerOrder,t);return this.imageContainerOrder=i,e}removeIndex(t){Ye.checkTool(t),Ye.remove(t,this.imageContainerOrder)}addSprite(t){return this.spriteContainerOrder.push(t),this.imageContainerOrder.length+this.spriteContainerOrder.length-1}removeSprite(t){Ye.remove(t,this.spriteContainerOrder)}renameSprite(t,e){const i=this.spriteContainerOrder.findIndex((e=>e===t));-1!==i&&(this.spriteContainerOrder[i]=e)}bringToFront(t){const e=this.spriteContainerOrder.findIndex((e=>e===t));return-1!==e&&(this.spriteContainerOrder.splice(e,1),this.spriteContainerOrder.push(t)),this.getLastSpriteIndex()}getLastSpriteId(){const{length:t}=this.spriteContainerOrder;return this.spriteContainerOrder[t-1]}getSpriteIndex(t){return this.spriteContainerOrder.findIndex((e=>e===t))+this.imageContainerOrder.length-1}getLastSpriteIndex(){return this.imageContainerOrder.length+this.spriteContainerOrder.length-1}}Ye.IMAGE_CONTAINER_INDEX={[r.c.ART_FILTER]:0,[r.c.FILTER]:1,[r.c.ADJUSTMENT]:2,[r.c.FOCUS]:3,[r.c.OVERLAY]:4};class qe{constructor(t){this.orderHelper=new Ye;const e=t.configStore.config.engine;this.engine=new r.$((0,r.N)((0,r.N)({},e),{license:t.configStore.config.license,assetProvider:t.configStore.assetProvider})),this.image=new bt(t),this.output=new xt(t),this.preview=new Xe(t),this.editor=t}render(t){return this.engine.render(t)}previewSpaceToWorldSpace(t,e){const i=this.preview.previewTransformWithoutDpr;if((0,r.P)(t)){const n=this.editor.engine.convertPointFromPreviewIntoWorldSpace(r.C.ZERO,i,e),o=this.editor.engine.convertPointFromPreviewIntoWorldSpace({x:t,y:0},i,e);return r.C.distance(new r.C(n),new r.C(o))}return this.editor.engine.convertPointFromPreviewIntoWorldSpace(t,i,e)}worldSpaceToPreviewSpace(t){const e=this.preview.previewTransformWithoutDpr;if((0,r.P)(t)){const i=this.editor.engine.convertPointFromWorldIntoPreviewSpace(r.C.ZERO,e),n=this.editor.engine.convertPointFromWorldIntoPreviewSpace({x:t,y:0},e);return r.C.distance(new r.C(i),new r.C(n))}return this.editor.engine.convertPointFromWorldIntoPreviewSpace(t,e)}outputSpaceToWorldSpace(t){return(0,r.P)(t)?r.aa.getScalarInWorldSpace(t,this.editor.engine.getOutputContainer()):r.aa.getPointInWorldSpace(t,this.editor.engine.getOutputContainer())}previewSpaceToOutputSpace(t){const e=this.preview.previewTransformWithoutDpr;if((0,r.P)(t)){const i=this.editor.engine.convertPointFromPreviewIntoOutputSpace(r.C.ZERO,e),n=this.editor.engine.convertPointFromPreviewIntoOutputSpace({x:t,y:0},e);return r.C.distance(new r.C(i),new r.C(n))}return this.editor.engine.convertPointFromPreviewIntoOutputSpace(t,e)}previewSpaceToFlippedPreviewSpace(t){return this.editor.engine.convertPointFromPreviewIntoFlippedPreviewSpace(t)}}const Ke=(0,r.U)(d()),Qe=[[0,0],[0,1],[1,0],[1,1]],Je=[[0,1,2,3],[2,3,0,1],[1,0,3,2],[3,2,1,0]];class ti{constructor(t,e,i="center",r=!0,n=!1){this.considerRotation=!0,this.considerFlip=!0,this.store=e,this.m="center"===i?ti.movePivotTo([.5,.5]):Qe,this.considerRotation=r,this.considerFlip=n,this.configStore=t.configStore}static getFlippedEdgeIndex(t,e,i){return Je[(e?1:0)+(i?2:0)][t]}static movePivotTo(t){return Qe.map((e=>[e[0]-t[0],e[1]-t[1]]))}get position(){return this.store.position}get size(){return this.store.size}get rotation(){return this.considerRotation?this.store.rotationWRTOutputRotation:0}get flipHorizontally(){return!!this.considerFlip&&this.store.isFlippedHorizontal}get flipVertically(){return!!this.considerFlip&&this.store.isFlippedVertical}get flipCenter(){return this.considerFlip?this.store.flipCenter:null}handleOrigin(t,e,i){const r=ti.getFlippedEdgeIndex(t,e,i);return{width:this.m[r][0]*this.size.width,height:this.m[r][1]*this.size.height}}get leftTop(){const{position:t,flipHorizontally:e,flipVertically:i}=this,r=this.handleOrigin(0,e,i);return ti.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftBottom(){const{position:t,flipHorizontally:e,flipVertically:i}=this,r=this.handleOrigin(1,e,i);return ti.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightTop(){const{position:t,flipHorizontally:e,flipVertically:i}=this,r=this.handleOrigin(2,e,i);return ti.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightBottom(){const{position:t,flipHorizontally:e,flipVertically:i}=this,r=this.handleOrigin(3,e,i);return ti.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftBottomHandle(){const{position:t,flipHorizontally:e,flipVertically:i}=this,r=this.handleOrigin(1,e,i);return r.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,ti.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightBottomHandle(){const{position:t,flipHorizontally:e,flipVertically:i}=this,r=this.handleOrigin(3,e,i);return r.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,ti.coordinatesWithRotation(r,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftMid(){const t=new r.C(this.leftTop),e=new r.C(this.leftBottom);return t.add(e).divide(2)}get rightMid(){const t=new r.C(this.rightTop),e=new r.C(this.rightBottom);return t.add(e).divide(2)}}ti.coordinatesWithRotation=({width:t,height:e},i,n,o,s,a)=>{let l=t*Math.cos(i)-e*Math.sin(i)+a.x,c=t*Math.sin(i)+e*Math.cos(i)+a.y;return n&&(l=2*s.x-l),o&&(c=2*s.y-c),new r.C({x:l,y:c}).rounded},h([Ke.computed],ti.prototype,"position",1),h([Ke.computed],ti.prototype,"size",1),h([Ke.computed],ti.prototype,"rotation",1),h([Ke.computed],ti.prototype,"flipHorizontally",1),h([Ke.computed],ti.prototype,"flipVertically",1),h([Ke.computed],ti.prototype,"flipCenter",1),h([Ke.computed],ti.prototype,"leftTop",1),h([Ke.computed],ti.prototype,"leftBottom",1),h([Ke.computed],ti.prototype,"rightTop",1),h([Ke.computed],ti.prototype,"rightBottom",1),h([Ke.computed],ti.prototype,"leftBottomHandle",1),h([Ke.computed],ti.prototype,"rightBottomHandle",1),h([Ke.computed],ti.prototype,"leftMid",1),h([Ke.computed],ti.prototype,"rightMid",1);const ei=(t,e=0,i=3)=>{const r=Math.tan(e),n=Math.sqrt(r**2+1);return{x:t.x+i/n,y:t.y+i*r/n}},ii={blurRadius:40,gradientSize:.2},ri={identifier:"identity",linear:(0,r.N)({start:{x:0,y:0},end:{x:0,y:0}},ii),radial:(0,r.N)({center:{x:0,y:0},radius:0},ii),mirrored:(0,r.N)({origin:{x:0,y:0},rotation:0,size:0},ii),gaussian:ii},ni=(0,r.U)(d());class oi{constructor(t){this.selectFocus=(t,e)=>{ni.runInAction((()=>{this.state.identifier=t,e&&(this.state[t].blurRadius=e)}))},this.changeBlurRadius=(t,e)=>{"identity"!==t&&(this.state[t].blurRadius=e)},this.reset=()=>{-1===this.indexInContainer&&(this.state.identifier=ri.identifier,"identity"!==this.state.identifier&&(this.state[this.state.identifier].blurRadius=ri[this.state.identifier].blurRadius))},this.setLinear=({start:t,end:e})=>{this.state.linear.start.x=t.x,this.state.linear.start.y=t.y,this.state.linear.end.x=e.x,this.state.linear.end.y=e.y},this.setLinearStart=t=>{this.state.linear.start.x=t.x,this.state.linear.start.y=t.y},this.setLinearEnd=t=>{this.state.linear.end.x=t.x,this.state.linear.end.y=t.y},this.setRadialCenter=t=>{this.state.radial.center.x=t.x,this.state.radial.center.y=t.y},this.setRadialRadius=t=>{this.state.radial.radius=t},this.setMirroredOrigin=t=>{this.state.mirrored.origin.x=t.x,this.state.mirrored.origin.y=t.y},this.setMirroredRotation=t=>{this.state.mirrored.rotation=t},this.setMirroredSize=t=>{this.state.mirrored.size=t},this.getEffectProperties=()=>this.effect?this.effect.getProperties():null,this.setLinearFocus=t=>{this.effect=this.engineMediator.engine.addLinearBlur(t,this.imageContainer,this.order),this.updateLinearState(this.effect.getProperties())},this.setGaussianFocus=t=>{this.effect=this.engineMediator.engine.addGaussianBlur(t,this.imageContainer,this.order),this.updateGaussianState(this.effect.getProperties())},this.setRadialFocus=t=>{this.effect=this.engineMediator.engine.addRadialBlur(t,this.imageContainer,this.order),this.updateRadialState(this.effect.getProperties())},this.setMirroredFocus=t=>{this.effect=this.engineMediator.engine.addMirroredBlur(t,this.imageContainer,this.order),this.updateMirroredState(this.effect.getProperties())},this.updateFromEngineState=t=>{const e=this.getEffectProperties();if(e&&"identity"!==t)switch(t){case r.k.LINEAR:this.updateLinearState(e);break;case r.k.RADIAL:this.updateRadialState(e);break;case r.k.MIRRORED:this.updateMirroredState(e)}},this.updateGaussianState=t=>{this.changeBlurRadius(r.k.GAUSSIAN,t.blurRadius)},this.updateMirroredState=t=>{const e=this.editor.worldToPreview(t.mirrorAxisOrigin),i=new r.C(this.editor.worldToPreview(t.mirrorAxisDirection)).subtract(e),n=Math.atan2(i.y,i.x);this.setMirroredOrigin(this.editor.worldToPreview(t.mirrorAxisOrigin)),this.setMirroredRotation(n),this.setMirroredSize(this.editor.worldToPreview(t.clearAreaWidth)),this.changeBlurRadius(r.k.MIRRORED,t.blurRadius)},this.updateRadialState=t=>{this.setRadialCenter(this.editor.worldToPreview(t.center)),this.setRadialRadius(this.editor.worldToPreview(t.radius)),this.changeBlurRadius(r.k.RADIAL,t.blurRadius)},this.updateLinearState=t=>{this.setLinearStart(this.editor.worldToPreview(t.start)),this.setLinearEnd(this.editor.worldToPreview(t.end)),this.changeBlurRadius(r.k.LINEAR,t.blurRadius)},this.setEffectProperties=t=>this.effect?(this.effect.setProperties(t),this.effect.getProperties()):null,this.removeFocus=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.engineMediator.orderHelper.removeIndex(r.c.FOCUS))},this.editor=t,this.engineMediator=this.editor.engineMediator,this.state=ri}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}get order(){return this.engineMediator.orderHelper.addIndex(r.c.FOCUS)}get imageContainer(){return this.engineMediator.image.container}}h([ni.observable],oi.prototype,"state",2),h([ni.action],oi.prototype,"selectFocus",2),h([ni.action],oi.prototype,"changeBlurRadius",2),h([ni.action],oi.prototype,"reset",2),h([ni.action],oi.prototype,"setLinear",2),h([ni.action],oi.prototype,"setLinearStart",2),h([ni.action],oi.prototype,"setLinearEnd",2),h([ni.action],oi.prototype,"setRadialCenter",2),h([ni.action],oi.prototype,"setRadialRadius",2),h([ni.action],oi.prototype,"setMirroredOrigin",2),h([ni.action],oi.prototype,"setMirroredRotation",2),h([ni.action],oi.prototype,"setMirroredSize",2),h([ni.action],oi.prototype,"updateFromEngineState",2);class si{constructor(t){this.selectFocus=t=>{if(t!==this.identifier){this.focusStore.removeFocus();const e=.2*this.maxIntensity,{width:i}=this.editor.engine.getOutputContainer().getBounds(),n=.2*this.editor.shortestOutputSide;switch(t){case r.k.LINEAR:const t=this.editor.outputToWorld({x:-i/2,y:0}),o=this.editor.outputToWorld({x:i/2,y:0});this.setLinearFocus({start:t,end:o,blurRadius:e});break;case r.k.RADIAL:const s=this.editor.outputToWorld({x:0,y:0});this.setRadialFocus({center:s,radius:n,blurRadius:e});break;case r.k.MIRRORED:const a=this.editor.outputToWorld({x:0,y:0}),l=n,c=this.editor.outputToWorld(ei({x:0,y:0},0));this.setMirroredFocus({mirrorAxisOrigin:a,clearAreaWidth:l,blurRadius:e,mirrorAxisDirection:c});break;case r.k.GAUSSIAN:this.setGaussianFocus({blurRadius:e})}this.focusStore.selectFocus(t,e),this.editor.render(),this.addSnapshot(B.ADD,r.c.FOCUS)}},this.changeIntensity=t=>{const e=this.focusStore.setEffectProperties({blurRadius:t});e&&(this.focusStore.changeBlurRadius(this.identifier,e.blurRadius),this.editor.render())},this.toolSnapshot=t=>{this.addSnapshot(B.EDIT,t)},this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)},this.clickableCanvas=t=>{this.editor.clickableCanvas(t)},this.pureReset=()=>{this.focusStore.removeFocus(),this.focusStore.reset()},this.reset=()=>{this.pureReset(),this.editor.render(),this.addSnapshot(B.DELETE,this.locale.controls.buttonReset)},this.setStart=t=>{const e=this.focusStore.setEffectProperties({start:this.editor.previewToWorld(t)});e&&(this.focusStore.setLinearStart(this.editor.worldToPreview(e.start)),this.editor.render())},this.setEnd=t=>{const e=this.focusStore.setEffectProperties({end:this.editor.previewToWorld(t)});e&&(this.focusStore.setLinearEnd(this.editor.worldToPreview(e.end)),this.editor.render())},this.setCenter=t=>{const e=this.focusStore.setEffectProperties({center:this.editor.previewToWorld(t)});e&&(this.focusStore.setRadialCenter(this.editor.worldToPreview(e.center)),this.editor.render())},this.setRadius=t=>{const e=this.focusStore.setEffectProperties({radius:this.editor.previewToWorld(t)});e&&(this.focusStore.setRadialRadius(this.editor.worldToPreview(e.radius)),this.editor.render())},this.setOrigin=t=>{const e=this.focusStore.setEffectProperties({mirrorAxisOrigin:this.editor.previewToWorld(t),mirrorAxisDirection:this.editor.previewToWorld(ei(t,this.rotation))});e&&(this.focusStore.setMirroredOrigin(this.editor.worldToPreview(e.mirrorAxisOrigin)),this.editor.render())},this.setSize=t=>{const e=this.focusStore.setEffectProperties({clearAreaWidth:this.editor.previewToWorld(t)});e&&(this.focusStore.setMirroredSize(this.editor.worldToPreview(e.clearAreaWidth)),this.editor.render())},this.setRotation=t=>{this.focusStore.setEffectProperties({mirrorAxisDirection:this.editor.previewToWorld(ei(this.origin,t))}),this.focusStore.setMirroredRotation(t),this.editor.render()},this.updateStateFromHistory=(t,e)=>{this.focusStore.removeFocus();const{magnitude:i}=e;Q.runInAction((()=>{switch(t.identifier){case r.k.LINEAR:this.focusStore.selectFocus(r.k.LINEAR),this.setLinearFocus({start:this.editor.previewToWorld(new r.C(t.linear.start).multiply(e)),end:this.editor.previewToWorld(new r.C(t.linear.end).multiply(e)),blurRadius:t.linear.blurRadius});break;case r.k.GAUSSIAN:this.focusStore.selectFocus(r.k.GAUSSIAN),this.setGaussianFocus({blurRadius:t.gaussian.blurRadius});break;case r.k.RADIAL:this.focusStore.selectFocus(r.k.RADIAL),this.setRadialFocus({center:this.editor.previewToWorld(new r.C(t.radial.center).multiply(e)),radius:this.editor.previewToWorld(t.radial.radius*i),blurRadius:t.radial.blurRadius});break;case r.k.MIRRORED:this.focusStore.selectFocus(r.k.MIRRORED),this.setMirroredFocus({mirrorAxisOrigin:this.editor.previewToWorld(new r.C(t.mirrored.origin).multiply(e)),clearAreaWidth:this.editor.previewToWorld(t.mirrored.size*i),blurRadius:t.mirrored.blurRadius,mirrorAxisDirection:this.editor.previewToWorld(ei(t.mirrored.origin,t.mirrored.rotation))});break;case"identity":this.pureReset()}}))},this.updateStateFromSerialization=t=>(0,r.Z)(this,null,(function*(){if(!si.doesFocusIdentifierExist(t.identifier))throw new Error(`Focus identifier ${t.identifier} doesn't exist`);this.focusStore.removeFocus(),Q.runInAction((()=>{switch(this.focusStore.selectFocus(t.identifier),t.identifier){case r.k.LINEAR:this.setLinearFocus(t.linear);break;case r.k.GAUSSIAN:this.setGaussianFocus(t.gaussian);break;case r.k.RADIAL:this.setRadialFocus(t.radial);break;case r.k.MIRRORED:this.setMirroredFocus({mirrorAxisOrigin:t.mirrored.origin,clearAreaWidth:t.mirrored.size,blurRadius:t.mirrored.blurRadius,mirrorAxisDirection:ei(t.mirrored.origin,t.mirrored.rotation)})}}))})),this.updateCanvasControls=()=>{this.focusStore.updateFromEngineState(this.identifier)},this.getFocusStateForHistory=()=>{const t=this.editor.canvasStore.sizeVector,{linear:e}=this.focusStore.state,{radial:i}=this.focusStore.state,{mirrored:n}=this.focusStore.state,o=t,{magnitude:s}=o;return(0,r.N)((0,r.N)({},this.focusStore.state),{linear:(0,r.N)((0,r.N)({},e),{start:new r.C(e.start).divide(o),end:new r.C(e.end).divide(o)}),radial:(0,r.N)((0,r.N)({},i),{center:new r.C(i.center).divide(o),radius:i.radius/s}),mirrored:(0,r.N)((0,r.N)({},n),{origin:new r.C(n.origin).divide(o),size:n.size/s}),gaussian:(0,r.N)({},this.focusStore.state.gaussian)})},this.editor=t,this.focusStore=new oi(this.editor);const e=this.editor.assetProvider.getAssets("focus");this.entityManager=new N(e,(0,r.N)((0,r.N)({},this.config),{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("focus")}))}static get minIntensity(){return 0}static doesFocusIdentifierExist(t){return-1!==Object.keys(r.k).map((t=>r.k[t])).findIndex((e=>e===t))}get state(){return this.focusStore.state}get serializableState(){switch(this.identifier){case r.k.LINEAR:return{identifier:this.identifier,linear:this.focusStore.getEffectProperties()};case r.k.RADIAL:return{identifier:this.identifier,radial:this.focusStore.getEffectProperties()};case r.k.MIRRORED:const t=this.focusStore.getEffectProperties();return{identifier:this.identifier,mirrored:{blurRadius:t.blurRadius,origin:t.mirrorAxisOrigin,rotation:Q.toJS(this.state.mirrored.rotation),size:t.clearAreaWidth}};case r.k.GAUSSIAN:return{identifier:this.identifier,gaussian:this.focusStore.getEffectProperties()};default:return ri}}get start(){return this.focusStore.state.linear.start}get startOnPreview(){const t=this.editor.applyFlipToPreview(this.focusStore.state.linear.start);return{x:Math.abs(t.x),y:Math.abs(t.y)}}get end(){return this.focusStore.state.linear.end}get endOnPreview(){const t=this.editor.applyFlipToPreview(this.focusStore.state.linear.end);return{x:Math.abs(t.x),y:Math.abs(t.y)}}get center(){return this.focusStore.state.radial.center}get radius(){return this.focusStore.state.radial.radius}get origin(){return this.focusStore.state.mirrored.origin}get rotation(){return this.focusStore.state.mirrored.rotation}get rotationOnPreview(){const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();return x({rotation:this.focusStore.state.mirrored.rotation,flipHorizontally:t,flipVertically:e})}get size(){return this.focusStore.state.mirrored.size}get mirroredAreaWidth(){const{width:t,height:e}=this.editor.canvasStore.canvasSize;return 2*Math.sqrt(t**2+e**2)}get identifier(){return this.state.identifier}get intensity(){return"identity"===this.identifier?ri.gaussian.blurRadius:this.state[this.identifier].blurRadius}get maxIntensity(){return this.editor.shortestOutputSide/10}get isOptionSelected(){return"identity"!==this.identifier}get config(){return this.editor.configStore.config[r.c.FOCUS]}get locale(){return this.editor.configStore.locale[r.c.FOCUS]}get items(){return this.entityManager.items}setGaussianFocus({blurRadius:t}){this.focusStore.setGaussianFocus({blurRadius:t})}setLinearFocus({start:t,end:e,blurRadius:i}){this.focusStore.setLinearFocus({start:t,end:e,blurRadius:i})}setRadialFocus({center:t,radius:e,blurRadius:i}){this.focusStore.setRadialFocus({center:t,radius:e,blurRadius:i})}setMirroredFocus({mirrorAxisOrigin:t,clearAreaWidth:e,blurRadius:i,mirrorAxisDirection:r}){this.focusStore.setMirroredFocus({mirrorAxisOrigin:t,clearAreaWidth:e,blurRadius:i,mirrorAxisDirection:r})}}h([Q.action],si.prototype,"selectFocus",2),h([Q.action],si.prototype,"changeIntensity",2),h([Q.action],si.prototype,"clickableCanvas",2),h([Q.action],si.prototype,"pureReset",2),h([Q.action],si.prototype,"reset",2),h([Q.action],si.prototype,"setStart",2),h([Q.action],si.prototype,"setEnd",2),h([Q.action],si.prototype,"setCenter",2),h([Q.action],si.prototype,"setRadius",2),h([Q.action],si.prototype,"setOrigin",2),h([Q.action],si.prototype,"setSize",2),h([Q.action],si.prototype,"setRotation",2),h([Q.action],si.prototype,"updateStateFromHistory",2),h([Q.action],si.prototype,"updateStateFromSerialization",2),h([Q.action],si.prototype,"updateCanvasControls",2),h([Q.computed],si.prototype,"state",1),h([Q.computed],si.prototype,"start",1),h([Q.computed],si.prototype,"startOnPreview",1),h([Q.computed],si.prototype,"end",1),h([Q.computed],si.prototype,"endOnPreview",1),h([Q.computed],si.prototype,"center",1),h([Q.computed],si.prototype,"radius",1),h([Q.computed],si.prototype,"origin",1),h([Q.computed],si.prototype,"rotation",1),h([Q.computed],si.prototype,"rotationOnPreview",1),h([Q.computed],si.prototype,"size",1),h([Q.computed],si.prototype,"mirroredAreaWidth",1),h([Q.computed],si.prototype,"identifier",1),h([Q.computed],si.prototype,"intensity",1),h([Q.computed],si.prototype,"maxIntensity",1),h([Q.computed],si.prototype,"isOptionSelected",1),h([Q.computed],si.prototype,"config",1),h([Q.computed],si.prototype,"locale",1),h([Q.computed],si.prototype,"items",1);const ai=n.F4`
from {
  opacity: 1;
  transform: scale(0);
}
to {
  opacity: 0;
  transform: scale(10);
}
`,li=n.F4`
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
`,ci=n.F4`
  0% {
    opacity: 0;
    transform: scale(0.9) translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
`;var ui,hi=[],di="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(ui||(ui={}));var pi,fi=function(){function t(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),mi=function(t){return t instanceof SVGElement&&"getBBox"in t},gi=function(t){if(mi(t)){var e=t.getBBox(),i=e.width,r=e.height;return!i&&!r}var n=t,o=n.offsetWidth,s=n.offsetHeight;return!(o||s||t.getClientRects().length)},_i=function(t){var e,i,r=null===(i=null===(e=t)||void 0===e?void 0:e.ownerDocument)||void 0===i?void 0:i.defaultView;return!!(r&&t instanceof r.Element)},yi="undefined"!=typeof window?window:{},vi=new WeakMap,bi=/auto|scroll/,xi=/^tb|vertical/,wi=/msie|trident/i.test(yi.navigator&&yi.navigator.userAgent),Si=function(t){return parseFloat(t||"0")},ki=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=!1),Object.freeze({inlineSize:(i?e:t)||0,blockSize:(i?t:e)||0})},Ci=Object.freeze({devicePixelContentBoxSize:ki(),borderBoxSize:ki(),contentBoxSize:ki(),contentRect:new fi(0,0,0,0)}),Ti=function(t,e){if(void 0===e&&(e=!1),vi.has(t)&&!e)return vi.get(t);if(gi(t))return vi.set(t,Ci),Ci;var i=getComputedStyle(t),r=mi(t)&&t.ownerSVGElement&&t.getBBox(),n=!wi&&"border-box"===i.boxSizing,o=xi.test(i.writingMode||""),s=!r&&bi.test(i.overflowY||""),a=!r&&bi.test(i.overflowX||""),l=r?0:Si(i.paddingTop),c=r?0:Si(i.paddingRight),u=r?0:Si(i.paddingBottom),h=r?0:Si(i.paddingLeft),d=r?0:Si(i.borderTopWidth),p=r?0:Si(i.borderRightWidth),f=r?0:Si(i.borderBottomWidth),m=h+c,g=l+u,_=(r?0:Si(i.borderLeftWidth))+p,y=d+f,v=a?t.offsetHeight-y-t.clientHeight:0,b=s?t.offsetWidth-_-t.clientWidth:0,x=n?m+_:0,w=n?g+y:0,S=r?r.width:Si(i.width)-x-b,k=r?r.height:Si(i.height)-w-v,C=S+m+b+_,T=k+g+v+y,E=Object.freeze({devicePixelContentBoxSize:ki(Math.round(S*devicePixelRatio),Math.round(k*devicePixelRatio),o),borderBoxSize:ki(C,T,o),contentBoxSize:ki(S,k,o),contentRect:new fi(h,l,S,k)});return vi.set(t,E),E},Ei=function(t,e,i){var r=Ti(t,i),n=r.borderBoxSize,o=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(e){case ui.DEVICE_PIXEL_CONTENT_BOX:return s;case ui.BORDER_BOX:return n;default:return o}},Ri=function(t){var e=Ti(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=[e.borderBoxSize],this.contentBoxSize=[e.contentBoxSize],this.devicePixelContentBoxSize=[e.devicePixelContentBoxSize]},Di=function(t){if(gi(t))return 1/0;for(var e=0,i=t.parentNode;i;)e+=1,i=i.parentNode;return e},Ii=function(){var t=1/0,e=[];hi.forEach((function(i){if(0!==i.activeTargets.length){var r=[];i.activeTargets.forEach((function(e){var i=new Ri(e.target),n=Di(e.target);r.push(i),e.lastReportedSize=Ei(e.target,e.observedBox),n<t&&(t=n)})),e.push((function(){i.callback.call(i.observer,r,i.observer)})),i.activeTargets.splice(0,i.activeTargets.length)}}));for(var i=0,r=e;i<r.length;i++){(0,r[i])()}return t},Oi=function(t){hi.forEach((function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach((function(i){i.isActive()&&(Di(i.target)>t?e.activeTargets.push(i):e.skippedTargets.push(i))}))}))},Ai=function(){var t=0;for(Oi(t);hi.some((function(t){return t.activeTargets.length>0}));)t=Ii(),Oi(t);return hi.some((function(t){return t.skippedTargets.length>0}))&&function(){var t;"function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:di}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=di),window.dispatchEvent(t)}(),t>0},Fi=[],Mi=function(t){if(!pi){var e=0,i=document.createTextNode("");new MutationObserver((function(){return Fi.splice(0).forEach((function(t){return t()}))})).observe(i,{characterData:!0}),pi=function(){i.textContent=""+(e?e--:e++)}}Fi.push(t),pi()},Pi=0,Bi={attributes:!0,characterData:!0,childList:!0,subtree:!0},zi=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Li=function(t){return void 0===t&&(t=0),Date.now()+t},Ni=!1,Ui=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e=this;if(void 0===t&&(t=250),!Ni){Ni=!0;var i=Li(t);!function(t){Mi((function(){requestAnimationFrame(t)}))}((function(){var r=!1;try{r=Ai()}finally{if(Ni=!1,t=i-Li(),!Pi)return;r?e.run(1e3):t>0?e.run(t):e.start()}}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,Bi)};document.body?e():yi.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),zi.forEach((function(e){return yi.addEventListener(e,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),zi.forEach((function(e){return yi.removeEventListener(e,t.listener,!0)})),this.stopped=!0)},t}()),ji=function(t){!Pi&&t>0&&Ui.start(),!(Pi+=t)&&Ui.stop()},Hi=function(){function t(t,e){this.target=t,this.observedBox=e||ui.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t=Ei(this.target,this.observedBox,!0);return function(t){return!mi(t)&&!function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)&&"inline"===getComputedStyle(t).display}(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},t}(),Wi=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},Gi=new WeakMap,Vi=function(t,e){for(var i=0;i<t.length;i+=1)if(t[i].target===e)return i;return-1},$i=function(){function t(){}return t.connect=function(t,e){var i=new Wi(t,e);Gi.set(t,i)},t.observe=function(t,e,i){var r=Gi.get(t),n=0===r.observationTargets.length;Vi(r.observationTargets,e)<0&&(n&&hi.push(r),r.observationTargets.push(new Hi(e,i&&i.box)),ji(1),Ui.schedule())},t.unobserve=function(t,e){var i=Gi.get(t),r=Vi(i.observationTargets,e),n=1===i.observationTargets.length;r>=0&&(n&&hi.splice(hi.indexOf(i),1),i.observationTargets.splice(r,1),ji(-1))},t.disconnect=function(t){var e=this,i=Gi.get(t);i.observationTargets.slice().forEach((function(i){return e.unobserve(t,i.target)})),i.activeTargets.splice(0,i.activeTargets.length)},t}(),Zi=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");$i.connect(this,t)}return t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!_i(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");$i.observe(this,t,e)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!_i(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");$i.unobserve(this,t)},t.prototype.disconnect=function(){$i.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();const Xi=(0,r.U)(p()),Yi=o.createContext({}),qi=n.ZP.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  margin: 0;
  background: ${t=>t.theme.background};
  color: ${t=>t.theme.foreground};
  display: flex;
  flex-direction: row;
  overflow: hidden;
  -webkit-touch-callout: none;
  user-select: none;
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: '${t=>t.theme.typography.fontFamily}', sans-serif;
    /* css reset for a global box-sizing: border-box */
    box-sizing: content-box;
    /* todo: fix the issue with these settings */
    font-size: inherit;
    color: inherit;
    line-height: normal;

    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;

    &::-webkit-scrollbar-track {
      border-radius: 10px;
      background-color: transparent;
      margin: 1px;
    }

    &::-webkit-scrollbar {
      width: 6px;
      height: 6px;
      background-color: transparent;
    }

    &::-webkit-scrollbar-thumb {
      border-radius: 10px;
      box-shadow: inset 0 0 14px rgba(0, 0, 0, 0.4);
      background-color: rgba(255, 255, 255, 0.2);
    }

    &::-webkit-scrollbar-thumb:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }
  }
`;class Ki extends o.Component{constructor(t){var e;if(super(t),this.node=o.createRef(),this.saveEditorDimensions=t=>{this.setState({contextValue:{element:t,rect:t.getBoundingClientRect()}})},null==(e=o)?void 0:e.version){const t=Number.parseInt(o.version.split(".")[0],10),e=Number.parseInt(o.version.split(".")[1],10);(t<16||16===t&&e<8)&&console.error("Please be aware that the PhotoEditorSDK will require React 16.8.6 or above.")}this.saveEditorDimensions=Xi.default(this.saveEditorDimensions,100),this.resizeObserver=new Zi((([t])=>{this.saveEditorDimensions(t.target)})),this.state={contextValue:{element:null,rect:null}}}componentDidMount(){var t;(null==(t=this.node)?void 0:t.current)&&this.resizeObserver.observe(this.node.current)}componentWillUnmount(){var t;(null==(t=this.node)?void 0:t.current)&&this.resizeObserver.unobserve(this.node.current)}render(){const{children:t}=this.props,{contextValue:e}=this.state;return o.createElement(qi,{ref:this.node},o.createElement(Yi.Provider,{value:e},t))}}const Qi=(0,r.U)(d()),Ji=(0,r.U)(d());if(!o.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!Ji.spy)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");const tr=(0,r.U)(d());function er(){var t=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,n,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}((0,o.useState)(0),2)[1];return(0,o.useCallback)((function(){t((function(t){return t+1}))}),[])}var ir={};var rr=function(t){return"function"==typeof Symbol?Symbol.for(t):"__$mobx-react "+t+"__"}("observerBatching");function nr(t){t()}const or=(0,r.U)(d()),sr=(0,r.U)(d());function ar(t){return sr.getDependencyTree(t)}var lr,cr=1e4,ur=new Set;function hr(){void 0===lr&&(lr=setTimeout(dr,1e4))}function dr(){lr=void 0;var t=Date.now();ur.forEach((function(e){var i=e.current;i&&t>=i.cleanAt&&(i.reaction.dispose(),e.current=null,ur.delete(e))})),ur.size>0&&hr()}var pr=!1,fr=[];var mr={};function gr(t){return"observer"+t}function _r(t,e,i){void 0===e&&(e="observed"),void 0===i&&(i=mr);var r=function(t){return function(){pr?fr.push(t):t()}}((i.useForceUpdate||er)()),n=o.useRef(null);if(!n.current){var s=new or.Reaction(gr(e),(function(){a.mounted?r():(s.dispose(),n.current=null)})),a=function(t){return{cleanAt:Date.now()+cr,reaction:t}}(s);n.current=a,function(t){ur.add(t),hr()}(n)}var l=n.current.reaction;return o.useDebugValue(l,ar),o.useEffect((function(){return function(t){ur.delete(t)}(n),n.current?n.current.mounted=!0:(n.current={reaction:new or.Reaction(gr(e),(function(){r()})),cleanAt:1/0},r()),function(){n.current.reaction.dispose(),n.current=null}}),[]),function(t){pr=!0,fr=[];try{var e=t();pr=!1;var i=fr.length>0?fr:void 0;return o.useLayoutEffect((function(){i&&i.forEach((function(t){return t()}))}),[i]),e}finally{pr=!1}}((function(){var e,i;if(l.track((function(){try{e=t()}catch(t){i=t}})),i)throw i;return e}))}var yr=function(){return(yr=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function vr(t,e){var i,r=yr({forwardRef:!1},e),n=t.displayName||t.name,s=function(e,i){return _r((function(){return t(e,i)}),n)};return s.displayName=n,i=r.forwardRef?(0,o.memo)((0,o.forwardRef)(s)):(0,o.memo)(s),function(t,e){Object.keys(t).forEach((function(i){br[i]||Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}))}(t,i),i.displayName=n,i}var br={$$typeof:!0,render:!0,compare:!0,type:!0};function xr(t){var e=t.children,i=t.render,r=e||i;return"function"!=typeof r?null:_r(r)}function wr(t,e,i,r,n){var o="children"===e?"render":"children",s="function"==typeof t[e],a="function"==typeof t[o];return s&&a?new Error("MobX Observer: Do not use children and render in the same time in`"+i):s||a?null:new Error("Invalid prop `"+n+"` of type `"+typeof t[e]+"` supplied to `"+i+"`, expected `function`.")}xr.propTypes={children:wr,render:wr},xr.displayName="Observer";(0,r.U)(d()),(0,r.U)(d());!function(t){t||(t=nr),tr.configure({reactionScheduler:t}),("undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:ir)[rr]=!0}(s.unstable_batchedUpdates);var Sr=0;var kr={};function Cr(t){return kr[t]||(kr[t]=function(t){if("function"==typeof Symbol)return Symbol(t);var e="__$mobx-react "+t+" ("+Sr+")";return Sr++,e}(t)),kr[t]}function Tr(t,e){if(Er(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var n=0;n<i.length;n++)if(!Object.hasOwnProperty.call(e,i[n])||!Er(t[i[n]],e[i[n]]))return!1;return!0}function Er(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Rr={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,propTypes:1};function Dr(t,e,i){Object.hasOwnProperty.call(t,e)?t[e]=i:Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:i})}var Ir=Cr("patchMixins"),Or=Cr("patchedDefinition");function Ar(t,e){for(var i=this,r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];e.locks++;try{var s;return null!=t&&(s=t.apply(this,n)),s}finally{e.locks--,0===e.locks&&e.methods.forEach((function(t){t.apply(i,n)}))}}function Fr(t,e){return function(){for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];Ar.call.apply(Ar,[this,t,e].concat(r))}}function Mr(t,e,i){var r=function(t,e){var i=t[Ir]=t[Ir]||{},r=i[e]=i[e]||{};return r.locks=r.locks||0,r.methods=r.methods||[],r}(t,e);r.methods.indexOf(i)<0&&r.methods.push(i);var n=Object.getOwnPropertyDescriptor(t,e);if(!n||!n[Or]){var o=t[e],s=Pr(t,e,n?n.enumerable:void 0,r,o);Object.defineProperty(t,e,s)}}function Pr(t,e,i,r,n){var o,s=Fr(n,r);return(o={})[Or]=!0,o.get=function(){return s},o.set=function(n){if(this===t)s=Fr(n,r);else{var o=Pr(this,e,i,r,n);Object.defineProperty(this,e,o)}},o.configurable=!0,o.enumerable=i,o}var Br=Qi.$mobx||"$mobx",zr=Cr("isMobXReactObserver"),Lr=Cr("isUnmounted"),Nr=Cr("skipRender"),Ur=Cr("isForcingUpdate");function jr(t){var e=t.prototype;if(t[zr]){var i=Hr(e);console.warn("The provided component class ("+i+") \n                has already been declared as an observer component.")}else t[zr]=!0;if(e.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(t.__proto__!==o.PureComponent)if(e.shouldComponentUpdate){if(e.shouldComponentUpdate!==Gr)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else e.shouldComponentUpdate=Gr;Vr(e,"props"),Vr(e,"state");var r=e.render;return e.render=function(){return Wr.call(this,r)},Mr(e,"componentWillUnmount",(function(){var t;if(null===(t=this.render[Br])||void 0===t||t.dispose(),this[Lr]=!0,!this.render[Br]){var e=Hr(this);console.warn("The reactive render of an observer class component ("+e+") \n                was overriden after MobX attached. This may result in a memory leak if the \n                overriden reactive render was not properly disposed.")}})),t}function Hr(t){return t.displayName||t.name||t.constructor&&(t.constructor.displayName||t.constructor.name)||"<component>"}function Wr(t){var e=this;Dr(this,Nr,!1),Dr(this,Ur,!1);var i=Hr(this),r=t.bind(this),n=!1,s=new Qi.Reaction(i+".render()",(function(){if(!n&&(n=!0,!0!==e[Lr])){var t=!0;try{Dr(e,Ur,!0),e[Nr]||o.Component.prototype.forceUpdate.call(e),t=!1}finally{Dr(e,Ur,!1),t&&s.dispose()}}}));function a(){n=!1;var t=void 0,e=void 0;if(s.track((function(){try{e=Qi._allowStateChanges(!1,r)}catch(e){t=e}})),t)throw t;return e}return s.reactComponent=this,a[Br]=s,this.render=a,a.call(this)}function Gr(t,e){return this.state!==e||!Tr(this.props,t)}function Vr(t,e){var i=Cr("reactProp_"+e+"_valueHolder"),r=Cr("reactProp_"+e+"_atomHolder");function n(){return this[r]||Dr(this,r,Qi.createAtom("reactive "+e)),this[r]}Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){var t=!1;return Qi._allowStateReadsStart&&Qi._allowStateReadsEnd&&(t=Qi._allowStateReadsStart(!0)),n.call(this).reportObserved(),Qi._allowStateReadsStart&&Qi._allowStateReadsEnd&&Qi._allowStateReadsEnd(t),this[i]},set:function(t){this[Ur]||Tr(this[i],t)?Dr(this,i,t):(Dr(this,i,t),Dr(this,Nr,!0),n.call(this).reportChanged(),Dr(this,Nr,!1))}})}var $r="function"==typeof Symbol&&Symbol.for,Zr=$r?Symbol.for("react.forward_ref"):"function"==typeof o.forwardRef&&(0,o.forwardRef)((function(t){return null})).$$typeof,Xr=$r?Symbol.for("react.memo"):"function"==typeof o.memo&&(0,o.memo)((function(t){return null})).$$typeof;function Yr(t){if(!0===t.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),Xr&&t.$$typeof===Xr)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Zr&&t.$$typeof===Zr){var e=t.render;if("function"!=typeof e)throw new Error("render property of ForwardRef was not a function");return(0,o.forwardRef)((function(){var t=arguments;return(0,o.createElement)(xr,null,(function(){return e.apply(void 0,t)}))}))}return"function"!=typeof t||t.prototype&&t.prototype.render||t.isReactClass||Object.prototype.isPrototypeOf.call(o.Component,t)?jr(t):vr(t)}function qr(){return(qr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}var Kr=o.createContext({});function Qr(t){var e=t.children,i=function(t,e){if(null==t)return{};var i,r,n={},o=Object.keys(t);for(r=0;r<o.length;r++)i=o[r],e.indexOf(i)>=0||(n[i]=t[i]);return n}(t,["children"]),r=o.useContext(Kr),n=o.useRef(qr({},r,i)).current;return o.createElement(Kr.Provider,{value:n},e)}function Jr(t,e,i,r){var n=o.forwardRef((function(i,r){var n=qr({},i),s=o.useContext(Kr);return Object.assign(n,t(s||{},n)||{}),r&&(n.ref=r),o.createElement(e,n)}));return r&&(n=Yr(n)),n.isMobxInjector=!0,function(t,e){var i=Object.getOwnPropertyNames(Object.getPrototypeOf(t));Object.getOwnPropertyNames(t).forEach((function(r){!Rr[r]&&-1===i.indexOf(r)&&Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}(e,n),n.wrappedComponent=e,n.displayName=function(t,e){var i,r=t.displayName||t.name||t.constructor&&t.constructor.name||"Component";return i=e?"inject-with-"+e+"("+r+")":"inject("+r+")",i}(e,i),n}function tn(t){return function(e,i){return t.forEach((function(t){if(!(t in i)){if(!(t in e))throw new Error("MobX injector: Store '"+t+"' is not available! Make sure it is provided by some Provider");i[t]=e[t]}})),i}}function en(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if("function"==typeof arguments[0]){var r=arguments[0];return function(t){return Jr(r,t,r.name,!0)}}return function(t){return Jr(tn(e),t,e.join("-"),!1)}}if(Qr.displayName="MobXProvider",!o.Component)throw new Error("mobx-react requires React to be available");if(!Qi.observable)throw new Error("mobx-react requires mobx to be available");const rn=n.iv`
  position: absolute;
  top: 0;
  left: 0;
  height: ${t=>t.theme.measurements.colorItem.size}px;
  width: ${t=>t.theme.measurements.colorItem.size}px;
  border-radius: ${t=>t.theme.colorItem.borderRadius||`${t.theme.shape.radiusSmall}px`};
  pointer-events: none;
`;var nn=n.ZP.div.attrs((t=>({style:{background:t.color}})))`
  ${rn}
  z-index: ${t=>t.theme.measurements.zIndex.colorItem.background};
`;const on=n.ZP.div`
  ${rn}
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: ${t=>t.theme.measurements.zIndex.colorItem.overlay};

  box-sizing: border-box;
  border: 2px solid transparent;
  border-radius: ${t=>t.theme.colorItem.borderRadius||`${t.theme.shape.radiusSmall}px`};
  transition: border-color 300ms ease-in-out;
  ${t=>t.isActive&&n.iv`
      border-color: ${t.theme.selectColor.activeBorderColor};
    `}
`,sn=n.ZP.span`
  display: inline-block;
  height: 2px;
  width: 2px;
  border-radius: 50%;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.6);
  background: rgba(255, 255, 255, 0.87);
  margin: 1px;
  pointer-events: none;
`;var an=({isActive:t,className:e,style:i})=>o.createElement(on,{isActive:t,className:e,style:i},t&&o.createElement(o.Fragment,null,o.createElement(sn,null),o.createElement(sn,null),o.createElement(sn,null)));const ln=n.iv`
  &:focus {
    outline: none;
    box-shadow: 0 0 2px ${t=>t.theme.focusOutlineColor};
  }
  &:-moz-focusring {
    outline: none;
    box-shadow: 0 0 2px ${t=>t.theme.focusOutlineColor};
  }
`,cn=n.iv`
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
  clip: rect(1px, 1px, 1px, 1px);
`;var un=n.ZP.button.attrs({type:"button"})`
  &&& {
    box-sizing: border-box;
  }
  position: relative;
  background: transparent;
  border: none;
  height: ${t=>t.theme.measurements.colorItem.size}px;
  width: ${t=>t.theme.measurements.colorItem.size}px;
  margin: ${t=>t.theme.colorItem.margin};
  padding: 0;
  cursor: pointer;
  border-radius: ${t=>t.theme.colorItem.borderRadius||`${t.theme.shape.radiusSmall}px`};

  &:hover {
    opacity: 0.7;
  }

  ${ln}

  &:disabled {
    opacity: ${t=>t.theme.selectColor.inactiveOpacity};
    cursor: default;
  }
`;var hn=n.ZP.div.attrs((t=>({style:t.url?{backgroundImage:`url(${t.url})`}:{}})))`
  ${rn}
  z-index: ${t=>t.theme.measurements.zIndex.colorItem.tiledBackground};
`;var dn=en("config")(Yr((({isActive:t,onClick:e,color:i,label:r,isDisabled:n,tiledBackgroundUrl:s,className:a,style:l,children:c})=>o.createElement(un,{disabled:n,onClick:e,"aria-label":r,className:a,style:l},o.createElement(hn,{url:s}),o.createElement(nn,{color:i}),o.createElement(an,{isActive:t}),c))));var pn=n.ZP.div`
  display: block;
  opacity: 1;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: ${t=>t.theme.measurements.zIndex.dialog.backdrop};
  text-align: left;
  background: ${t=>t.theme.modal.backdrop};
  height: 100%;
  width: 100%;
`;const fn=n.ZP.div`
  display: none;
  visibility: hidden;
  opacity: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: ${t=>t.theme.measurements.zIndex.dialog.base};
  transition: opacity 100s ease-in-out;

  ${t=>t.isVisible&&n.iv`
      opacity: 1;
      display: block;
      visibility: visible;
    `};
`,mn=({isVisible:t,className:e,children:i})=>o.createElement(fn,{isVisible:t,className:e},i);var gn=n.ZP.div.attrs((({style:t})=>({role:"dialog","aria-hidden":!1,style:t})))`
  display: flex;
  flex: 0 0 auto;
  flex-direction: column;
  transition: top 0.25s ease;
  position: absolute;
  top: calc(50% + ${t=>t.top}px);
  left: calc(50% + ${t=>t.left}px);
  width: ${t=>t.width};
  height: ${t=>t.height};
  transform: translate(-50%, -50%);
  border-radius: ${t=>t.theme.shape.radiusLarge}px;
  background: ${t=>t.theme.modal.background};
  color: ${t=>t.theme.modal.bodyForeground};
  z-index: ${t=>t.theme.measurements.zIndex.dialog.container};

  @media all and (min-width: 0) and (max-width: 640px) {
    text-align: center;
    width: auto;
    min-width: 200px;
    height: auto;
    top: 50%;
    left: 50%;
  }
`;var _n=({isVisible:t=!1,width:e="350px",height:i="fit-content",position:r,header:n,body:s,footer:a,className:l,style:c,children:u})=>o.createElement(mn,{isVisible:t},o.createElement(pn,null),o.createElement(gn,{height:i,width:e,left:r.x,top:r.y,className:l,style:c,"data-test":y.Dialog},n,s,u,a));var yn=n.ZP.div`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-sizing: border-box;
  font-size: ${t=>t.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.body.case};
  color: ${t=>t.theme.modal.bodyForeground};

  padding: 0px 20px 11px;
  &:first-child {
    padding-top: 11px;
  }

  @media all and (min-width: 0) and (max-width: 640px) {
    align-items: center;
  }
`;var vn=n.ZP.div`
  display: flex;
  border-top: 2px solid
    ${t=>"error"===t.type?t.theme.error:t.theme.warning};

  min-height: 40px;
  justify-content: flex-end;
  @media all and (min-width: 0) and (max-width: 640px) {
    height: auto;
    flex-direction: column;
    justify-content: space-around;
  }
`;var bn=n.ZP.h3`
  font-size: ${t=>t.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.headline2.case};
  color: ${t=>t.theme.modal.headerForeground};

  padding: 11px 20px 0px;
`;const xn=n.F4`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`,wn=n.iv`
  animation: ${xn} 2s infinite ease 1.5s;
`,Sn=n.iv`
  animation: ${xn} 2s infinite ease;
`;var kn=n.ZP.div`
  color: ${t=>t.theme.primary};
  margin: 12px 0;
  position: relative;
  width: 40px;
  height: 40px;
  box-shadow: inset 0 0 0 2px;
  transform: translateZ(0);
  border-radius: 50%;
  &:before,
  &:after {
    border-radius: 50%;
    position: absolute;
    content: '';
  }
  &:before {
    width: 25px;
    height: 45px;
    background: ${t=>t.theme.modal.background};
    border-radius: 45px 0 0 45px;
    top: -2.5px;
    left: -2.5px;
    transform-origin: 25px 25px;
    ${wn};
  }
  &:after {
    width: 25px;
    height: 45px;
    background: ${t=>t.theme.modal.background};
    border-radius: 0 45px 45px 0;
    top: -2.5px;
    left: 25px;
    transform-origin: 0px 25px;
    ${Sn};
  }
`;const Cn=["Moz","Webkit","O","ms"];function Tn(t,e){return e?`${e}${function(t){let e,i="",r=!0;for(e=0;e<t.length;e+=1)r?(i+=t[e].toUpperCase(),r=!1):"-"===t[e]?r=!0:i+=t[e];return i}(t)}`:t}var En=function(t="transform"){if("undefined"==typeof window||void 0===window.document)return"";const{style:e}=window.document.documentElement;if(t in e)return"";let i;for(i=0;i<Cn.length;i+=1)if(Tn(t,Cn[i])in e)return Cn[i];return""}();function Rn(t,e){for(let i=0,{length:r}=t;i<r;i+=1)if(e.apply(e,[t[i],i,t]))return t[i];return null}function Dn(t){return"function"==typeof t||"[object Function]"===Object.prototype.toString.call(t)}function In(t){return"number"==typeof t&&!Number.isNaN(t)}function On(t){return parseInt(t,10)}let An="";function Fn(t,e){return An||(An=Rn(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(e=>Dn(t[e])))),!!Dn(t[An])&&t[An](e)}function Mn(t,e,i){let r=t;do{if(Fn(r,e))return!0;if(r===i)return!1;r=r.parentNode}while(r);return!1}function Pn(t,e,i){t&&(t.attachEvent?t.attachEvent(`on${e}`,i):t.addEventListener?t.addEventListener(e,i,!0):t[`on${e}`]=i)}function Bn(t,e,i){t&&(t.detachEvent?t.detachEvent(`on${e}`,i):t.removeEventListener?t.removeEventListener(e,i,!0):t[`on${e}`]=null)}function zn(t){let e=t.clientHeight;const i=t.ownerDocument.defaultView.getComputedStyle(t);return e+=On(i.borderTopWidth),e+=On(i.borderBottomWidth),e}function Ln(t){let e=t.clientWidth;const i=t.ownerDocument.defaultView.getComputedStyle(t);return e+=On(i.borderLeftWidth),e+=On(i.borderRightWidth),e}function Nn(t){let e=t.clientHeight;const i=t.ownerDocument.defaultView.getComputedStyle(t);return e-=On(i.paddingTop),e-=On(i.paddingBottom),e}function Un(t){let e=t.clientWidth;const i=t.ownerDocument.defaultView.getComputedStyle(t);return e-=On(i.paddingLeft),e-=On(i.paddingRight),e}function jn(t){const e=s.findDOMNode(t);if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}function Hn(t,e,i){const{state:r}=t,n=!In(r.lastX),o=jn(t);return n?{node:o,deltaX:0,deltaY:0,lastX:e,lastY:i,x:e,y:i}:{node:o,deltaX:e-r.lastX,deltaY:i-r.lastY,lastX:r.lastX,lastY:r.lastY,x:e,y:i}}function Wn(t,e){return{node:e.node,x:t.state.x+e.deltaX,y:t.state.y+e.deltaY,deltaX:e.deltaX,deltaY:e.deltaY,lastX:t.state.x,lastY:t.state.y}}function Gn(t){return"both"===t.props.axis||"x"===t.props.axis}function Vn(t){return"both"===t.props.axis||"y"===t.props.axis}function $n(t,e){const i=jn(e);let{offsetParent:r}=e.props;return!r&&i instanceof HTMLElement&&(r=i.offsetParent||i.ownerDocument.body),function(t,e){const i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect();return{x:t.clientX+e.scrollLeft-i.left,y:t.clientY+e.scrollTop-i.top}}(t,r)}const Zn={start:"touchstart",move:"touchmove",stop:"touchend"},Xn={start:"mousedown",move:"mousemove",stop:"mouseup"};let Yn=Xn;const qn={cancel:null,disabled:!1,offsetParent:null,handle:null,transform:null,onStart:()=>{},onDrag:()=>{},onStop:()=>{},onMouseDown:()=>{}};class Kn extends o.Component{constructor(){super(...arguments),this.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:void 0},this.getTouchFromEvent=t=>{const e=function(t){return t.targetTouches&&t.targetTouches[0]?t.targetTouches[0].identifier:t.changedTouches&&t.changedTouches[0]?t.changedTouches[0].identifier:null}(t);return this.setState({touchIdentifier:e}),function(t,e){let i=null;return t.targetTouches&&(i=Rn(t.targetTouches,(t=>e===t.identifier))),t.changedTouches&&!i&&(i=Rn(t.changedTouches,(t=>e===t.identifier))),i}(t,e)},this.preventDefault=t=>{t.stopPropagation&&t.stopPropagation()},this.handleDragStart=t=>{const e=s.findDOMNode(this);if(!e||!e.ownerDocument||!e.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:i}=e;if(this.props.disabled||!(t.target instanceof Node)||this.props.handle&&!Mn(t.target,this.props.handle,e)||this.props.cancel&&Mn(t.target,this.props.cancel,e))return!1;const r=$n(t,this);if(null==r)return!1;const{x:n,y:o}=r,a=Hn(this,n,o);if(!1===this.props.onStart(t,a))return!1;this.setState({dragging:!0,lastX:n,lastY:o}),"touchmove"===Yn.move?Pn(i,Yn.move,this.onTouchDrag):Pn(i,Yn.move,this.onMouseDrag),Pn(i,Yn.stop,this.handleDragStop)},this.handleDrag=t=>{const e=$n(t,this);if(null==e)return;const{x:i,y:r}=e,n=Hn(this,i,r);if(!1!==this.props.onDrag(t,n))this.setState({lastX:i,lastY:r});else try{this.handleDragStop(new MouseEvent("mouseup"))}catch(t){const e=document.createEvent("MouseEvents");e.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(e)}},this.handleDragStop=t=>{if(!this.state.dragging)return;const e=$n(t,this);if(null==e)return;const{x:i,y:r}=e,n=Hn(this,i,r),o=s.findDOMNode(this);this.setState({dragging:!1,lastX:NaN,lastY:NaN}),this.props.onStop(t,n),o&&("touchmove"===Yn.move?Bn(o.ownerDocument,Yn.move,this.onTouchDrag):Bn(o.ownerDocument,Yn.move,this.onMouseDrag),Bn(o.ownerDocument,Yn.stop,this.handleDragStop))},this.onMouseDown=t=>(this.preventDefault(t),Yn=Xn,this.props.onMouseDown(t),(!t.button||"number"!=typeof t.button||0===t.button)&&this.handleDragStart(t)),this.onMouseDrag=t=>(this.preventDefault(t),this.handleDrag(t)),this.onMouseUp=t=>(this.preventDefault(t),Yn=Xn,this.handleDragStop(t)),this.onTouchStart=t=>{this.preventDefault(t),Yn=Zn;const e=this.getTouchFromEvent(t);return this.handleDragStart(e)},this.onTouchDrag=t=>{this.preventDefault(t),Yn=Zn;const e=this.getTouchFromEvent(t);return this.handleDrag(e)},this.onTouchEnd=t=>{this.preventDefault(t),Yn=Zn;const e=this.getTouchFromEvent(t);return this.handleDragStop(e)}}componentWillUnmount(){const t=s.findDOMNode(this);if(t){const{ownerDocument:e}=t;Bn(e,Xn.move,this.onMouseDrag),Bn(e,Zn.move,this.onTouchDrag),Bn(e,Xn.stop,this.handleDragStop),Bn(e,Zn.stop,this.handleDragStop)}}render(){return o.cloneElement(o.Children.only(this.props.children),{style:(0,r.N)({touchAction:"none"},this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}Kn.defaultProps=qn,Kn.displayName="DraggableCore";const Qn=(0,r.N)((0,r.N)({},qn),{axis:"both",bounds:!1,defaultClassName:"draggable",defaultClassNameDragging:"draggable-dragging",defaultClassNameDragged:"draggable-dragged",defaultPosition:{x:0,y:0},position:null,rotation:0,updateOnPosition:!1});class Jn extends o.Component{constructor(t){super(t),this.onDragStart=(t,e)=>{if(!1===this.props.onStart(t,Wn(this,e)))return!1;this.setState({dragging:!0,dragged:!0})},this.onDrag=(t,e)=>{const{position:i,defaultPosition:n,onDrag:o,bounds:s}=this.props;if(!this.state.dragging)return!1;const a=Wn(this,e),l=Boolean(i),c={x:l?a.x:n.x,y:l?a.y:n.y,slackX:0,slackY:0};if(s){const{x:t,y:e}=c;c.x+=this.state.slackX,c.y+=this.state.slackY;const[i,n]=function(t,e,i){if(!t.props.bounds)return[e,i];let{bounds:n}=t.props;n="string"==typeof n?n:(0,r.N)({},n);const o=jn(t);if("string"==typeof n){const{ownerDocument:t}=o,e=t.defaultView,i="parent"===n?o.parentNode:t.querySelector(n);if(!(i instanceof HTMLElement))throw new Error(`Bounds selector "${n}" could not find an element.`);if(o instanceof HTMLElement){const t=e.getComputedStyle(o),r=e.getComputedStyle(i);n={left:-o.offsetLeft+On(r.paddingLeft)+On(t.marginLeft),top:-o.offsetTop+On(r.paddingTop)+On(t.marginTop),right:Un(i)-Ln(o)-o.offsetLeft+On(r.paddingRight)-On(t.marginRight),bottom:Nn(i)-zn(o)-o.offsetTop+On(r.paddingBottom)-On(t.marginBottom)}}}return n=n,In(n.right)&&(e=Math.min(e,n.right)),In(n.bottom)&&(i=Math.min(i,n.bottom)),In(n.left)&&(e=Math.max(e,n.left)),In(n.top)&&(i=Math.max(i,n.top)),[e,i]}(this,c.x,c.y);c.x=i,c.y=n,c.slackX=this.state.slackX+(t-c.x),c.slackY=this.state.slackY+(e-c.y),a.x=c.x,a.y=c.y,a.deltaX=c.x-this.state.x,a.deltaY=c.y-this.state.y}if(!1===o(t,a))return!1;this.setState(c)},this.onDragStop=(t,e)=>{if(!this.state.dragging)return!1;if(!1===this.props.onStop(t,Wn(this,e)))return!1;const i={dragging:!1,slackX:0,slackY:0,x:0,y:0};if(Boolean(this.props.position)){const{x:t,y:e}=this.props.position;i.x=t,i.y=e}this.setState(i)},this.state={dragging:!1,dragged:!1,x:t.position?t.position.x:t.defaultPosition.x,y:t.position?t.position.y:t.defaultPosition.y,slackX:0,slackY:0}}componentDidUpdate(t){Boolean(this.props.position)&&(this.props.updateOnPosition?(t.position&&t.position.x!==this.props.position.x||t.position.y!==this.props.position.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}):(t.position&&this.props.position.x!==this.state.x||this.props.position.y!==this.state.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}))}componentWillUnmount(){this.setState({dragging:!1})}render(){const t=this.props,{position:e,defaultPosition:i,rotation:n,defaultClassName:s,defaultClassNameDragging:a,defaultClassNameDragged:l}=t,c=u(t,["position","defaultPosition","rotation","defaultClassName","defaultClassNameDragging","defaultClassNameDragged"]),{x:h,y:d,dragging:p,dragged:f}=this.state;let m={};const g=!Boolean(e)||p,_=e||i;m=function({x:t,y:e,rotation:i}){const r=`translate(${t}px,${e}px) rotate(${i}rad)`;return{[Tn("transform",En)]:r}}({x:Gn(this)&&g?h:_.x,y:Vn(this)&&g?d:_.y,rotation:n});const y=o.Children.only(this.props.children),v=[y.props.className||"",s,p?a:"",f?l:""].join(" ").trim(),b=o.cloneElement(y,{className:v,style:(0,r.N)((0,r.N)({},y.props.style),m)});return o.createElement(Kn,(0,r.N)((0,r.N)({},c),{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),b)}}Jn.defaultProps=Qn,Jn.displayName="Draggable";var to=Jn;const eo=(0,r.U)(f()),io=n.ZP.span`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,ro=(0,n.ZP)(io)``,no=(0,n.ZP)(io)``,oo=(0,n.ZP)(io)``,so={display:"none",left:0,top:0},ao=(0,n.ZP)(io)`
  display: ${({display:t})=>t};
  left: ${({left:t})=>t}px;
  top: ${({top:t})=>t}px;
  pointer-events: none;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.12);
  animation: ${ai} 1.2s;
  width: 100px;
  height: 100px;
  margin-top: -50px;
  margin-left: -50px;
  opacity: 0;
`,lo=n.iv`
  color: ${t=>t.theme.button.activeForeground};
`,co=n.ZP.button`
  &&& {
    box-sizing: border-box;
  }
  text-align: center;
  position: relative;
  padding: 4px 8px;
  min-height: 32px;
  border-radius: ${t=>t.theme.shape.radiusMedium}px;
  font-size: ${t=>t.theme.measurements.fontSystem.button1.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.button1.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.button1.case};
  font-family: ${t=>t.theme.typography.fontFamily}, sans-serif;
  cursor: pointer;
  border: none;
  background-color: transparent;
  overflow: hidden;
  ${ln}

  /* Active */

  &:active {
    ${lo}
  }

  ${({isActive:t})=>t&&lo}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${no} {
      background-color: ${t=>t.theme.button.outlinedInactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${oo} {
      background-color: ${t=>t.theme.button.hoverOverlayColor};
    }
  }
`;class uo extends o.Component{constructor(){super(...arguments),this.state=so,this.timeout=null,this.onClick=t=>{const e=t.currentTarget.getBoundingClientRect(),i=t.pageX-e.left,r=t.pageY-e.top;"block"===this.state.display?this.setState({display:"none"},(()=>{this.setRippleState(i,r)})):this.setRippleState(i,r),this.props.onClick(t)},this.setRippleState=(t,e)=>{this.setState({left:t,top:e,display:"block"}),this.timeout=setTimeout((()=>{this.setState({display:"none"})}),1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){const t=this.props,{isActive:e,isDisabled:i,label:n,ariaLabel:s,children:a,className:l}=t,c=u(t,["isActive","isDisabled","label","ariaLabel","children","className"]),{left:h,top:d,display:p}=this.state;return o.createElement(co,(0,r.N)((0,r.N)({"data-test":s,className:l,isActive:e,disabled:i,"aria-label":s},c),{onClick:this.onClick}),n,a,o.createElement(ao,{display:p,left:h,top:d}),o.createElement(no,null),o.createElement(oo,null))}}uo.defaultProps={type:"button",isDisabled:!1,isActive:!1};const ho=n.ZP.label`
  ${cn}
`,po=n.ZP.label`
  display: block;
  font-size: ${t=>t.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.label.case};
  color: ${t=>t.theme.toolControlBar.inputLabelForeground};
  margin: 0;
  padding-bottom: 8px;

  ${({isDisabled:t})=>t&&n.iv`
      opacity: ${t=>t.theme.toolControlBar.inputLabelInactiveOpacity};
      cursor: default;
      pointer-events: none;
    `}
`,fo=({label:t,htmlFor:e,show:i,style:r,isDisabled:n,className:s})=>{const a=i?po:ho,l=e||(t?t.replace(" ","-"):void 0);return o.createElement(a,{style:r,isDisabled:n,htmlFor:l,className:s},t)};fo.defaultProps={show:!0};const mo=n.ZP.div`
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
`,go=(0,n.ZP)(fo)`
  align-self: flex-start;
`,_o=(0,n.ZP)(uo)`
  color: ${t=>t.theme.button.textSecondaryForeground};
  padding: 1px 7px 2px;
`,yo=n.ZP.div`
  display: flex;
  justify-content: space-between;
  width: ${t=>t.theme.measurements.advancedUIToolControlBar.width-48}px;
`,vo=n.ZP.article`
  /* 0.6 of width here refers to the width of the container without padding */
  width: ${t=>.6*t.theme.measurements.advancedUIToolControlBar.width}px;
  font-size: ${t=>t.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.body.case};
  text-align: center;
  margin-top: 7px;
  display: inline-block;
  color: ${t=>t.theme.toolControlBar.inputLabelForeground};
`,bo=n.ZP.div`
  width: ${t=>.6*t.theme.measurements.advancedUIToolControlBar.width}px;
  transform: translateZ(0);
  overflow: hidden;
  transition: all 500ms ease-out;
`,xo=n.ZP.span`
  width: ${t=>Math.round(.6*t.length*t.theme.measurements.advancedUIToolControlBar.width)}px;
  margin-left: -${t=>.6*t.activeIndex*t.theme.measurements.advancedUIToolControlBar.width}px;
  position: relative;
  display: inline-block;
  transform: translateZ(0);
  transition: all 600ms cubic-bezier(0.77, 0, 0.175, 1);
  font-family: '${t=>t.theme.typography.fontFamily}', sans-serif;
`,wo=n.ZP.div`
  border: solid ${t=>t.theme.card.foreground};
  border-width: 0 2px 2px 0;
  padding: 3px;
  height: 0;
  width: 0;

  ${({direction:t})=>"left"===t?n.iv`
          margin-left: 2px;
          transform: rotate(135deg);
        `:n.iv`
          margin-right: 2px;
          transform: rotate(-45deg);
        `}
`;class So extends o.PureComponent{constructor(t){super(t),this.updateIndex=(t,e=!1)=>{let i=t+(e?-1:1);const r=this.props.list.length-1;i>r&&(i=0),i<0&&(i=r),this.props.onSelect(this.props.list[i].identifier)},this.getActiveIndex=t=>{const{list:e}=this.props,i=e.findIndex((e=>e.identifier===t));return-1!==i?i:0},this.throttledUpdateIndex=eo.default(this.updateIndex,600)}render(){const{list:t,label:e,showLabel:i=!0}=this.props,r=this.getActiveIndex(this.props.defaultIdentifier),n=t.length<=1;return o.createElement(mo,{"data-test":y.CarouselSlider},o.createElement(go,{show:i,label:e}),o.createElement(yo,{id:`photoeditorsdk-${e.replace(" ","-")}`},o.createElement(_o,{ariaLabel:"Select Previous",isDisabled:n,onClick:()=>this.throttledUpdateIndex(r,!0)},o.createElement(wo,{direction:"left"})),o.createElement(bo,null,o.createElement(xo,{activeIndex:r,length:t.length},t.map((t=>o.createElement(vo,{key:t.identifier},t.value))))),o.createElement(_o,{ariaLabel:"Select Next",isDisabled:n,onClick:()=>this.throttledUpdateIndex(r)},o.createElement(wo,{direction:"right"}))))}}So.defaultProps={showLabel:!0};var ko=So;var Co=n.ZP.div`
  display: flex;
  position: relative;
  margin-bottom: 12px;
  max-width: ${t=>t.theme.measurements.basicToolControlBar.maxWidth}px;
`;var To=n.ZP.div.attrs({tabIndex:0})`
  position: relative;
  height: 16px;
  width: 16px;
  cursor: pointer;
  background-color: ${t=>t.theme.checkbox.background};
  border-radius: ${t=>t.theme.shape.radiusSmall}px;
  transition-timing-function: ease-in;
  transition-duration: 0.3s;
  &::after {
    content: '';
    position: absolute;
    display: inline-block;
    left: 5px;
    width: 5px;
    height: 10px;
    border-style: solid;
    border-width: 0 2px 2px 0;
    border-color: transparent;
    transform: rotate(45deg) scale(0.8);
  }

  &:first-child {
    margin-right: 8px;
  }

  &:last-child {
    margin-left: 8px;
  }

  ${ln}

  &:hover {
    opacity: ${t=>t.theme.checkbox.hoverOpacity};
  }
  ${t=>t.isChecked&&n.iv`
      background-color: ${t.theme.checkbox.activeBackground};
      &::after {
        color: ${t.theme.checkbox.activeForeground};
        border-color: ${t.theme.checkbox.foreground};
      }
      &:hover {
        background-color: ${t.theme.checkbox.activeBackground};
        opacity: 0.8;
      }
    `}
  ${t=>t.isDisabled&&n.iv`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`;var Eo=n.ZP.input.attrs({type:"checkbox",tabIndex:0})`
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
  margin: 0;
  padding: 0;
  ${ln}
`;const Ro=({label:t,value:e,checkMarkPosition:i,onClick:r,isDisabled:n,className:s,style:a})=>{const l=`photoeditorsdk-${t.replace(" ","-")}`;return o.createElement(Co,{"data-test":y.Checkbox,className:s,style:a},"left"===i&&o.createElement(To,{onClick:r,isDisabled:n,isChecked:e}),o.createElement(fo,{isDisabled:n,label:t,htmlFor:l}),o.createElement(Eo,{id:l,disabled:n,checked:e,onChange:r}),"right"===i&&o.createElement(To,{onClick:r,isDisabled:n,isChecked:e}))};var Do=Ro;Ro.defaultProps={value:!1,checkMarkPosition:"left"};const Io=n.iv`
  font-size: ${t=>t.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.body.case};
  width: 100%;
  min-height: 26px;
  color: ${t=>t.theme.textInput.foreground};
  padding-bottom: 7px;
  border: none;
  appearance: none;
  border-bottom: 1px solid ${t=>t.theme.textInput.borderColor};
  background: ${t=>t.theme.textInput.background};
  font-family: '${t=>t.theme.typography.fontFamily}', sans-serif;
  transition: border-color 0.4s ease-in-out;

  &:focus {
    outline: none;
    border-color: ${t=>t.theme.textInput.hoverBorderColor};
  }

  &:-moz-focusring {
    outline: none;
    border-color: ${t=>t.theme.textInput.hoverBorderColor};
  }

  &:disabled {
    opacity: ${t=>t.theme.textInput.inactiveOpacity};
    pointer-events: none;
  }

  &:hover {
    border-color: ${t=>t.theme.textInput.hoverBorderColor};
  }

  &::-ms-clear,
  &::-ms-reveal {
    display: none;
  }

  &::-webkit-search-decoration,
  &::-webkit-search-cancel-button,
  &::-webkit-search-results-button,
  &::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  &::-webkit-inner-spin-button,
  &::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
`,Oo=n.iv`
  opacity: ${t=>t.theme.dropdown.inactiveOpacity};
  pointer-events: none;
`,Ao=n.ZP.div`
  display: block;
  position: relative;
  width: 100%;
  white-space: nowrap;
  transition-duration: 0.5s;

  &:disabled {
    ${Oo}
  }

  ${({isDisabled:t})=>t&&Oo}
`,Fo=n.ZP.li`
  padding: 10px 16px;
  text-overflow: ellipsis;
  font-size: ${t=>t.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.button2.case};
  white-space: nowrap;
  color: ${t=>t.theme.dropdown.foreground};

  &:hover {
    cursor: pointer;
    background: ${t=>t.theme.dropdown.listItemHoverBackground};
  }

  ${({isActive:t})=>t&&n.iv`
      border-left: 2px solid ${t=>t.theme.primary};
    `}

  ${ln}
`,Mo=n.ZP.div`
  display: flex;
  ${t=>(0,r.B)()||(0,r.u)()?n.iv`
        overflow: hidden;
      `:"vertical"===t.direction?n.iv`
        flex-direction: column;
        flex: 1 1 auto;
        overflow-y: auto;
        overflow-x: hidden;
      `:n.iv`
      overflow-y: hidden;
      overflow-x: auto;
    `};
`,Po=n.ZP.ul.attrs((()=>({role:"menubar","aria-label":"Tool Navigation"})))`
  display: flex;
  flex-direction: ${t=>"vertical"===t.direction?"column":"row"};

  list-style: none;
  padding: 0;
  margin: 0;

  ${t=>(0,r.B)()||(0,r.u)()?n.iv`
        width: 100%;
        height: 100%;

        ${()=>"vertical"===t.direction?n.iv`
              overflow-y: auto;
              overflow-x: hidden;

              /* hidde the arrows */
              margin-top: -10px;
              margin-bottom: -10px;
              padding-top: 10px;
              padding-bottom: 10px;

              /* hide the scrollbar */
              padding-right: 10px;
              margin-right: -10px;
            `:n.iv`
            overflow-y: hidden;
            overflow-x: auto;

            margin-right: -10px;
            margin-left: -10px;
            padding-right: 10px;
            padding-left: 10px;

            padding-bottom: 10px;
            margin-bottom: -10px;
          `}

        scrollbar-face-color: #454545;
        scrollbar-track-color: ${t.theme.toolbar.background};
        scrollbar-base-color: ${t.theme.toolbar.background};
        scrollbar-3dlight-color: #454545;
        scrollbar-highlight-color: #454545;
        scrollbar-arrow-color: ${t.theme.toolbar.background};
        scrollbar-shadow-color: #454545;
        scrollbar-dark-shadow-color: #454545;
      `:""}
`,Bo=({direction:t="horizontal","data-test":e,className:i,children:r})=>o.createElement(Mo,{direction:t,className:i},o.createElement(Po,{direction:t,"data-test":e},r)),zo=(0,n.ZP)(Bo)`
  position: absolute;

  background: ${t=>t.theme.dropdown.listBackground};
  color: ${t=>t.theme.dropdown.listForeground};
  border: 1px solid ${t=>t.theme.dropdown.listBorderColor};
  box-shadow: ${t=>t.theme.dropdown.listShadow};

  visibility: hidden;
  opacity: 0;
  ${t=>t.isOpen?n.iv`
        visibility: visible;
        opacity: 1;
        display: flex;
      `:""}

  transition: all 0.5s ease;

  width: 100%;
  max-height: 160px;
  margin: 5px 0;

  /* had to add these changes to get the dropdown working in IE11 */
  ${()=>(0,r.B)()?n.iv`
        > ul {
          height: 160px;
          margin-bottom: 0px;
          margin-top: 0px;
          padding-bottom: 0px;
          padding-top: 0px;
        }
      `:""}

  border-radius: 0 0 ${t=>t.theme.shape.radiusMedium}px
    ${t=>t.theme.shape.radiusMedium}px;
  z-index: ${t=>t.theme.measurements.zIndex.input.list};
`;zo.defaultProps={direction:"vertical"};const Lo=n.ZP.div`
  font-size: ${t=>t.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.body.case};
  color: ${t=>t.theme.dropdown.foreground};
  background-color: ${t=>t.theme.dropdown.background};
  border: none;
  border-bottom: 1px solid ${t=>t.theme.dropdown.borderColor};
  padding: 5px 0;
  cursor: ${t=>t.showList?"pointer":"default"};
  transition: border-color 0.4s ease-in-out;

  &:hover {
    border-color: ${t=>t.theme.dropdown.hoverBorderColor};
  }

  ${ln}
`,No=n.ZP.div`
  position: absolute;
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${t=>t.theme.dropdown.caretColor};
  transform: rotate(${t=>t.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
  right: 0;
  top: 13px;
`,Uo=n.ZP.div``;class jo extends o.PureComponent{constructor(t){super(t),this.state={isOpen:!1},this.handleOutsideClick=t=>{this.node&&this.node.contains(t.target)||this.setState({isOpen:!1})},this.onSelect=t=>{const{onSelect:e}=this.props;e(t),this.setState({isOpen:!1})},this.onClick=()=>{this.setState((t=>({isOpen:!t.isOpen})))},this.listItem=t=>{const{itemStyle:e,selectedItem:i}=this.props,{isOpen:r}=this.state,{value:n,label:s}=t;let a={};return"function"==typeof e?a=e(t):null!==e&&"object"==typeof e&&(a=e),o.createElement(Fo,{"aria-hidden":!r,tabIndex:0,style:a,onClick:()=>this.onSelect(n),key:n,isActive:i===n},s)},this.onKeyDown=t=>{("Space"===t.code||"Enter"===t.code)&&this.onClick()},this.nodeRef=t=>{this.node=t}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1)}render(){const{selectedItem:t,list:e,label:i,style:n,isDisabled:s}=this.props,{isOpen:a}=this.state,l=e.length>1,c=s?{}:{tabIndex:0};return o.createElement(Uo,null,o.createElement(fo,{isDisabled:s,style:{paddingLeft:"0px"},label:i}),o.createElement("div",{ref:this.nodeRef},o.createElement(Ao,{isOpen:a,isDisabled:s},o.createElement(Lo,(0,r.N)((0,r.N)({"data-test":y.Dropdown,"aria-hidden":s},c),{showList:l,style:n,onClick:l?this.onClick:void 0,onKeyDown:this.onKeyDown}),t,l&&o.createElement(No,{rotation:a?180:0})),o.createElement(zo,{"data-test":y.DropdownList,isOpen:a},l&&e.map(this.listItem)))))}}const Ho=n.ZP.input.attrs({type:"file",id:"fileUpload",accept:"image/*"})`
  display: none;
`;var Wo=({children:t})=>o.createElement("form",{onSubmit:t=>{t.preventDefault()}},t);const Go=n.ZP.input`
  ${Io}
  /* override user agent style */
  padding: 0;
  &:disabled {
    opacity: ${t=>t.theme.textInput.inactiveOpacity};
    cursor: default;
    pointer-events: none;
  }
`,Vo=n.ZP.div`
  position: relative;
  &:first-child {
    margin-right: 15px;
  }
`;class $o extends o.Component{constructor(){super(...arguments),this.onChange=t=>{const{onChange:e}=this.props;e&&e(t.target.value)}}render(){const{id:t,testId:e,value:i,type:r,min:n,max:s,onBlur:a,onFocus:l,onKeyUp:c,onKeyDown:u,onMouseUp:h,onTouchEnd:d,isDisabled:p,className:f,children:m}=this.props;return o.createElement(Vo,{className:f},o.createElement(Go,{id:t,"data-test":e,"aria-hidden":p,disabled:p,value:i,type:r,min:n,max:s,onChange:this.onChange,onBlur:a,onFocus:l,onKeyUp:c,onKeyDown:u,onMouseUp:h,onTouchEnd:d}),m)}}$o.defaultProps={type:"text"};var Zo=$o;const Xo=n.ZP.div`
  ${(0,r.B)()?n.iv``:n.iv`
        display: flex;
        flex: 0 1 auto;
        flex-direction: column;
      `}
`;class Yo extends o.Component{constructor(t){super(t),this.node=null,this.handleOutsideClick=t=>{this.node&&this.node.current&&this.node.current.contains(t.target)||this.onSubmit()},this.onSubmit=()=>{const{onSubmit:t}=this.props,{value:e,isActive:i}=this.state;if(t){const r=parseFloat(Yo.cleanValue(e));!Number.isNaN(r)&&i&&t(`${r}`)}this.setState({isActive:!1})},this.onBlur=()=>{this.onSubmit()},this.onFocus=()=>{this.setState({isActive:!0})},this.onKeyDown=t=>{const{value:e}=this.state;if("Enter"===t.key)this.onSubmit();else if("ArrowUp"===t.key){const t=parseFloat(Yo.cleanValue(e));"number"==typeof t&&this.setState({value:(t+1).toString(),isActive:!0})}else if("ArrowDown"===t.key){const t=parseFloat(Yo.cleanValue(e));"number"==typeof t&&this.setState({value:(t-1).toString(),isActive:!0})}},this.onChange=t=>{this.setState({value:t.replace(/[^\d.,-]/g,""),isActive:!0})},this.state={value:this.props.value||"",isActive:!1},this.node=o.createRef(),document.addEventListener("mousedown",this.handleOutsideClick,!1),document.addEventListener("touchstart",this.handleOutsideClick,!1)}static getDerivedStateFromProps({value:t},{value:e,isActive:i}){return t===e||i?null:{value:t}}static cleanValue(t){return t?t.replace(",",".").replace(/[a-zA-Z]/g,"").trim():""}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),document.removeEventListener("touchstart",this.handleOutsideClick,!1)}render(){const{id:t,label:e,isDisabled:i,ariaHidden:r,onMouseUp:n,onTouchEnd:s,className:a}=this.props,{value:l}=this.state;return o.createElement(Xo,{ref:this.node,"data-test":y.NummericInput,className:a},o.createElement(fo,{htmlFor:t,label:e,show:!!e,isDisabled:i}),o.createElement(Zo,{id:t,value:l,isDisabled:i,"aria-hidden":r,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,onMouseUp:n,onTouchEnd:s}))}}Yo.defaultProps={showLabel:!0};var qo=Yo;const Ko=n.ZP.input.attrs({type:"search"})`
  ${Io}
`;var Qo=t=>o.createElement("div",null,o.createElement(fo,{show:!1,label:"photoeditorsdk-Search"}),o.createElement(Ko,{id:"photoeditorsdk-Search",onChange:e=>{t.onChange(e.target.value)},placeholder:t.placeholder}));const Jo=n.ZP.div``,ts=({label:t,children:e,inline:i,showLabel:r,isDisabled:n,"data-test":s})=>o.createElement(Jo,{"data-test":s},o.createElement(fo,{isDisabled:n,label:t,show:r}),o.createElement(es,{id:`photoeditorsdk-${t.replace(" ","-")}`,inline:!!i},e)),es=n.ZP.div`
  display: inline-flex;
  ${t=>!t.inline&&n.iv`
        flex-wrap: wrap;
      `||""}
`;ts.defaultProps={showLabel:!0};var is=ts;const rs=n.ZP.div`
  display: flex;
  flex-direction: column;
  /* needed for IE11 to properly calculate the width */
  min-width: 1px;
`,ns=(0,n.ZP)(fo)`
  padding-bottom: 2px;
`,os=n.iv`
  ${(0,r.u)()||(0,r.B)()?n.iv`
        width: 16px;
        height: 16px;
      `:n.iv`
        width: 20px;
        height: 20px;
      `}
  background: ${t=>t.theme.slider.thumbBackground};
  border: 2px solid ${t=>t.theme.slider.thumbBorderColor};
  border-radius: 50%;
  cursor: pointer;
`,ss=n.ZP.input`
  display: flex;
  flex: 1 0 auto;
  appearance: none;
  max-width: calc(100% - 50px);
  outline: none;
  border-radius: 0; /* iOS */

  ${ln}

  ${(0,r.u)()||(0,r.B)()?n.iv`
        margin-top: 10px;
        height: 20px;
        /* remove once we have a better concept for focus in all browser */
        &:focus {
          box-shadow: none;
        }
      `:n.iv`
        height: 2px;
        background: ${t=>`linear-gradient(to right, ${(t=>{let e=100*(t.value-t.min)/(t.max-t.min);return t.adjust?t.value>0?(e=t.value*(t.max/2)*100,`${t.theme.slider.trackColor} 0%,\n      ${t.theme.slider.trackColor} 50%,\n      ${t.theme.slider.activeTrackColor} 50%,\n      ${t.theme.slider.activeTrackColor} ${50+e}%,\n      ${t.theme.slider.trackColor} ${50+e}%,\n      ${t.theme.slider.trackColor} 100%\n      `):t.value<0?(e=t.value*(t.min/2)*100,`${t.theme.slider.trackColor} 0%,\n      ${t.theme.slider.trackColor} ${50-e}%,\n      ${t.theme.slider.activeTrackColor} ${50-e}%,\n      ${t.theme.slider.activeTrackColor} 50%,\n      ${t.theme.slider.trackColor} 50%,\n      ${t.theme.slider.trackColor} 100%\n      `):`${t.theme.slider.trackColor} 0%,\n    ${t.theme.slider.trackColor} 100%`:`${t.theme.slider.activeTrackColor} 0%,\n    ${t.theme.slider.activeTrackColor} ${e}%,\n    ${t.theme.slider.trackColor} ${e}%,\n    ${t.theme.slider.trackColor} 100%`})(t)})`};
      `}
  &::-moz-focus-outer {
    /** This is to remove the dotted focus lines in firefox */
    border: 0;
  }
  &:disabled {
    opacity: ${t=>t.theme.slider.inactiveOpacity};
    pointer-events: none;
  }
  &:hover {
    opacity: ${t=>t.theme.slider.hoverOpacity};
  }
  &::-webkit-slider-runnable-track {
    cursor: pointer;
    appearance: none;
  }
  &::-moz-range-track {
    appearance: none;
    cursor: pointer;
  }
  &::-ms-track {
    cursor: pointer;
    height: 2px;
    appearance: none;
    background: transparent;
    color: transparent;
    border-color: transparent;
    border-width: 6px 0;
  }
  &::-webkit-slider-thumb {
    appearance: none;
    ${os}
  }
  &::-moz-range-thumb {
    appearance: none;
    ${os}
  }
  &::-ms-thumb {
    appearance: none;
    ${os}
  }
  &::-ms-fill-lower {
    background: ${t=>`${t.theme.slider.activeTrackColor}`};
  }
  &::-ms-fill-upper {
    background: ${t=>`${t.theme.slider.trackColor}`};
  }
  &::-ms-tooltip {
    display: none;
  }
  @media all and (min-width: 0) and (max-width: 599px) {
    width: 200px;
  }
`,as=n.ZP.div`
  display: flex;
  align-items: center;
  height: 26px;
  margin-right: ${t=>t.centerSlider?-56:0}px;
`,ls=(0,n.ZP)(qo)`
  max-width: 50px;
  padding-left: 16px;
  > div > input {
    text-align: center;
  }
`;class cs extends o.Component{constructor(t){super(t),this.onSubmit=t=>{const{onChange:e,suffix:i,divider:r,min:n,max:o,value:s}=this.props,a=t.replace(i,""),l=a?parseFloat(a)/r:s,c=Math.max(n,Math.min(o,l));Number.isNaN(c)||(e(c),this.props.onMouseUp?this.props.onMouseUp():this.props.onTouchEnd&&this.props.onTouchEnd())},this.onSliderChange=t=>{const{onChange:e}=this.props;e(parseFloat(t.target.value))},this.randomId=(0,r.H)()}render(){const{"data-test":t,identifier:e,value:i,min:r,max:n,divider:s,suffix:a,decimal:l,showLabel:c,showInput:u,style:h,centerSlider:d,adjust:p,label:f,isDisabled:m,step:g,"aria-hidden":_,onMouseUp:y,onTouchEnd:v,className:b}=this.props,x=`photoeditorsdk-slider-${this.randomId}`,w=`${x}-input`,S=`${(i*s).toFixed(l)}${a}`,k=u&&o.createElement(ls,{id:w,value:S,isDisabled:m,"aria-hidden":_,onSubmit:this.onSubmit});return o.createElement(rs,{className:b,"data-test":t||e||x},o.createElement(ns,{isDisabled:m,label:f,show:c}),o.createElement(as,{centerSlider:u&&d},o.createElement(ss,{type:"range",role:"slider","aria-hidden":_,tabIndex:0,value:i,min:r,max:n,step:g,style:h,disabled:m,id:x,onChange:this.onSliderChange,adjust:p,name:f,onKeyUp:this.onSliderChange,onKeyDown:this.onSliderChange,onMouseUp:y,onTouchEnd:v}),k))}}cs.defaultProps={showLabel:!0,showInput:!0,adjust:!1,centerSlider:!1,min:-1,max:1,value:0,step:.01,decimal:0,divider:100,suffix:""};var us=cs;const hs=(0,n.ZP)(uo)`
  color: ${t=>t.theme.button.textPrimaryForeground};

  /* Repeat active styles so they are not overwritten */
  ${({isActive:t})=>t&&lo}

  ${no} {
    display: none;
  }

  &:disabled {
    opacity: ${t=>t.theme.button.textInactiveOpacity};
  }
`,ds=(0,n.ZP)(uo)`
  color: ${t=>t.theme.button.textSecondaryForeground};

  /* Repeat active styles so they are not overwritten */
  ${({isActive:t})=>t&&lo}

  ${no} {
    display: none;
  }

  &:disabled {
    opacity: ${t=>t.theme.button.textInactiveOpacity};
  }
`;class ps extends o.Component{constructor(){super(...arguments),this.onDismiss=()=>{const{handleClose:t,handleDismiss:e}=this.props;t&&t(),e&&e()},this.onConfirm=()=>{const{handleClose:t,handleConfirm:e}=this.props;t&&t(),e&&e()}}render(){const{headerLabel:t,bodyLabel:e,confirmLabel:i,dismissLabel:r,type:n,children:s}=this.props,a=o.Children.toArray(s)[0];if(!o.isValidElement(a))throw new Error("Child is not a valid react element");return o.cloneElement(a,{handleConfirm:this.onConfirm,handleDismiss:this.onDismiss,header:o.createElement(bn,null,t),body:o.createElement(yn,{"data-test":y.DialogBody},e),footer:o.createElement(vn,{type:n},r&&o.createElement(ds,{label:r,ariaLabel:r,onClick:this.onDismiss}),i&&o.createElement(hs,{label:i,ariaLabel:i,onClick:this.onConfirm}))})}}const fs=n.ZP.div`
  display: flex;
`,ms=(0,n.ZP)(bn)`
  padding: 0;
`,gs=n.ZP.div`
  display: flex;
  flex-direction: column;
  margin-left: 8px;
  @media all and (min-width: 640px) {
    margin-left: 30px;
  }
`,_s=(0,n.ZP)(yn)`
  padding: 0;
  margin: 0;
`;class ys extends o.PureComponent{render(){const{headerLabel:t,bodyLabel:e,children:i}=this.props,r=o.Children.toArray(i)[0];if(!o.isValidElement(r))throw new Error("Child is not a valid react element");return o.cloneElement(r,{height:"90px",body:o.createElement(yn,{"data-test":y.DialogBody},o.createElement(fs,null,o.createElement(kn,null),o.createElement(gs,null,o.createElement(ms,null,t),o.createElement(_s,null,e))))})}}const vs=n.ZP.form`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
`,bs=n.ZP.textarea`
  display: flex;
  caret-color: ${t=>t.theme.primary};
  ${Io}
  min-height: 100%;
  padding: 0px;
  outline-offset: -8px;
  color: ${t=>t.theme.modal.bodyForeground};
  resize: none;
  font-family: '${t=>t.theme.typography.fontFamily}', sans-serif;

  &:selection,
  &:-moz-selection {
    background-color: ${t=>t.theme.primary};
    color: ${t=>t.theme.foreground};
  }
`,xs=n.ZP.label`
  padding: 11px 20px 8px;
  font-size: ${t=>t.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.label.case};
  color: ${t=>t.theme.modal.headerForeground};
`,ws=(0,n.ZP)(yn)`
  height: 100%;
`,Ss=(0,n.ZP)(vn)`
  border-top: none;
`;class ks extends o.Component{constructor(){super(...arguments),this.state={value:""},this.input=o.createRef(),this.handleKeydown=t=>{(t=>e=>{(t=>"Escape"===t.key)(e)&&t(e)})(this.handleDismiss)(t)},this.handleDismiss=()=>{const{handleDismiss:t}=this.props;t&&t(!1)},this.handleConfirm=()=>{const{handleConfirm:t}=this.props,{value:e}=this.input.current;e&&(t&&t(e),this.handleDismiss())},this.onChange=t=>{const e=(t=>t.replace(r.s,""))(t.target.value);this.input.current.value=e,this.setState({value:e})},this.onSubmit=t=>{t.preventDefault()}}componentDidMount(){const{text:t,defaultText:e}=this.props;this.input.current.focus(),this.input.current.value=t||e||"",this.setState({value:this.input.current.value}),document.addEventListener("keydown",this.handleKeydown,!1),t===e&&this.input.current.select()}componentDidUpdate(t){const{isVisible:e}=this.props;t.isVisible!==e&&e&&this.input.current.focus()}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeydown,!1)}render(){const{headerLabel:t,dismissLabel:e,confirmLabel:i,maxLength:r,type:n,children:s}=this.props,{value:a}=this.state,l=o.Children.toArray(s)[0];if(!o.isValidElement(l))throw new Error("Child is not a valid react element");return o.cloneElement(l,{handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss,isConfirmDisabled:!a,height:"150px",header:o.createElement(xs,{htmlFor:"photoeditorsdk-TextInput"},t),body:o.createElement(ws,null,o.createElement(vs,{onSubmit:this.onSubmit},o.createElement(bs,{ref:this.input,id:"photoeditorsdk-TextInput",placeholder:"Write Something",autoFocus:!0,onChange:this.onChange,maxLength:r}))),footer:o.createElement(Ss,{type:n},o.createElement(ds,{label:e,ariaLabel:e,onClick:this.handleDismiss}),o.createElement(hs,{label:i,ariaLabel:i,isDisabled:!a,onClick:this.handleConfirm}))})}}ks.defaultProps={defaultText:"Write Something"};var Cs=ks;const Ts=n.ZP.div`
  padding-bottom: ${t=>8*(t.count||1)}px;
`;var Es=Ts;Ts.defaultProps={count:1};class Rs extends o.Component{getChildren(){const t=[],e=[];return o.Children.forEach(this.props.children,(i=>{switch(i.type.componentName){case"case":this.props.type===i.props.value&&t.push(i);break;case"default":e.push(i)}})),t.length>0?t:e}render(){const t=this.getChildren();return 0===t.length?null:o.createElement(o.Fragment,null,t)}}class Ds extends o.Component{render(){return this.props.children}}Ds.componentName="case";class Is extends o.Component{render(){return this.props.children}}Is.componentName="default";const Os=n.F4`
  from { transform: translate(-50%, 0%); }
  to { transform: translate(-50%, 50%); }
`;var As=n.ZP.div`
  position: absolute;
  top: ${t=>t.position.y}px;
  left: ${t=>t.position.x}px;
  transform: translate(-50%, 50%);
  background: black;
  color: white;
  border-radius: ${t=>t.theme.shape.radiusMedium}px;
  padding: 10px 16px;
  text-align: center;
  z-index: ${t=>t.theme.measurements.zIndex.toast};
  visibility: hidden;

  ${({show:t})=>t&&n.iv`
      visibility: visible;
      animation: ${Os} 0.5s, fadeout 0.5s 2.5s;
    `}
`;const Fs=(0,n.ZP)(uo)`
  ${({fullWidth:t})=>t&&n.iv`
      width: 100%;
    `}
`,Ms=n.ZP.div`
  &:focus {
    outline: none;
  }

  > img {
    height: 18px;
    width: 18px;
  }

  > svg {
    height: 18px;
    width: 18px;
  }
  display: none;

  @media all and (min-width: 0) and (max-width: 599px) {
    display: flex;
  }
`,Ps=n.ZP.div`
  display: flex;
  justify-content: center;
  align-items: center;
  &:focus {
    outline: none;
  }

  ${({hasIcon:t})=>t&&n.iv`
      @media all and (min-width: 0) and (max-width: 599px) {
        display: none;
      }
    `}
`,Bs=t=>{var{label:e,children:i,icon:n,fullWidth:s}=t,a=u(t,["label","children","icon","fullWidth"]);const l=o.createElement(Ps,{hasIcon:!!n},e,i);return o.createElement(Fs,(0,r.N)({fullWidth:s},a),n&&o.createElement(Ms,null,n),(i||e)&&l)},zs=(0,n.ZP)(Bs)`
  background: ${t=>t.theme.button.outlinedPrimaryBackground};
  color: ${t=>t.theme.button.outlinedPrimaryForeground};
  border: 1px solid ${t=>t.theme.button.outlinedBorderColor};
  min-width: 32px;
`,Ls=(0,n.ZP)(Bs)`
  background: ${t=>t.theme.button.outlinedSecondaryBackground};
  color: ${t=>t.theme.button.outlinedSecondaryForeground};
  border: 1px solid ${t=>t.theme.button.outlinedBorderColor};
`,Ns=(0,n.ZP)(uo)`
  color: ${t=>t.theme.foreground};
  /* Repeat active styles so they are not overwritten */
  ${({isActive:t})=>t&&lo}

  ${no} {
    display: none;
  }

  &:disabled {
    opacity: ${t=>t.theme.button.textInactiveOpacity};
  }
`,Us=n.ZP.div`
  display: flex;
  &:focus {
    outline: none;
  }
`,js=(0,n.ZP)(Bs)`
  background: ${t=>t.theme.button.containedPrimaryBackground};
  color: ${t=>t.theme.button.containedPrimaryForeground};
  border: 1px solid ${t=>t.theme.button.containedPrimaryBackground};

  &:active {
    color: ${t=>t.theme.button.containedPrimaryForeground};
  }
`,Hs=n.iv`
  border: 1px solid ${t=>t.theme.card.activeBorderColor};
  ${ro} {
    background-color: ${t=>t.theme.card.activeOverlayColor};
  }
`,Ws=n.ZP.button.attrs((t=>{const e={};return t.image&&(e.backgroundImage=`url(${t.image})`),{style:e}}))`
  &&& {
    box-sizing: border-box;
  }

  /* basic ui text items use position absolute */
  position: relative;

  padding: 0;
  cursor: pointer;
  /* Safari will change the height of the toolbar and position the category cards at the bottom for some reason */
  vertical-align: top;
  border: none;
  box-sizing: border-box;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  background-color: ${t=>t.theme.card.background};
  color: ${t=>t.theme.card.foreground};
  border-radius: ${t=>t.theme.shape.radiusMedium}px;
  ${()=>n.iv`
    animation: ${ci} 0.2s linear;
  `};
  animation-fill-mode: both;
  overflow: hidden;

  ${ln}

  /* Active */

  /* No :active styles on purpose. */

  ${({isActive:t})=>t&&Hs}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${no} {
      background-color: ${t=>t.theme.card.inactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${oo} {
      background-color: ${t=>t.theme.card.hoverOverlayColor};
    }
  }
`;class Gs extends o.Component{constructor(){super(...arguments),this.state=so,this.timeout=null,this.onKeyDown=t=>{("Space"===t.key||"Enter"===t.key)&&this.props.onClick&&this.props.onClick()},this.onClick=t=>{const e=t.currentTarget.getBoundingClientRect(),i=t.pageX-e.left,r=t.pageY-e.top;"block"===this.state.display?this.setState({display:"none"},(()=>{this.setRippleState(i,r)})):this.setRippleState(i,r),this.props.onClick(t)},this.setRippleState=(t,e)=>{this.setState({left:t,top:e,display:"block"}),this.timeout=setTimeout((()=>{this.setState({display:"none"})}),1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{children:t,label:e,isActive:i,isDisabled:r,image:n,style:s,className:a}=this.props,{left:l,top:c,display:u}=this.state;return o.createElement(Ws,{isActive:i,"aria-label":e,"data-test":e,disabled:r,image:n,onClick:this.onClick,onKeyDown:this.onKeyDown,style:s,className:a},t,o.createElement(ao,{display:u,left:l,top:c}),o.createElement(ro,null),o.createElement(no,null),o.createElement(oo,null))}}Gs.defaultProps={isActive:!1};const Vs=n.ZP.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 4px;
  font-size: ${t=>t.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.label.case};
`,$s=n.ZP.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: absolute;
  bottom: 0px;
  border-radius: ${t=>t.theme.shape.radiusMedium}px;
  left: 0;
  ${t=>t.withBackground?n.iv`
          color: ${t.theme.card.labelForeground};
          height: 40px;
          background: ${t.theme.card.labelBackground};
        `:n.iv`
          color: ${t.theme.card.foreground};
          height: 32px;
        `}
  width: 100%;
  cursor: pointer;
`,Zs=n.ZP.div`
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${t=>t.theme.card.labelForeground};
  ${t=>t.withBackground?n.iv`
          border-top-color: ${t.theme.card.labelForeground};
        `:n.iv`
          border-top-color: ${t.theme.card.foreground};
        `}
  transform: rotate(${t=>t.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
`,Xs=n.ZP.span`
  display: flex;
  align-items: center;
  justify-content: center;
  padding-left: 10px;
`,Ys=n.ZP.div`
  ${cn}
`,qs=n.ZP.div.attrs((t=>({"data-test":y.CardAvatar,style:{backgroundImage:`url(${t.url})`}})))`
  position: absolute;
  top: 4px;
  left: 4px;
  height: 28px;
  width: 28px;
  border-radius: 50%;
`,Ks={Focused:ln,VisuallyHidden:cn},Qs={ripple:ai,scale:li,slide:ci},Js={Container:Ki,ColorItem:dn,ColorItemBase:un,ColorItemBackground:nn,ColorItemTiledBackground:hn,ColorItemActiveOverlay:an,Dialog:_n,DialogBase:mn,DialogContainer:gn,DialogBackdrop:pn,DialogHeader:bn,DialogBody:yn,DialogFooter:vn,DialogSpinner:kn,TextEditModal:Cs,ActionModal:ps,InfoModal:ys,Spacer:Es,Draggable:to,DraggableCore:Kn,Toast:As,Input:{Label:fo,File:Ho,Search:Qo,Slider:us,CarouselSlider:ko,Selection:is,Checkbox:Do,CheckboxBase:Co,CheckboxInput:Eo,CheckboxCheckMark:To,Dropdown:jo,Text:Zo,NumericInput:qo,Form:Wo},Switch:{Index:Rs,Case:Ds,Default:Is}}},4155:t=>{var e,i,r=t.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(i){try{return e.call(null,t,0)}catch(i){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:n}catch(t){e=n}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(t){i=o}}();var a,l=[],c=!1,u=-1;function h(){c&&a&&(c=!1,a.length?l=a.concat(l):u=-1,l.length&&d())}function d(){if(!c){var t=s(h);c=!0;for(var e=l.length;e;){for(a=l,l=[];++u<e;)a&&a[u].run();u=-1,e=l.length}a=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function f(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new p(t,e)),1!==l.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},8698:(t,e,i)=>{"use strict";var r=i(7418),n=i(7294);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=60106,a=60107,l=60108,c=60114,u=60109,h=60110,d=60112,p=60113,f=60120,m=60115,g=60116,_=60121,y=60117,v=60119,b=60129,x=60131;if("function"==typeof Symbol&&Symbol.for){var w=Symbol.for;s=w("react.portal"),a=w("react.fragment"),l=w("react.strict_mode"),c=w("react.profiler"),u=w("react.provider"),h=w("react.context"),d=w("react.forward_ref"),p=w("react.suspense"),f=w("react.suspense_list"),m=w("react.memo"),g=w("react.lazy"),_=w("react.block"),y=w("react.fundamental"),v=w("react.scope"),b=w("react.debug_trace_mode"),x=w("react.legacy_hidden")}function S(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case a:return"Fragment";case s:return"Portal";case c:return"Profiler";case l:return"StrictMode";case p:return"Suspense";case f:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case h:return(t.displayName||"Context")+".Consumer";case u:return(t._context.displayName||"Context")+".Provider";case d:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case m:return S(t.type);case _:return S(t._render);case g:e=t._payload,t=t._init;try{return S(t(e))}catch(t){}}return null}var k=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C={};function T(t,e){for(var i=0|t._threadCount;i<=e;i++)t[i]=t._currentValue2,t._threadCount=i+1}for(var E=new Uint16Array(16),R=0;15>R;R++)E[R]=R+1;E[15]=0;var D=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I=Object.prototype.hasOwnProperty,O={},A={};function F(t){return!!I.call(A,t)||!I.call(O,t)&&(D.test(t)?A[t]=!0:(O[t]=!0,!1))}function M(t,e,i,r,n,o,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){P[t]=new M(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];P[e]=new M(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){P[t]=new M(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){P[t]=new M(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){P[t]=new M(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){P[t]=new M(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){P[t]=new M(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){P[t]=new M(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){P[t]=new M(t,5,!1,t.toLowerCase(),null,!1,!1)}));var B=/[\-:]([a-z])/g;function z(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(B,z);P[e]=new M(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(B,z);P[e]=new M(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(B,z);P[e]=new M(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){P[t]=new M(t,1,!1,t.toLowerCase(),null,!1,!1)})),P.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){P[t]=new M(t,1,!1,t.toLowerCase(),null,!0,!0)}));var L=/["'&<>]/;function N(t){if("boolean"==typeof t||"number"==typeof t)return""+t;t=""+t;var e=L.exec(t);if(e){var i,r="",n=0;for(i=e.index;i<t.length;i++){switch(t.charCodeAt(i)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}n!==i&&(r+=t.substring(n,i)),n=i+1,r+=e}t=n!==i?r+t.substring(n,i):r}return t}function U(t,e){var i,r=P.hasOwnProperty(t)?P[t]:null;return(i="style"!==t)&&(i=null!==r?0===r.type:2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])),i||function(t,e,i,r){if(null==e||function(t,e,i,r){if(null!==i&&0===i.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==i?!i.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,i,r))return!0;if(r)return!1;if(null!==i)switch(i.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(t,e,r,!1)?"":null!==r?(t=r.attributeName,3===(i=r.type)||4===i&&!0===e?t+'=""':(r.sanitizeURL&&(e=""+e),t+'="'+N(e)+'"')):F(t)?t+'="'+N(e)+'"':""}var j="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},H=null,W=null,G=null,V=!1,$=!1,Z=null,X=0;function Y(){if(null===H)throw Error(o(321));return H}function q(){if(0<X)throw Error(o(312));return{memoizedState:null,queue:null,next:null}}function K(){return null===G?null===W?(V=!1,W=G=q()):(V=!0,G=W):null===G.next?(V=!1,G=G.next=q()):(V=!0,G=G.next),G}function Q(t,e,i,r){for(;$;)$=!1,X+=1,G=null,i=t(e,r);return J(),i}function J(){H=null,$=!1,W=null,X=0,G=Z=null}function tt(t,e){return"function"==typeof e?e(t):e}function et(t,e,i){if(H=Y(),G=K(),V){var r=G.queue;if(e=r.dispatch,null!==Z&&void 0!==(i=Z.get(r))){Z.delete(r),r=G.memoizedState;do{r=t(r,i.action),i=i.next}while(null!==i);return G.memoizedState=r,[r,e]}return[G.memoizedState,e]}return t=t===tt?"function"==typeof e?e():e:void 0!==i?i(e):e,G.memoizedState=t,t=(t=G.queue={last:null,dispatch:null}).dispatch=rt.bind(null,H,t),[G.memoizedState,t]}function it(t,e){if(H=Y(),e=void 0===e?null:e,null!==(G=K())){var i=G.memoizedState;if(null!==i&&null!==e){var r=i[1];t:if(null===r)r=!1;else{for(var n=0;n<r.length&&n<e.length;n++)if(!j(e[n],r[n])){r=!1;break t}r=!0}if(r)return i[0]}}return t=t(),G.memoizedState=[t,e],t}function rt(t,e,i){if(!(25>X))throw Error(o(301));if(t===H)if($=!0,t={action:i,next:null},null===Z&&(Z=new Map),void 0===(i=Z.get(e)))Z.set(e,t);else{for(e=i;null!==e.next;)e=e.next;e.next=t}}function nt(){}var ot=null,st={readContext:function(t){var e=ot.threadID;return T(t,e),t[e]},useContext:function(t){Y();var e=ot.threadID;return T(t,e),t[e]},useMemo:it,useReducer:et,useRef:function(t){H=Y();var e=(G=K()).memoizedState;return null===e?(t={current:t},G.memoizedState=t):e},useState:function(t){return et(tt,t)},useLayoutEffect:function(){},useCallback:function(t,e){return it((function(){return t}),e)},useImperativeHandle:nt,useEffect:nt,useDebugValue:nt,useDeferredValue:function(t){return Y(),t},useTransition:function(){return Y(),[function(t){t()},!1]},useOpaqueIdentifier:function(){return(ot.identifierPrefix||"")+"R:"+(ot.uniqueID++).toString(36)},useMutableSource:function(t,e){return Y(),e(t._source)}},at="http://www.w3.org/1999/xhtml";function lt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var ct={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},ut=r({menuitem:!0},ct),ht={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dt=["Webkit","ms","Moz","O"];Object.keys(ht).forEach((function(t){dt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ht[e]=ht[t]}))}));var pt=/([A-Z])/g,ft=/^ms-/,mt=n.Children.toArray,gt=k.ReactCurrentDispatcher,_t={listing:!0,pre:!0,textarea:!0},yt=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,vt={},bt={};var xt=Object.prototype.hasOwnProperty,wt={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function St(t,e){if(void 0===t)throw Error(o(152,S(e)||"Component"))}function kt(t,e,i){function s(n,s){var a=s.prototype&&s.prototype.isReactComponent,l=function(t,e,i,r){if(r&&"object"==typeof(r=t.contextType)&&null!==r)return T(r,i),r[i];if(t=t.contextTypes){for(var n in i={},t)i[n]=e[n];e=i}else e=C;return e}(s,e,i,a),c=[],u=!1,h={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===c)return null},enqueueReplaceState:function(t,e){u=!0,c=[e]},enqueueSetState:function(t,e){if(null===c)return null;c.push(e)}};if(a){if(a=new s(n.props,l,h),"function"==typeof s.getDerivedStateFromProps){var d=s.getDerivedStateFromProps.call(null,n.props,a.state);null!=d&&(a.state=r({},a.state,d))}}else if(H={},a=s(n.props,l,h),null==(a=Q(s,n.props,a,l))||null==a.render)return void St(t=a,s);if(a.props=n.props,a.context=l,a.updater=h,void 0===(h=a.state)&&(a.state=h=null),"function"==typeof a.UNSAFE_componentWillMount||"function"==typeof a.componentWillMount)if("function"==typeof a.componentWillMount&&"function"!=typeof s.getDerivedStateFromProps&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&"function"!=typeof s.getDerivedStateFromProps&&a.UNSAFE_componentWillMount(),c.length){h=c;var p=u;if(c=null,u=!1,p&&1===h.length)a.state=h[0];else{d=p?h[0]:a.state;var f=!0;for(p=p?1:0;p<h.length;p++){var m=h[p];null!=(m="function"==typeof m?m.call(a,d,n.props,l):m)&&(f?(f=!1,d=r({},d,m)):r(d,m))}a.state=d}}else c=null;if(St(t=a.render(),s),"function"==typeof a.getChildContext&&"object"==typeof(n=s.childContextTypes)){var g=a.getChildContext();for(var _ in g)if(!(_ in n))throw Error(o(108,S(s)||"Unknown",_))}g&&(e=r({},e,g))}for(;n.isValidElement(t);){var a=t,l=a.type;if("function"!=typeof l)break;s(a,l)}return{child:t,context:e}}var Ct=function(){function t(t,e,i){n.isValidElement(t)?t.type!==a?t=[t]:(t=t.props.children,t=n.isValidElement(t)?[t]:mt(t)):t=mt(t),t={type:null,domNamespace:at,children:t,childIndex:0,context:C,footer:""};var r=E[0];if(0===r){var s=E,l=2*(r=s.length);if(!(65536>=l))throw Error(o(304));var c=new Uint16Array(l);for(c.set(s),(E=c)[0]=r+1,s=r;s<l-1;s++)E[s]=s+1;E[l-1]=0}else E[0]=E[r];this.threadID=r,this.stack=[t],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=e,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[],this.uniqueID=0,this.identifierPrefix=i&&i.identifierPrefix||""}var e=t.prototype;return e.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var t=this.threadID;E[t]=E[0],E[0]=t}},e.pushProvider=function(t){var e=++this.contextIndex,i=t.type._context,r=this.threadID;T(i,r);var n=i[r];this.contextStack[e]=i,this.contextValueStack[e]=n,i[r]=t.props.value},e.popProvider=function(){var t=this.contextIndex,e=this.contextStack[t],i=this.contextValueStack[t];this.contextStack[t]=null,this.contextValueStack[t]=null,this.contextIndex--,e[this.threadID]=i},e.clearProviders=function(){for(var t=this.contextIndex;0<=t;t--)this.contextStack[t][this.threadID]=this.contextValueStack[t]},e.read=function(t){if(this.exhausted)return null;var e=ot;ot=this;var i=gt.current;gt.current=st;try{for(var r=[""],n=!1;r[0].length<t;){if(0===this.stack.length){this.exhausted=!0;var s=this.threadID;E[s]=E[0],E[0]=s;break}var a=this.stack[this.stack.length-1];if(n||a.childIndex>=a.children.length){var l=a.footer;if(""!==l&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===a.type)this.currentSelectValue=null;else if(null!=a.type&&null!=a.type.type&&a.type.type.$$typeof===u)this.popProvider(a.type);else if(a.type===p){this.suspenseDepth--;var c=r.pop();if(n){n=!1;var h=a.fallbackFrame;if(!h)throw Error(o(303));this.stack.push(h),r[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}r[this.suspenseDepth]+=c}r[this.suspenseDepth]+=l}else{var d=a.children[a.childIndex++],f="";try{f+=this.render(d,a.context,a.domNamespace)}catch(t){if(null!=t&&"function"==typeof t.then)throw Error(o(294));throw t}r.length<=this.suspenseDepth&&r.push(""),r[this.suspenseDepth]+=f}}return r[0]}finally{gt.current=i,ot=e,J()}},e.render=function(t,e,i){if("string"==typeof t||"number"==typeof t)return""===(i=""+t)?"":this.makeStaticMarkup?N(i):this.previousWasTextNode?"\x3c!-- --\x3e"+N(i):(this.previousWasTextNode=!0,N(i));if(t=(e=kt(t,e,this.threadID)).child,e=e.context,null===t||!1===t)return"";if(!n.isValidElement(t)){if(null!=t&&null!=t.$$typeof){if((i=t.$$typeof)===s)throw Error(o(257));throw Error(o(258,i.toString()))}return t=mt(t),this.stack.push({type:null,domNamespace:i,children:t,childIndex:0,context:e,footer:""}),""}var _=t.type;if("string"==typeof _)return this.renderDOM(t,e,i);switch(_){case x:case b:case l:case c:case f:case a:return t=mt(t.props.children),this.stack.push({type:null,domNamespace:i,children:t,childIndex:0,context:e,footer:""}),"";case p:throw Error(o(294));case v:throw Error(o(343))}if("object"==typeof _&&null!==_)switch(_.$$typeof){case d:H={};var w=_.render(t.props,t.ref);return w=Q(_.render,t.props,w,t.ref),w=mt(w),this.stack.push({type:null,domNamespace:i,children:w,childIndex:0,context:e,footer:""}),"";case m:return t=[n.createElement(_.type,r({ref:t.ref},t.props))],this.stack.push({type:null,domNamespace:i,children:t,childIndex:0,context:e,footer:""}),"";case u:return i={type:t,domNamespace:i,children:_=mt(t.props.children),childIndex:0,context:e,footer:""},this.pushProvider(t),this.stack.push(i),"";case h:_=t.type,w=t.props;var S=this.threadID;return T(_,S),_=mt(w.children(_[S])),this.stack.push({type:t,domNamespace:i,children:_,childIndex:0,context:e,footer:""}),"";case y:throw Error(o(338));case g:return _=(w=(_=t.type)._init)(_._payload),t=[n.createElement(_,r({ref:t.ref},t.props))],this.stack.push({type:null,domNamespace:i,children:t,childIndex:0,context:e,footer:""}),""}throw Error(o(130,null==_?_:typeof _,""))},e.renderDOM=function(t,e,i){var s=t.type.toLowerCase();if(i===at&&lt(s),!vt.hasOwnProperty(s)){if(!yt.test(s))throw Error(o(65,s));vt[s]=!0}var a=t.props;if("input"===s)a=r({type:void 0},a,{defaultChecked:void 0,defaultValue:void 0,value:null!=a.value?a.value:a.defaultValue,checked:null!=a.checked?a.checked:a.defaultChecked});else if("textarea"===s){var l=a.value;if(null==l){l=a.defaultValue;var c=a.children;if(null!=c){if(null!=l)throw Error(o(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(o(93));c=c[0]}l=""+c}null==l&&(l="")}a=r({},a,{value:void 0,children:""+l})}else if("select"===s)this.currentSelectValue=null!=a.value?a.value:a.defaultValue,a=r({},a,{value:void 0});else if("option"===s){c=this.currentSelectValue;var u=function(t){if(null==t)return t;var e="";return n.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(a.children);if(null!=c){var h=null!=a.value?a.value+"":u;if(l=!1,Array.isArray(c)){for(var d=0;d<c.length;d++)if(""+c[d]===h){l=!0;break}}else l=""+c===h;a=r({selected:void 0,children:void 0},a,{selected:l,children:u})}}if(l=a){if(ut[s]&&(null!=l.children||null!=l.dangerouslySetInnerHTML))throw Error(o(137,s));if(null!=l.dangerouslySetInnerHTML){if(null!=l.children)throw Error(o(60));if("object"!=typeof l.dangerouslySetInnerHTML||!("__html"in l.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=l.style&&"object"!=typeof l.style)throw Error(o(62))}l=a,c=this.makeStaticMarkup,u=1===this.stack.length,h="<"+t.type;t:if(-1===s.indexOf("-"))d="string"==typeof l.is;else switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":d=!1;break t;default:d=!0}for(x in l)if(xt.call(l,x)){var p=l[x];if(null!=p){if("style"===x){var f=void 0,m="",g="";for(f in p)if(p.hasOwnProperty(f)){var _=0===f.indexOf("--"),y=p[f];if(null!=y){if(_)var v=f;else if(v=f,bt.hasOwnProperty(v))v=bt[v];else{var b=v.replace(pt,"-$1").toLowerCase().replace(ft,"-ms-");v=bt[v]=b}m+=g+v+":",g=f,m+=_=null==y||"boolean"==typeof y||""===y?"":_||"number"!=typeof y||0===y||ht.hasOwnProperty(g)&&ht[g]?(""+y).trim():y+"px",g=";"}}p=m||null}f=null,d?wt.hasOwnProperty(x)||(f=F(f=x)&&null!=p?f+'="'+N(p)+'"':""):f=U(x,p),f&&(h+=" "+f)}}c||u&&(h+=' data-reactroot=""');var x=h;l="",ct.hasOwnProperty(s)?x+="/>":(x+=">",l="</"+t.type+">");t:{if(null!=(c=a.dangerouslySetInnerHTML)){if(null!=c.__html){c=c.__html;break t}}else if("string"==typeof(c=a.children)||"number"==typeof c){c=N(c);break t}c=null}return null!=c?(a=[],_t.hasOwnProperty(s)&&"\n"===c.charAt(0)&&(x+="\n"),x+=c):a=mt(a.children),t=t.type,i=null==i||"http://www.w3.org/1999/xhtml"===i?lt(t):"http://www.w3.org/2000/svg"===i&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":i,this.stack.push({domNamespace:i,type:s,children:a,childIndex:0,context:e,footer:l}),this.previousWasTextNode=!1,x},t}();e.renderToStaticMarkup=function(t,e){t=new Ct(t,!0,e);try{return t.read(1/0)}finally{t.destroy()}}},4448:(t,e,i)=>{"use strict";var r=i(7294),n=i(7418),o=i(3840);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));var a=new Set,l={};function c(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(l[t]=e,t=0;t<e.length;t++)a.add(e[t])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,f={},m={};function g(t,e,i,r,n,o,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){_[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];_[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){_[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){_[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){_[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){_[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){_[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){_[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){_[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function b(t,e,i,r){var n=_.hasOwnProperty(e)?_[e]:null;(null!==n?0===n.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,i,r){if(null==e||function(t,e,i,r){if(null!==i&&0===i.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==i?!i.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,i,r))return!0;if(r)return!1;if(null!==i)switch(i.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,i,n,r)&&(i=null),r||null===n?function(t){return!!p.call(m,t)||!p.call(f,t)&&(d.test(t)?m[t]=!0:(f[t]=!0,!1))}(e)&&(null===i?t.removeAttribute(e):t.setAttribute(e,""+i)):n.mustUseProperty?t[n.propertyName]=null===i?3!==n.type&&"":i:(e=n.attributeName,r=n.attributeNamespace,null===i?t.removeAttribute(e):(i=3===(n=n.type)||4===n&&!0===i?"":""+i,r?t.setAttributeNS(r,e,i):t.setAttribute(e,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);_[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);_[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);_[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){_[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),_.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){_[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,S=60106,k=60107,C=60108,T=60114,E=60109,R=60110,D=60112,I=60113,O=60120,A=60115,F=60116,M=60121,P=60128,B=60129,z=60130,L=60131;if("function"==typeof Symbol&&Symbol.for){var N=Symbol.for;w=N("react.element"),S=N("react.portal"),k=N("react.fragment"),C=N("react.strict_mode"),T=N("react.profiler"),E=N("react.provider"),R=N("react.context"),D=N("react.forward_ref"),I=N("react.suspense"),O=N("react.suspense_list"),A=N("react.memo"),F=N("react.lazy"),M=N("react.block"),N("react.scope"),P=N("react.opaque.id"),B=N("react.debug_trace_mode"),z=N("react.offscreen"),L=N("react.legacy_hidden")}var U,j="function"==typeof Symbol&&Symbol.iterator;function H(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=j&&t[j]||t["@@iterator"])?t:null}function W(t){if(void 0===U)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);U=e&&e[1]||""}return"\n"+U+t}var G=!1;function V(t,e){if(!t||G)return"";G=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(t){var r=t}Reflect.construct(t,[],e)}else{try{e.call()}catch(t){r=t}t.call(e.prototype)}else{try{throw Error()}catch(t){r=t}t()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var n=t.stack.split("\n"),o=r.stack.split("\n"),s=n.length-1,a=o.length-1;1<=s&&0<=a&&n[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(n[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||n[s]!==o[a])return"\n"+n[s].replace(" at new "," at ")}while(1<=s&&0<=a);break}}}finally{G=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?W(t):""}function $(t){switch(t.tag){case 5:return W(t.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return t=V(t.type,!1);case 11:return t=V(t.type.render,!1);case 22:return t=V(t.type._render,!1);case 1:return t=V(t.type,!0);default:return""}}function Z(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case k:return"Fragment";case S:return"Portal";case T:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case O:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case R:return(t.displayName||"Context")+".Consumer";case E:return(t._context.displayName||"Context")+".Provider";case D:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case A:return Z(t.type);case M:return Z(t._render);case F:e=t._payload,t=t._init;try{return Z(t(e))}catch(t){}}return null}function X(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Y(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function q(t){t._valueTracker||(t._valueTracker=function(t){var e=Y(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==i&&"function"==typeof i.get&&"function"==typeof i.set){var n=i.get,o=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function K(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),r="";return t&&(r=Y(t)?t.checked?"true":"false":t.value),(t=r)!==i&&(e.setValue(t),!0)}function Q(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function J(t,e){var i=e.checked;return n({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:t._wrapperState.initialChecked})}function tt(t,e){var i=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;i=X(null!=e.value?e.value:i),t._wrapperState={initialChecked:r,initialValue:i,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function it(t,e){et(t,e);var i=X(e.value),r=e.type;if(null!=i)"number"===r?(0===i&&""===t.value||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?nt(t,e.type,i):e.hasOwnProperty("defaultValue")&&nt(t,e.type,X(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function rt(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}""!==(i=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==i&&(t.name=i)}function nt(t,e,i){"number"===e&&Q(t.ownerDocument)===t||(null==i?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}function ot(t,e){return t=n({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function st(t,e,i,r){if(t=t.options,e){e={};for(var n=0;n<i.length;n++)e["$"+i[n]]=!0;for(i=0;i<t.length;i++)n=e.hasOwnProperty("$"+t[i].value),t[i].selected!==n&&(t[i].selected=n),n&&r&&(t[i].defaultSelected=!0)}else{for(i=""+X(i),e=null,n=0;n<t.length;n++){if(t[n].value===i)return t[n].selected=!0,void(r&&(t[n].defaultSelected=!0));null!==e||t[n].disabled||(e=t[n])}null!==e&&(e.selected=!0)}}function at(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return n({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lt(t,e){var i=e.value;if(null==i){if(i=e.children,e=e.defaultValue,null!=i){if(null!=e)throw Error(s(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(s(93));i=i[0]}e=i}null==e&&(e=""),i=e}t._wrapperState={initialValue:X(i)}}function ct(t,e){var i=X(e.value),r=X(e.defaultValue);null!=i&&((i=""+i)!==t.value&&(t.value=i),null==e.defaultValue&&t.defaultValue!==i&&(t.defaultValue=i)),null!=r&&(t.defaultValue=""+r)}function ut(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ht="http://www.w3.org/1999/xhtml",dt="http://www.w3.org/2000/svg";function pt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ft(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?pt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var mt,gt,_t=(gt=function(t,e){if(t.namespaceURI!==dt||"innerHTML"in t)t.innerHTML=e;else{for((mt=mt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,i,r){MSApp.execUnsafeLocalFunction((function(){return gt(t,e)}))}:gt);function yt(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&3===i.nodeType)return void(i.nodeValue=e)}t.textContent=e}var vt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bt=["Webkit","ms","Moz","O"];function xt(t,e,i){return null==e||"boolean"==typeof e||""===e?"":i||"number"!=typeof e||0===e||vt.hasOwnProperty(t)&&vt[t]?(""+e).trim():e+"px"}function wt(t,e){for(var i in t=t.style,e)if(e.hasOwnProperty(i)){var r=0===i.indexOf("--"),n=xt(i,e[i],r);"float"===i&&(i="cssFloat"),r?t.setProperty(i,n):t[i]=n}}Object.keys(vt).forEach((function(t){bt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vt[e]=vt[t]}))}));var St=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kt(t,e){if(e){if(St[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(s(62))}}function Ct(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Tt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Et=null,Rt=null,Dt=null;function It(t){if(t=Jr(t)){if("function"!=typeof Et)throw Error(s(280));var e=t.stateNode;e&&(e=en(e),Et(t.stateNode,t.type,e))}}function Ot(t){Rt?Dt?Dt.push(t):Dt=[t]:Rt=t}function At(){if(Rt){var t=Rt,e=Dt;if(Dt=Rt=null,It(t),e)for(t=0;t<e.length;t++)It(e[t])}}function Ft(t,e){return t(e)}function Mt(t,e,i,r,n){return t(e,i,r,n)}function Pt(){}var Bt=Ft,zt=!1,Lt=!1;function Nt(){null===Rt&&null===Dt||(Pt(),At())}function Ut(t,e){var i=t.stateNode;if(null===i)return null;var r=en(i);if(null===r)return null;i=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(i&&"function"!=typeof i)throw Error(s(231,e,typeof i));return i}var jt=!1;if(h)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){jt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(gt){jt=!1}function Wt(t,e,i,r,n,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(i,c)}catch(t){this.onError(t)}}var Gt=!1,Vt=null,$t=!1,Zt=null,Xt={onError:function(t){Gt=!0,Vt=t}};function Yt(t,e,i,r,n,o,s,a,l){Gt=!1,Vt=null,Wt.apply(Xt,arguments)}function qt(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(1026&(e=t).flags)&&(i=e.return),t=e.return}while(t)}return 3===e.tag?i:null}function Kt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Qt(t){if(qt(t)!==t)throw Error(s(188))}function Jt(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=qt(t)))throw Error(s(188));return e!==t?null:t}for(var i=t,r=e;;){var n=i.return;if(null===n)break;var o=n.alternate;if(null===o){if(null!==(r=n.return)){i=r;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===i)return Qt(n),t;if(o===r)return Qt(n),e;o=o.sibling}throw Error(s(188))}if(i.return!==r.return)i=n,r=o;else{for(var a=!1,l=n.child;l;){if(l===i){a=!0,i=n,r=o;break}if(l===r){a=!0,r=n,i=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===i){a=!0,i=o,r=n;break}if(l===r){a=!0,r=o,i=n;break}l=l.sibling}if(!a)throw Error(s(189))}}if(i.alternate!==r)throw Error(s(190))}if(3!==i.tag)throw Error(s(188));return i.stateNode.current===i?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function te(t,e){for(var i=t.alternate;null!==e;){if(e===t||e===i)return!0;e=e.return}return!1}var ee,ie,re,ne,oe=!1,se=[],ae=null,le=null,ce=null,ue=new Map,he=new Map,de=[],pe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fe(t,e,i,r,n){return{blockedOn:t,domEventName:e,eventSystemFlags:16|i,nativeEvent:n,targetContainers:[r]}}function me(t,e){switch(t){case"focusin":case"focusout":ae=null;break;case"dragenter":case"dragleave":le=null;break;case"mouseover":case"mouseout":ce=null;break;case"pointerover":case"pointerout":ue.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":he.delete(e.pointerId)}}function ge(t,e,i,r,n,o){return null===t||t.nativeEvent!==o?(t=fe(e,i,r,n,o),null!==e&&(null!==(e=Jr(e))&&ie(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==n&&-1===e.indexOf(n)&&e.push(n),t)}function _e(t){var e=Qr(t.target);if(null!==e){var i=qt(e);if(null!==i)if(13===(e=i.tag)){if(null!==(e=Kt(i)))return t.blockedOn=e,void ne(t.lanePriority,(function(){o.unstable_runWithPriority(t.priority,(function(){re(i)}))}))}else if(3===e&&i.stateNode.hydrate)return void(t.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}t.blockedOn=null}function ye(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var i=Je(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==i)return null!==(e=Jr(i))&&ie(e),t.blockedOn=i,!1;e.shift()}return!0}function ve(t,e,i){ye(t)&&i.delete(e)}function be(){for(oe=!1;0<se.length;){var t=se[0];if(null!==t.blockedOn){null!==(t=Jr(t.blockedOn))&&ee(t);break}for(var e=t.targetContainers;0<e.length;){var i=Je(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==i){t.blockedOn=i;break}e.shift()}null===t.blockedOn&&se.shift()}null!==ae&&ye(ae)&&(ae=null),null!==le&&ye(le)&&(le=null),null!==ce&&ye(ce)&&(ce=null),ue.forEach(ve),he.forEach(ve)}function xe(t,e){t.blockedOn===e&&(t.blockedOn=null,oe||(oe=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,be)))}function we(t){function e(e){return xe(e,t)}if(0<se.length){xe(se[0],t);for(var i=1;i<se.length;i++){var r=se[i];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==ae&&xe(ae,t),null!==le&&xe(le,t),null!==ce&&xe(ce,t),ue.forEach(e),he.forEach(e),i=0;i<de.length;i++)(r=de[i]).blockedOn===t&&(r.blockedOn=null);for(;0<de.length&&null===(i=de[0]).blockedOn;)_e(i),null===i.blockedOn&&de.shift()}function Se(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var ke={animationend:Se("Animation","AnimationEnd"),animationiteration:Se("Animation","AnimationIteration"),animationstart:Se("Animation","AnimationStart"),transitionend:Se("Transition","TransitionEnd")},Ce={},Te={};function Ee(t){if(Ce[t])return Ce[t];if(!ke[t])return t;var e,i=ke[t];for(e in i)if(i.hasOwnProperty(e)&&e in Te)return Ce[t]=i[e];return t}h&&(Te=document.createElement("div").style,"AnimationEvent"in window||(delete ke.animationend.animation,delete ke.animationiteration.animation,delete ke.animationstart.animation),"TransitionEvent"in window||delete ke.transitionend.transition);var Re=Ee("animationend"),De=Ee("animationiteration"),Ie=Ee("animationstart"),Oe=Ee("transitionend"),Ae=new Map,Fe=new Map,Me=["abort","abort",Re,"animationEnd",De,"animationIteration",Ie,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Oe,"transitionEnd","waiting","waiting"];function Pe(t,e){for(var i=0;i<t.length;i+=2){var r=t[i],n=t[i+1];n="on"+(n[0].toUpperCase()+n.slice(1)),Fe.set(r,e),Ae.set(r,n),c(n,[r])}}(0,o.unstable_now)();var Be=8;function ze(t){if(0!=(1&t))return Be=15,1;if(0!=(2&t))return Be=14,2;if(0!=(4&t))return Be=13,4;var e=24&t;return 0!==e?(Be=12,e):0!=(32&t)?(Be=11,32):0!==(e=192&t)?(Be=10,e):0!=(256&t)?(Be=9,256):0!==(e=3584&t)?(Be=8,e):0!=(4096&t)?(Be=7,4096):0!==(e=4186112&t)?(Be=6,e):0!==(e=62914560&t)?(Be=5,e):67108864&t?(Be=4,67108864):0!=(134217728&t)?(Be=3,134217728):0!==(e=805306368&t)?(Be=2,e):0!=(1073741824&t)?(Be=1,1073741824):(Be=8,t)}function Le(t,e){var i=t.pendingLanes;if(0===i)return Be=0;var r=0,n=0,o=t.expiredLanes,s=t.suspendedLanes,a=t.pingedLanes;if(0!==o)r=o,n=Be=15;else if(0!==(o=134217727&i)){var l=o&~s;0!==l?(r=ze(l),n=Be):0!==(a&=o)&&(r=ze(a),n=Be)}else 0!==(o=i&~s)?(r=ze(o),n=Be):0!==a&&(r=ze(a),n=Be);if(0===r)return 0;if(r=i&((0>(r=31-Ge(r))?0:1<<r)<<1)-1,0!==e&&e!==r&&0==(e&s)){if(ze(e),n<=Be)return e;Be=n}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)n=1<<(i=31-Ge(e)),r|=t[i],e&=~n;return r}function Ne(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function Ue(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=je(24&~e))?Ue(10,e):t;case 10:return 0===(t=je(192&~e))?Ue(8,e):t;case 8:return 0===(t=je(3584&~e))&&(0===(t=je(4186112&~e))&&(t=512)),t;case 2:return 0===(e=je(805306368&~e))&&(e=268435456),e}throw Error(s(358,t))}function je(t){return t&-t}function He(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function We(t,e,i){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,(t=t.eventTimes)[e=31-Ge(e)]=i}var Ge=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(Ve(t)/$e|0)|0},Ve=Math.log,$e=Math.LN2;var Ze=o.unstable_UserBlockingPriority,Xe=o.unstable_runWithPriority,Ye=!0;function qe(t,e,i,r){zt||Pt();var n=Qe,o=zt;zt=!0;try{Mt(n,t,e,i,r)}finally{(zt=o)||Nt()}}function Ke(t,e,i,r){Xe(Ze,Qe.bind(null,t,e,i,r))}function Qe(t,e,i,r){var n;if(Ye)if((n=0==(4&e))&&0<se.length&&-1<pe.indexOf(t))t=fe(null,t,e,i,r),se.push(t);else{var o=Je(t,e,i,r);if(null===o)n&&me(t,r);else{if(n){if(-1<pe.indexOf(t))return t=fe(o,t,e,i,r),void se.push(t);if(function(t,e,i,r,n){switch(e){case"focusin":return ae=ge(ae,t,e,i,r,n),!0;case"dragenter":return le=ge(le,t,e,i,r,n),!0;case"mouseover":return ce=ge(ce,t,e,i,r,n),!0;case"pointerover":var o=n.pointerId;return ue.set(o,ge(ue.get(o)||null,t,e,i,r,n)),!0;case"gotpointercapture":return o=n.pointerId,he.set(o,ge(he.get(o)||null,t,e,i,r,n)),!0}return!1}(o,t,e,i,r))return;me(t,r)}Or(t,e,r,null,i)}}}function Je(t,e,i,r){var n=Tt(r);if(null!==(n=Qr(n))){var o=qt(n);if(null===o)n=null;else{var s=o.tag;if(13===s){if(null!==(n=Kt(o)))return n;n=null}else if(3===s){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}return Or(t,e,r,n,i),null}var ti=null,ei=null,ii=null;function ri(){if(ii)return ii;var t,e,i=ei,r=i.length,n="value"in ti?ti.value:ti.textContent,o=n.length;for(t=0;t<r&&i[t]===n[t];t++);var s=r-t;for(e=1;e<=s&&i[r-e]===n[o-e];e++);return ii=n.slice(t,1<e?1-e:void 0)}function ni(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function oi(){return!0}function si(){return!1}function ai(t){function e(e,i,r,n,o){for(var s in this._reactName=e,this._targetInst=r,this.type=i,this.nativeEvent=n,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(n):n[s]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?oi:si,this.isPropagationStopped=si,this}return n(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=oi)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=oi)},persist:function(){},isPersistent:oi}),e}var li,ci,ui,hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},di=ai(hi),pi=n({},hi,{view:0,detail:0}),fi=ai(pi),mi=n({},pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ti,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ui&&(ui&&"mousemove"===t.type?(li=t.screenX-ui.screenX,ci=t.screenY-ui.screenY):ci=li=0,ui=t),li)},movementY:function(t){return"movementY"in t?t.movementY:ci}}),gi=ai(mi),_i=ai(n({},mi,{dataTransfer:0})),yi=ai(n({},pi,{relatedTarget:0})),vi=ai(n({},hi,{animationName:0,elapsedTime:0,pseudoElement:0})),bi=ai(n({},hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),xi=ai(n({},hi,{data:0})),wi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Si={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ki={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ci(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=ki[t])&&!!e[t]}function Ti(){return Ci}var Ei=ai(n({},pi,{key:function(t){if(t.key){var e=wi[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=ni(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Si[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ti,charCode:function(t){return"keypress"===t.type?ni(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?ni(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),Ri=ai(n({},mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Di=ai(n({},pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ti})),Ii=ai(n({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0})),Oi=ai(n({},mi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),Ai=[9,13,27,32],Fi=h&&"CompositionEvent"in window,Mi=null;h&&"documentMode"in document&&(Mi=document.documentMode);var Pi=h&&"TextEvent"in window&&!Mi,Bi=h&&(!Fi||Mi&&8<Mi&&11>=Mi),zi=String.fromCharCode(32),Li=!1;function Ni(t,e){switch(t){case"keyup":return-1!==Ai.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ui(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var ji=!1;var Hi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Hi[t.type]:"textarea"===e}function Gi(t,e,i,r){Ot(r),0<(e=Fr(e,"onChange")).length&&(i=new di("onChange","change",null,i,r),t.push({event:i,listeners:e}))}var Vi=null,$i=null;function Zi(t){Cr(t,0)}function Xi(t){if(K(tn(t)))return t}function Yi(t,e){if("change"===t)return e}var qi=!1;if(h){var Ki;if(h){var Qi="oninput"in document;if(!Qi){var Ji=document.createElement("div");Ji.setAttribute("oninput","return;"),Qi="function"==typeof Ji.oninput}Ki=Qi}else Ki=!1;qi=Ki&&(!document.documentMode||9<document.documentMode)}function tr(){Vi&&(Vi.detachEvent("onpropertychange",er),$i=Vi=null)}function er(t){if("value"===t.propertyName&&Xi($i)){var e=[];if(Gi(e,$i,t,Tt(t)),t=Zi,zt)t(e);else{zt=!0;try{Ft(t,e)}finally{zt=!1,Nt()}}}}function ir(t,e,i){"focusin"===t?(tr(),$i=i,(Vi=e).attachEvent("onpropertychange",er)):"focusout"===t&&tr()}function rr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Xi($i)}function nr(t,e){if("click"===t)return Xi(e)}function or(t,e){if("input"===t||"change"===t)return Xi(e)}var sr="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},ar=Object.prototype.hasOwnProperty;function lr(t,e){if(sr(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++)if(!ar.call(e,i[r])||!sr(t[i[r]],e[i[r]]))return!1;return!0}function cr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ur(t,e){var i,r=cr(t);for(t=0;r;){if(3===r.nodeType){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=cr(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function dr(){for(var t=window,e=Q();e instanceof t.HTMLIFrameElement;){try{var i="string"==typeof e.contentWindow.location.href}catch(t){i=!1}if(!i)break;e=Q((t=e.contentWindow).document)}return e}function pr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var fr=h&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,_r=null,yr=!1;function vr(t,e,i){var r=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;yr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},_r&&lr(_r,r)||(_r=r,0<(r=Fr(gr,"onSelect")).length&&(e=new di("onSelect","select",null,e,i),t.push({event:e,listeners:r}),e.target=mr)))}Pe("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Pe("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Pe(Me,2);for(var br="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),xr=0;xr<br.length;xr++)Fe.set(br[xr],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(wr));function kr(t,e,i){var r=t.type||"unknown-event";t.currentTarget=i,function(t,e,i,r,n,o,a,l,c){if(Yt.apply(this,arguments),Gt){if(!Gt)throw Error(s(198));var u=Vt;Gt=!1,Vt=null,$t||($t=!0,Zt=u)}}(r,e,void 0,t),t.currentTarget=null}function Cr(t,e){e=0!=(4&e);for(var i=0;i<t.length;i++){var r=t[i],n=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&n.isPropagationStopped())break t;kr(n,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&n.isPropagationStopped())break t;kr(n,a,c),o=l}}}if($t)throw t=Zt,$t=!1,Zt=null,t}function Tr(t,e){var i=rn(e),r=t+"__bubble";i.has(r)||(Ir(e,t,2,!1),i.add(r))}var Er="_reactListening"+Math.random().toString(36).slice(2);function Rr(t){t[Er]||(t[Er]=!0,a.forEach((function(e){Sr.has(e)||Dr(e,!1,t,null),Dr(e,!0,t,null)})))}function Dr(t,e,i,r){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=i;if("selectionchange"===t&&9!==i.nodeType&&(o=i.ownerDocument),null!==r&&!e&&Sr.has(t)){if("scroll"!==t)return;n|=2,o=r}var s=rn(o),a=t+"__"+(e?"capture":"bubble");s.has(a)||(e&&(n|=4),Ir(o,t,n,e),s.add(a))}function Ir(t,e,i,r){var n=Fe.get(e);switch(void 0===n?2:n){case 0:n=qe;break;case 1:n=Ke;break;default:n=Qe}i=n.bind(null,e,i,t),n=void 0,!jt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(n=!0),r?void 0!==n?t.addEventListener(e,i,{capture:!0,passive:n}):t.addEventListener(e,i,!0):void 0!==n?t.addEventListener(e,i,{passive:n}):t.addEventListener(e,i,!1)}function Or(t,e,i,r,n){var o=r;if(0==(1&e)&&0==(2&e)&&null!==r)t:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===n||8===a.nodeType&&a.parentNode===n)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===n||8===l.nodeType&&l.parentNode===n))return;s=s.return}for(;null!==a;){if(null===(s=Qr(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue t}a=a.parentNode}}r=r.return}!function(t,e,i){if(Lt)return t(e,i);Lt=!0;try{Bt(t,e,i)}finally{Lt=!1,Nt()}}((function(){var r=o,n=Tt(i),s=[];t:{var a=Ae.get(t);if(void 0!==a){var l=di,c=t;switch(t){case"keypress":if(0===ni(i))break t;case"keydown":case"keyup":l=Ei;break;case"focusin":c="focus",l=yi;break;case"focusout":c="blur",l=yi;break;case"beforeblur":case"afterblur":l=yi;break;case"click":if(2===i.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=_i;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Di;break;case Re:case De:case Ie:l=vi;break;case Oe:l=Ii;break;case"scroll":l=fi;break;case"wheel":l=Oi;break;case"copy":case"cut":case"paste":l=bi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ri}var u=0!=(4&e),h=!u&&"scroll"===t,d=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Ut(f,d))&&u.push(Ar(f,m,p)))),h)break;f=f.return}0<u.length&&(a=new l(a,c,null,i,n),s.push({event:a,listeners:u}))}}if(0==(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||0!=(16&e)||!(c=i.relatedTarget||i.fromElement)||!Qr(c)&&!c[qr])&&(l||a)&&(a=n.window===n?n:(a=n.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=i.relatedTarget||i.toElement)?Qr(c):null)&&(c!==(h=qt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=gi,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(u=Ri,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?a:tn(l),p=null==c?a:tn(c),(a=new u(m,f+"leave",l,i,n)).target=h,a.relatedTarget=p,m=null,Qr(n)===r&&((u=new u(d,f+"enter",c,i,n)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)t:{for(d=c,f=0,p=u=l;p;p=Mr(p))f++;for(p=0,m=d;m;m=Mr(m))p++;for(;0<f-p;)u=Mr(u),f--;for(;0<p-f;)d=Mr(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break t;u=Mr(u),d=Mr(d)}u=null}else u=null;null!==l&&Pr(s,a,l,u,!1),null!==c&&null!==h&&Pr(s,h,c,u,!0)}if("select"===(l=(a=r?tn(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yi;else if(Wi(a))if(qi)g=or;else{g=rr;var _=ir}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=nr);switch(g&&(g=g(t,r))?Gi(s,g,i,n):(_&&_(t,a,r),"focusout"===t&&(_=a._wrapperState)&&_.controlled&&"number"===a.type&&nt(a,"number",a.value)),_=r?tn(r):window,t){case"focusin":(Wi(_)||"true"===_.contentEditable)&&(mr=_,gr=r,_r=null);break;case"focusout":_r=gr=mr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,vr(s,i,n);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":vr(s,i,n)}var y;if(Fi)t:{switch(t){case"compositionstart":var v="onCompositionStart";break t;case"compositionend":v="onCompositionEnd";break t;case"compositionupdate":v="onCompositionUpdate";break t}v=void 0}else ji?Ni(t,i)&&(v="onCompositionEnd"):"keydown"===t&&229===i.keyCode&&(v="onCompositionStart");v&&(Bi&&"ko"!==i.locale&&(ji||"onCompositionStart"!==v?"onCompositionEnd"===v&&ji&&(y=ri()):(ei="value"in(ti=n)?ti.value:ti.textContent,ji=!0)),0<(_=Fr(r,v)).length&&(v=new xi(v,t,null,i,n),s.push({event:v,listeners:_}),y?v.data=y:null!==(y=Ui(i))&&(v.data=y))),(y=Pi?function(t,e){switch(t){case"compositionend":return Ui(e);case"keypress":return 32!==e.which?null:(Li=!0,zi);case"textInput":return(t=e.data)===zi&&Li?null:t;default:return null}}(t,i):function(t,e){if(ji)return"compositionend"===t||!Fi&&Ni(t,e)?(t=ri(),ii=ei=ti=null,ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bi&&"ko"!==e.locale?null:e.data;default:return null}}(t,i))&&(0<(r=Fr(r,"onBeforeInput")).length&&(n=new xi("onBeforeInput","beforeinput",null,i,n),s.push({event:n,listeners:r}),n.data=y))}Cr(s,e)}))}function Ar(t,e,i){return{instance:t,listener:e,currentTarget:i}}function Fr(t,e){for(var i=e+"Capture",r=[];null!==t;){var n=t,o=n.stateNode;5===n.tag&&null!==o&&(n=o,null!=(o=Ut(t,i))&&r.unshift(Ar(t,o,n)),null!=(o=Ut(t,e))&&r.push(Ar(t,o,n))),t=t.return}return r}function Mr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Pr(t,e,i,r,n){for(var o=e._reactName,s=[];null!==i&&i!==r;){var a=i,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,n?null!=(l=Ut(i,o))&&s.unshift(Ar(i,l,a)):n||null!=(l=Ut(i,o))&&s.push(Ar(i,l,a))),i=i.return}0!==s.length&&t.push({event:e,listeners:s})}function Br(){}var zr=null,Lr=null;function Nr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Ur(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var jr="function"==typeof setTimeout?setTimeout:void 0,Hr="function"==typeof clearTimeout?clearTimeout:void 0;function Wr(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function Gr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Vr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var i=t.data;if("$"===i||"$!"===i||"$?"===i){if(0===e)return t;e--}else"/$"===i&&e++}t=t.previousSibling}return null}var $r=0;var Zr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Zr,Yr="__reactProps$"+Zr,qr="__reactContainer$"+Zr,Kr="__reactEvents$"+Zr;function Qr(t){var e=t[Xr];if(e)return e;for(var i=t.parentNode;i;){if(e=i[qr]||i[Xr]){if(i=e.alternate,null!==e.child||null!==i&&null!==i.child)for(t=Vr(t);null!==t;){if(i=t[Xr])return i;t=Vr(t)}return e}i=(t=i).parentNode}return null}function Jr(t){return!(t=t[Xr]||t[qr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function tn(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function en(t){return t[Yr]||null}function rn(t){var e=t[Kr];return void 0===e&&(e=t[Kr]=new Set),e}var nn=[],on=-1;function sn(t){return{current:t}}function an(t){0>on||(t.current=nn[on],nn[on]=null,on--)}function ln(t,e){on++,nn[on]=t.current,t.current=e}var cn={},un=sn(cn),hn=sn(!1),dn=cn;function pn(t,e){var i=t.type.contextTypes;if(!i)return cn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var n,o={};for(n in i)o[n]=e[n];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function fn(t){return null!=(t=t.childContextTypes)}function mn(){an(hn),an(un)}function gn(t,e,i){if(un.current!==cn)throw Error(s(168));ln(un,e),ln(hn,i)}function _n(t,e,i){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return i;for(var o in r=r.getChildContext())if(!(o in t))throw Error(s(108,Z(e)||"Unknown",o));return n({},i,r)}function yn(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cn,dn=un.current,ln(un,t),ln(hn,hn.current),!0}function vn(t,e,i){var r=t.stateNode;if(!r)throw Error(s(169));i?(t=_n(t,e,dn),r.__reactInternalMemoizedMergedChildContext=t,an(hn),an(un),ln(un,t)):an(hn),ln(hn,i)}var bn=null,xn=null,wn=o.unstable_runWithPriority,Sn=o.unstable_scheduleCallback,kn=o.unstable_cancelCallback,Cn=o.unstable_shouldYield,Tn=o.unstable_requestPaint,En=o.unstable_now,Rn=o.unstable_getCurrentPriorityLevel,Dn=o.unstable_ImmediatePriority,In=o.unstable_UserBlockingPriority,On=o.unstable_NormalPriority,An=o.unstable_LowPriority,Fn=o.unstable_IdlePriority,Mn={},Pn=void 0!==Tn?Tn:function(){},Bn=null,zn=null,Ln=!1,Nn=En(),Un=1e4>Nn?En:function(){return En()-Nn};function jn(){switch(Rn()){case Dn:return 99;case In:return 98;case On:return 97;case An:return 96;case Fn:return 95;default:throw Error(s(332))}}function Hn(t){switch(t){case 99:return Dn;case 98:return In;case 97:return On;case 96:return An;case 95:return Fn;default:throw Error(s(332))}}function Wn(t,e){return t=Hn(t),wn(t,e)}function Gn(t,e,i){return t=Hn(t),Sn(t,e,i)}function Vn(){if(null!==zn){var t=zn;zn=null,kn(t)}$n()}function $n(){if(!Ln&&null!==Bn){Ln=!0;var t=0;try{var e=Bn;Wn(99,(function(){for(;t<e.length;t++){var i=e[t];do{i=i(!0)}while(null!==i)}})),Bn=null}catch(e){throw null!==Bn&&(Bn=Bn.slice(t+1)),Sn(Dn,Vn),e}finally{Ln=!1}}}var Zn=x.ReactCurrentBatchConfig;function Xn(t,e){if(t&&t.defaultProps){for(var i in e=n({},e),t=t.defaultProps)void 0===e[i]&&(e[i]=t[i]);return e}return e}var Yn=sn(null),qn=null,Kn=null,Qn=null;function Jn(){Qn=Kn=qn=null}function to(t){var e=Yn.current;an(Yn),t.type._context._currentValue=e}function eo(t,e){for(;null!==t;){var i=t.alternate;if((t.childLanes&e)===e){if(null===i||(i.childLanes&e)===e)break;i.childLanes|=e}else t.childLanes|=e,null!==i&&(i.childLanes|=e);t=t.return}}function io(t,e){qn=t,Qn=Kn=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!=(t.lanes&e)&&(Ms=!0),t.firstContext=null)}function ro(t,e){if(Qn!==t&&!1!==e&&0!==e)if("number"==typeof e&&1073741823!==e||(Qn=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Kn){if(null===qn)throw Error(s(308));Kn=e,qn.dependencies={lanes:0,firstContext:e,responders:null}}else Kn=Kn.next=e;return t._currentValue}var no=!1;function oo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function so(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ao(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function lo(t,e){if(null!==(t=t.updateQueue)){var i=(t=t.shared).pending;null===i?e.next=e:(e.next=i.next,i.next=e),t.pending=e}}function co(t,e){var i=t.updateQueue,r=t.alternate;if(null!==r&&i===(r=r.updateQueue)){var n=null,o=null;if(null!==(i=i.firstBaseUpdate)){do{var s={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===o?n=o=s:o=o.next=s,i=i.next}while(null!==i);null===o?n=o=e:o=o.next=e}else n=o=e;return i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=i)}null===(t=i.lastBaseUpdate)?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function uo(t,e,i,r){var o=t.updateQueue;no=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var c=l,u=c.next;c.next=null,null===a?s=u:a.next=u,a=c;var h=t.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=u:d.next=u,h.lastBaseUpdate=c)}}if(null!==s){for(d=o.baseState,a=0,h=u=c=null;;){l=s.lane;var p=s.eventTime;if((r&l)===l){null!==h&&(h=h.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var f=t,m=s;switch(l=e,p=i,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(p,d,l);break t}d=f;break t;case 3:f.flags=-4097&f.flags|64;case 0:if(null==(l="function"==typeof(f=m.payload)?f.call(p,d,l):f))break t;d=n({},d,l);break t;case 2:no=!0}}null!==s.callback&&(t.flags|=32,null===(l=o.effects)?o.effects=[s]:l.push(s))}else p={eventTime:p,lane:l,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===h?(u=h=p,c=d):h=h.next=p,a|=l;if(null===(s=s.next)){if(null===(l=o.shared.pending))break;s=l.next,l.next=null,o.lastBaseUpdate=l,o.shared.pending=null}}null===h&&(c=d),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=h,La|=a,t.lanes=a,t.memoizedState=d}}function ho(t,e,i){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],n=r.callback;if(null!==n){if(r.callback=null,r=i,"function"!=typeof n)throw Error(s(191,n));n.call(r)}}}var po=(new r.Component).refs;function fo(t,e,i,r){i=null==(i=i(r,e=t.memoizedState))?e:n({},e,i),t.memoizedState=i,0===t.lanes&&(t.updateQueue.baseState=i)}var mo={isMounted:function(t){return!!(t=t._reactInternals)&&qt(t)===t},enqueueSetState:function(t,e,i){t=t._reactInternals;var r=cl(),n=ul(t),o=ao(r,n);o.payload=e,null!=i&&(o.callback=i),lo(t,o),hl(t,n,r)},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var r=cl(),n=ul(t),o=ao(r,n);o.tag=1,o.payload=e,null!=i&&(o.callback=i),lo(t,o),hl(t,n,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=cl(),r=ul(t),n=ao(i,r);n.tag=2,null!=e&&(n.callback=e),lo(t,n),hl(t,r,i)}};function go(t,e,i,r,n,o,s){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!lr(i,r)||!lr(n,o))}function _o(t,e,i){var r=!1,n=cn,o=e.contextType;return"object"==typeof o&&null!==o?o=ro(o):(n=fn(e)?dn:un.current,o=(r=null!=(r=e.contextTypes))?pn(t,n):cn),e=new e(i,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=mo,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=o),e}function yo(t,e,i,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(i,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(i,r),e.state!==t&&mo.enqueueReplaceState(e,e.state,null)}function vo(t,e,i,r){var n=t.stateNode;n.props=i,n.state=t.memoizedState,n.refs=po,oo(t);var o=e.contextType;"object"==typeof o&&null!==o?n.context=ro(o):(o=fn(e)?dn:un.current,n.context=pn(t,o)),uo(t,i,n,r),n.state=t.memoizedState,"function"==typeof(o=e.getDerivedStateFromProps)&&(fo(t,e,o,i),n.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof n.getSnapshotBeforeUpdate||"function"!=typeof n.UNSAFE_componentWillMount&&"function"!=typeof n.componentWillMount||(e=n.state,"function"==typeof n.componentWillMount&&n.componentWillMount(),"function"==typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),e!==n.state&&mo.enqueueReplaceState(n,n.state,null),uo(t,i,n,r),n.state=t.memoizedState),"function"==typeof n.componentDidMount&&(t.flags|=4)}var bo=Array.isArray;function xo(t,e,i){if(null!==(t=i.ref)&&"function"!=typeof t&&"object"!=typeof t){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(s(309));var r=i.stateNode}if(!r)throw Error(s(147,t));var n=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===n?e.ref:((e=function(t){var e=r.refs;e===po&&(e=r.refs={}),null===t?delete e[n]:e[n]=t})._stringRef=n,e)}if("string"!=typeof t)throw Error(s(284));if(!i._owner)throw Error(s(290,t))}return t}function wo(t,e){if("textarea"!==t.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function So(t){function e(e,i){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i,i.nextEffect=null,i.flags=8}}function i(i,r){if(!t)return null;for(;null!==r;)e(i,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function n(t,e){return(t=Wl(t,e)).index=0,t.sibling=null,t}function o(e,i,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<i?(e.flags=2,i):r:(e.flags=2,i):i}function a(e){return t&&null===e.alternate&&(e.flags=2),e}function l(t,e,i,r){return null===e||6!==e.tag?((e=Zl(i,t.mode,r)).return=t,e):((e=n(e,i)).return=t,e)}function c(t,e,i,r){return null!==e&&e.elementType===i.type?((r=n(e,i.props)).ref=xo(t,e,i),r.return=t,r):((r=Gl(i.type,i.key,i.props,null,t.mode,r)).ref=xo(t,e,i),r.return=t,r)}function u(t,e,i,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==i.containerInfo||e.stateNode.implementation!==i.implementation?((e=Xl(i,t.mode,r)).return=t,e):((e=n(e,i.children||[])).return=t,e)}function h(t,e,i,r,o){return null===e||7!==e.tag?((e=Vl(i,t.mode,r,o)).return=t,e):((e=n(e,i)).return=t,e)}function d(t,e,i){if("string"==typeof e||"number"==typeof e)return(e=Zl(""+e,t.mode,i)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case w:return(i=Gl(e.type,e.key,e.props,null,t.mode,i)).ref=xo(t,null,e),i.return=t,i;case S:return(e=Xl(e,t.mode,i)).return=t,e}if(bo(e)||H(e))return(e=Vl(e,t.mode,i,null)).return=t,e;wo(t,e)}return null}function p(t,e,i,r){var n=null!==e?e.key:null;if("string"==typeof i||"number"==typeof i)return null!==n?null:l(t,e,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case w:return i.key===n?i.type===k?h(t,e,i.props.children,r,n):c(t,e,i,r):null;case S:return i.key===n?u(t,e,i,r):null}if(bo(i)||H(i))return null!==n?null:h(t,e,i,r,null);wo(t,i)}return null}function f(t,e,i,r,n){if("string"==typeof r||"number"==typeof r)return l(e,t=t.get(i)||null,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return t=t.get(null===r.key?i:r.key)||null,r.type===k?h(e,t,r.props.children,n,r.key):c(e,t,r,n);case S:return u(e,t=t.get(null===r.key?i:r.key)||null,r,n)}if(bo(r)||H(r))return h(e,t=t.get(i)||null,r,n,null);wo(e,r)}return null}function m(n,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var _=p(n,h,a[m],l);if(null===_){null===h&&(h=g);break}t&&h&&null===_.alternate&&e(n,h),s=o(_,s,m),null===u?c=_:u.sibling=_,u=_,h=g}if(m===a.length)return i(n,h),c;if(null===h){for(;m<a.length;m++)null!==(h=d(n,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return c}for(h=r(n,h);m<a.length;m++)null!==(g=f(h,n,m,a[m],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return t&&h.forEach((function(t){return e(n,t)})),c}function g(n,a,l,c){var u=H(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,_=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(_=m,m=null):_=m.sibling;var v=p(n,m,y.value,c);if(null===v){null===m&&(m=_);break}t&&m&&null===v.alternate&&e(n,m),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v,m=_}if(y.done)return i(n,m),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(n,y.value,c))&&(a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return u}for(m=r(n,m);!y.done;g++,y=l.next())null!==(y=f(m,n,g,y.value,c))&&(t&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return t&&m.forEach((function(t){return e(n,t)})),u}return function(t,r,o,l){var c="object"==typeof o&&null!==o&&o.type===k&&null===o.key;c&&(o=o.props.children);var u="object"==typeof o&&null!==o;if(u)switch(o.$$typeof){case w:t:{for(u=o.key,c=r;null!==c;){if(c.key===u){switch(c.tag){case 7:if(o.type===k){i(t,c.sibling),(r=n(c,o.props.children)).return=t,t=r;break t}break;default:if(c.elementType===o.type){i(t,c.sibling),(r=n(c,o.props)).ref=xo(t,c,o),r.return=t,t=r;break t}}i(t,c);break}e(t,c),c=c.sibling}o.type===k?((r=Vl(o.props.children,t.mode,l,o.key)).return=t,t=r):((l=Gl(o.type,o.key,o.props,null,t.mode,l)).ref=xo(t,r,o),l.return=t,t=l)}return a(t);case S:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){i(t,r.sibling),(r=n(r,o.children||[])).return=t,t=r;break t}i(t,r);break}e(t,r),r=r.sibling}(r=Xl(o,t.mode,l)).return=t,t=r}return a(t)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(i(t,r.sibling),(r=n(r,o)).return=t,t=r):(i(t,r),(r=Zl(o,t.mode,l)).return=t,t=r),a(t);if(bo(o))return m(t,r,o,l);if(H(o))return g(t,r,o,l);if(u&&wo(t,o),void 0===o&&!c)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,Z(t.type)||"Component"))}return i(t,r)}}var ko=So(!0),Co=So(!1),To={},Eo=sn(To),Ro=sn(To),Do=sn(To);function Io(t){if(t===To)throw Error(s(174));return t}function Oo(t,e){switch(ln(Do,e),ln(Ro,t),ln(Eo,To),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ft(null,"");break;default:e=ft(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}an(Eo),ln(Eo,e)}function Ao(){an(Eo),an(Ro),an(Do)}function Fo(t){Io(Do.current);var e=Io(Eo.current),i=ft(e,t.type);e!==i&&(ln(Ro,t),ln(Eo,i))}function Mo(t){Ro.current===t&&(an(Eo),an(Ro))}var Po=sn(0);function Bo(t){for(var e=t;null!==e;){if(13===e.tag){var i=e.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zo=null,Lo=null,No=!1;function Uo(t,e){var i=jl(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=e,i.return=t,i.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=i,t.lastEffect=i):t.firstEffect=t.lastEffect=i}function jo(t,e){switch(t.tag){case 5:var i=t.type;return null!==(e=1!==e.nodeType||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Ho(t){if(No){var e=Lo;if(e){var i=e;if(!jo(t,e)){if(!(e=Gr(i.nextSibling))||!jo(t,e))return t.flags=-1025&t.flags|2,No=!1,void(zo=t);Uo(zo,i)}zo=t,Lo=Gr(e.firstChild)}else t.flags=-1025&t.flags|2,No=!1,zo=t}}function Wo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;zo=t}function Go(t){if(t!==zo)return!1;if(!No)return Wo(t),No=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Ur(e,t.memoizedProps))for(e=Lo;e;)Uo(t,e),e=Gr(e.nextSibling);if(Wo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var i=t.data;if("/$"===i){if(0===e){Lo=Gr(t.nextSibling);break t}e--}else"$"!==i&&"$!"!==i&&"$?"!==i||e++}t=t.nextSibling}Lo=null}}else Lo=zo?Gr(t.stateNode.nextSibling):null;return!0}function Vo(){Lo=zo=null,No=!1}var $o=[];function Zo(){for(var t=0;t<$o.length;t++)$o[t]._workInProgressVersionPrimary=null;$o.length=0}var Xo=x.ReactCurrentDispatcher,Yo=x.ReactCurrentBatchConfig,qo=0,Ko=null,Qo=null,Jo=null,ts=!1,es=!1;function is(){throw Error(s(321))}function rs(t,e){if(null===e)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!sr(t[i],e[i]))return!1;return!0}function ns(t,e,i,r,n,o){if(qo=o,Ko=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xo.current=null===t||null===t.memoizedState?Is:Os,t=i(r,n),es){o=0;do{if(es=!1,!(25>o))throw Error(s(301));o+=1,Jo=Qo=null,e.updateQueue=null,Xo.current=As,t=i(r,n)}while(es)}if(Xo.current=Ds,e=null!==Qo&&null!==Qo.next,qo=0,Jo=Qo=Ko=null,ts=!1,e)throw Error(s(300));return t}function os(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Jo?Ko.memoizedState=Jo=t:Jo=Jo.next=t,Jo}function ss(){if(null===Qo){var t=Ko.alternate;t=null!==t?t.memoizedState:null}else t=Qo.next;var e=null===Jo?Ko.memoizedState:Jo.next;if(null!==e)Jo=e,Qo=t;else{if(null===t)throw Error(s(310));t={memoizedState:(Qo=t).memoizedState,baseState:Qo.baseState,baseQueue:Qo.baseQueue,queue:Qo.queue,next:null},null===Jo?Ko.memoizedState=Jo=t:Jo=Jo.next=t}return Jo}function as(t,e){return"function"==typeof e?e(t):e}function ls(t){var e=ss(),i=e.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=t;var r=Qo,n=r.baseQueue,o=i.pending;if(null!==o){if(null!==n){var a=n.next;n.next=o.next,o.next=a}r.baseQueue=n=o,i.pending=null}if(null!==n){n=n.next,r=r.baseState;var l=a=o=null,c=n;do{var u=c.lane;if((qo&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===t?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(a=l=h,o=r):l=l.next=h,Ko.lanes|=u,La|=u}c=c.next}while(null!==c&&c!==n);null===l?o=r:l.next=a,sr(r,e.memoizedState)||(Ms=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,i.lastRenderedState=r}return[e.memoizedState,i.dispatch]}function cs(t){var e=ss(),i=e.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=t;var r=i.dispatch,n=i.pending,o=e.memoizedState;if(null!==n){i.pending=null;var a=n=n.next;do{o=t(o,a.action),a=a.next}while(a!==n);sr(o,e.memoizedState)||(Ms=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),i.lastRenderedState=o}return[o,r]}function us(t,e,i){var r=e._getVersion;r=r(e._source);var n=e._workInProgressVersionPrimary;if(null!==n?t=n===r:(t=t.mutableReadLanes,(t=(qo&t)===t)&&(e._workInProgressVersionPrimary=r,$o.push(e))),t)return i(e._source);throw $o.push(e),Error(s(350))}function hs(t,e,i,r){var n=Ia;if(null===n)throw Error(s(349));var o=e._getVersion,a=o(e._source),l=Xo.current,c=l.useState((function(){return us(n,e,i)})),u=c[1],h=c[0];c=Jo;var d=t.memoizedState,p=d.refs,f=p.getSnapshot,m=d.source;d=d.subscribe;var g=Ko;return t.memoizedState={refs:p,source:e,subscribe:r},l.useEffect((function(){p.getSnapshot=i,p.setSnapshot=u;var t=o(e._source);if(!sr(a,t)){t=i(e._source),sr(h,t)||(u(t),t=ul(g),n.mutableReadLanes|=t&n.pendingLanes),t=n.mutableReadLanes,n.entangledLanes|=t;for(var r=n.entanglements,s=t;0<s;){var l=31-Ge(s),c=1<<l;r[l]|=t,s&=~c}}}),[i,e,r]),l.useEffect((function(){return r(e._source,(function(){var t=p.getSnapshot,i=p.setSnapshot;try{i(t(e._source));var r=ul(g);n.mutableReadLanes|=r&n.pendingLanes}catch(t){i((function(){throw t}))}}))}),[e,r]),sr(f,i)&&sr(m,e)&&sr(d,r)||((t={pending:null,dispatch:null,lastRenderedReducer:as,lastRenderedState:h}).dispatch=u=Rs.bind(null,Ko,t),c.queue=t,c.baseQueue=null,h=us(n,e,i),c.memoizedState=c.baseState=h),h}function ds(t,e,i){return hs(ss(),t,e,i)}function ps(t){var e=os();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:as,lastRenderedState:t}).dispatch=Rs.bind(null,Ko,t),[e.memoizedState,t]}function fs(t,e,i,r){return t={tag:t,create:e,destroy:i,deps:r,next:null},null===(e=Ko.updateQueue)?(e={lastEffect:null},Ko.updateQueue=e,e.lastEffect=t.next=t):null===(i=e.lastEffect)?e.lastEffect=t.next=t:(r=i.next,i.next=t,t.next=r,e.lastEffect=t),t}function ms(t){return t={current:t},os().memoizedState=t}function gs(){return ss().memoizedState}function _s(t,e,i,r){var n=os();Ko.flags|=t,n.memoizedState=fs(1|e,i,void 0,void 0===r?null:r)}function ys(t,e,i,r){var n=ss();r=void 0===r?null:r;var o=void 0;if(null!==Qo){var s=Qo.memoizedState;if(o=s.destroy,null!==r&&rs(r,s.deps))return void fs(e,i,o,r)}Ko.flags|=t,n.memoizedState=fs(1|e,i,o,r)}function vs(t,e){return _s(516,4,t,e)}function bs(t,e){return ys(516,4,t,e)}function xs(t,e){return ys(4,2,t,e)}function ws(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ss(t,e,i){return i=null!=i?i.concat([t]):null,ys(4,2,ws.bind(null,e,t),i)}function ks(){}function Cs(t,e){var i=ss();e=void 0===e?null:e;var r=i.memoizedState;return null!==r&&null!==e&&rs(e,r[1])?r[0]:(i.memoizedState=[t,e],t)}function Ts(t,e){var i=ss();e=void 0===e?null:e;var r=i.memoizedState;return null!==r&&null!==e&&rs(e,r[1])?r[0]:(t=t(),i.memoizedState=[t,e],t)}function Es(t,e){var i=jn();Wn(98>i?98:i,(function(){t(!0)})),Wn(97<i?97:i,(function(){var i=Yo.transition;Yo.transition=1;try{t(!1),e()}finally{Yo.transition=i}}))}function Rs(t,e,i){var r=cl(),n=ul(t),o={lane:n,action:i,eagerReducer:null,eagerState:null,next:null},s=e.pending;if(null===s?o.next=o:(o.next=s.next,s.next=o),e.pending=o,s=t.alternate,t===Ko||null!==s&&s===Ko)es=ts=!0;else{if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var a=e.lastRenderedState,l=s(a,i);if(o.eagerReducer=s,o.eagerState=l,sr(l,a))return}catch(t){}hl(t,n,r)}}var Ds={readContext:ro,useCallback:is,useContext:is,useEffect:is,useImperativeHandle:is,useLayoutEffect:is,useMemo:is,useReducer:is,useRef:is,useState:is,useDebugValue:is,useDeferredValue:is,useTransition:is,useMutableSource:is,useOpaqueIdentifier:is,unstable_isNewReconciler:!1},Is={readContext:ro,useCallback:function(t,e){return os().memoizedState=[t,void 0===e?null:e],t},useContext:ro,useEffect:vs,useImperativeHandle:function(t,e,i){return i=null!=i?i.concat([t]):null,_s(4,2,ws.bind(null,e,t),i)},useLayoutEffect:function(t,e){return _s(4,2,t,e)},useMemo:function(t,e){var i=os();return e=void 0===e?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var r=os();return e=void 0!==i?i(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Rs.bind(null,Ko,t),[r.memoizedState,t]},useRef:ms,useState:ps,useDebugValue:ks,useDeferredValue:function(t){var e=ps(t),i=e[0],r=e[1];return vs((function(){var e=Yo.transition;Yo.transition=1;try{r(t)}finally{Yo.transition=e}}),[t]),i},useTransition:function(){var t=ps(!1),e=t[0];return ms(t=Es.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,i){var r=os();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:i},hs(r,t,e,i)},useOpaqueIdentifier:function(){if(No){var t=!1,e=function(t){return{$$typeof:P,toString:t,valueOf:t}}((function(){throw t||(t=!0,i("r:"+($r++).toString(36))),Error(s(355))})),i=ps(e)[1];return 0==(2&Ko.mode)&&(Ko.flags|=516,fs(5,(function(){i("r:"+($r++).toString(36))}),void 0,null)),e}return ps(e="r:"+($r++).toString(36)),e},unstable_isNewReconciler:!1},Os={readContext:ro,useCallback:Cs,useContext:ro,useEffect:bs,useImperativeHandle:Ss,useLayoutEffect:xs,useMemo:Ts,useReducer:ls,useRef:gs,useState:function(){return ls(as)},useDebugValue:ks,useDeferredValue:function(t){var e=ls(as),i=e[0],r=e[1];return bs((function(){var e=Yo.transition;Yo.transition=1;try{r(t)}finally{Yo.transition=e}}),[t]),i},useTransition:function(){var t=ls(as)[0];return[gs().current,t]},useMutableSource:ds,useOpaqueIdentifier:function(){return ls(as)[0]},unstable_isNewReconciler:!1},As={readContext:ro,useCallback:Cs,useContext:ro,useEffect:bs,useImperativeHandle:Ss,useLayoutEffect:xs,useMemo:Ts,useReducer:cs,useRef:gs,useState:function(){return cs(as)},useDebugValue:ks,useDeferredValue:function(t){var e=cs(as),i=e[0],r=e[1];return bs((function(){var e=Yo.transition;Yo.transition=1;try{r(t)}finally{Yo.transition=e}}),[t]),i},useTransition:function(){var t=cs(as)[0];return[gs().current,t]},useMutableSource:ds,useOpaqueIdentifier:function(){return cs(as)[0]},unstable_isNewReconciler:!1},Fs=x.ReactCurrentOwner,Ms=!1;function Ps(t,e,i,r){e.child=null===t?Co(e,null,i,r):ko(e,t.child,i,r)}function Bs(t,e,i,r,n){i=i.render;var o=e.ref;return io(e,n),r=ns(t,e,i,r,o,n),null===t||Ms?(e.flags|=1,Ps(t,e,r,n),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~n,ia(t,e,n))}function zs(t,e,i,r,n,o){if(null===t){var s=i.type;return"function"!=typeof s||Hl(s)||void 0!==s.defaultProps||null!==i.compare||void 0!==i.defaultProps?((t=Gl(i.type,null,r,e,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Ls(t,e,s,r,n,o))}return s=t.child,0==(n&o)&&(n=s.memoizedProps,(i=null!==(i=i.compare)?i:lr)(n,r)&&t.ref===e.ref)?ia(t,e,o):(e.flags|=1,(t=Wl(s,r)).ref=e.ref,t.return=e,e.child=t)}function Ls(t,e,i,r,n,o){if(null!==t&&lr(t.memoizedProps,r)&&t.ref===e.ref){if(Ms=!1,0==(o&n))return e.lanes=t.lanes,ia(t,e,o);0!=(16384&t.flags)&&(Ms=!0)}return js(t,e,i,r,o)}function Ns(t,e,i){var r=e.pendingProps,n=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&e.mode))e.memoizedState={baseLanes:0},vl(e,i);else{if(0==(1073741824&i))return t=null!==o?o.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},vl(e,t),null;e.memoizedState={baseLanes:0},vl(e,null!==o?o.baseLanes:i)}else null!==o?(r=o.baseLanes|i,e.memoizedState=null):r=i,vl(e,r);return Ps(t,e,n,i),e.child}function Us(t,e){var i=e.ref;(null===t&&null!==i||null!==t&&t.ref!==i)&&(e.flags|=128)}function js(t,e,i,r,n){var o=fn(i)?dn:un.current;return o=pn(e,o),io(e,n),i=ns(t,e,i,r,o,n),null===t||Ms?(e.flags|=1,Ps(t,e,i,n),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~n,ia(t,e,n))}function Hs(t,e,i,r,n){if(fn(i)){var o=!0;yn(e)}else o=!1;if(io(e,n),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),_o(e,i,r),vo(e,i,r,n),r=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=i.contextType;"object"==typeof c&&null!==c?c=ro(c):c=pn(e,c=fn(i)?dn:un.current);var u=i.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||l!==c)&&yo(e,s,r,c),no=!1;var d=e.memoizedState;s.state=d,uo(e,r,s,n),l=e.memoizedState,a!==r||d!==l||hn.current||no?("function"==typeof u&&(fo(e,i,u,r),l=e.memoizedState),(a=no||go(e,i,a,r,d,l,c))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(e.flags|=4)):("function"==typeof s.componentDidMount&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"==typeof s.componentDidMount&&(e.flags|=4),r=!1)}else{s=e.stateNode,so(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Xn(e.type,a),s.props=c,h=e.pendingProps,d=s.context,"object"==typeof(l=i.contextType)&&null!==l?l=ro(l):l=pn(e,l=fn(i)?dn:un.current);var p=i.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==h||d!==l)&&yo(e,s,r,l),no=!1,d=e.memoizedState,s.state=d,uo(e,r,s,n);var f=e.memoizedState;a!==h||d!==f||hn.current||no?("function"==typeof p&&(fo(e,i,p,r),f=e.memoizedState),(c=no||go(e,i,c,r,d,f,l))?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof s.componentDidUpdate&&(e.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!=typeof s.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!=typeof s.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),r=!1)}return Ws(t,e,i,r,o,n)}function Ws(t,e,i,r,n,o){Us(t,e);var s=0!=(64&e.flags);if(!r&&!s)return n&&vn(e,i,!1),ia(t,e,o);r=e.stateNode,Fs.current=e;var a=s&&"function"!=typeof i.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&s?(e.child=ko(e,t.child,null,o),e.child=ko(e,null,a,o)):Ps(t,e,a,o),e.memoizedState=r.state,n&&vn(e,i,!0),e.child}function Gs(t){var e=t.stateNode;e.pendingContext?gn(0,e.pendingContext,e.pendingContext!==e.context):e.context&&gn(0,e.context,!1),Oo(t,e.containerInfo)}var Vs,$s,Zs,Xs={dehydrated:null,retryLane:0};function Ys(t,e,i){var r,n=e.pendingProps,o=Po.current,s=!1;return(r=0!=(64&e.flags))||(r=(null===t||null!==t.memoizedState)&&0!=(2&o)),r?(s=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===n.fallback||!0===n.unstable_avoidThisFallback||(o|=1),ln(Po,1&o),null===t?(void 0!==n.fallback&&Ho(e),t=n.children,o=n.fallback,s?(t=qs(e,t,o,i),e.child.memoizedState={baseLanes:i},e.memoizedState=Xs,t):"number"==typeof n.unstable_expectedLoadTime?(t=qs(e,t,o,i),e.child.memoizedState={baseLanes:i},e.memoizedState=Xs,e.lanes=33554432,t):((i=$l({mode:"visible",children:t},e.mode,i,null)).return=e,e.child=i)):(t.memoizedState,s?(n=Qs(t,e,n.children,n.fallback,i),s=e.child,o=t.child.memoizedState,s.memoizedState=null===o?{baseLanes:i}:{baseLanes:o.baseLanes|i},s.childLanes=t.childLanes&~i,e.memoizedState=Xs,n):(i=Ks(t,e,n.children,i),e.memoizedState=null,i))}function qs(t,e,i,r){var n=t.mode,o=t.child;return e={mode:"hidden",children:e},0==(2&n)&&null!==o?(o.childLanes=0,o.pendingProps=e):o=$l(e,n,0,null),i=Vl(i,n,r,null),o.return=t,i.return=t,o.sibling=i,t.child=o,i}function Ks(t,e,i,r){var n=t.child;return t=n.sibling,i=Wl(n,{mode:"visible",children:i}),0==(2&e.mode)&&(i.lanes=r),i.return=e,i.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=i}function Qs(t,e,i,r,n){var o=e.mode,s=t.child;t=s.sibling;var a={mode:"hidden",children:i};return 0==(2&o)&&e.child!==s?((i=e.child).childLanes=0,i.pendingProps=a,null!==(s=i.lastEffect)?(e.firstEffect=i.firstEffect,e.lastEffect=s,s.nextEffect=null):e.firstEffect=e.lastEffect=null):i=Wl(s,a),null!==t?r=Wl(t,r):(r=Vl(r,o,n,null)).flags|=2,r.return=e,i.return=e,i.sibling=r,e.child=i,r}function Js(t,e){t.lanes|=e;var i=t.alternate;null!==i&&(i.lanes|=e),eo(t.return,e)}function ta(t,e,i,r,n,o){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n,lastEffect:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=i,s.tailMode=n,s.lastEffect=o)}function ea(t,e,i){var r=e.pendingProps,n=r.revealOrder,o=r.tail;if(Ps(t,e,r.children,i),0!=(2&(r=Po.current)))r=1&r|2,e.flags|=64;else{if(null!==t&&0!=(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Js(t,i);else if(19===t.tag)Js(t,i);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ln(Po,r),0==(2&e.mode))e.memoizedState=null;else switch(n){case"forwards":for(i=e.child,n=null;null!==i;)null!==(t=i.alternate)&&null===Bo(t)&&(n=i),i=i.sibling;null===(i=n)?(n=e.child,e.child=null):(n=i.sibling,i.sibling=null),ta(e,!1,n,i,o,e.lastEffect);break;case"backwards":for(i=null,n=e.child,e.child=null;null!==n;){if(null!==(t=n.alternate)&&null===Bo(t)){e.child=n;break}t=n.sibling,n.sibling=i,i=n,n=t}ta(e,!0,i,null,o,e.lastEffect);break;case"together":ta(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function ia(t,e,i){if(null!==t&&(e.dependencies=t.dependencies),La|=e.lanes,0!=(i&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(i=Wl(t=e.child,t.pendingProps),e.child=i,i.return=e;null!==t.sibling;)t=t.sibling,(i=i.sibling=Wl(t,t.pendingProps)).return=e;i.sibling=null}return e.child}return null}function ra(t,e){if(!No)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;null!==e;)null!==e.alternate&&(i=e),e=e.sibling;null===i?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var r=null;null!==i;)null!==i.alternate&&(r=i),i=i.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function na(t,e,i){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return fn(e.type)&&mn(),null;case 3:return Ao(),an(hn),an(un),Zo(),(r=e.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(Go(e)?e.flags|=4:r.hydrate||(e.flags|=256)),null;case 5:Mo(e);var o=Io(Do.current);if(i=e.type,null!==t&&null!=e.stateNode)$s(t,e,i,r),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(null===e.stateNode)throw Error(s(166));return null}if(t=Io(Eo.current),Go(e)){r=e.stateNode,i=e.type;var a=e.memoizedProps;switch(r[Xr]=e,r[Yr]=a,i){case"dialog":Tr("cancel",r),Tr("close",r);break;case"iframe":case"object":case"embed":Tr("load",r);break;case"video":case"audio":for(t=0;t<wr.length;t++)Tr(wr[t],r);break;case"source":Tr("error",r);break;case"img":case"image":case"link":Tr("error",r),Tr("load",r);break;case"details":Tr("toggle",r);break;case"input":tt(r,a),Tr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Tr("invalid",r);break;case"textarea":lt(r,a),Tr("invalid",r)}for(var c in kt(i,a),t=null,a)a.hasOwnProperty(c)&&(o=a[c],"children"===c?"string"==typeof o?r.textContent!==o&&(t=["children",o]):"number"==typeof o&&r.textContent!==""+o&&(t=["children",""+o]):l.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Tr("scroll",r));switch(i){case"input":q(r),rt(r,a,!0);break;case"textarea":q(r),ut(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Br)}r=t,e.updateQueue=r,null!==r&&(e.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,t===ht&&(t=pt(i)),t===ht?"script"===i?((t=c.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof r.is?t=c.createElement(i,{is:r.is}):(t=c.createElement(i),"select"===i&&(c=t,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):t=c.createElementNS(t,i),t[Xr]=e,t[Yr]=r,Vs(t,e),e.stateNode=t,c=Ct(i,r),i){case"dialog":Tr("cancel",t),Tr("close",t),o=r;break;case"iframe":case"object":case"embed":Tr("load",t),o=r;break;case"video":case"audio":for(o=0;o<wr.length;o++)Tr(wr[o],t);o=r;break;case"source":Tr("error",t),o=r;break;case"img":case"image":case"link":Tr("error",t),Tr("load",t),o=r;break;case"details":Tr("toggle",t),o=r;break;case"input":tt(t,r),o=J(t,r),Tr("invalid",t);break;case"option":o=ot(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=n({},r,{value:void 0}),Tr("invalid",t);break;case"textarea":lt(t,r),o=at(t,r),Tr("invalid",t);break;default:o=r}kt(i,o);var u=o;for(a in u)if(u.hasOwnProperty(a)){var h=u[a];"style"===a?wt(t,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&_t(t,h):"children"===a?"string"==typeof h?("textarea"!==i||""!==h)&&yt(t,h):"number"==typeof h&&yt(t,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Tr("scroll",t):null!=h&&b(t,a,h,c))}switch(i){case"input":q(t),rt(t,r,!1);break;case"textarea":q(t),ut(t);break;case"option":null!=r.value&&t.setAttribute("value",""+X(r.value));break;case"select":t.multiple=!!r.multiple,null!=(a=r.value)?st(t,!!r.multiple,a,!1):null!=r.defaultValue&&st(t,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof o.onClick&&(t.onclick=Br)}Nr(i,r)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)Zs(0,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(s(166));i=Io(Do.current),Io(Eo.current),Go(e)?(r=e.stateNode,i=e.memoizedProps,r[Xr]=e,r.nodeValue!==i&&(e.flags|=4)):((r=(9===i.nodeType?i:i.ownerDocument).createTextNode(r))[Xr]=e,e.stateNode=r)}return null;case 13:return an(Po),r=e.memoizedState,0!=(64&e.flags)?(e.lanes=i,e):(r=null!==r,i=!1,null===t?void 0!==e.memoizedProps.fallback&&Go(e):i=null!==t.memoizedState,r&&!i&&0!=(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(1&Po.current)?0===Pa&&(Pa=3):(0!==Pa&&3!==Pa||(Pa=4),null===Ia||0==(134217727&La)&&0==(134217727&Na)||ml(Ia,Aa))),(r||i)&&(e.flags|=4),null);case 4:return Ao(),null===t&&Rr(e.stateNode.containerInfo),null;case 10:return to(e),null;case 17:return fn(e.type)&&mn(),null;case 19:if(an(Po),null===(r=e.memoizedState))return null;if(a=0!=(64&e.flags),null===(c=r.rendering))if(a)ra(r,!1);else{if(0!==Pa||null!==t&&0!=(64&t.flags))for(t=e.child;null!==t;){if(null!==(c=Bo(t))){for(e.flags|=64,ra(r,!1),null!==(a=c.updateQueue)&&(e.updateQueue=a,e.flags|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=i,i=e.child;null!==i;)t=r,(a=i).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(c=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,t=c.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return ln(Po,1&Po.current|2),e.child}t=t.sibling}null!==r.tail&&Un()>Wa&&(e.flags|=64,a=!0,ra(r,!1),e.lanes=33554432)}else{if(!a)if(null!==(t=Bo(c))){if(e.flags|=64,a=!0,null!==(i=t.updateQueue)&&(e.updateQueue=i,e.flags|=4),ra(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!No)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*Un()-r.renderingStartTime>Wa&&1073741824!==i&&(e.flags|=64,a=!0,ra(r,!1),e.lanes=33554432);r.isBackwards?(c.sibling=e.child,e.child=c):(null!==(i=r.last)?i.sibling=c:e.child=c,r.last=c)}return null!==r.tail?(i=r.tail,r.rendering=i,r.tail=i.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Un(),i.sibling=null,e=Po.current,ln(Po,a?1&e|2:1&e),i):null;case 23:case 24:return bl(),null!==t&&null!==t.memoizedState!=(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(e.flags|=4),null}throw Error(s(156,e.tag))}function oa(t){switch(t.tag){case 1:fn(t.type)&&mn();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Ao(),an(hn),an(un),Zo(),0!=(64&(e=t.flags)))throw Error(s(285));return t.flags=-4097&e|64,t;case 5:return Mo(t),null;case 13:return an(Po),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return an(Po),null;case 4:return Ao(),null;case 10:return to(t),null;case 23:case 24:return bl(),null;default:return null}}function sa(t,e){try{var i="",r=e;do{i+=$(r),r=r.return}while(r);var n=i}catch(t){n="\nError generating stack: "+t.message+"\n"+t.stack}return{value:t,source:e,stack:n}}function aa(t,e){try{console.error(e.value)}catch(t){setTimeout((function(){throw t}))}}Vs=function(t,e){for(var i=e.child;null!==i;){if(5===i.tag||6===i.tag)t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},$s=function(t,e,i,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Io(Eo.current);var s,a=null;switch(i){case"input":o=J(t,o),r=J(t,r),a=[];break;case"option":o=ot(t,o),r=ot(t,r),a=[];break;case"select":o=n({},o,{value:void 0}),r=n({},r,{value:void 0}),a=[];break;case"textarea":o=at(t,o),r=at(t,r),a=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(t.onclick=Br)}for(h in kt(i,r),i=null,o)if(!r.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var c=o[h];for(s in c)c.hasOwnProperty(s)&&(i||(i={}),i[s]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var u=r[h];if(c=null!=o?o[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(null!=u||null!=c))if("style"===h)if(c){for(s in c)!c.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(i||(i={}),i[s]="");for(s in u)u.hasOwnProperty(s)&&c[s]!==u[s]&&(i||(i={}),i[s]=u[s])}else i||(a||(a=[]),a.push(h,i)),i=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(a=a||[]).push(h,u)):"children"===h?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Tr("scroll",t),a||c===u||(a=[])):"object"==typeof u&&null!==u&&u.$$typeof===P?u.toString():(a=a||[]).push(h,u))}i&&(a=a||[]).push("style",i);var h=a;(e.updateQueue=h)&&(e.flags|=4)}},Zs=function(t,e,i,r){i!==r&&(e.flags|=4)};var la="function"==typeof WeakMap?WeakMap:Map;function ca(t,e,i){(i=ao(-1,i)).tag=3,i.payload={element:null};var r=e.value;return i.callback=function(){Za||(Za=!0,Xa=r),aa(0,e)},i}function ua(t,e,i){(i=ao(-1,i)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var n=e.value;i.payload=function(){return aa(0,e),r(n)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(i.callback=function(){"function"!=typeof r&&(null===Ya?Ya=new Set([this]):Ya.add(this),aa(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),i}var ha="function"==typeof WeakSet?WeakSet:Set;function da(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){zl(t,e)}else e.current=null}function pa(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.flags&&null!==t){var i=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?i:Xn(e.type,i),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&Wr(e.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(s(163))}function fa(t,e,i){switch(i.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=i.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3==(3&t.tag)){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=i.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var n=t;r=n.next,0!=(4&(n=n.tag))&&0!=(1&n)&&(Ml(i,t),Fl(i,t)),t=r}while(t!==e)}return;case 1:return t=i.stateNode,4&i.flags&&(null===e?t.componentDidMount():(r=i.elementType===i.type?e.memoizedProps:Xn(i.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=i.updateQueue)&&ho(i,e,t));case 3:if(null!==(e=i.updateQueue)){if(t=null,null!==i.child)switch(i.child.tag){case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}ho(i,e,t)}return;case 5:return t=i.stateNode,void(null===e&&4&i.flags&&Nr(i.type,i.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===i.memoizedState&&(i=i.alternate,null!==i&&(i=i.memoizedState,null!==i&&(i=i.dehydrated,null!==i&&we(i)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(s(163))}function ma(t,e){for(var i=t;;){if(5===i.tag){var r=i.stateNode;if(e)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=i.stateNode;var n=i.memoizedProps.style;n=null!=n&&n.hasOwnProperty("display")?n.display:null,r.style.display=xt("display",n)}}else if(6===i.tag)i.stateNode.nodeValue=e?"":i.memoizedProps;else if((23!==i.tag&&24!==i.tag||null===i.memoizedState||i===t)&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ga(t,e){if(xn&&"function"==typeof xn.onCommitFiberUnmount)try{xn.onCommitFiberUnmount(bn,e)}catch(t){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var i=t=t.next;do{var r=i,n=r.destroy;if(r=r.tag,void 0!==n)if(0!=(4&r))Ml(e,i);else{r=e;try{n()}catch(t){zl(r,t)}}i=i.next}while(i!==t)}break;case 1:if(da(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){zl(e,t)}break;case 5:da(e);break;case 4:wa(t,e)}}function _a(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function ya(t){return 5===t.tag||3===t.tag||4===t.tag}function va(t){t:{for(var e=t.return;null!==e;){if(ya(e))break t;e=e.return}throw Error(s(160))}var i=e;switch(e=i.stateNode,i.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(s(161))}16&i.flags&&(yt(e,""),i.flags&=-17);t:e:for(i=t;;){for(;null===i.sibling;){if(null===i.return||ya(i.return)){i=null;break t}i=i.return}for(i.sibling.return=i.return,i=i.sibling;5!==i.tag&&6!==i.tag&&18!==i.tag;){if(2&i.flags)continue e;if(null===i.child||4===i.tag)continue e;i.child.return=i,i=i.child}if(!(2&i.flags)){i=i.stateNode;break t}}r?ba(t,i,e):xa(t,i,e)}function ba(t,e,i){var r=t.tag,n=5===r||6===r;if(n)t=n?t.stateNode:t.stateNode.instance,e?8===i.nodeType?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(8===i.nodeType?(e=i.parentNode).insertBefore(t,i):(e=i).appendChild(t),null!=(i=i._reactRootContainer)||null!==e.onclick||(e.onclick=Br));else if(4!==r&&null!==(t=t.child))for(ba(t,e,i),t=t.sibling;null!==t;)ba(t,e,i),t=t.sibling}function xa(t,e,i){var r=t.tag,n=5===r||6===r;if(n)t=n?t.stateNode:t.stateNode.instance,e?i.insertBefore(t,e):i.appendChild(t);else if(4!==r&&null!==(t=t.child))for(xa(t,e,i),t=t.sibling;null!==t;)xa(t,e,i),t=t.sibling}function wa(t,e){for(var i,r,n=e,o=!1;;){if(!o){o=n.return;t:for(;;){if(null===o)throw Error(s(160));switch(i=o.stateNode,o.tag){case 5:r=!1;break t;case 3:case 4:i=i.containerInfo,r=!0;break t}o=o.return}o=!0}if(5===n.tag||6===n.tag){t:for(var a=t,l=n,c=l;;)if(ga(a,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break t;for(;null===c.sibling;){if(null===c.return||c.return===l)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(a=i,l=n.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):i.removeChild(n.stateNode)}else if(4===n.tag){if(null!==n.child){i=n.stateNode.containerInfo,r=!0,n.child.return=n,n=n.child;continue}}else if(ga(t,n),null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;4===(n=n.return).tag&&(o=!1)}n.sibling.return=n.return,n=n.sibling}}function Sa(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var i=e.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{3==(3&r.tag)&&(t=r.destroy,r.destroy=void 0,void 0!==t&&t()),r=r.next}while(r!==i)}return;case 1:return;case 5:if(null!=(i=e.stateNode)){r=e.memoizedProps;var n=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(i[Yr]=r,"input"===t&&"radio"===r.type&&null!=r.name&&et(i,r),Ct(t,n),e=Ct(t,r),n=0;n<o.length;n+=2){var a=o[n],l=o[n+1];"style"===a?wt(i,l):"dangerouslySetInnerHTML"===a?_t(i,l):"children"===a?yt(i,l):b(i,a,l,e)}switch(t){case"input":it(i,r);break;case"textarea":ct(i,r);break;case"select":t=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?st(i,!!r.multiple,o,!1):t!==!!r.multiple&&(null!=r.defaultValue?st(i,!!r.multiple,r.defaultValue,!0):st(i,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(s(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((i=e.stateNode).hydrate&&(i.hydrate=!1,we(i.containerInfo)));case 12:return;case 13:return null!==e.memoizedState&&(Ha=Un(),ma(e.child,!0)),void ka(e);case 19:return void ka(e);case 17:return;case 23:case 24:return void ma(e,null!==e.memoizedState)}throw Error(s(163))}function ka(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var i=t.stateNode;null===i&&(i=t.stateNode=new ha),e.forEach((function(e){var r=Nl.bind(null,t,e);i.has(e)||(i.add(e),e.then(r,r))}))}}function Ca(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var Ta=Math.ceil,Ea=x.ReactCurrentDispatcher,Ra=x.ReactCurrentOwner,Da=0,Ia=null,Oa=null,Aa=0,Fa=0,Ma=sn(0),Pa=0,Ba=null,za=0,La=0,Na=0,Ua=0,ja=null,Ha=0,Wa=1/0;function Ga(){Wa=Un()+500}var Va,$a=null,Za=!1,Xa=null,Ya=null,qa=!1,Ka=null,Qa=90,Ja=[],tl=[],el=null,il=0,rl=null,nl=-1,ol=0,sl=0,al=null,ll=!1;function cl(){return 0!=(48&Da)?Un():-1!==nl?nl:nl=Un()}function ul(t){if(0==(2&(t=t.mode)))return 1;if(0==(4&t))return 99===jn()?1:2;if(0===ol&&(ol=za),0!==Zn.transition){0!==sl&&(sl=null!==ja?ja.pendingLanes:0),t=ol;var e=4186112&~sl;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=jn(),0!=(4&Da)&&98===t?t=Ue(12,ol):t=Ue(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),ol),t}function hl(t,e,i){if(50<il)throw il=0,rl=null,Error(s(185));if(null===(t=dl(t,e)))return null;We(t,e,i),t===Ia&&(Na|=e,4===Pa&&ml(t,Aa));var r=jn();1===e?0!=(8&Da)&&0==(48&Da)?gl(t):(pl(t,i),0===Da&&(Ga(),Vn())):(0==(4&Da)||98!==r&&99!==r||(null===el?el=new Set([t]):el.add(t)),pl(t,i)),ja=t}function dl(t,e){t.lanes|=e;var i=t.alternate;for(null!==i&&(i.lanes|=e),i=t,t=t.return;null!==t;)t.childLanes|=e,null!==(i=t.alternate)&&(i.childLanes|=e),i=t,t=t.return;return 3===i.tag?i.stateNode:null}function pl(t,e){for(var i=t.callbackNode,r=t.suspendedLanes,n=t.pingedLanes,o=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-Ge(a),c=1<<l,u=o[l];if(-1===u){if(0==(c&r)||0!=(c&n)){u=e,ze(c);var h=Be;o[l]=10<=h?u+250:6<=h?u+5e3:-1}}else u<=e&&(t.expiredLanes|=c);a&=~c}if(r=Le(t,t===Ia?Aa:0),e=Be,0===r)null!==i&&(i!==Mn&&kn(i),t.callbackNode=null,t.callbackPriority=0);else{if(null!==i){if(t.callbackPriority===e)return;i!==Mn&&kn(i)}15===e?(i=gl.bind(null,t),null===Bn?(Bn=[i],zn=Sn(Dn,$n)):Bn.push(i),i=Mn):14===e?i=Gn(99,gl.bind(null,t)):i=Gn(i=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,t))}}(e),fl.bind(null,t)),t.callbackPriority=e,t.callbackNode=i}}function fl(t){if(nl=-1,sl=ol=0,0!=(48&Da))throw Error(s(327));var e=t.callbackNode;if(Al()&&t.callbackNode!==e)return null;var i=Le(t,t===Ia?Aa:0);if(0===i)return null;var r=i,n=Da;Da|=16;var o=Sl();for(Ia===t&&Aa===r||(Ga(),xl(t,r));;)try{Tl();break}catch(e){wl(t,e)}if(Jn(),Ea.current=o,Da=n,null!==Oa?r=0:(Ia=null,Aa=0,r=Pa),0!=(za&Na))xl(t,0);else if(0!==r){if(2===r&&(Da|=64,t.hydrate&&(t.hydrate=!1,Wr(t.containerInfo)),0!==(i=Ne(t))&&(r=kl(t,i))),1===r)throw e=Ba,xl(t,0),ml(t,i),pl(t,Un()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=i,r){case 0:case 1:throw Error(s(345));case 2:Dl(t);break;case 3:if(ml(t,i),(62914560&i)===i&&10<(r=Ha+500-Un())){if(0!==Le(t,0))break;if(((n=t.suspendedLanes)&i)!==i){cl(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=jr(Dl.bind(null,t),r);break}Dl(t);break;case 4:if(ml(t,i),(4186112&i)===i)break;for(r=t.eventTimes,n=-1;0<i;){var a=31-Ge(i);o=1<<a,(a=r[a])>n&&(n=a),i&=~o}if(i=n,10<(i=(120>(i=Un()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ta(i/1960))-i)){t.timeoutHandle=jr(Dl.bind(null,t),i);break}Dl(t);break;case 5:Dl(t);break;default:throw Error(s(329))}}return pl(t,Un()),t.callbackNode===e?fl.bind(null,t):null}function ml(t,e){for(e&=~Ua,e&=~Na,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-Ge(e),r=1<<i;t[i]=-1,e&=~r}}function gl(t){if(0!=(48&Da))throw Error(s(327));if(Al(),t===Ia&&0!=(t.expiredLanes&Aa)){var e=Aa,i=kl(t,e);0!=(za&Na)&&(i=kl(t,e=Le(t,e)))}else i=kl(t,e=Le(t,0));if(0!==t.tag&&2===i&&(Da|=64,t.hydrate&&(t.hydrate=!1,Wr(t.containerInfo)),0!==(e=Ne(t))&&(i=kl(t,e))),1===i)throw i=Ba,xl(t,0),ml(t,e),pl(t,Un()),i;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Dl(t),pl(t,Un()),null}function _l(t,e){var i=Da;Da|=1;try{return t(e)}finally{0===(Da=i)&&(Ga(),Vn())}}function yl(t,e){var i=Da;Da&=-2,Da|=8;try{return t(e)}finally{0===(Da=i)&&(Ga(),Vn())}}function vl(t,e){ln(Ma,Fa),Fa|=e,za|=e}function bl(){Fa=Ma.current,an(Ma)}function xl(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(-1!==i&&(t.timeoutHandle=-1,Hr(i)),null!==Oa)for(i=Oa.return;null!==i;){var r=i;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&mn();break;case 3:Ao(),an(hn),an(un),Zo();break;case 5:Mo(r);break;case 4:Ao();break;case 13:case 19:an(Po);break;case 10:to(r);break;case 23:case 24:bl()}i=i.return}Ia=t,Oa=Wl(t.current,null),Aa=Fa=za=e,Pa=0,Ba=null,Ua=Na=La=0}function wl(t,e){for(;;){var i=Oa;try{if(Jn(),Xo.current=Ds,ts){for(var r=Ko.memoizedState;null!==r;){var n=r.queue;null!==n&&(n.pending=null),r=r.next}ts=!1}if(qo=0,Jo=Qo=Ko=null,es=!1,Ra.current=null,null===i||null===i.return){Pa=1,Ba=e,Oa=null;break}t:{var o=t,s=i.return,a=i,l=e;if(e=Aa,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l;if(0==(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!=(1&Po.current),d=s;do{var p;if(p=13===d.tag){var f=d.memoizedState;if(null!==f)p=null!==f.dehydrated;else{var m=d.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(p){var g=d.updateQueue;if(null===g){var _=new Set;_.add(c),d.updateQueue=_}else g.add(c);if(0==(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var y=ao(-1,1);y.tag=2,lo(a,y)}a.lanes|=1;break t}l=void 0,a=e;var v=o.pingCache;if(null===v?(v=o.pingCache=new la,l=new Set,v.set(c,l)):void 0===(l=v.get(c))&&(l=new Set,v.set(c,l)),!l.has(a)){l.add(a);var b=Ll.bind(null,o,c,a);c.then(b,b)}d.flags|=4096,d.lanes=e;break t}d=d.return}while(null!==d);l=Error((Z(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Pa&&(Pa=2),l=sa(l,a),d=s;do{switch(d.tag){case 3:o=l,d.flags|=4096,e&=-e,d.lanes|=e,co(d,ca(0,o,e));break t;case 1:o=l;var x=d.type,w=d.stateNode;if(0==(64&d.flags)&&("function"==typeof x.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===Ya||!Ya.has(w)))){d.flags|=4096,e&=-e,d.lanes|=e,co(d,ua(d,o,e));break t}}d=d.return}while(null!==d)}Rl(i)}catch(t){e=t,Oa===i&&null!==i&&(Oa=i=i.return);continue}break}}function Sl(){var t=Ea.current;return Ea.current=Ds,null===t?Ds:t}function kl(t,e){var i=Da;Da|=16;var r=Sl();for(Ia===t&&Aa===e||xl(t,e);;)try{Cl();break}catch(e){wl(t,e)}if(Jn(),Da=i,Ea.current=r,null!==Oa)throw Error(s(261));return Ia=null,Aa=0,Pa}function Cl(){for(;null!==Oa;)El(Oa)}function Tl(){for(;null!==Oa&&!Cn();)El(Oa)}function El(t){var e=Va(t.alternate,t,Fa);t.memoizedProps=t.pendingProps,null===e?Rl(t):Oa=e,Ra.current=null}function Rl(t){var e=t;do{var i=e.alternate;if(t=e.return,0==(2048&e.flags)){if(null!==(i=na(i,e,Fa)))return void(Oa=i);if(24!==(i=e).tag&&23!==i.tag||null===i.memoizedState||0!=(1073741824&Fa)||0==(4&i.mode)){for(var r=0,n=i.child;null!==n;)r|=n.lanes|n.childLanes,n=n.sibling;i.childLanes=r}null!==t&&0==(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(i=oa(e)))return i.flags&=2047,void(Oa=i);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(Oa=e);Oa=e=t}while(null!==e);0===Pa&&(Pa=5)}function Dl(t){var e=jn();return Wn(99,Il.bind(null,t,e)),null}function Il(t,e){do{Al()}while(null!==Ka);if(0!=(48&Da))throw Error(s(327));var i=t.finishedWork;if(null===i)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(s(177));t.callbackNode=null;var r=i.lanes|i.childLanes,n=r,o=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;for(var a=t.eventTimes,l=t.expirationTimes;0<o;){var c=31-Ge(o),u=1<<c;n[c]=0,a[c]=-1,l[c]=-1,o&=~u}if(null!==el&&0==(24&r)&&el.has(t)&&el.delete(t),t===Ia&&(Oa=Ia=null,Aa=0),1<i.flags?null!==i.lastEffect?(i.lastEffect.nextEffect=i,r=i.firstEffect):r=i:r=i.firstEffect,null!==r){if(n=Da,Da|=32,Ra.current=null,zr=Ye,pr(a=dr())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else t:if(l=(l=a.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&0!==u.rangeCount){l=u.anchorNode,o=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{l.nodeType,c.nodeType}catch(t){l=null;break t}var h=0,d=-1,p=-1,f=0,m=0,g=a,_=null;e:for(;;){for(var y;g!==l||0!==o&&3!==g.nodeType||(d=h+o),g!==c||0!==u&&3!==g.nodeType||(p=h+u),3===g.nodeType&&(h+=g.nodeValue.length),null!==(y=g.firstChild);)_=g,g=y;for(;;){if(g===a)break e;if(_===l&&++f===o&&(d=h),_===c&&++m===u&&(p=h),null!==(y=g.nextSibling))break;_=(g=_).parentNode}g=y}l=-1===d||-1===p?null:{start:d,end:p}}else l=null;l=l||{start:0,end:0}}else l=null;Lr={focusedElem:a,selectionRange:l},Ye=!1,al=null,ll=!1,$a=r;do{try{Ol()}catch(t){if(null===$a)throw Error(s(330));zl($a,t),$a=$a.nextEffect}}while(null!==$a);al=null,$a=r;do{try{for(a=t;null!==$a;){var v=$a.flags;if(16&v&&yt($a.stateNode,""),128&v){var b=$a.alternate;if(null!==b){var x=b.ref;null!==x&&("function"==typeof x?x(null):x.current=null)}}switch(1038&v){case 2:va($a),$a.flags&=-3;break;case 6:va($a),$a.flags&=-3,Sa($a.alternate,$a);break;case 1024:$a.flags&=-1025;break;case 1028:$a.flags&=-1025,Sa($a.alternate,$a);break;case 4:Sa($a.alternate,$a);break;case 8:wa(a,l=$a);var w=l.alternate;_a(l),null!==w&&_a(w)}$a=$a.nextEffect}}catch(t){if(null===$a)throw Error(s(330));zl($a,t),$a=$a.nextEffect}}while(null!==$a);if(x=Lr,b=dr(),v=x.focusedElem,a=x.selectionRange,b!==v&&v&&v.ownerDocument&&hr(v.ownerDocument.documentElement,v)){null!==a&&pr(v)&&(b=a.start,void 0===(x=a.end)&&(x=b),"selectionStart"in v?(v.selectionStart=b,v.selectionEnd=Math.min(x,v.value.length)):(x=(b=v.ownerDocument||document)&&b.defaultView||window).getSelection&&(x=x.getSelection(),l=v.textContent.length,w=Math.min(a.start,l),a=void 0===a.end?w:Math.min(a.end,l),!x.extend&&w>a&&(l=a,a=w,w=l),l=ur(v,w),o=ur(v,a),l&&o&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&((b=b.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),w>a?(x.addRange(b),x.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),x.addRange(b))))),b=[];for(x=v;x=x.parentNode;)1===x.nodeType&&b.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"==typeof v.focus&&v.focus(),v=0;v<b.length;v++)(x=b[v]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Ye=!!zr,Lr=zr=null,t.current=i,$a=r;do{try{for(v=t;null!==$a;){var S=$a.flags;if(36&S&&fa(v,$a.alternate,$a),128&S){b=void 0;var k=$a.ref;if(null!==k){var C=$a.stateNode;switch($a.tag){case 5:b=C;break;default:b=C}"function"==typeof k?k(b):k.current=b}}$a=$a.nextEffect}}catch(t){if(null===$a)throw Error(s(330));zl($a,t),$a=$a.nextEffect}}while(null!==$a);$a=null,Pn(),Da=n}else t.current=i;if(qa)qa=!1,Ka=t,Qa=e;else for($a=r;null!==$a;)e=$a.nextEffect,$a.nextEffect=null,8&$a.flags&&((S=$a).sibling=null,S.stateNode=null),$a=e;if(0===(r=t.pendingLanes)&&(Ya=null),1===r?t===rl?il++:(il=0,rl=t):il=0,i=i.stateNode,xn&&"function"==typeof xn.onCommitFiberRoot)try{xn.onCommitFiberRoot(bn,i,void 0,64==(64&i.current.flags))}catch(t){}if(pl(t,Un()),Za)throw Za=!1,t=Xa,Xa=null,t;return 0!=(8&Da)||Vn(),null}function Ol(){for(;null!==$a;){var t=$a.alternate;ll||null===al||(0!=(8&$a.flags)?te($a,al)&&(ll=!0):13===$a.tag&&Ca(t,$a)&&te($a,al)&&(ll=!0));var e=$a.flags;0!=(256&e)&&pa(t,$a),0==(512&e)||qa||(qa=!0,Gn(97,(function(){return Al(),null}))),$a=$a.nextEffect}}function Al(){if(90!==Qa){var t=97<Qa?97:Qa;return Qa=90,Wn(t,Pl)}return!1}function Fl(t,e){Ja.push(e,t),qa||(qa=!0,Gn(97,(function(){return Al(),null})))}function Ml(t,e){tl.push(e,t),qa||(qa=!0,Gn(97,(function(){return Al(),null})))}function Pl(){if(null===Ka)return!1;var t=Ka;if(Ka=null,0!=(48&Da))throw Error(s(331));var e=Da;Da|=32;var i=tl;tl=[];for(var r=0;r<i.length;r+=2){var n=i[r],o=i[r+1],a=n.destroy;if(n.destroy=void 0,"function"==typeof a)try{a()}catch(t){if(null===o)throw Error(s(330));zl(o,t)}}for(i=Ja,Ja=[],r=0;r<i.length;r+=2){n=i[r],o=i[r+1];try{var l=n.create;n.destroy=l()}catch(t){if(null===o)throw Error(s(330));zl(o,t)}}for(l=t.current.firstEffect;null!==l;)t=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=t;return Da=e,Vn(),!0}function Bl(t,e,i){lo(t,e=ca(0,e=sa(i,e),1)),e=cl(),null!==(t=dl(t,1))&&(We(t,1,e),pl(t,e))}function zl(t,e){if(3===t.tag)Bl(t,t,e);else for(var i=t.return;null!==i;){if(3===i.tag){Bl(i,t,e);break}if(1===i.tag){var r=i.stateNode;if("function"==typeof i.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ya||!Ya.has(r))){var n=ua(i,t=sa(e,t),1);if(lo(i,n),n=cl(),null!==(i=dl(i,1)))We(i,1,n),pl(i,n);else if("function"==typeof r.componentDidCatch&&(null===Ya||!Ya.has(r)))try{r.componentDidCatch(e,t)}catch(t){}break}}i=i.return}}function Ll(t,e,i){var r=t.pingCache;null!==r&&r.delete(e),e=cl(),t.pingedLanes|=t.suspendedLanes&i,Ia===t&&(Aa&i)===i&&(4===Pa||3===Pa&&(62914560&Aa)===Aa&&500>Un()-Ha?xl(t,0):Ua|=i),pl(t,e)}function Nl(t,e){var i=t.stateNode;null!==i&&i.delete(e),0===(e=0)&&(0==(2&(e=t.mode))?e=1:0==(4&e)?e=99===jn()?1:2:(0===ol&&(ol=za),0===(e=je(62914560&~ol))&&(e=4194304))),i=cl(),null!==(t=dl(t,e))&&(We(t,e,i),pl(t,i))}function Ul(t,e,i,r){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function jl(t,e,i,r){return new Ul(t,e,i,r)}function Hl(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Wl(t,e){var i=t.alternate;return null===i?((i=jl(t.tag,e,t.key,t.mode)).elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Gl(t,e,i,r,n,o){var a=2;if(r=t,"function"==typeof t)Hl(t)&&(a=1);else if("string"==typeof t)a=5;else t:switch(t){case k:return Vl(i.children,n,o,e);case B:a=8,n|=16;break;case C:a=8,n|=1;break;case T:return(t=jl(12,i,e,8|n)).elementType=T,t.type=T,t.lanes=o,t;case I:return(t=jl(13,i,e,n)).type=I,t.elementType=I,t.lanes=o,t;case O:return(t=jl(19,i,e,n)).elementType=O,t.lanes=o,t;case z:return $l(i,n,o,e);case L:return(t=jl(24,i,e,n)).elementType=L,t.lanes=o,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case E:a=10;break t;case R:a=9;break t;case D:a=11;break t;case A:a=14;break t;case F:a=16,r=null;break t;case M:a=22;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=jl(a,i,e,n)).elementType=t,e.type=r,e.lanes=o,e}function Vl(t,e,i,r){return(t=jl(7,t,r,e)).lanes=i,t}function $l(t,e,i,r){return(t=jl(23,t,r,e)).elementType=z,t.lanes=i,t}function Zl(t,e,i){return(t=jl(6,t,null,e)).lanes=i,t}function Xl(t,e,i){return(e=jl(4,null!==t.children?t.children:[],t.key,e)).lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Yl(t,e,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=He(0),this.expirationTimes=He(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=He(0),this.mutableSourceEagerHydrationData=null}function ql(t,e,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:t,containerInfo:e,implementation:i}}function Kl(t,e,i,r){var n=e.current,o=cl(),a=ul(n);t:if(i){e:{if(qt(i=i._reactInternals)!==i||1!==i.tag)throw Error(s(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(fn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(null!==l);throw Error(s(171))}if(1===i.tag){var c=i.type;if(fn(c)){i=_n(i,c,l);break t}}i=l}else i=cn;return null===e.context?e.context=i:e.pendingContext=i,(e=ao(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),lo(n,e),hl(n,a,o),a}function Ql(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Jl(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var i=t.retryLane;t.retryLane=0!==i&&i<e?i:e}}function tc(t,e){Jl(t,e),(t=t.alternate)&&Jl(t,e)}function ec(t,e,i){var r=null!=i&&null!=i.hydrationOptions&&i.hydrationOptions.mutableSources||null;if(i=new Yl(t,e,null!=i&&!0===i.hydrate),e=jl(3,null,null,2===e?7:1===e?3:0),i.current=e,e.stateNode=i,oo(e),t[qr]=i.current,Rr(8===t.nodeType?t.parentNode:t),r)for(t=0;t<r.length;t++){var n=(e=r[t])._getVersion;n=n(e._source),null==i.mutableSourceEagerHydrationData?i.mutableSourceEagerHydrationData=[e,n]:i.mutableSourceEagerHydrationData.push(e,n)}this._internalRoot=i}function ic(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function rc(t,e,i,r,n){var o=i._reactRootContainer;if(o){var s=o._internalRoot;if("function"==typeof n){var a=n;n=function(){var t=Ql(s);a.call(t)}}Kl(e,s,t,n)}else{if(o=i._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var i;i=t.lastChild;)t.removeChild(i);return new ec(t,0,e?{hydrate:!0}:void 0)}(i,r),s=o._internalRoot,"function"==typeof n){var l=n;n=function(){var t=Ql(s);l.call(t)}}yl((function(){Kl(e,s,t,n)}))}return Ql(s)}function nc(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(e))throw Error(s(200));return ql(t,e,null,i)}Va=function(t,e,i){var r=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||hn.current)Ms=!0;else{if(0==(i&r)){switch(Ms=!1,e.tag){case 3:Gs(e),Vo();break;case 5:Fo(e);break;case 1:fn(e.type)&&yn(e);break;case 4:Oo(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var n=e.type._context;ln(Yn,n._currentValue),n._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!=(i&e.child.childLanes)?Ys(t,e,i):(ln(Po,1&Po.current),null!==(e=ia(t,e,i))?e.sibling:null);ln(Po,1&Po.current);break;case 19:if(r=0!=(i&e.childLanes),0!=(64&t.flags)){if(r)return ea(t,e,i);e.flags|=64}if(null!==(n=e.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),ln(Po,Po.current),r)break;return null;case 23:case 24:return e.lanes=0,Ns(t,e,i)}return ia(t,e,i)}Ms=0!=(16384&t.flags)}else Ms=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,n=pn(e,un.current),io(e,i),n=ns(null,e,r,t,n,i),e.flags|=1,"object"==typeof n&&null!==n&&"function"==typeof n.render&&void 0===n.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,fn(r)){var o=!0;yn(e)}else o=!1;e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,oo(e);var a=r.getDerivedStateFromProps;"function"==typeof a&&fo(e,r,a,t),n.updater=mo,e.stateNode=n,n._reactInternals=e,vo(e,r,t,i),e=Ws(null,e,r,!0,o,i)}else e.tag=0,Ps(null,e,n,i),e=e.child;return e;case 16:n=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,n=(o=n._init)(n._payload),e.type=n,o=e.tag=function(t){if("function"==typeof t)return Hl(t)?1:0;if(null!=t){if((t=t.$$typeof)===D)return 11;if(t===A)return 14}return 2}(n),t=Xn(n,t),o){case 0:e=js(null,e,n,t,i);break t;case 1:e=Hs(null,e,n,t,i);break t;case 11:e=Bs(null,e,n,t,i);break t;case 14:e=zs(null,e,n,Xn(n.type,t),r,i);break t}throw Error(s(306,n,""))}return e;case 0:return r=e.type,n=e.pendingProps,js(t,e,r,n=e.elementType===r?n:Xn(r,n),i);case 1:return r=e.type,n=e.pendingProps,Hs(t,e,r,n=e.elementType===r?n:Xn(r,n),i);case 3:if(Gs(e),r=e.updateQueue,null===t||null===r)throw Error(s(282));if(r=e.pendingProps,n=null!==(n=e.memoizedState)?n.element:null,so(t,e),uo(e,r,null,i),(r=e.memoizedState.element)===n)Vo(),e=ia(t,e,i);else{if((o=(n=e.stateNode).hydrate)&&(Lo=Gr(e.stateNode.containerInfo.firstChild),zo=e,o=No=!0),o){if(null!=(t=n.mutableSourceEagerHydrationData))for(n=0;n<t.length;n+=2)(o=t[n])._workInProgressVersionPrimary=t[n+1],$o.push(o);for(i=Co(e,null,r,i),e.child=i;i;)i.flags=-3&i.flags|1024,i=i.sibling}else Ps(t,e,r,i),Vo();e=e.child}return e;case 5:return Fo(e),null===t&&Ho(e),r=e.type,n=e.pendingProps,o=null!==t?t.memoizedProps:null,a=n.children,Ur(r,n)?a=null:null!==o&&Ur(r,o)&&(e.flags|=16),Us(t,e),Ps(t,e,a,i),e.child;case 6:return null===t&&Ho(e),null;case 13:return Ys(t,e,i);case 4:return Oo(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=ko(e,null,r,i):Ps(t,e,r,i),e.child;case 11:return r=e.type,n=e.pendingProps,Bs(t,e,r,n=e.elementType===r?n:Xn(r,n),i);case 7:return Ps(t,e,e.pendingProps,i),e.child;case 8:case 12:return Ps(t,e,e.pendingProps.children,i),e.child;case 10:t:{r=e.type._context,n=e.pendingProps,a=e.memoizedProps,o=n.value;var l=e.type._context;if(ln(Yn,l._currentValue),l._currentValue=o,null!==a)if(l=a.value,0===(o=sr(l,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(a.children===n.children&&!hn.current){e=ia(t,e,i);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var c=l.dependencies;if(null!==c){a=l.child;for(var u=c.firstContext;null!==u;){if(u.context===r&&0!=(u.observedBits&o)){1===l.tag&&((u=ao(-1,i&-i)).tag=2,lo(l,u)),l.lanes|=i,null!==(u=l.alternate)&&(u.lanes|=i),eo(l.return,i),c.lanes|=i;break}u=u.next}}else a=10===l.tag&&l.type===e.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===e){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Ps(t,e,n.children,i),e=e.child}return e;case 9:return n=e.type,r=(o=e.pendingProps).children,io(e,i),r=r(n=ro(n,o.unstable_observedBits)),e.flags|=1,Ps(t,e,r,i),e.child;case 14:return o=Xn(n=e.type,e.pendingProps),zs(t,e,n,o=Xn(n.type,o),r,i);case 15:return Ls(t,e,e.type,e.pendingProps,r,i);case 17:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:Xn(r,n),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,fn(r)?(t=!0,yn(e)):t=!1,io(e,i),_o(e,r,n),vo(e,r,n,i),Ws(null,e,r,!0,t,i);case 19:return ea(t,e,i);case 23:case 24:return Ns(t,e,i)}throw Error(s(156,e.tag))},ec.prototype.render=function(t){Kl(t,this._internalRoot,null,null)},ec.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Kl(null,t,null,(function(){e[qr]=null}))},ee=function(t){13===t.tag&&(hl(t,4,cl()),tc(t,4))},ie=function(t){13===t.tag&&(hl(t,67108864,cl()),tc(t,67108864))},re=function(t){if(13===t.tag){var e=cl(),i=ul(t);hl(t,i,e),tc(t,i)}},ne=function(t,e){return e()},Et=function(t,e,i){switch(e){case"input":if(it(t,i),e=i.name,"radio"===i.type&&null!=e){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var r=i[e];if(r!==t&&r.form===t.form){var n=en(r);if(!n)throw Error(s(90));K(r),it(r,n)}}}break;case"textarea":ct(t,i);break;case"select":null!=(e=i.value)&&st(t,!!i.multiple,e,!1)}},Ft=_l,Mt=function(t,e,i,r,n){var o=Da;Da|=4;try{return Wn(98,t.bind(null,e,i,r,n))}finally{0===(Da=o)&&(Ga(),Vn())}},Pt=function(){0==(49&Da)&&(function(){if(null!==el){var t=el;el=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,pl(t,Un())}))}Vn()}(),Al())},Bt=function(t,e){var i=Da;Da|=2;try{return t(e)}finally{0===(Da=i)&&(Ga(),Vn())}};var oc={Events:[Jr,tn,en,Ot,At,Al,{current:!1}]},sc={findFiberByHostInstance:Qr,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},ac={bundleType:sc.bundleType,version:sc.version,rendererPackageName:sc.rendererPackageName,rendererConfig:sc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Jt(t))?null:t.stateNode},findFiberByHostInstance:sc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{bn=lc.inject(ac),xn=lc}catch(gt){}}e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"==typeof t.render)throw Error(s(188));throw Error(s(268,Object.keys(t)))}return t=null===(t=Jt(e))?null:t.stateNode},e.render=function(t,e,i){if(!ic(e))throw Error(s(200));return rc(null,t,e,!1,i)},e.unmountComponentAtNode=function(t){if(!ic(t))throw Error(s(40));return!!t._reactRootContainer&&(yl((function(){rc(null,null,t,!1,(function(){t._reactRootContainer=null,t[qr]=null}))})),!0)},e.unstable_batchedUpdates=_l},3935:(t,e,i)=>{"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=i(4448)},7762:(t,e,i)=>{"use strict";t.exports=i(8698)},9921:(t,e)=>{"use strict";var i="function"==typeof Symbol&&Symbol.for,r=i?Symbol.for("react.element"):60103,n=i?Symbol.for("react.portal"):60106,o=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,c=i?Symbol.for("react.context"):60110,u=i?Symbol.for("react.async_mode"):60111,h=i?Symbol.for("react.concurrent_mode"):60111,d=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,f=i?Symbol.for("react.suspense_list"):60120,m=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,_=i?Symbol.for("react.block"):60121,y=i?Symbol.for("react.fundamental"):60117,v=i?Symbol.for("react.responder"):60118,b=i?Symbol.for("react.scope"):60119;function x(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case u:case h:case o:case a:case s:case p:return t;default:switch(t=t&&t.$$typeof){case c:case d:case g:case m:case l:return t;default:return e}}case n:return e}}}function w(t){return x(t)===h}e.AsyncMode=u,e.ConcurrentMode=h,e.ContextConsumer=c,e.ContextProvider=l,e.Element=r,e.ForwardRef=d,e.Fragment=o,e.Lazy=g,e.Memo=m,e.Portal=n,e.Profiler=a,e.StrictMode=s,e.Suspense=p,e.isAsyncMode=function(t){return w(t)||x(t)===u},e.isConcurrentMode=w,e.isContextConsumer=function(t){return x(t)===c},e.isContextProvider=function(t){return x(t)===l},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return x(t)===d},e.isFragment=function(t){return x(t)===o},e.isLazy=function(t){return x(t)===g},e.isMemo=function(t){return x(t)===m},e.isPortal=function(t){return x(t)===n},e.isProfiler=function(t){return x(t)===a},e.isStrictMode=function(t){return x(t)===s},e.isSuspense=function(t){return x(t)===p},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===o||t===h||t===a||t===s||t===p||t===f||"object"==typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===m||t.$$typeof===l||t.$$typeof===c||t.$$typeof===d||t.$$typeof===y||t.$$typeof===v||t.$$typeof===b||t.$$typeof===_)},e.typeOf=x},9864:(t,e,i)=>{"use strict";t.exports=i(9921)},2408:(t,e,i)=>{"use strict";var r=i(7418),n=60103,o=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var s=60109,a=60110,l=60112;e.Suspense=60113;var c=60115,u=60116;if("function"==typeof Symbol&&Symbol.for){var h=Symbol.for;n=h("react.element"),o=h("react.portal"),e.Fragment=h("react.fragment"),e.StrictMode=h("react.strict_mode"),e.Profiler=h("react.profiler"),s=h("react.provider"),a=h("react.context"),l=h("react.forward_ref"),e.Suspense=h("react.suspense"),c=h("react.memo"),u=h("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function p(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(t,e,i){this.props=t,this.context=e,this.refs=m,this.updater=i||f}function _(){}function y(t,e,i){this.props=t,this.context=e,this.refs=m,this.updater=i||f}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(p(85));this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},_.prototype=g.prototype;var v=y.prototype=new _;v.constructor=y,r(v,g.prototype),v.isPureReactComponent=!0;var b={current:null},x=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function S(t,e,i){var r,o={},s=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)x.call(e,r)&&!w.hasOwnProperty(r)&&(o[r]=e[r]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:n,type:t,key:s,ref:a,props:o,_owner:b.current}}function k(t){return"object"==typeof t&&null!==t&&t.$$typeof===n}var C=/\/+/g;function T(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function E(t,e,i,r,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case o:l=!0}}if(l)return s=s(l=t),t=""===r?"."+T(l,0):r,Array.isArray(s)?(i="",null!=t&&(i=t.replace(C,"$&/")+"/"),E(s,e,i,"",(function(t){return t}))):null!=s&&(k(s)&&(s=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+t)),e.push(s)),1;if(l=0,r=""===r?".":r+":",Array.isArray(t))for(var c=0;c<t.length;c++){var u=r+T(a=t[c],c);l+=E(a,e,i,u,s)}else if("function"==typeof(u=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=d&&t[d]||t["@@iterator"])?t:null}(t)))for(t=u.call(t),c=0;!(a=t.next()).done;)l+=E(a=a.value,e,i,u=r+T(a,c++),s);else if("object"===a)throw e=""+t,Error(p(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return l}function R(t,e,i){if(null==t)return t;var r=[],n=0;return E(t,r,"","",(function(t){return e.call(i,t,n++)})),r}function D(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var I={current:null};function O(){var t=I.current;if(null===t)throw Error(p(321));return t}var A={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:R,forEach:function(t,e,i){R(t,(function(){e.apply(this,arguments)}),i)},count:function(t){var e=0;return R(t,(function(){e++})),e},toArray:function(t){return R(t,(function(t){return t}))||[]},only:function(t){if(!k(t))throw Error(p(143));return t}},e.Component=g,e.PureComponent=y,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,e.cloneElement=function(t,e,i){if(null==t)throw Error(p(267,t));var o=r({},t.props),s=t.key,a=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,l=b.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)x.call(e,u)&&!w.hasOwnProperty(u)&&(o[u]=void 0===e[u]&&void 0!==c?c[u]:e[u])}var u=arguments.length-2;if(1===u)o.children=i;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];o.children=c}return{$$typeof:n,type:t.type,key:s,ref:a,props:o,_owner:l}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:a,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=S,e.createFactory=function(t){var e=S.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:l,render:t}},e.isValidElement=k,e.lazy=function(t){return{$$typeof:u,_payload:{_status:-1,_result:t},_init:D}},e.memo=function(t,e){return{$$typeof:c,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return O().useCallback(t,e)},e.useContext=function(t,e){return O().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return O().useEffect(t,e)},e.useImperativeHandle=function(t,e,i){return O().useImperativeHandle(t,e,i)},e.useLayoutEffect=function(t,e){return O().useLayoutEffect(t,e)},e.useMemo=function(t,e){return O().useMemo(t,e)},e.useReducer=function(t,e,i){return O().useReducer(t,e,i)},e.useRef=function(t){return O().useRef(t)},e.useState=function(t){return O().useState(t)},e.version="17.0.1"},7294:(t,e,i)=>{"use strict";t.exports=i(2408)},53:(t,e)=>{"use strict";var i,r,n,o;if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,u=null,h=function(){if(null!==c)try{var t=e.unstable_now();c(!0,t),c=null}catch(t){throw setTimeout(h,0),t}};i=function(t){null!==c?setTimeout(i,0,t):(c=t,setTimeout(h,0))},r=function(t,e){u=setTimeout(t,e)},n=function(){clearTimeout(u)},e.unstable_shouldYield=function(){return!1},o=e.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var f=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,_=-1,y=5,v=0;e.unstable_shouldYield=function(){return e.unstable_now()>=v},o=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<t?Math.floor(1e3/t):5};var b=new MessageChannel,x=b.port2;b.port1.onmessage=function(){if(null!==g){var t=e.unstable_now();v=t+y;try{g(!0,t)?x.postMessage(null):(m=!1,g=null)}catch(t){throw x.postMessage(null),t}}else m=!1},i=function(t){g=t,m||(m=!0,x.postMessage(null))},r=function(t,i){_=d((function(){t(e.unstable_now())}),i)},n=function(){p(_),_=-1}}function w(t,e){var i=t.length;t.push(e);t:for(;;){var r=i-1>>>1,n=t[r];if(!(void 0!==n&&0<C(n,e)))break t;t[r]=e,t[i]=n,i=r}}function S(t){return void 0===(t=t[0])?null:t}function k(t){var e=t[0];if(void 0!==e){var i=t.pop();if(i!==e){t[0]=i;t:for(var r=0,n=t.length;r<n;){var o=2*(r+1)-1,s=t[o],a=o+1,l=t[a];if(void 0!==s&&0>C(s,i))void 0!==l&&0>C(l,s)?(t[r]=l,t[a]=i,r=a):(t[r]=s,t[o]=i,r=o);else{if(!(void 0!==l&&0>C(l,i)))break t;t[r]=l,t[a]=i,r=a}}}return e}return null}function C(t,e){var i=t.sortIndex-e.sortIndex;return 0!==i?i:t.id-e.id}var T=[],E=[],R=1,D=null,I=3,O=!1,A=!1,F=!1;function M(t){for(var e=S(E);null!==e;){if(null===e.callback)k(E);else{if(!(e.startTime<=t))break;k(E),e.sortIndex=e.expirationTime,w(T,e)}e=S(E)}}function P(t){if(F=!1,M(t),!A)if(null!==S(T))A=!0,i(B);else{var e=S(E);null!==e&&r(P,e.startTime-t)}}function B(t,i){A=!1,F&&(F=!1,n()),O=!0;var o=I;try{for(M(i),D=S(T);null!==D&&(!(D.expirationTime>i)||t&&!e.unstable_shouldYield());){var s=D.callback;if("function"==typeof s){D.callback=null,I=D.priorityLevel;var a=s(D.expirationTime<=i);i=e.unstable_now(),"function"==typeof a?D.callback=a:D===S(T)&&k(T),M(i)}else k(T);D=S(T)}if(null!==D)var l=!0;else{var c=S(E);null!==c&&r(P,c.startTime-i),l=!1}return l}finally{D=null,I=o,O=!1}}var z=o;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){A||O||(A=!0,i(B))},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_getFirstCallbackNode=function(){return S(T)},e.unstable_next=function(t){switch(I){case 1:case 2:case 3:var e=3;break;default:e=I}var i=I;I=e;try{return t()}finally{I=i}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=z,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var i=I;I=t;try{return e()}finally{I=i}},e.unstable_scheduleCallback=function(t,o,s){var a=e.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?a+s:a:s=a,t){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return t={id:R++,callback:o,priorityLevel:t,startTime:s,expirationTime:l=s+l,sortIndex:-1},s>a?(t.sortIndex=s,w(E,t),null===S(T)&&t===S(E)&&(F?n():F=!0,r(P,s-a))):(t.sortIndex=l,w(T,t),A||O||(A=!0,i(B))),t},e.unstable_wrapCallback=function(t){var e=I;return function(){var i=I;I=e;try{return t.apply(this,arguments)}finally{I=i}}}},3840:(t,e,i)=>{"use strict";t.exports=i(53)},6774:t=>{t.exports=function(t,e,i,r){var n=i?i.call(r,t,e):void 0;if(void 0!==n)return!!n;if(t===e)return!0;if("object"!=typeof t||!t||"object"!=typeof e||!e)return!1;var o=Object.keys(t),s=Object.keys(e);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(e),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var u=t[c],h=e[c];if(!1===(n=i?i.call(r,u,h,c):void 0)||void 0===n&&u!==h)return!1}return!0}},9163:(t,e,i)=>{"use strict";i.d(e,{f6:()=>Dt,iv:()=>_t,ZP:()=>Mt,F4:()=>Ft});var r=i(9864),n=i(7294),o=i(6774),s=i.n(o);const a=function(t){function e(t,r,l,c,d){for(var p,f,m,g,b,w=0,S=0,k=0,C=0,T=0,A=0,M=m=p=0,B=0,z=0,L=0,N=0,U=l.length,j=U-1,H="",W="",G="",V="";B<U;){if(f=l.charCodeAt(B),B===j&&0!==S+C+k+w&&(0!==S&&(f=47===S?10:47),C=k=w=0,U++,j++),0===S+C+k+w){if(B===j&&(0<z&&(H=H.replace(h,"")),0<H.trim().length)){switch(f){case 32:case 9:case 59:case 13:case 10:break;default:H+=l.charAt(B)}f=59}switch(f){case 123:for(p=(H=H.trim()).charCodeAt(0),m=1,N=++B;B<U;){switch(f=l.charCodeAt(B)){case 123:m++;break;case 125:m--;break;case 47:switch(f=l.charCodeAt(B+1)){case 42:case 47:t:{for(M=B+1;M<j;++M)switch(l.charCodeAt(M)){case 47:if(42===f&&42===l.charCodeAt(M-1)&&B+2!==M){B=M+1;break t}break;case 10:if(47===f){B=M+1;break t}}B=M}}break;case 91:f++;case 40:f++;case 34:case 39:for(;B++<j&&l.charCodeAt(B)!==f;);}if(0===m)break;B++}switch(m=l.substring(N,B),0===p&&(p=(H=H.replace(u,"").trim()).charCodeAt(0)),p){case 64:switch(0<z&&(H=H.replace(h,"")),f=H.charCodeAt(1)){case 100:case 109:case 115:case 45:z=r;break;default:z=O}if(N=(m=e(r,z,m,f,d+1)).length,0<F&&(b=a(3,m,z=i(O,H,L),r,R,E,N,f,d,c),H=z.join(""),void 0!==b&&0===(N=(m=b.trim()).length)&&(f=0,m="")),0<N)switch(f){case 115:H=H.replace(x,s);case 100:case 109:case 45:m=H+"{"+m+"}";break;case 107:m=(H=H.replace(_,"$1 $2"))+"{"+m+"}",m=1===I||2===I&&o("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=H+m,112===c&&(W+=m,m="")}else m="";break;default:m=e(r,i(r,H,L),m,c,d+1)}G+=m,m=L=z=M=p=0,H="",f=l.charCodeAt(++B);break;case 125:case 59:if(1<(N=(H=(0<z?H.replace(h,""):H).trim()).length))switch(0===M&&(p=H.charCodeAt(0),45===p||96<p&&123>p)&&(N=(H=H.replace(" ",":")).length),0<F&&void 0!==(b=a(1,H,r,t,R,E,W.length,c,d,c))&&0===(N=(H=b.trim()).length)&&(H="\0\0"),p=H.charCodeAt(0),f=H.charCodeAt(1),p){case 0:break;case 64:if(105===f||99===f){V+=H+l.charAt(B);break}default:58!==H.charCodeAt(N-1)&&(W+=n(H,p,f,H.charCodeAt(2)))}L=z=M=p=0,H="",f=l.charCodeAt(++B)}}switch(f){case 13:case 10:47===S?S=0:0===1+p&&107!==c&&0<H.length&&(z=1,H+="\0"),0<F*P&&a(0,H,r,t,R,E,W.length,c,d,c),E=1,R++;break;case 59:case 125:if(0===S+C+k+w){E++;break}default:switch(E++,g=l.charAt(B),f){case 9:case 32:if(0===C+w+S)switch(T){case 44:case 58:case 9:case 32:g="";break;default:32!==f&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===C+S+w&&(z=L=1,g="\f"+g);break;case 108:if(0===C+S+w+D&&0<M)switch(B-M){case 2:112===T&&58===l.charCodeAt(B-3)&&(D=T);case 8:111===A&&(D=A)}break;case 58:0===C+S+w&&(M=B);break;case 44:0===S+k+C+w&&(z=1,g+="\r");break;case 34:case 39:0===S&&(C=C===f?0:0===C?f:C);break;case 91:0===C+S+k&&w++;break;case 93:0===C+S+k&&w--;break;case 41:0===C+S+w&&k--;break;case 40:if(0===C+S+w){if(0===p)switch(2*T+3*A){case 533:break;default:p=1}k++}break;case 64:0===S+k+C+w+M+m&&(m=1);break;case 42:case 47:if(!(0<C+w+k))switch(S){case 0:switch(2*f+3*l.charCodeAt(B+1)){case 235:S=47;break;case 220:N=B,S=42}break;case 42:47===f&&42===T&&N+2!==B&&(33===l.charCodeAt(N+2)&&(W+=l.substring(N,B+1)),g="",S=0)}}0===S&&(H+=g)}A=T,T=f,B++}if(0<(N=W.length)){if(z=r,0<F&&(void 0!==(b=a(2,W,z,t,R,E,N,c,d,c))&&0===(W=b).length))return V+W+G;if(W=z.join(",")+"{"+W+"}",0!=I*D){switch(2!==I||o(W,2)||(D=0),D){case 111:W=W.replace(v,":-moz-$1")+W;break;case 112:W=W.replace(y,"::-webkit-input-$1")+W.replace(y,"::-moz-$1")+W.replace(y,":-ms-input-$1")+W}D=0}}return V+W+G}function i(t,e,i){var n=e.trim().split(m);e=n;var o=n.length,s=t.length;switch(s){case 0:case 1:var a=0;for(t=0===s?"":t[0]+" ";a<o;++a)e[a]=r(t,e[a],i).trim();break;default:var l=a=0;for(e=[];a<o;++a)for(var c=0;c<s;++c)e[l++]=r(t[c]+" ",n[a],i).trim()}return e}function r(t,e,i){var r=e.charCodeAt(0);switch(33>r&&(r=(e=e.trim()).charCodeAt(0)),r){case 38:return e.replace(g,"$1"+t.trim());case 58:return t.trim()+e.replace(g,"$1"+t.trim());default:if(0<1*i&&0<e.indexOf("\f"))return e.replace(g,(58===t.charCodeAt(0)?"":"$1")+t.trim())}return t+e}function n(t,e,i,r){var s=t+";",a=2*e+3*i+4*r;if(944===a){t=s.indexOf(":",9)+1;var l=s.substring(t,s.length-1).trim();return l=s.substring(0,t).trim()+l+";",1===I||2===I&&o(l,1)?"-webkit-"+l+l:l}if(0===I||2===I&&!o(s,1))return s;switch(a){case 1015:return 97===s.charCodeAt(10)?"-webkit-"+s+s:s;case 951:return 116===s.charCodeAt(3)?"-webkit-"+s+s:s;case 963:return 110===s.charCodeAt(5)?"-webkit-"+s+s:s;case 1009:if(100!==s.charCodeAt(4))break;case 969:case 942:return"-webkit-"+s+s;case 978:return"-webkit-"+s+"-moz-"+s+s;case 1019:case 983:return"-webkit-"+s+"-moz-"+s+"-ms-"+s+s;case 883:if(45===s.charCodeAt(8))return"-webkit-"+s+s;if(0<s.indexOf("image-set(",11))return s.replace(T,"$1-webkit-$2")+s;break;case 932:if(45===s.charCodeAt(4))switch(s.charCodeAt(5)){case 103:return"-webkit-box-"+s.replace("-grow","")+"-webkit-"+s+"-ms-"+s.replace("grow","positive")+s;case 115:return"-webkit-"+s+"-ms-"+s.replace("shrink","negative")+s;case 98:return"-webkit-"+s+"-ms-"+s.replace("basis","preferred-size")+s}return"-webkit-"+s+"-ms-"+s+s;case 964:return"-webkit-"+s+"-ms-flex-"+s+s;case 1023:if(99!==s.charCodeAt(8))break;return"-webkit-box-pack"+(l=s.substring(s.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+s+"-ms-flex-pack"+l+s;case 1005:return p.test(s)?s.replace(d,":-webkit-")+s.replace(d,":-moz-")+s:s;case 1e3:switch(e=(l=s.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(e)){case 226:l=s.replace(b,"tb");break;case 232:l=s.replace(b,"tb-rl");break;case 220:l=s.replace(b,"lr");break;default:return s}return"-webkit-"+s+"-ms-"+l+s;case 1017:if(-1===s.indexOf("sticky",9))break;case 975:switch(e=(s=t).length-10,a=(l=(33===s.charCodeAt(e)?s.substring(0,e):s).substring(t.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:s=s.replace(l,"-webkit-"+l)+";"+s;break;case 207:case 102:s=s.replace(l,"-webkit-"+(102<a?"inline-":"")+"box")+";"+s.replace(l,"-webkit-"+l)+";"+s.replace(l,"-ms-"+l+"box")+";"+s}return s+";";case 938:if(45===s.charCodeAt(5))switch(s.charCodeAt(6)){case 105:return l=s.replace("-items",""),"-webkit-"+s+"-webkit-box-"+l+"-ms-flex-"+l+s;case 115:return"-webkit-"+s+"-ms-flex-item-"+s.replace(S,"")+s;default:return"-webkit-"+s+"-ms-flex-line-pack"+s.replace("align-content","").replace(S,"")+s}break;case 973:case 989:if(45!==s.charCodeAt(3)||122===s.charCodeAt(4))break;case 931:case 953:if(!0===C.test(t))return 115===(l=t.substring(t.indexOf(":")+1)).charCodeAt(0)?n(t.replace("stretch","fill-available"),e,i,r).replace(":fill-available",":stretch"):s.replace(l,"-webkit-"+l)+s.replace(l,"-moz-"+l.replace("fill-",""))+s;break;case 962:if(s="-webkit-"+s+(102===s.charCodeAt(5)?"-ms-"+s:"")+s,211===i+r&&105===s.charCodeAt(13)&&0<s.indexOf("transform",10))return s.substring(0,s.indexOf(";",27)+1).replace(f,"$1-webkit-$2")+s}return s}function o(t,e){var i=t.indexOf(1===e?":":"{"),r=t.substring(0,3!==e?i:10);return i=t.substring(i+1,t.length-1),M(2!==e?r:r.replace(k,"$1"),i,e)}function s(t,e){var i=n(e,e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2));return i!==e+";"?i.replace(w," or ($1)").substring(4):"("+e+")"}function a(t,e,i,r,n,o,s,a,l,u){for(var h,d=0,p=e;d<F;++d)switch(h=A[d].call(c,t,p,i,r,n,o,s,a,l,u)){case void 0:case!1:case!0:case null:break;default:p=h}if(p!==e)return p}function l(t){return void 0!==(t=t.prefix)&&(M=null,t?"function"!=typeof t?I=1:(I=2,M=t):I=0),l}function c(t,i){var r=t;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<F){var n=a(-1,i,r,r,R,E,0,0,0,0);void 0!==n&&"string"==typeof n&&(i=n)}var o=e(O,r,i,0,0);return 0<F&&(void 0!==(n=a(-2,o,r,r,R,E,o.length,0,0,0))&&(o=n)),"",D=0,E=R=1,o}var u=/^\0+/g,h=/[\0\r\f]/g,d=/: */g,p=/zoo|gra/,f=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,_=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,v=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,x=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,S=/-self|flex-/g,k=/[^]*?(:[rp][el]a[\w-]+)[^]*/,C=/stretch|:\s*\w+\-(?:conte|avail)/,T=/([^-])(image-set\()/,E=1,R=1,D=0,I=1,O=[],A=[],F=0,M=null,P=0;return c.use=function t(e){switch(e){case void 0:case null:F=A.length=0;break;default:if("function"==typeof e)A[F++]=e;else if("object"==typeof e)for(var i=0,r=e.length;i<r;++i)t(e[i]);else P=0|!!e}return t},c.set=l,void 0!==t&&l(t),c};const l={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var c=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const u=function(t){var e={};return function(i){return void 0===e[i]&&(e[i]=t(i)),e[i]}}((function(t){return c.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91}));var h=i(8679),d=i.n(h),p=i(4155);function f(){return(f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}var m=function(t,e){for(var i=[t[0]],r=0,n=e.length;r<n;r+=1)i.push(e[r],t[r+1]);return i},g=function(t){return null!==t&&"object"==typeof t&&"[object Object]"===(t.toString?t.toString():Object.prototype.toString.call(t))&&!(0,r.typeOf)(t)},_=Object.freeze([]),y=Object.freeze({});function v(t){return"function"==typeof t}function b(t){return t.displayName||t.name||"Component"}function x(t){return t&&"string"==typeof t.styledComponentId}var w=void 0!==p&&(p.env.REACT_APP_SC_ATTR||p.env.SC_ATTR)||"data-styled",S="undefined"!=typeof window&&"HTMLElement"in window,k=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:void 0!==p&&void 0!==p.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==p.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==p.env.REACT_APP_SC_DISABLE_SPEEDY&&p.env.REACT_APP_SC_DISABLE_SPEEDY:void 0!==p&&void 0!==p.env.SC_DISABLE_SPEEDY&&""!==p.env.SC_DISABLE_SPEEDY&&("false"!==p.env.SC_DISABLE_SPEEDY&&p.env.SC_DISABLE_SPEEDY));function C(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(i.length>0?" Args: "+i.join(", "):""))}var T=function(){function t(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}var e=t.prototype;return e.indexOfGroup=function(t){for(var e=0,i=0;i<t;i++)e+=this.groupSizes[i];return e},e.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var i=this.groupSizes,r=i.length,n=r;t>=n;)(n<<=1)<0&&C(16,""+t);this.groupSizes=new Uint32Array(n),this.groupSizes.set(i),this.length=n;for(var o=r;o<n;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(t+1),a=0,l=e.length;a<l;a++)this.tag.insertRule(s,e[a])&&(this.groupSizes[t]++,s++)},e.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],i=this.indexOfGroup(t),r=i+e;this.groupSizes[t]=0;for(var n=i;n<r;n++)this.tag.deleteRule(i)}},e.getGroup=function(t){var e="";if(t>=this.length||0===this.groupSizes[t])return e;for(var i=this.groupSizes[t],r=this.indexOfGroup(t),n=r+i,o=r;o<n;o++)e+=this.tag.getRule(o)+"/*!sc*/\n";return e},t}(),E=new Map,R=new Map,D=1,I=function(t){if(E.has(t))return E.get(t);for(;R.has(D);)D++;var e=D++;return E.set(t,e),R.set(e,t),e},O=function(t){return R.get(t)},A=function(t,e){E.set(t,e),R.set(e,t)},F="style["+w+'][data-styled-version="5.2.1"]',M=new RegExp("^"+w+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),P=function(t,e,i){for(var r,n=i.split(","),o=0,s=n.length;o<s;o++)(r=n[o])&&t.registerName(e,r)},B=function(t,e){for(var i=e.innerHTML.split("/*!sc*/\n"),r=[],n=0,o=i.length;n<o;n++){var s=i[n].trim();if(s){var a=s.match(M);if(a){var l=0|parseInt(a[1],10),c=a[2];0!==l&&(A(c,l),P(t,c,a[3]),t.getTag().insertRules(l,r)),r.length=0}else r.push(s)}}},z=function(){return i.nc},L=function(t){var e=document.head,i=t||e,r=document.createElement("style"),n=function(t){for(var e=t.childNodes,i=e.length;i>=0;i--){var r=e[i];if(r&&1===r.nodeType&&r.hasAttribute(w))return r}}(i),o=void 0!==n?n.nextSibling:null;r.setAttribute(w,"active"),r.setAttribute("data-styled-version","5.2.1");var s=z();return s&&r.setAttribute("nonce",s),i.insertBefore(r,o),r},N=function(){function t(t){var e=this.element=L(t);e.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var e=document.styleSheets,i=0,r=e.length;i<r;i++){var n=e[i];if(n.ownerNode===t)return n}C(17)}(e),this.length=0}var e=t.prototype;return e.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch(t){return!1}},e.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.getRule=function(t){var e=this.sheet.cssRules[t];return void 0!==e&&"string"==typeof e.cssText?e.cssText:""},t}(),U=function(){function t(t){var e=this.element=L(t);this.nodes=e.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(t,e){if(t<=this.length&&t>=0){var i=document.createTextNode(e),r=this.nodes[t];return this.element.insertBefore(i,r||null),this.length++,!0}return!1},e.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},t}(),j=function(){function t(t){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},e.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.getRule=function(t){return t<this.length?this.rules[t]:""},t}(),H=S,W={isServer:!S,useCSSOMInjection:!k},G=function(){function t(t,e,i){void 0===t&&(t=y),void 0===e&&(e={}),this.options=f({},W,{},t),this.gs=e,this.names=new Map(i),!this.options.isServer&&S&&H&&(H=!1,function(t){for(var e=document.querySelectorAll(F),i=0,r=e.length;i<r;i++){var n=e[i];n&&"active"!==n.getAttribute(w)&&(B(t,n),n.parentNode&&n.parentNode.removeChild(n))}}(this))}t.registerId=function(t){return I(t)};var e=t.prototype;return e.reconstructWithOptions=function(e,i){return void 0===i&&(i=!0),new t(f({},this.options,{},e),this.gs,i&&this.names||void 0)},e.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.getTag=function(){return this.tag||(this.tag=(i=(e=this.options).isServer,r=e.useCSSOMInjection,n=e.target,t=i?new j(n):r?new N(n):new U(n),new T(t)));var t,e,i,r,n},e.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},e.registerName=function(t,e){if(I(t),this.names.has(t))this.names.get(t).add(e);else{var i=new Set;i.add(e),this.names.set(t,i)}},e.insertRules=function(t,e,i){this.registerName(t,e),this.getTag().insertRules(I(t),i)},e.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.clearRules=function(t){this.getTag().clearGroup(I(t)),this.clearNames(t)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(t){for(var e=t.getTag(),i=e.length,r="",n=0;n<i;n++){var o=O(n);if(void 0!==o){var s=t.names.get(o),a=e.getGroup(n);if(void 0!==s&&0!==a.length){var l=w+".g"+n+'[id="'+o+'"]',c="";void 0!==s&&s.forEach((function(t){t.length>0&&(c+=t+",")})),r+=""+a+l+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},t}(),V=/(a)(d)/gi,$=function(t){return String.fromCharCode(t+(t>25?39:97))};function Z(t){var e,i="";for(e=Math.abs(t);e>52;e=e/52|0)i=$(e%52)+i;return($(e%52)+i).replace(V,"$1-$2")}var X=function(t,e){for(var i=e.length;i;)t=33*t^e.charCodeAt(--i);return t},Y=function(t){return X(5381,t)};function q(t){for(var e=0;e<t.length;e+=1){var i=t[e];if(v(i)&&!x(i))return!1}return!0}var K=Y("5.2.1"),Q=function(){function t(t,e,i){this.rules=t,this.staticRulesId="",this.isStatic=(void 0===i||i.isStatic)&&q(t),this.componentId=e,this.baseHash=X(K,e),this.baseStyle=i,G.registerId(e)}return t.prototype.generateAndInjectStyles=function(t,e,i){var r=this.componentId,n=[];if(this.baseStyle&&n.push(this.baseStyle.generateAndInjectStyles(t,e,i)),this.isStatic&&!i.hash)if(this.staticRulesId&&e.hasNameForId(r,this.staticRulesId))n.push(this.staticRulesId);else{var o=gt(this.rules,t,e,i).join(""),s=Z(X(this.baseHash,o.length)>>>0);if(!e.hasNameForId(r,s)){var a=i(o,"."+s,void 0,r);e.insertRules(r,s,a)}n.push(s),this.staticRulesId=s}else{for(var l=this.rules.length,c=X(this.baseHash,i.hash),u="",h=0;h<l;h++){var d=this.rules[h];if("string"==typeof d)u+=d;else if(d){var p=gt(d,t,e,i),f=Array.isArray(p)?p.join(""):p;c=X(c,f+h),u+=f}}if(u){var m=Z(c>>>0);if(!e.hasNameForId(r,m)){var g=i(u,"."+m,void 0,r);e.insertRules(r,m,g)}n.push(m)}}return n.join(" ")},t}(),J=/^\s*\/\/.*$/gm,tt=[":","[",".","#"];function et(t){var e,i,r,n,o=void 0===t?y:t,s=o.options,l=void 0===s?y:s,c=o.plugins,u=void 0===c?_:c,h=new a(l),d=[],p=function(t){function e(e){if(e)try{t(e+"}")}catch(t){}}return function(i,r,n,o,s,a,l,c,u,h){switch(i){case 1:if(0===u&&64===r.charCodeAt(0))return t(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return t(n[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(e)}}}((function(t){d.push(t)})),f=function(t,r,o){return 0===r&&tt.includes(o[i.length])||o.match(n)?t:"."+e};function m(t,o,s,a){void 0===a&&(a="&");var l=t.replace(J,""),c=o&&s?s+" "+o+" { "+l+" }":l;return e=a,i=o,r=new RegExp("\\"+i+"\\b","g"),n=new RegExp("(\\"+i+"\\b){2,}"),h(s||!o?"":o,c)}return h.use([].concat(u,[function(t,e,n){2===t&&n.length&&n[0].lastIndexOf(i)>0&&(n[0]=n[0].replace(r,f))},p,function(t){if(-2===t){var e=d;return d=[],e}}])),m.hash=u.length?u.reduce((function(t,e){return e.name||C(15),X(t,e.name)}),5381).toString():"",m}var it=n.createContext(),rt=(it.Consumer,n.createContext()),nt=(rt.Consumer,new G),ot=et();function st(){return(0,n.useContext)(it)||nt}function at(){return(0,n.useContext)(rt)||ot}function lt(t){var e=(0,n.useState)(t.stylisPlugins),i=e[0],r=e[1],o=st(),a=(0,n.useMemo)((function(){var e=o;return t.sheet?e=t.sheet:t.target&&(e=e.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(e=e.reconstructWithOptions({useCSSOMInjection:!1})),e}),[t.disableCSSOMInjection,t.sheet,t.target]),l=(0,n.useMemo)((function(){return et({options:{prefix:!t.disableVendorPrefixes},plugins:i})}),[t.disableVendorPrefixes,i]);return(0,n.useEffect)((function(){s()(i,t.stylisPlugins)||r(t.stylisPlugins)}),[t.stylisPlugins]),n.createElement(it.Provider,{value:a},n.createElement(rt.Provider,{value:l},t.children))}var ct=function(){function t(t,e){var i=this;this.inject=function(t,e){void 0===e&&(e=ot);var r=i.name+e.hash;t.hasNameForId(i.id,r)||t.insertRules(i.id,r,e(i.rules,r,"@keyframes"))},this.toString=function(){return C(12,String(i.name))},this.name=t,this.id="sc-keyframes-"+t,this.rules=e}return t.prototype.getName=function(t){return void 0===t&&(t=ot),this.name+t.hash},t}(),ut=/([A-Z])/,ht=/([A-Z])/g,dt=/^ms-/,pt=function(t){return"-"+t.toLowerCase()};function ft(t){return ut.test(t)?t.replace(ht,pt).replace(dt,"-ms-"):t}var mt=function(t){return null==t||!1===t||""===t};function gt(t,e,i,r){if(Array.isArray(t)){for(var n,o=[],s=0,a=t.length;s<a;s+=1)""!==(n=gt(t[s],e,i,r))&&(Array.isArray(n)?o.push.apply(o,n):o.push(n));return o}return mt(t)?"":x(t)?"."+t.styledComponentId:v(t)?"function"!=typeof(c=t)||c.prototype&&c.prototype.isReactComponent||!e?t:gt(t(e),e,i,r):t instanceof ct?i?(t.inject(i,r),t.getName(r)):t:g(t)?function t(e,i){var r,n,o=[];for(var s in e)e.hasOwnProperty(s)&&!mt(e[s])&&(g(e[s])?o.push.apply(o,t(e[s],s)):v(e[s])?o.push(ft(s)+":",e[s],";"):o.push(ft(s)+": "+(r=s,(null==(n=e[s])||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||r in l?String(n).trim():n+"px")+";")));return i?[i+" {"].concat(o,["}"]):o}(t):t.toString();var c}function _t(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return v(t)||g(t)?gt(m(_,[t].concat(i))):0===i.length&&1===t.length&&"string"==typeof t[0]?t:gt(m(t,i))}new Set;var yt=function(t,e,i){return void 0===i&&(i=y),t.theme!==i.theme&&t.theme||e||i.theme},vt=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,bt=/(^-|-$)/g;function xt(t){return t.replace(vt,"-").replace(bt,"")}var wt=function(t){return Z(Y(t)>>>0)};function St(t){return"string"==typeof t&&!0}var kt=function(t){return"function"==typeof t||"object"==typeof t&&null!==t&&!Array.isArray(t)},Ct=function(t){return"__proto__"!==t&&"constructor"!==t&&"prototype"!==t};function Tt(t,e,i){var r=t[i];kt(e)&&kt(r)?Et(r,e):t[i]=e}function Et(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];for(var n=0,o=i;n<o.length;n++){var s=o[n];if(kt(s))for(var a in s)Ct(a)&&Tt(t,s[a],a)}return t}var Rt=n.createContext();Rt.Consumer;function Dt(t){var e=(0,n.useContext)(Rt),i=(0,n.useMemo)((function(){return function(t,e){return t?v(t)?t(e):Array.isArray(t)||"object"!=typeof t?C(8):e?f({},e,{},t):t:C(14)}(t.theme,e)}),[t.theme,e]);return t.children?n.createElement(Rt.Provider,{value:i},t.children):null}var It={};function Ot(t,e,i){var r=x(t),o=!St(t),s=e.attrs,a=void 0===s?_:s,l=e.componentId,c=void 0===l?function(t,e){var i="string"!=typeof t?"sc":xt(t);It[i]=(It[i]||0)+1;var r=i+"-"+wt("5.2.1"+i+It[i]);return e?e+"-"+r:r}(e.displayName,e.parentComponentId):l,h=e.displayName,p=void 0===h?function(t){return St(t)?"styled."+t:"Styled("+b(t)+")"}(t):h,m=e.displayName&&e.componentId?xt(e.displayName)+"-"+e.componentId:e.componentId||c,g=r&&t.attrs?Array.prototype.concat(t.attrs,a).filter(Boolean):a,w=e.shouldForwardProp;r&&t.shouldForwardProp&&(w=e.shouldForwardProp?function(i,r){return t.shouldForwardProp(i,r)&&e.shouldForwardProp(i,r)}:t.shouldForwardProp);var S,k=new Q(i,m,r?t.componentStyle:void 0),C=k.isStatic&&0===a.length,T=function(t,e){return function(t,e,i,r){var o=t.attrs,s=t.componentStyle,a=t.defaultProps,l=t.foldedComponentIds,c=t.shouldForwardProp,h=t.styledComponentId,d=t.target,p=function(t,e,i){void 0===t&&(t=y);var r=f({},e,{theme:t}),n={};return i.forEach((function(t){var e,i,o,s=t;for(e in v(s)&&(s=s(r)),s)r[e]=n[e]="className"===e?(i=n[e],o=s[e],i&&o?i+" "+o:i||o):s[e]})),[r,n]}(yt(e,(0,n.useContext)(Rt),a)||y,e,o),m=p[0],g=p[1],_=function(t,e,i,r){var n=st(),o=at();return e?t.generateAndInjectStyles(y,n,o):t.generateAndInjectStyles(i,n,o)}(s,r,m),b=i,x=g.$as||e.$as||g.as||e.as||d,w=St(x),S=g!==e?f({},e,{},g):e,k={};for(var C in S)"$"!==C[0]&&"as"!==C&&("forwardedAs"===C?k.as=S[C]:(c?c(C,u):!w||u(C))&&(k[C]=S[C]));return e.style&&g.style!==e.style&&(k.style=f({},e.style,{},g.style)),k.className=Array.prototype.concat(l,h,_!==h?_:null,e.className,g.className).filter(Boolean).join(" "),k.ref=b,(0,n.createElement)(x,k)}(S,t,e,C)};return T.displayName=p,(S=n.forwardRef(T)).attrs=g,S.componentStyle=k,S.displayName=p,S.shouldForwardProp=w,S.foldedComponentIds=r?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):_,S.styledComponentId=m,S.target=r?t.target:t,S.withComponent=function(t){var r=e.componentId,n=function(t,e){if(null==t)return{};var i,r,n={},o=Object.keys(t);for(r=0;r<o.length;r++)i=o[r],e.indexOf(i)>=0||(n[i]=t[i]);return n}(e,["componentId"]),o=r&&r+"-"+(St(t)?t:xt(b(t)));return Ot(t,f({},n,{attrs:g,componentId:o}),i)},Object.defineProperty(S,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=r?Et({},t.defaultProps,e):e}}),S.toString=function(){return"."+S.styledComponentId},o&&d()(S,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),S}var At=function(t){return function t(e,i,n){if(void 0===n&&(n=y),!(0,r.isValidElementType)(i))return C(1,String(i));var o=function(){return e(i,n,_t.apply(void 0,arguments))};return o.withConfig=function(r){return t(e,i,f({},n,{},r))},o.attrs=function(r){return t(e,i,f({},n,{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},o}(Ot,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){At[t]=At(t)}));!function(){function t(t,e){this.rules=t,this.componentId=e,this.isStatic=q(t),G.registerId(this.componentId+1)}var e=t.prototype;e.createStyles=function(t,e,i,r){var n=r(gt(this.rules,e,i,r).join(""),""),o=this.componentId+t;i.insertRules(o,o,n)},e.removeStyles=function(t,e){e.clearRules(this.componentId+t)},e.renderStyles=function(t,e,i,r){t>2&&G.registerId(this.componentId+t),this.removeStyles(t,i),this.createStyles(t,e,i,r)}}();function Ft(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];var n=_t.apply(void 0,[t].concat(i)).join(""),o=wt(n);return new ct(o,n)}!function(){function t(){var t=this;this._emitSheetCSS=function(){var e=t.instance.toString(),i=z();return"<style "+[i&&'nonce="'+i+'"',w+'="true"','data-styled-version="5.2.1"'].filter(Boolean).join(" ")+">"+e+"</style>"},this.getStyleTags=function(){return t.sealed?C(2):t._emitSheetCSS()},this.getStyleElement=function(){var e;if(t.sealed)return C(2);var i=((e={})[w]="",e["data-styled-version"]="5.2.1",e.dangerouslySetInnerHTML={__html:t.instance.toString()},e),r=z();return r&&(i.nonce=r),[n.createElement("style",f({},i,{key:"sc-0-0"}))]},this.seal=function(){t.sealed=!0},this.instance=new G({isServer:!0}),this.sealed=!1}var e=t.prototype;e.collectStyles=function(t){return this.sealed?C(2):n.createElement(lt,{sheet:this.instance},t)},e.interleaveWithNodeStream=function(t){return C(3)}}();const Mt=At}},i={};function r(t){if(i[t])return i[t].exports;var n=i[t]={exports:{}};return e[t](n,n.exports,r),n.exports}r.m=e,r.amdO={},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce(((e,i)=>(r.f[i](t,e),e)),[])),r.u=t=>384===t?"js/384.js":77===t?"js/77.js":528===t?"js/528.js":void 0,r.miniCssF=t=>(103===t?"/js/editor":t)+".css",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},r.l=(e,i,n,o)=>{if(t[e])t[e].push(i);else{var s,a;if(void 0!==n)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==e){s=u;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.src=e),t[e]=[i];var h=(i,r)=>{s.onerror=s.onload=null,clearTimeout(d);var n=t[e];if(delete t[e],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((t=>t(r))),i)return i(r)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),a&&document.head.appendChild(s)}},r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.p="/",(()=>{var t={103:0};r.f.j=(e,i)=>{var n=r.o(t,e)?t[e]:void 0;if(0!==n)if(n)i.push(n[2]);else{var o=new Promise(((i,r)=>{n=t[e]=[i,r]}));i.push(n[2]=o);var s=r.p+r.u(e),a=new Error;r.l(s,(i=>{if(r.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,n[1](a)}}),"chunk-"+e,e)}};var e=(e,i)=>{for(var n,o,[s,a,l]=i,c=0,u=[];c<s.length;c++)o=s[c],r.o(t,o)&&t[o]&&u.push(t[o][0]),t[o]=0;for(n in a)r.o(a,n)&&(r.m[n]=a[n]);for(l&&l(r),e&&e(i);u.length;)u.shift()()},i=self.webpackChunk=self.webpackChunk||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),(()=>{"use strict";var t="https://candershopifyapp.com",e=function(){return document.currentScript&&document.currentScript.src?new URL(document.currentScript.src).origin:t},i={api_url:e(),isProd:e().startsWith(t),proxyPrefix:"/apps/proxy",fsOrgId:""},n=r(3974),o=r(463),s=r(8821),a=r(7294),l=r(9163),c=r(7762),u=r(3935);const h=(0,s.U)((0,o.ba)());const d=(0,l.ZP)(o.N)`
  width: ${t=>t.theme.measurements.advancedCard.large.width}px;
  height: ${t=>t.theme.measurements.advancedCard.large.height}px;
  margin-bottom: ${t=>t.theme.measurements.advancedSpacer}px;
  color: ${t=>t.theme.card.foreground};
`;var p=t=>{var{isActive:e}=t,i=(0,o.E)(t,["isActive"]);return a.createElement(d,(0,s.N)({},i))};const f=(0,l.ZP)(o.N)`
  width: ${t=>t.theme.measurements.advancedCard.medium.width}px;
  height: ${t=>t.theme.measurements.advancedCard.medium.height}px;
  margin-bottom: ${t=>t.theme.measurements.advancedSpacer}px;
  color: ${t=>t.theme.card.foreground};
  &:nth-child(2n + 1) {
    margin-right: ${t=>t.theme.measurements.advancedSpacer}px;
  }
`,m=(0,l.ZP)(o.N)`
  width: ${t=>t.theme.measurements.advancedCard.small.width}px;
  height: ${t=>t.theme.measurements.advancedCard.small.height}px;
  margin-bottom: ${t=>t.theme.measurements.advancedSpacer}px;
  color: ${t=>t.theme.card.foreground};
  &:nth-child(3n + 1),
  &:nth-child(3n + 2) {
    margin-right: ${t=>t.theme.measurements.advancedSpacer}px;
  }
`,g=t=>{const e=t.type===s.w.LARGE,i=t.type===s.w.SMALL;let r=f;return e?r=p:i&&(r=m),a.createElement(r,(0,s.N)({},t))},_=l.ZP.div.attrs((t=>({"data-test":t["data-test"]||o.T.CardContainer})))`
  display: flex;
  flex-wrap: wrap;
  /* width - padding on both sides */
  width: ${t=>t.theme.measurements.advancedUIToolControlBar.width-48}px;
`,y=l.ZP.div`
  display: flex;
  flex-direction: column;
  flex-shrink: 0;

  position: relative;
  width: ${t=>t.theme.measurements.advancedUIToolControlBar.width}px;
  /* for Firefox */
  min-height: 0;
  margin-bottom: ${t=>t.theme.measurements.advancedUIToolControlBar.marginBottom}px;

  z-index: ${t=>t.theme.measurements.zIndex.toolControlBar};

  background: ${t=>t.theme.toolControlBar.background};
  transition: width 0.4s ease-in;
  ${t=>t.reverse?l.iv`
          border-left: 1px solid ${t.theme.toolControlBar.borderColor};
        `:l.iv`
          border-right: 1px solid ${t.theme.toolControlBar.borderColor};
        `}
`,v=l.ZP.div.attrs((()=>({"data-test":o.T.CategoryItemsContainer})))`
  transition: max-height 0.8s ease-out, transform 0.8s ease-out;
  background: ${t=>t.theme.toolControlBar.background};
  visibility: hidden;
  opacity: 0;
  transform-origin: 0 0;
  display: none;
  flex-wrap: wrap;

  ${({show:t})=>t&&l.iv`
      opacity: 1;
      visibility: visible;
      ${(0,s.B)()?l.iv`
            display: block;
          `:l.iv`
            display: flex;
          `}
    `}
`,b=l.ZP.div`
  position: relative;
  flex-grow: 0;
  flex-shrink: 0;
  ${t=>t.shouldAnimateHeight&&l.iv`
      height: ${t.height}px;
    `}
  opacity: ${({opacity:t})=>t};
  visibility: ${({visibility:t})=>t};
  overflow: ${({shouldAnimateOverflow:t,overflow:e})=>t?e:void 0};
  transition: ${({shouldAnimateHeight:t})=>t?"opacity 0.5s ease-in, height 0.4s ease-out":"opacity 0.5s ease-in"};
  background: ${t=>t.theme.toolControlBar.background};
  color: ${t=>t.theme.toolControlBar.inputLabelForeground};
`,x=l.ZP.div`
  position: relative;
  padding: ${t=>t.theme.measurements.advancedUIToolControlBar.padding};
`;class w extends a.Component{constructor(t){super(t),this.contentRef=null,this.enableOverflow=()=>{const{show:t}=this.props;t&&this.contentRef.current&&this.setState({overflow:!0})},this.contentRef=a.createRef(),this.state={height:0,mounted:!1,overflow:!1}}componentDidMount(){const{overflowAfterExpand:t}=this.props;this.contentRef.current&&(t&&this.contentRef.current.addEventListener("transitionend",this.enableOverflow),this.setState({height:this.contentRef.current.scrollHeight,mounted:!0}))}componentWillUnmount(){this.contentRef.current&&this.contentRef.current.removeEventListener("transitionend",this.enableOverflow)}render(){const{show:t,shouldAnimateOverflow:e,shouldAnimateHeight:i,children:r}=this.props,{height:n,mounted:s,overflow:l}=this.state,c=s&&(t&&e||!e),u=c?n:0,h=c?1:0,d=c?"visible":"hidden";return a.createElement(b,{"data-test":o.T.ToolControlBarControls,ref:this.contentRef,height:u,opacity:h,visibility:d,overflow:l?"visible":"hidden",shouldAnimateHeight:i,shouldAnimateOverflow:e},a.createElement(x,null,r))}}w.defaultProps={show:!0,shouldAnimateOverflow:!0,shouldAnimateHeight:!0};var S=w;const k=(0,l.ZP)(o.C)`
  position: relative;
  padding: ${t=>t.theme.measurements.advancedUIToolControlBar.padding};
  width: ${t=>t.theme.measurements.advancedUIToolControlBar.width}px;

  box-sizing: border-box;

  /* for Firefox */
  min-height: 0;

  transition: height 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  background: ${t=>t.theme.toolControlBar.background};
  color: ${t=>t.theme.toolControlBar.inputLabelForeground};

  /* compensate the padding in IE and Edge */
  ${()=>(0,s.B)()||(0,s.u)()?l.iv`
        > ul {
          padding-right: 34px;
          margin-right: -34px;
        }
      `:""}
`;k.defaultProps={direction:"vertical"};var C=l.ZP.div`
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${t=>t.full?l.iv`
            left: -${3*t.theme.measurements.advancedSpacer/2}px;
            width: calc(
              100% + ${3*t.theme.measurements.advancedSpacer}px
            );
          `:`\n      left: ${3*t.theme.measurements.advancedSpacer/2}px;\n      width: calc(100% - ${3*t.theme.measurements.advancedSpacer}px);\n    `}
    border-bottom: 2px solid ${t=>t.theme.toolControlBar.separatorColor};
  }
`;var T=l.ZP.h2`
  color: ${t=>t.theme.toolControlBar.titleForeground};
  font-size: ${t=>t.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.headline2.case};
  font-weight: 500;
  min-height: ${t=>2*t.theme.measurements.advancedSpacer}px;
`;const E=l.ZP.div`
  display: flex;
  flex-direction: column;
  position: relative;
  width: 100%;
  flex: 1 0 auto;
`;var R=l.ZP.h1`
  /* Center text horizontally and vertically */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 0;
  padding: 0 4px;
  margin: 0;
  min-height: ${t=>t.theme.measurements.mainCanvasActionBar.height-2}px;
  font-size: ${t=>t.theme.measurements.fontSystem.headline1.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.headline1.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.headline1.case};
  background: ${t=>t.theme.toolControlBar.background};
  color: ${t=>t.theme.toolControlBar.titleForeground};
  border-bottom: 1px solid ${t=>t.theme.toolControlBar.separatorColor};
  font-weight: 500;
  text-align: center;
`;const D=l.ZP.div`
  display: flex;
  flex: 1 0 auto;
  flex-direction: column;
  align-items: center;
  height: 100%;
  width: ${t=>t.theme.measurements.advancedUIToolbar.width}px;

  z-index: ${t=>t.theme.measurements.zIndex.toolbar};

  background-color: ${t=>t.theme.toolbar.background};
  color: ${t=>t.theme.toolbar.foreground};
  ${t=>{const e=t.theme.toolbar.border?t.theme.toolbar.border:l.iv`
          1px solid ${t.theme.toolbar.borderColor};
        `;return t.reverse?l.iv`
          border-left: ${e};
        `:l.iv`
          border-right: ${e};
        `}}
  margin-bottom: ${t=>t.theme.measurements.advancedUIToolbar.marginBottom}px;
`,I=(0,l.ZP)(o.u)`
  width: inherit;
  height: inherit;
  padding: 0;
  margin: 0;
  ${(0,s.B)()?l.iv`
        background-color: transparent;
      `:l.iv`
        background-color: inherit;
      `}

  ${t=>t.isActive&&l.iv`
      background-color: ${t.theme.toolbar.activeBackground};
      color: ${t.theme.toolbar.activeForeground};
    `}
`,O=l.ZP.li.attrs({"aria-haspopup":!0,"aria-hidden":!0,role:"menuitem"})`
  height: ${t=>t.theme.measurements.advancedUIToolbar.itemHeight}px;
  cursor: pointer;
  position: relative;
`;var A=l.ZP.li.attrs({role:"none"})`
  height: ${t=>t.theme.measurements.advancedUIToolbar.seperatorHeight}px;
  cursor: pointer;
  position: relative;
`;const F=l.ZP.div`
  ${(0,s.B)()?l.iv`
        position: -ms-device-fixed;
      `:l.iv`
        position: fixed;
      `}
  position: -ms-device-fixed;
  top: ${t=>t.position.y-5}px;
  left: ${t=>t.position.x+t.theme.measurements.advancedUIToolbar.width-10}px;
  z-index: ${t=>t.theme.measurements.zIndex.toolbar};
  transition: opacity 0.5s ease-in-out, left 0.25s ease-in-out,
    right 0.25s ease-in-out, visibility 0.5s ease-in-out;
  pointer-events: none;
  opacity: 0;
  visibility: hidden;
  cursor: pointer;

  &:before {
    content: ' ';
    position: absolute;
    top: 10px;
    left: -8px;
    width: 0;
    height: 0;
    border-right: 8px solid ${t=>t.theme.tooltip.background};
    border-bottom: 6px solid transparent;
    border-top: 6px solid transparent;
  }

  &:after {
    content: '${t=>t.label}';
    position: absolute;
    transition: margin-left 0.15s ease-in-out, opacity 0.15s ease-in-out;
    color: ${t=>t.theme.tooltip.foreground};
    background: ${t=>t.theme.tooltip.background};
    padding: 8px 12px;
    text-align: center;
    vertical-align: super;
    font-size: ${t=>t.theme.measurements.fontSystem.label.size}px;
    letter-spacing: ${t=>t.theme.measurements.fontSystem.label.letterSpacing}px;
    text-transform: ${t=>t.theme.measurements.fontSystem.label.case};
    border-radius: ${t=>t.theme.shape.radiusSmall}px;
    white-space: nowrap;
  }

  ${t=>t.reverse&&l.iv`
      left: unset;
      right: ${t.position.x+t.theme.measurements.advancedUIToolbar.width-10}px;
      direction: rtl;

      &:before {
        border-left: 8px solid ${t.theme.tooltip.background};
        border-right: none;
        right: -8px;
        left: unset;
        top: 10px;
      }
    `}

  ${t=>t.show&&!t.reverse&&l.iv`
      opacity: 1;
      visibility: visible;
      left: ${t.position.x+t.theme.measurements.advancedUIToolbar.width+16}px;
    `}

  ${t=>t.show&&t.reverse&&l.iv`
      opacity: 1;
      visibility: visible;
      right: ${t.position.x+t.theme.measurements.advancedUIToolbar.width+16}px;
    `}
`,M=l.ZP.span`
  display: none;
`,P=({show:t,reverse:e,position:i,children:r})=>{const n="string"==typeof r?r:"";return a.createElement(F,{"data-test":o.T.Tooltip,show:t,reverse:e,position:i,label:n},a.createElement(M,null,n))};P.defaultProps={show:!1};const B={Card:g,CardContainer:_,Toolbar:{Index:({reverse:t,children:e})=>a.createElement(D,{reverse:t,"data-test":o.T.Toolbar},a.createElement(o.C,{direction:"vertical"},e)),Item:t=>a.createElement(O,null,a.createElement(I,(0,s.N)((0,s.N)({},t),{"data-test":o.T.ToolbarItem}))),Separator:A,Tooltip:P},Itemsbar:k,BarSeparator:"",ItemsSeparator:C,Controlsbar:S,Sidebar:{Index:({reverse:t=!1,children:e})=>a.createElement(y,{"data-test":o.T.ToolControlBar,reverse:t},e),Heading:R,SubHeading:T,TextCategory:({name:t,isFirstCategory:e,isLastCategory:i,children:r})=>a.createElement(E,null,!e&&a.createElement(o.X.Spacer,{count:2}),a.createElement(T,{"data-test":t},t),a.createElement(_,{"data-test":o.T.CategoryItemsContainer},r),!i&&a.createElement(a.Fragment,null,a.createElement(o.X.Spacer,{count:2}),a.createElement(C,{full:!0}))),ExpandableContainer:v}};let z=class extends a.Component{constructor(){super(...arguments),this.renderIcon=t=>{const e=n.r[t];return a.createElement(e,null)||null},this.update=t=>{this.props.active.selectTool(t)}}getToolTitle(t){return this.props.config.locale[t].title}render(){const t=this.props.active.tool,{tool:e,custom:i}=this.props;if(e){const r=i.getAdvancedToolbarItem();return a.createElement(r,{key:e,isActive:e===t,isReverse:this.props.isReverse,icon:this.renderIcon(e),onClick:()=>this.update(e),tool:e,label:this.getToolTitle(e)})}return a.createElement(B.Toolbar.Separator,null)}};z=(0,o.R)([(0,o.aa)("active","config","custom"),o.Z],z);var L=z;let N=class extends a.Component{render(){const{config:t}=this.props,e="reverse"===t.config.order;return a.createElement(B.Toolbar.Index,{reverse:e},t.tools.map(((t,i)=>a.createElement(L,{key:t||i,tool:t,isReverse:e}))))}};N=(0,o.R)([(0,o.aa)("config"),o.Z],N);var U=(0,o.aa)("adjustmentsTool","custom")((0,o.Z)((({adjustmentsTool:t,custom:e})=>{const i=t.locale.controls,r=e.getButton("toolControlBarSecondaryButton");return a.createElement(B.Controlsbar,{show:t.isDirty},a.createElement(r,{tool:s.c.ADJUSTMENT,label:i.buttonReset,ariaLabel:i.buttonReset,onClick:()=>{t.reset()},fullWidth:!0}),a.createElement(B.ItemsSeparator,null))})));const j=(0,l.ZP)(o.X.Input.Slider)`
  padding-bottom: 16px;
`;var H=(0,o.aa)("adjustmentsTool")((0,o.Z)((({adjustmentsTool:t})=>{const{categories:e,items:i,config:r,locale:n}=t,o=()=>{t.toolSnapshot()},s=e=>{const i=t.locale.categories[e.identifier]||e.name;return a.createElement(j,{identifier:e.identifier,adjust:!0,key:e.identifier,label:i,value:t[e.identifier],onChange:i=>((e,i)=>{t.editAdjustments({type:e,value:i})})(e.identifier,i),onMouseUp:o,onTouchEnd:o,snap:0})};return r.flattenCategories?a.createElement(a.Fragment,null,i.map(s)):a.createElement(a.Fragment,null,e.map(((t,i)=>{const r=n.categories[t.identifier]||t.name;return t.items?a.createElement(B.Sidebar.TextCategory,{key:t.identifier,name:r,isFirstCategory:0===i,isLastCategory:i===e.length-1},t.items.map(s)):null})))})));var W=(0,o.aa)("adjustmentsTool")((0,o.Z)((({adjustmentsTool:t,displayTitle:e})=>a.createElement(a.Fragment,null,e&&a.createElement(B.Sidebar.Heading,null,t.locale.title),a.createElement(U,null),a.createElement(B.Itemsbar,null,a.createElement(H,null))))));const G=(0,o.aa)("brushTool","custom")((0,o.Z)((({brushTool:t,custom:e})=>{const{colorList:i}=t,r=t.locale.controls,l=t.localeColor.colorPicker,c=e.getButton("toolControlBarSecondaryButton");return a.createElement(a.Fragment,null,a.createElement(B.Controlsbar,{show:t.isDirty},a.createElement(c,{tool:s.c.BRUSH,ariaLabel:r.buttonReset,onClick:t.reset,fullWidth:!0,label:r.buttonReset}),a.createElement(B.ItemsSeparator,null)),a.createElement(B.Controlsbar,{overflowAfterExpand:!0},a.createElement(o.X.Input.Selection,{label:r.selectColor},a.createElement(n.g,{activeColor:t.color,colors:i,labelsColor:l,onChange:t.changeColor})),a.createElement(o.X.Spacer,{count:2}),a.createElement(o.X.Input.Slider,{"data-test":o.T.BrushSize,label:r.sliderSize,value:t.relativeSize,min:1,max:100,divider:1,onChange:t.changeRelativeSize}),a.createElement(o.X.Spacer,{count:3}),a.createElement(o.X.Input.Slider,{"data-test":o.T.BrushHardness,label:r.sliderHardness,value:t.hardness,min:0,max:1,onChange:t.changeHardness}),a.createElement(o.X.Spacer,null)))}))),V=(0,o.aa)("brushTool")((0,o.Z)((({brushTool:t,displayTitle:e})=>a.createElement(a.Fragment,null,e&&a.createElement(B.Sidebar.Heading,null,t.locale.title),a.createElement(G,null)))));var $=(0,o.aa)("filterTool","custom")((0,o.Z)((({filterTool:t,custom:e})=>{const i=t.locale.controls,r=t.state,n=e.getButton("toolControlBarSecondaryButton"),l=()=>{t.toolSnapshot()};return a.createElement(B.Controlsbar,{show:t.isOptionSelected},a.createElement(o.X.Input.Form,null,a.createElement(n,{tool:s.c.FILTER,ariaLabel:i.buttonReset,onClick:()=>{t.reset()},fullWidth:!0,label:i.buttonReset}),a.createElement(o.X.Spacer,{count:2}),a.createElement(o.X.Input.Slider,{"aria-hidden":!t.isOptionSelected,label:i.sliderIntensity,value:r.intensity,min:0,max:1,onChange:t.changeIntensity,onMouseUp:l,onTouchEnd:l,snap:r.isDuotone?.5:null}),a.createElement(o.X.Spacer,null)),a.createElement(B.ItemsSeparator,null))})));var Z=(0,o.aa)("filterTool","custom")((0,o.Z)((({filterTool:t,custom:e})=>{const{categories:i,config:r,items:o,locale:l}=t,c=e.getAdvancedItemCard(),u=e.getAdvancedCategoryCard(),h=(e,i)=>{const r=l.items[e.identifier]||e.name;return a.createElement(c,{tool:s.c.FILTER,type:s.w.MEDIUM,onClick:()=>t.selectFilter(e.identifier,e.defaultIntensity),key:e.identifier,image:e.thumbnailURI,label:r,style:{animationDelay:`${(0,n.a)(i)}s`},isActive:t.identifier===e.identifier},a.createElement(n.m,{withBackground:!0},r))};return r.flattenCategories?a.createElement(a.Fragment,null,o.map(h)):r.categoryHeaderType===s.b.CARD?a.createElement(a.Fragment,null,i.map(((e,i)=>{const{selectedCategoryIdentifier:r}=t,o=r===e.identifier,c=l.categories[e.identifier]||e.name;return e.items?a.createElement("div",{key:e.identifier},a.createElement(u,{isActive:o,tool:s.c.FILTER,type:s.w.LARGE,onClick:()=>t.toggleCategorySelection(e.identifier),image:e.thumbnailURI,label:c,style:{animationDelay:`${(0,n.a)(i)}s`}},a.createElement(n.m,{withBackground:!0,caret:!0,isActive:o},c)),a.createElement(B.Sidebar.ExpandableContainer,{show:o},e.items.map(h))):null}))):r.categoryHeaderType===s.b.TEXT?a.createElement(a.Fragment,null,i.map(((t,e)=>{const r=l.categories[t.identifier]||t.name;return t.items?a.createElement(B.Sidebar.TextCategory,{key:t.identifier,name:r,isFirstCategory:0===e,isLastCategory:e===i.length-1},t.items.map(h)):null}))):null})));var X=(0,o.aa)("filterTool")((0,o.Z)((({filterTool:t,displayTitle:e})=>a.createElement(a.Fragment,null,e&&a.createElement(B.Sidebar.Heading,null,t.locale.title),a.createElement($,null),a.createElement(B.Itemsbar,{key:"filterToolItemsbar"},a.createElement(B.CardContainer,null,a.createElement(Z,null)))))));var Y=(0,o.aa)("focusTool","custom")((0,o.Z)((({focusTool:t,custom:e})=>{const i=t.locale.controls,r=e.getButton("toolControlBarSecondaryButton"),n=()=>{t.toolSnapshot(i.sliderIntensity)};return a.createElement(B.Controlsbar,{show:t.isOptionSelected},a.createElement(o.X.Input.Form,null,a.createElement(r,{tool:s.c.FOCUS,ariaLabel:i.buttonReset,onClick:()=>{t.reset()},fullWidth:!0,label:i.buttonReset}),a.createElement(o.X.Spacer,{count:2}),a.createElement(o.X.Input.Slider,{"aria-hidden":!t.isOptionSelected,label:i.sliderIntensity,value:t.intensity,min:o.S.minIntensity,max:t.maxIntensity,divider:1,onChange:t.changeIntensity,onMouseUp:n,onTouchEnd:n})),a.createElement(o.X.Spacer,{count:1}),a.createElement(B.ItemsSeparator,null))})));var q=(0,o.aa)("focusTool","custom")((0,o.Z)((({focusTool:t,custom:e})=>{const{items:i}=t;return a.createElement(B.Itemsbar,null,a.createElement(B.CardContainer,null,i.map(((i,r)=>{const o=t.locale.items[i.identifier]||i.name,l=e.getAdvancedItemCard();return a.createElement(l,{tool:s.c.FOCUS,type:s.w.LARGE,onClick:()=>t.selectFocus(i.identifier),key:i.identifier,image:i.thumbnailURI,label:o,style:{animationDelay:`${(0,n.a)(r)}s`},isActive:i.identifier===t.identifier},a.createElement(n.m,{withBackground:!0},o))}))))})));var K=(0,o.aa)("focusTool")((0,o.Z)((({focusTool:t,displayTitle:e})=>a.createElement(a.Fragment,null,e&&a.createElement(B.Sidebar.Heading,null,t.locale.title),a.createElement(Y,null),a.createElement(q,null)))));const Q=(0,o.aa)("frameTool","custom")((0,o.Z)((({frameTool:t,custom:e})=>{const i=t.locale.controls,r=t.localeColor.colorPicker,{tintable:l,colorList:c}=t,u=e.getButton("toolControlBarSecondaryButton"),h=e=>{t.toolSnapshot(e)};return a.createElement(B.Controlsbar,{show:t.isOptionSelected,overflowAfterExpand:!0},a.createElement(u,{tool:s.c.FRAME,ariaLabel:i.buttonReset,onClick:()=>{t.reset()},fullWidth:!0,label:i.buttonReset}),a.createElement(o.X.Spacer,{count:2}),a.createElement(o.X.Input.Slider,{"aria-hidden":!t.isOptionSelected,label:i.sliderOpacity,value:t.opacity,min:0,max:1,onChange:t.changeOpacity,onMouseUp:()=>{h(i.sliderOpacity)},onTouchEnd:()=>{h(i.sliderOpacity)}}),a.createElement(o.X.Spacer,{count:2}),a.createElement(o.X.Input.Slider,{"aria-hidden":!t.isOptionSelected,label:i.sliderSize,value:t.size,min:t.minSize,max:t.maxSize,divider:1,onChange:t.changeWidth,onMouseUp:()=>{h(i.sliderSize)},onTouchEnd:()=>{h(i.sliderSize)}}),a.createElement(o.X.Spacer,{count:2}),a.createElement(o.X.Input.Selection,{isDisabled:!l,label:i.selectColor},a.createElement(n.g,{activeColor:t.color,colors:c,labelsColor:r,isDisabled:!l,onChange:t.changeColor,onAddSnapshot:t.colorSnapshot})),a.createElement(B.ItemsSeparator,null))})));var J=(0,o.aa)("frameTool","custom")((0,o.Z)((({frameTool:t,custom:e})=>{const{items:i}=t,r=t.state?t.state.identifier:null;return a.createElement(B.Itemsbar,null,a.createElement(B.CardContainer,null,i.map(((i,o)=>{const l=t.locale.items[i.identifier]||i.name,c=e.getAdvancedItemCard();return a.createElement(c,{tool:s.c.FRAME,type:s.w.MEDIUM,onClick:()=>t.selectFrame(i.identifier),key:i.identifier,image:i.thumbnailURI,label:l,style:{backgroundSize:"75%",animationDelay:`${(0,n.a)(o)}s`},isActive:i.identifier===r},a.createElement(n.m,{hidden:!0},l))}))))})));const tt=(0,o.aa)("frameTool")((0,o.Z)((({frameTool:t,displayTitle:e})=>a.createElement(a.Fragment,null,e&&a.createElement(B.Sidebar.Heading,null,t.locale.title),a.createElement(Q,null),a.createElement(J,null)))));var et=(0,o.aa)("library","active","custom")((0,o.Z)((({library:t,active:e,custom:i})=>{const r=t.locale.controls.placeholderSearch,{config:l,libraryProvider:c}=t,u=i.getButton("toolControlBarPrimaryButton");return a.createElement(B.Controlsbar,{shouldAnimateHeight:!1,shouldAnimateOverflow:!1},c&&a.createElement(a.Fragment,null,a.createElement(o.X.Input.Search,{onChange:e=>{t.fetchImages(e)},placeholder:r}),a.createElement(o.X.Spacer,{count:2})),l.enableUpload&&a.createElement(a.Fragment,null,a.createElement(u,{tool:s.c.LIBRARY,ariaLabel:t.locale.controls.buttonUpload,onClick:()=>{const t=document.getElementById("fileUpload");t&&t.click()},fullWidth:!0,label:t.locale.controls.buttonUpload},a.createElement(o.X.Input.File,{onChange:t=>{const{files:i}=t.target;if(i.length){const t=new FileReader;t.onload=t=>{e.newImage(t.target.result)},t.readAsDataURL(i[0])}}})),a.createElement(o.X.Spacer,null)),l.enableWebcam&&a.createElement(n.h,{tool:s.c.LIBRARY,onClick:()=>{e.selectWebcam(!0)},fullWidth:!0,label:t.locale.controls.buttonWebcamOpen}),a.createElement(B.ItemsSeparator,null))})));const it=(0,o.aa)("library","active","custom")((0,o.Z)((({active:t,library:e,custom:i})=>{const{query:r,config:l,selectedCategoryIdentifier:c,categories:u,items:h}=e,d=i.getAdvancedCategoryCard(),p=i.getAdvancedItemCard(),f=(e,i)=>a.createElement(p,{tool:s.c.LIBRARY,type:s.w.MEDIUM,onClick:()=>t.newImage(e.rawUrl),key:`${e.identifier}-${i}`,image:e.thumbnailURI,label:e.name,style:{animationDelay:`${(0,n.a)(i)}s`},authorAvatar:e.authorAvatar,authorName:e.authorName},e.authorAvatar&&a.createElement(o.q,{url:e.authorAvatar}),e.authorName&&a.createElement(n.m,{withBackground:!0},e.authorName));return r?h.length?a.createElement(a.Fragment,null,h.map(f)):a.createElement("p",{"data-test":o.T.NoResult},e.locale.controls.noResults):l.flattenCategories?a.createElement(a.Fragment,null,h.map(f)):l.categoryHeaderType===s.b.CARD?a.createElement(a.Fragment,null,u.map(((t,i)=>{const r=c===t.identifier;return t.items?a.createElement("div",{key:t.identifier},a.createElement(d,{isActive:r,tool:s.c.LIBRARY,type:s.w.LARGE,onClick:()=>e.toggleCategorySelection(t.identifier),image:t.thumbnailURI,label:t.name,style:{animationDelay:`${(0,n.a)(i)}s`}},a.createElement(n.m,{withBackground:!0,caret:!0,isActive:r},t.name)),a.createElement(B.Sidebar.ExpandableContainer,{show:r},t.items.map(f))):null}))):l.categoryHeaderType===s.b.TEXT?a.createElement(a.Fragment,null,u.map(((t,e)=>t.items?a.createElement(B.Sidebar.TextCategory,{key:t.identifier,name:t.name,isFirstCategory:0===e,isLastCategory:e===u.length-1},t.items.map(f)):null))):null}))),rt=(0,o.aa)("library")((0,o.Z)((({library:t,displayTitle:e})=>a.createElement(a.Fragment,null,e&&a.createElement(B.Sidebar.Heading,null,t.locale.title),a.createElement(et,null),a.createElement(B.Itemsbar,null,a.createElement(B.CardContainer,null,a.createElement(it,null)))))));var nt=(0,o.aa)("overlayTool","custom")((0,o.Z)((({overlayTool:t,custom:e})=>{const i=t.locale.controls,{allBlendModes:r}=t,{blendMode:n}=t,l=e.getButton("toolControlBarSecondaryButton"),c=()=>{t.toolSnapshot()};return a.createElement(B.Controlsbar,{show:t.isOptionSelected},a.createElement(l,{tool:s.c.OVERLAY,ariaLabel:i.buttonReset,onClick:()=>{t.reset()},fullWidth:!0,label:i.buttonReset}),a.createElement(o.X.Spacer,{count:2}),a.createElement(o.X.Input.CarouselSlider,{label:i.carouselBlendMode,defaultIdentifier:n,onSelect:e=>{t.changeBlendMode(e)},list:r}),a.createElement(o.X.Spacer,{count:2}),a.createElement(o.X.Input.Slider,{"aria-hidden":!t.isOptionSelected,label:i.sliderOpacity,value:t.opacity,min:0,max:1,onChange:t.changeOpacity,onMouseUp:c,onTouchEnd:c}),a.createElement(o.X.Spacer,null),a.createElement(B.ItemsSeparator,null))})));var ot=(0,o.aa)("overlayTool","custom")((0,o.Z)((({overlayTool:t,custom:e})=>{const{items:i,locale:r,identifier:o,selectOverlay:l}=t;return a.createElement(B.Itemsbar,null,a.createElement(B.CardContainer,null,i.map(((t,i)=>{const c=r.items[t.identifier]||t.name,u=e.getAdvancedItemCard();return a.createElement(u,{tool:s.c.OVERLAY,type:s.w.MEDIUM,onClick:()=>l(t.identifier),key:t.identifier,image:t.thumbnailURI,label:c,style:{animationDelay:`${(0,n.a)(i)}s`},isActive:t.identifier===o},a.createElement(n.m,{withBackground:!0},c))}))))})));var st=(0,o.aa)("overlayTool")((0,o.Z)((({overlayTool:t,displayTitle:e})=>a.createElement(a.Fragment,null,e&&a.createElement(B.Sidebar.Heading,null,t.locale.title),a.createElement(nt,null),a.createElement(ot,null)))));const at=l.ZP.input.attrs({type:"file",id:"fileUpload",accept:"image/*",multiple:!0})`
  ${o.V.VisuallyHidden}
`,lt=(0,o.aa)("stickerTool","custom")((0,o.Z)((({stickerTool:t,custom:e})=>{const{colorList:i}=t,r=t.locale.controls,l=t.localeColor.colorPicker,c=e.getButton("toolControlBarPrimaryButton"),u=()=>{t.toolSnapshot()},h=()=>{const t=document.getElementById("fileUpload");t&&(t.value=null,t.click())},d=e=>{const{files:i}=e.target;t.addFiles(i)},p=!t.isStickerSelected||!t.tintable&&t.isStickerSelected;return a.createElement(B.Controlsbar,{shouldAnimateHeight:!1,shouldAnimateOverflow:!1,overflowAfterExpand:!0},a.createElement(o.X.Input.Form,null,t.isCustomStickerEnabled?a.createElement(c,{tool:s.c.STICKER,ariaLabel:r.buttonUpload,onClick:h,fullWidth:!0,label:r.buttonUpload},a.createElement(at,{onChange:d})):null,a.createElement(o.X.Spacer,{count:2}),a.createElement(o.X.Input.Slider,{isDisabled:!t.isStickerSelected,label:r.sliderOpacity,value:t.opacity,min:0,max:1,onChange:t.changeOpacity,onMouseUp:u,onTouchEnd:u}),a.createElement(o.X.Spacer,{count:2}),a.createElement(o.X.Input.Selection,{isDisabled:p,label:r.selectColor},a.createElement(n.g,{activeSprite:t.id,activeColor:t.tintColor,colors:i,labelsColor:l,isDisabled:p,onChange:t.changeTintColor,onAddSnapshot:t.tintColorSnapshot}))),a.createElement(B.ItemsSeparator,null))})));var ct=(0,o.aa)("stickerTool","custom")((0,o.Z)((({stickerTool:t,custom:e})=>{const{categories:i,selectedCategoryIdentifier:r,config:o,items:l,locale:c}=t,u=e.getAdvancedCategoryCard(),h=e.getAdvancedItemCard(),d=(e,i)=>{const r=c.items[e.identifier]||e.name;return a.createElement(h,{key:e.identifier,tool:s.c.STICKER,type:s.w.SMALL,onClick:()=>t.add(e.identifier),image:e.thumbnailURI,label:r,style:{backgroundSize:"75%",animationDelay:`${(0,n.b)(i)}s`}},a.createElement(n.m,{hidden:!0},r))};return o.flattenCategories?a.createElement(a.Fragment,null,l.map(d)):o.categoryHeaderType===s.b.CARD?a.createElement(a.Fragment,null,i.map(((e,i)=>{const o=r===e.identifier,l=c.categories[e.identifier]||e.name;return e.items?a.createElement("div",{key:e.identifier},a.createElement(u,{isActive:o,tool:s.c.STICKER,type:s.w.LARGE,onClick:()=>t.toggleCategorySelection(e.identifier),image:e.thumbnailURI,label:l,style:{animationDelay:`${(0,n.a)(i)}s`}},a.createElement(n.m,{withBackground:!0,caret:!0,isActive:o},l)),a.createElement(B.Sidebar.ExpandableContainer,{show:o,key:`${e.identifier}-items`},e.items.map(d))):null}))):o.categoryHeaderType===s.b.TEXT?a.createElement(a.Fragment,null,i.map(((t,e)=>{const r=c.categories[t.identifier]||t.name;return t.items?a.createElement(B.Sidebar.TextCategory,{key:t.identifier,name:r,isFirstCategory:0===e,isLastCategory:e===i.length-1},t.items.map(d)):null}))):null})));const ut=(0,o.aa)("stickerTool")((0,o.Z)((({stickerTool:t,displayTitle:e})=>a.createElement(a.Fragment,null,e&&a.createElement(B.Sidebar.Heading,null,t.locale.title),a.createElement(lt,null),a.createElement(B.Itemsbar,null,a.createElement(B.CardContainer,null,a.createElement(ct,null))))))),ht=l.ZP.div`
  position: relative;
`,dt=l.ZP.div`
  display: flex;
  justify-content: space-between;
`,pt=(0,l.ZP)(o.X.Input.NumericInput)`
  max-width: 50%;
  margin-right: 16px;
`,ft=(0,l.ZP)(o.X.Input.Selection)`
  width: 50%;
`,mt=(0,o.aa)("textTool","custom")((0,o.Z)((({textTool:t,custom:e})=>{const i=t.locale.controls,r=t.localeColor.colorPicker,{fontFamilies:l,alignment:c,isTextSelected:u,fontFamily:h,fontStyle:d,fontWeight:p,colorList:f,backgroundColorList:m}=t,g=["left","center","right"],_=e.getButton("textAlignment"),y=e.getButton("toolControlBarPrimaryButton"),v=()=>{t.toolSnapshot()},b=l.map((t=>({label:`${t.fontFamily} ${o.P.getDisplayFontStyle(t)}`,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily,value:t.identifier}))),x=b.filter((({value:e})=>e===t.identifier))[0];return a.createElement(B.Controlsbar,{show:!0,overflowAfterExpand:!0,shouldAnimateHeight:!1},a.createElement(o.X.Input.Form,null,a.createElement(y,{tool:s.c.TEXT,ariaLabel:i.buttonNew,onClick:()=>{t.add()},fullWidth:!0,label:i.buttonNew}),a.createElement(o.X.Spacer,{count:2}),a.createElement(o.X.Input.Dropdown,{isDisabled:!u,style:{fontFamily:h,fontStyle:d,fontWeight:p},itemStyle:t=>({fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight}),label:i.dropdownFontFamily,list:b,onSelect:t.changeFont,selectedItem:x.label}),a.createElement(o.X.Spacer,{count:2}),a.createElement(dt,null,a.createElement(pt,{value:t.fontSize.toFixed(0),onSubmit:e=>{const i=e?parseFloat(e):0;t.setFontSize(Math.max(10,Math.min(690,i)))},label:i.textFontSize,isDisabled:!u}),a.createElement(ft,{isDisabled:!u,inline:!0,label:i.selectAlignment,"data-test":o.T.TextAlignment},g.map((e=>{const i=n.s[e];return a.createElement(_,{tool:e,isDisabled:!u,ariaLabel:`Align ${e}`,isActive:e===c,key:e,style:{padding:"1px 3px 2px"},icon:a.createElement(i,null),onClick:()=>t.changeAlignment(e)})})))),a.createElement(o.X.Spacer,{count:2}),a.createElement(ht,null,a.createElement(B.ItemsSeparator,{full:!0})),a.createElement(o.X.Spacer,{count:2}),a.createElement(o.X.Input.Selection,{isDisabled:!u,label:i.selectFontColor},a.createElement(n.g,{activeSprite:t.id,activeColor:t.textColor,colors:f,labelsColor:r,isDisabled:!u,onChange:t.changeColor,onAddSnapshot:t.colorSnapshot})),a.createElement(o.X.Spacer,{count:2}),a.createElement(o.X.Input.Selection,{isDisabled:!u,label:i.selectBackgroundColor},a.createElement(n.g,{activeSprite:t.id,activeColor:t.backgroundColor,colors:m,labelsColor:r,isDisabled:!u,onChange:t.changeBackgroundColor,onAddSnapshot:t.backgroundColorSnapshot})),a.createElement(o.X.Spacer,{count:2}),a.createElement(ht,null,a.createElement(B.ItemsSeparator,{full:!0})),a.createElement(o.X.Spacer,{count:2}),a.createElement(o.X.Input.Slider,{isDisabled:!u,label:i.sliderLineSpacing,value:t.lineHeight,min:.5,max:3,onChange:t.changeLineHeight,onMouseUp:v,onTouchEnd:v,snap:1,divider:1,decimal:1}),a.createElement(o.X.Spacer,{count:1})))}))),gt=(0,o.aa)("textTool")((0,o.Z)((({textTool:t,displayTitle:e})=>a.createElement(a.Fragment,null,e&&a.createElement(B.Sidebar.Heading,null,t.locale.title),a.createElement(mt,null))))),_t=(0,o.aa)("textDesignTool","custom")((0,o.Z)((({textDesignTool:t,custom:e})=>{const i=t.locale.controls,r=t.localeColor.colorPicker,{colorList:l}=t,c=t.isTextDesignSelected,u=e.getButton("toolControlBarPrimaryButton"),h=e.getButton("toolControlBarSecondaryButton");return a.createElement(B.Controlsbar,{shouldAnimateOverflow:!1,shouldAnimateHeight:!1},a.createElement(o.X.Input.Form,null,a.createElement(u,{tool:s.c.TEXT_DESIGN,ariaLabel:i.buttonNew,onClick:()=>{t.add()},fullWidth:!0,label:i.buttonNew}),a.createElement(o.X.Spacer,{count:2}),a.createElement(h,{tool:s.c.TEXT_DESIGN,ariaLabel:i.buttonShuffle,isDisabled:!c,onClick:()=>{t.changeSeed()},fullWidth:!0,label:i.buttonShuffle}),a.createElement(o.X.Spacer,{count:2}),a.createElement(o.X.Input.Selection,{isDisabled:!c,label:i.selectColor},a.createElement(n.g,{activeSprite:t.id,activeColor:t.color,colors:l,labelsColor:r,isDisabled:!c,onChange:t.changeColor,onAddSnapshot:t.colorSnapshot}))),a.createElement(B.ItemsSeparator,null))})));var yt=(0,o.aa)("textDesignTool","custom")((0,o.Z)((({textDesignTool:t,custom:e})=>{const{items:i,identifier:r}=t;return a.createElement(B.Itemsbar,null,a.createElement(B.CardContainer,null,i.map(((i,o)=>{const l=e.getAdvancedItemCard();return a.createElement(l,{key:i.identifier,tool:s.c.TEXT_DESIGN,type:s.w.MEDIUM,onClick:()=>(e=>{t.changeIdentifier(e)})(i.identifier),image:i.thumbnailURI,label:i.name||"",style:{animationDelay:`${(0,n.a)(o)}s`,backgroundSize:"60%"},isDisabled:!t.isTextDesignSelected,isActive:r===i.identifier},a.createElement(n.m,{hidden:!0},i.name))}))))})));const vt=(0,o.aa)("textDesignTool")((0,o.Z)((({textDesignTool:t,displayTitle:e})=>a.createElement(a.Fragment,null,e&&a.createElement(B.Sidebar.Heading,null,t.locale.title),a.createElement(_t,null),a.createElement(yt,null)))));var bt=(0,o.aa)("transformTool","custom")((0,o.Z)((({transformTool:t,custom:e})=>{const i=t.locale.controls,{forceDimensions:r,lockResolution:l,localOutputHeight:c,localOutputWidth:u}=t,h=e.getButton("toolControlBarSecondaryButton"),d=e.getCheckbox();return a.createElement(B.Controlsbar,{shouldAnimateHeight:!1},a.createElement(o.X.Input.Form,null,a.createElement(h,{tool:s.c.TRANSFORM,ariaLabel:i.buttonReset,onClick:()=>{t.reset()},fullWidth:!0,label:i.buttonReset}),a.createElement(o.X.Spacer,{count:2}),a.createElement(d,{isDisabled:r,value:l,label:i.checkboxKeepResolution,checkMarkPosition:"right",onClick:t.changeLockResolution,style:{paddingTop:"5px",justifyContent:"space-between"}}),a.createElement(o.X.Spacer,{count:2}),a.createElement(n.n,{isDisabled:r,showLabel:!0,valueHeight:c,valueWidth:u,onSubmitWidth:t.onPixelWidth,onSubmitHeight:t.onPixelHeight,label:i.inputCropSize,labelHeight:i.inputHeight,labelWidth:i.inputWidth}),a.createElement(o.X.Spacer,{count:1})),a.createElement(B.ItemsSeparator,null))})));var xt=(0,o.aa)("transformTool","custom","editor")((0,o.Z)((({transformTool:t,custom:e,editor:i})=>{const{categories:r,items:o,identifier:l,config:u,locale:h}=t,d=e.getAdvancedItemCard(),p=e.getAdvancedCategoryCard(),f=(e,r)=>{const{theme:o,measurements:u}=i.configStore,p=h.items[e.identifier]||e.name;let f=e.thumbnailURI||"",m="80%";if(!t.checkIfTransformThumbnailExits(e.thumbnailURI)){const t=e.identifier.includes("imgly_transform_common"),i=n.u.crops[e.identifier]||n.u.crops.imgly_transform_common_custom,r=a.createElement(i,{width:u.advancedCard.medium.width-(t?42:0),height:u.advancedCard.medium.height-(t?42:0),main:o.transform.crops.main,highlight:o.transform.crops.highlight,shadow:o.transform.crops.shadow});f=`'data:image/svg+xml,${encodeURIComponent((0,c.renderToStaticMarkup)(r))}'`,m=(0,s.B)()||(0,s.u)()?"auto":"unset"}return a.createElement(d,{key:e.identifier,tool:s.c.TRANSFORM,type:s.w.MEDIUM,onClick:()=>t.changeIdentifier(e.identifier,!0),image:f,label:p,style:{backgroundSize:m,animationDelay:`${(0,n.a)(r)}s`},isActive:e.identifier===l},a.createElement(n.m,null,p))};return u.flattenCategories?a.createElement(a.Fragment,null,o.map(f)):u.categoryHeaderType===s.b.CARD?a.createElement(a.Fragment,null,r.map(((e,r)=>{const{theme:o,measurements:l}=i.configStore,u=t.selectedCategoryIdentifier===e.identifier,d=h.categories[e.identifier]||e.name;let m=e.thumbnailURI||"";if(!e.items)return null;if(!t.checkIfTransformThumbnailExits(e.thumbnailURI)){const t=n.u.categories[e.identifier]||n.u.crops.imgly_transform_common_custom,i=a.createElement(t,{width:l.advancedCard.large.width-42,height:l.advancedCard.large.height-42,main:o.transform.crops.main,highlight:o.transform.crops.highlight,shadow:o.transform.crops.shadow});m=`'data:image/svg+xml,${encodeURIComponent((0,c.renderToStaticMarkup)(i))}'`}return a.createElement("div",{key:e.identifier},a.createElement(p,{type:s.w.LARGE,onClick:()=>t.toggleCategorySelection(e.identifier),key:e.identifier,image:m,style:{animationDelay:`${(0,n.a)(r)}s`},label:e.name,tool:s.c.TRANSFORM},a.createElement(n.m,{caret:!0,isActive:u},d)),a.createElement(B.Sidebar.ExpandableContainer,{show:u},e.items.map(f)))}))):u.categoryHeaderType===s.b.TEXT?a.createElement(a.Fragment,null,r.map(((t,e)=>{const i=h.categories[t.identifier]||t.name;return t.items?a.createElement(B.Sidebar.TextCategory,{key:t.identifier,name:i,isFirstCategory:0===e,isLastCategory:e===r.length-1},t.items.map(f)):null}))):null})));var wt=(0,o.aa)("transformTool")((0,o.Z)((({transformTool:t,displayTitle:e})=>a.createElement(a.Fragment,null,e&&a.createElement(B.Sidebar.Heading,null,t.locale.title),a.createElement(bt,null),a.createElement(B.Itemsbar,null,a.createElement(B.CardContainer,null,a.createElement(xt,null)))))));let St=class extends a.Component{render(){const{config:t,active:e}=this.props,i=e.tool,r=t.config.displayToolControlBarTitle;return a.createElement(B.Sidebar.Index,{reverse:"reverse"===t.config.order},a.createElement(o.X.Switch.Index,{type:i},a.createElement(o.X.Switch.Case,{value:s.c.LIBRARY},a.createElement(rt,{displayTitle:r})),a.createElement(o.X.Switch.Case,{value:s.c.FILTER},a.createElement(X,{displayTitle:r})),a.createElement(o.X.Switch.Case,{value:s.c.FOCUS},a.createElement(K,{displayTitle:r})),a.createElement(o.X.Switch.Case,{value:s.c.ADJUSTMENT},a.createElement(W,{displayTitle:r})),a.createElement(o.X.Switch.Case,{value:s.c.OVERLAY},a.createElement(st,{displayTitle:r})),a.createElement(o.X.Switch.Case,{value:s.c.STICKER},a.createElement(ut,{displayTitle:r})),a.createElement(o.X.Switch.Case,{value:s.c.TEXT},a.createElement(gt,{displayTitle:r})),a.createElement(o.X.Switch.Case,{value:s.c.TEXT_DESIGN},a.createElement(vt,{displayTitle:r})),a.createElement(o.X.Switch.Case,{value:s.c.FRAME},a.createElement(tt,{displayTitle:r})),a.createElement(o.X.Switch.Case,{value:s.c.BRUSH},a.createElement(V,{displayTitle:r})),a.createElement(o.X.Switch.Case,{value:s.c.TRANSFORM},a.createElement(wt,{displayTitle:r}))))}};St=(0,o.R)([(0,o.aa)("active","config"),o.Z],St);const kt=l.ZP.div`
  position: absolute;
  height: 100%;
  width: ${t=>t.theme.measurements.advancedUIToolbar.width+t.theme.measurements.advancedUIToolControlBar.width}px;
  top: 0;
  background: ${t=>t.theme.webcam.backdrop};
  z-index: ${t=>t.theme.measurements.zIndex.disable};
`;let Ct=class extends a.Component{static getDerivedStateFromError(t){return console.error(t),{hasError:!0}}render(){const{config:t,active:e}=this.props;return t.isOrderDefault?a.createElement(o.X.Container,{"data-test":o.T.EditorContainer},e.isWebcam?a.createElement(kt,{style:{left:0}}):null,a.createElement(n.o,null),a.createElement(N,null),a.createElement(St,null),a.createElement(n.c,null,a.createElement(n.q,null),a.createElement(n.l,null))):a.createElement(o.X.Container,{"data-test":o.T.EditorContainer},e.isWebcam?a.createElement(kt,{style:{right:0}}):null,a.createElement(n.o,null),a.createElement(n.c,null,a.createElement(n.q,null),a.createElement(n.l,null)),a.createElement(St,null),a.createElement(N,null))}};Ct=(0,o.R)([(0,o.aa)("config","active"),o.Z],Ct);class Tt extends a.Component{constructor(t){super(t),this.ref=null,this.updatePosition=()=>{const{isReverse:t}=this.props,e={x:0,y:0};if(this.ref.current){const{top:i,height:r,left:n,right:o}=this.ref.current.getBoundingClientRect();e.y=i+r/4,e.x=t?window.innerWidth-o:n}this.setState({tooltipPosition:e})},this.mouseOver=t=>{this.updatePosition(),this.setState({hoverTool:t})},this.mouseOut=()=>{this.setState({hoverTool:null})},this.state={hoverTool:null,tooltipPosition:{x:0,y:0}},this.ref=a.createRef()}componentDidMount(){this.updatePosition()}componentDidUpdate(t){const{isReverse:e}=this.props;e!==t.isReverse&&this.updatePosition()}render(){const{tool:t,isActive:e,isReverse:i,icon:r,label:n,onClick:o,className:s,children:l}=this.props,{hoverTool:c,tooltipPosition:u}=this.state;return a.createElement(Rt,{ref:this.ref,onMouseOver:()=>this.mouseOver(t),onMouseOut:()=>this.mouseOut(),className:s},a.createElement(B.Toolbar.Item,{ariaLabel:n,isActive:e,onClick:()=>o(t)},r,l),a.createElement(B.Toolbar.Tooltip,{position:u,reverse:i,show:c===t},n))}}var Et=Tt;const Rt=l.ZP.div`
  position: relative;
`;class Dt extends a.Component{componentDidMount(){const{editor:t,storeProps:e}=this.props;this.editor=t,this.storeProps=e;const i=new n.k(this.editor.configStore.config.custom.components,{advancedUICategoryCard:B.Card,advancedUIItemCard:B.Card,advancedUIToolbarItem:Et}),r={getAdvancedCategoryCard:i.getAdvancedCategoryCard,getAdvancedItemCard:i.getAdvancedItemCard,getAdvancedToolbarItem:i.getAdvancedToolbarItem,getDialog:i.getDialog,getButton:i.getButton,getColorItem:i.getColorItem,getCheckbox:i.getCheckbox};this.storeProps.custom=r,this.forceUpdate()}render(){return this.storeProps?a.createElement(o.$,(0,s.N)({},this.storeProps),a.createElement(l.f6,{theme:(0,s.N)((0,s.N)({},this.editor.configStore.theme),{measurements:this.editor.configStore.measurements})},a.createElement(Ct,null))):null}}document.onkeydown=t=>{13===t.keyCode&&document.activeElement&&document.activeElement.click()};class It extends s.g{constructor(t,e){super(),this.dispose=()=>{this.container&&(u.unmountComponentAtNode(this.container),this.removeAllListeners(s.h.EXPORT),this.removeAllListeners(s.h.HISTORY_CHANGE),this.removeAllListeners(s.h.EDITOR_READY),this.removeAllListeners(s.h.ERROR_IMAGE_LOADING),this.removeAllListeners(s.h.IMAGE_LOAD),this.removeAllListeners(s.h.TOOL_ENTER),this.removeAllListeners(s.h.STICKER_UPLOAD_ADD))},this.serialize=t=>this.editor.serialize(t),this.deserialize=t=>this.editor.deserialize(t),this.export=t=>this.editor.export(t),this.close=()=>this.editor.close(),this.setImage=t=>this.editor.setImage(t),this.reset=()=>{this.editor.resetToolStates(),this.editor.resize()},this.container=e,this.editor=new o.U((0,s.N)({},t)),this.editor.configStore.events.on(s.h.EXPORT,(t=>{this.emit(s.h.EXPORT,t)})),this.editor.configStore.events.on(s.h.CLOSE,(()=>{this.dispose(),this.emit(s.h.CLOSE)})),this.editor.configStore.events.on(s.h.HISTORY_CHANGE,(()=>{this.emit(s.h.HISTORY_CHANGE)})),this.editor.configStore.events.on(s.h.STICKER_UPLOAD_ADD,(t=>{this.emit(s.h.STICKER_UPLOAD_ADD,t)}))}hasChanges(){return this.editor.hasChanges()}}class Ot{constructor(){this.container=null}init(t){return new Promise(((e,i)=>{this.container="string"==typeof t.container?document.querySelector(t.container):t.container,this.container?(this.editorApi=new It(t,this.container),u.render(a.createElement(At,{editor:this.editorApi.editor}),this.container),this.editorApi.editor.configStore.events.on(s.h.EDITOR_READY,(()=>{setTimeout((()=>{this.editorApi.emit(s.h.EDITOR_READY)}),0),e(this.editorApi)})),this.editorApi.editor.configStore.events.on(s.h.ERROR_IMAGE_LOADING,(t=>{setTimeout((()=>{this.editorApi.emit(s.h.ERROR_IMAGE_LOADING,t)}),0),e(this.editorApi)})),this.editorApi.editor.configStore.events.on(s.h.IMAGE_LOAD,(()=>{setTimeout((()=>{this.editorApi.emit(s.h.IMAGE_LOAD)}),0),e(this.editorApi)})),this.editorApi.editor.configStore.events.on(s.h.TOOL_ENTER,(t=>{setTimeout((()=>{this.editorApi.emit(s.h.TOOL_ENTER,t)}),0),e(this.editorApi)}))):i(new Error("Provide a container"))}))}}class At extends a.Component{constructor(){super(...arguments),this.UIComponent=null}componentDidMount(){this.editor=this.props.editor,this.storeProps={filterTool:this.editor.filterToolStore,focusTool:this.editor.focusToolStore,adjustmentsTool:this.editor.adjustmentsToolStore,overlayTool:this.editor.overlayToolStore,frameTool:this.editor.frameToolStore,brushTool:this.editor.brushToolStore,transformTool:this.editor.transformToolStore,scale:this.editor.scale,sprite:this.editor.spriteStore,stickerTool:this.editor.spriteStore.stickerToolStore,textTool:this.editor.spriteStore.textToolStore,textDesignTool:this.editor.spriteStore.textDesignToolStore,library:this.editor.libraryStore,modal:this.editor.modalStore,snapping:this.editor.snappingStore,config:this.editor.configStore,active:this.editor.activeStore,canvas:this.editor.canvasStore,history:this.editor.historyStore,editor:this.editor},"basic"===this.editor.configStore.config.layout?r.e(384).then(r.bind(r,7384)).then((({BasicUI:t})=>{this.UIComponent=t,this.forceUpdate()})):(this.UIComponent=Dt,this.forceUpdate())}componentWillUnmount(){this.editor.engine.dispose(),this.editor.configStore.events.removeAllListeners(s.h.EXPORT),this.editor.configStore.events.removeAllListeners(s.h.CLOSE),this.editor.configStore.events.removeAllListeners(s.h.HISTORY_CHANGE),this.editor.configStore.events.removeAllListeners(s.h.EDITOR_READY),this.editor.configStore.events.removeAllListeners(s.h.ERROR_IMAGE_LOADING),this.editor.configStore.events.removeAllListeners(s.h.IMAGE_LOAD),this.editor.configStore.events.removeAllListeners(s.h.TOOL_ENTER),this.editor.configStore.events.removeAllListeners(s.h.STICKER_UPLOAD_ADD)}render(){if(this.editor){const t=this.UIComponent;return this.storeProps&&t?a.createElement(t,{editor:this.editor,storeProps:this.storeProps}):null}return null}}const Ft=t=>(new Ot).init(t);a.Component;h.configure({isolateGlobalState:!0});const{Container:Mt,Input:Pt,ColorItem:Bt,ColorItemBase:zt,ColorItemBackground:Lt,ColorItemTiledBackground:Nt,ColorItemActiveOverlay:Ut,Dialog:jt,DialogBase:Ht,DialogContainer:Wt,DialogBackdrop:Gt,DialogHeader:Vt,DialogBody:$t,DialogFooter:Zt,DialogSpinner:Xt}=o.X,{Label:Yt,Checkbox:qt,CheckboxBase:Kt,CheckboxInput:Qt,CheckboxCheckMark:Jt}=Pt;var te=(0,s.R)(((t,e)=>{function i(t){o.length||(n(),!0),o[o.length]=t}e.exports=i;var n,o=[],s=0;function a(){for(;s<o.length;){var t=s;if(s+=1,o[t].call(),s>1024){for(var e=0,i=o.length-s;e<i;e++)o[e]=o[e+s];o.length-=s,s=0}}o.length=0,s=0,!1}var l=void 0!==r.g?r.g:self,c=l.MutationObserver||l.WebKitMutationObserver;function u(t){return function(){var e=setTimeout(r,0),i=setInterval(r,50);function r(){clearTimeout(e),clearInterval(i),t()}}}n="function"==typeof c?function(t){var e=1,i=new c(t),r=document.createTextNode("");return i.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}(a):u(a),i.requestFlush=n,i.makeRequestCallFromTimer=u})),ee=(0,s.R)(((t,e)=>{var i=te();function r(){}var n=null,o={};function s(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._U=0,this._V=0,this._W=null,this._X=null,t!==r&&d(t,this)}function a(t,e){for(;3===t._V;)t=t._W;if(s._Y&&s._Y(t),0===t._V)return 0===t._U?(t._U=1,void(t._X=e)):1===t._U?(t._U=2,void(t._X=[t._X,e])):void t._X.push(e);!function(t,e){i((function(){var i=1===t._V?e.onFulfilled:e.onRejected;if(null!==i){var r=function(t,e){try{return t(e)}catch(t){return n=t,o}}(i,t._W);r===o?c(e.promise,n):l(e.promise,r)}else 1===t._V?l(e.promise,t._W):c(e.promise,t._W)}))}(t,e)}function l(t,e){if(e===t)return c(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var i=function(t){try{return t.then}catch(t){return n=t,o}}(e);if(i===o)return c(t,n);if(i===t.then&&e instanceof s)return t._V=3,t._W=e,void u(t);if("function"==typeof i)return void d(i.bind(e),t)}t._V=1,t._W=e,u(t)}function c(t,e){t._V=2,t._W=e,s._Z&&s._Z(t,e),u(t)}function u(t){if(1===t._U&&(a(t,t._X),t._X=null),2===t._U){for(var e=0;e<t._X.length;e++)a(t,t._X[e]);t._X=null}}function h(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function d(t,e){var i=!1,r=function(t,e,i){try{t(e,i)}catch(t){return n=t,o}}(t,(function(t){i||(i=!0,l(e,t))}),(function(t){i||(i=!0,c(e,t))}));!i&&r===o&&(i=!0,c(e,n))}e.exports=s,s._Y=null,s._Z=null,s._0=r,s.prototype.then=function(t,e){if(this.constructor!==s)return function(t,e,i){return new t.constructor((function(n,o){var l=new s(r);l.then(n,o),a(t,new h(e,i,l))}))}(this,t,e);var i=new s(r);return a(this,new h(t,e,i)),i}})),ie=(0,s.R)((t=>{var e=ee(),i=[ReferenceError,TypeError,RangeError],r=!1;function n(){r=!1,e._Y=null,e._Z=null}function o(t,e){return e.some((function(e){return t instanceof e}))}t.disable=n,t.enable=function(t){t=t||{},r&&n(),r=!0;var s=0,a=0,l={};function c(e){(t.allRejections||o(l[e].error,t.whitelist||i))&&(l[e].displayId=a++,t.onUnhandled?(l[e].logged=!0,t.onUnhandled(l[e].displayId,l[e].error)):(l[e].logged=!0,function(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach((function(t){console.warn("  "+t)}))}(l[e].displayId,l[e].error)))}e._Y=function(e){2===e._V&&l[e._1]&&(l[e._1].logged?function(e){l[e].logged&&(t.onHandled?t.onHandled(l[e].displayId,l[e].error):l[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+l[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+l[e].displayId+".")))}(e._1):clearTimeout(l[e._1].timeout),delete l[e._1])},e._Z=function(t,e){0===t._U&&(t._1=s++,l[t._1]={displayId:null,error:e,timeout:setTimeout(c.bind(null,t._1),o(e,i)?100:2e3),logged:!1})}}})),re=(0,s.R)(((t,e)=>{var i=ee();e.exports=i;var r=c(!0),n=c(!1),o=c(null),s=c(void 0),a=c(0),l=c("");function c(t){var e=new i(i._0);return e._V=1,e._W=t,e}i.resolve=function(t){if(t instanceof i)return t;if(null===t)return o;if(void 0===t)return s;if(!0===t)return r;if(!1===t)return n;if(0===t)return a;if(""===t)return l;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new i(e.bind(t))}catch(t){return new i((function(e,i){i(t)}))}return c(t)};var u=function(t){return"function"==typeof Array.from?(u=Array.from,Array.from(t)):(u=function(t){return Array.prototype.slice.call(t)},Array.prototype.slice.call(t))};i.all=function(t){var e=u(t);return new i((function(t,r){if(0===e.length)return t([]);var n=e.length;function o(s,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof i&&a.then===i.prototype.then){for(;3===a._V;)a=a._W;return 1===a._V?o(s,a._W):(2===a._V&&r(a._W),void a.then((function(t){o(s,t)}),r))}var l=a.then;if("function"==typeof l)return void new i(l.bind(a)).then((function(t){o(s,t)}),r)}e[s]=a,0==--n&&t(e)}for(var s=0;s<e.length;s++)o(s,e[s])}))},i.reject=function(t){return new i((function(e,i){i(t)}))},i.race=function(t){return new i((function(e,r){u(t).forEach((function(t){i.resolve(t).then(e,r)}))}))},i.prototype.catch=function(t){return this.then(null,t)}})),ne=(0,s.R)(((t,e)=>{!function(i,n){"object"==typeof t&&void 0!==e?n(t):"function"==typeof define&&r.amdO?define(["exports"],n):n(i.WHATWGFetch={})}(t,(function(t){var e="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==e&&e,i="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,n="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in e,s="ArrayBuffer"in e;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function c(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function u(t){return"string"!=typeof t&&(t=String(t)),t}function h(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise((function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}}))}function m(t){var e=new FileReader,i=f(e);return e.readAsArrayBuffer(t),i}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(t){this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:n&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:i&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s&&n&&function(t){return t&&DataView.prototype.isPrototypeOf(t)}(t)?(this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=g(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(m)}),this.text=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,i=f(e);return e.readAsText(t),i}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),i=new Array(e.length),r=0;r<e.length;r++)i[r]=String.fromCharCode(e[r]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=c(t),e=u(e);var i=this.map[t];this.map[t]=i?i+", "+e:e},d.prototype.delete=function(t){delete this.map[c(t)]},d.prototype.get=function(t){return t=c(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(c(t))},d.prototype.set=function(t,e){this.map[c(t)]=u(e)},d.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},d.prototype.keys=function(){var t=[];return this.forEach((function(e,i){t.push(i)})),h(t)},d.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),h(t)},d.prototype.entries=function(){var t=[];return this.forEach((function(e,i){t.push([i,e])})),h(t)},r&&(d.prototype[Symbol.iterator]=d.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,e){if(!(this instanceof v))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,!i&&null!=t._bodyInit&&(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new d(e.headers)),this.method=function(t){var e=t.toUpperCase();return y.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function b(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var i=t.split("="),r=i.shift().replace(/\+/g," "),n=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(n))}})),e}function x(t){var e=new d;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var i=t.split(":"),r=i.shift().trim();if(r){var n=i.join(":").trim();e.append(r,n)}})),e}function w(t,e){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},_.call(v.prototype),_.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},w.error=function(){var t=new w(null,{status:0,statusText:""});return t.type="error",t};var S=[301,302,303,307,308];w.redirect=function(t,e){if(-1===S.indexOf(e))throw new RangeError("Invalid status code");return new w(null,{status:e,headers:{location:t}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(t,e){this.message=t,this.name=e;var i=Error(t);this.stack=i.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function k(i,r){return new Promise((function(o,a){var l=new v(i,r);if(l.signal&&l.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function h(){c.abort()}c.onload=function(){var t={status:c.status,statusText:c.statusText,headers:x(c.getAllResponseHeaders()||"")};t.url="responseURL"in c?c.responseURL:t.headers.get("X-Request-URL");var e="response"in c?c.response:c.responseText;setTimeout((function(){o(new w(e,t))}),0)},c.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},c.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},c.onabort=function(){setTimeout((function(){a(new t.DOMException("Aborted","AbortError"))}),0)},c.open(l.method,function(t){try{return""===t&&e.location.href?e.location.href:t}catch(e){return t}}(l.url),!0),"include"===l.credentials?c.withCredentials=!0:"omit"===l.credentials&&(c.withCredentials=!1),"responseType"in c&&(n?c.responseType="blob":s&&l.headers.get("Content-Type")&&-1!==l.headers.get("Content-Type").indexOf("application/octet-stream")&&(c.responseType="arraybuffer")),!r||"object"!=typeof r.headers||r.headers instanceof d?l.headers.forEach((function(t,e){c.setRequestHeader(e,t)})):Object.getOwnPropertyNames(r.headers).forEach((function(t){c.setRequestHeader(t,u(r.headers[t]))})),l.signal&&(l.signal.addEventListener("abort",h),c.onreadystatechange=function(){4===c.readyState&&l.signal.removeEventListener("abort",h)}),c.send(void 0===l._bodyInit?null:l._bodyInit)}))}k.polyfill=!0,e.fetch||(e.fetch=k,e.Headers=d,e.Request=v,e.Response=w),t.Headers=d,t.Request=v,t.Response=w,t.fetch=k,Object.defineProperty(t,"__esModule",{value:!0})}))})),oe=(0,s.R)(((t,e)=>{var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function o(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),!("abcdefghijklmnopqrst"!==Object.keys(Object.assign({},r)).join(""))}catch(t){return!1}}()?Object.assign:function(t,e){for(var s,a,l=o(t),c=1;c<arguments.length;c++){for(var u in s=Object(arguments[c]))r.call(s,u)&&(l[u]=s[u]);if(i){a=i(s);for(var h=0;h<a.length;h++)n.call(s,a[h])&&(l[a[h]]=s[a[h]])}}return l}})),se=(0,s.R)(((t,e)=>{var i=function(t){return t&&t.Math==Math&&t};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof r.g&&r.g)||Function("return this")()})),ae=(0,s.R)(((t,e)=>{e.exports=function(t){try{return!!t()}catch(t){return!0}}})),le=(0,s.R)(((t,e)=>{var i=ae();e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))})),ce=(0,s.R)((t=>{var e={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!e.call({1:2},1);t.f=r?function(t){var e=i(this,t);return!!e&&e.enumerable}:e})),ue=(0,s.R)(((t,e)=>{e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}})),he=(0,s.R)(((t,e)=>{var i={}.toString;e.exports=function(t){return i.call(t).slice(8,-1)}})),de=(0,s.R)(((t,e)=>{var i=ae(),r=he(),n="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==r(t)?n.call(t,""):Object(t)}:Object})),pe=(0,s.R)(((t,e)=>{e.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}})),fe=(0,s.R)(((t,e)=>{var i=de(),r=pe();e.exports=function(t){return i(r(t))}})),me=(0,s.R)(((t,e)=>{e.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}})),ge=(0,s.R)(((t,e)=>{var i=me();e.exports=function(t,e){if(!i(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!i(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!i(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")}})),_e=(0,s.R)(((t,e)=>{var i={}.hasOwnProperty;e.exports=function(t,e){return i.call(t,e)}})),ye=(0,s.R)(((t,e)=>{var i=se(),r=me(),n=i.document,o=r(n)&&r(n.createElement);e.exports=function(t){return o?n.createElement(t):{}}})),ve=(0,s.R)(((t,e)=>{var i=le(),r=ae(),n=ye();e.exports=!i&&!r((function(){return 7!=Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))})),be=(0,s.R)((t=>{var e=le(),i=ce(),r=ue(),n=fe(),o=ge(),s=_e(),a=ve(),l=Object.getOwnPropertyDescriptor;t.f=e?l:function(t,e){if(t=n(t),e=o(e,!0),a)try{return l(t,e)}catch(t){}if(s(t,e))return r(!i.f.call(t,e),t[e])}})),xe=(0,s.R)(((t,e)=>{var i=me();e.exports=function(t){if(!i(t))throw TypeError(String(t)+" is not an object");return t}})),we=(0,s.R)((t=>{var e=le(),i=ve(),r=xe(),n=ge(),o=Object.defineProperty;t.f=e?o:function(t,e,s){if(r(t),e=n(e,!0),r(s),i)try{return o(t,e,s)}catch(t){}if("get"in s||"set"in s)throw TypeError("Accessors not supported");return"value"in s&&(t[e]=s.value),t}})),Se=(0,s.R)(((t,e)=>{var i=le(),r=we(),n=ue();e.exports=i?function(t,e,i){return r.f(t,e,n(1,i))}:function(t,e,i){return t[e]=i,t}})),ke=(0,s.R)(((t,e)=>{var i=se(),r=Se();e.exports=function(t,e){try{r(i,t,e)}catch(r){i[t]=e}return e}})),Ce=(0,s.R)(((t,e)=>{var i=se(),r=ke(),n="__core-js_shared__",o=i[n]||r(n,{});e.exports=o})),Te=(0,s.R)(((t,e)=>{var i=Ce(),r=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(t){return r.call(t)}),e.exports=i.inspectSource})),Ee=(0,s.R)(((t,e)=>{var i=se(),r=Te(),n=i.WeakMap;e.exports="function"==typeof n&&/native code/.test(r(n))})),Re=(0,s.R)(((t,e)=>{e.exports=!1})),De=(0,s.R)(((t,e)=>{var i=Re(),r=Ce();(e.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),Ie=(0,s.R)(((t,e)=>{var i=0,r=Math.random();e.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++i+r).toString(36)}})),Oe=(0,s.R)(((t,e)=>{var i=De(),r=Ie(),n=i("keys");e.exports=function(t){return n[t]||(n[t]=r(t))}})),Ae=(0,s.R)(((t,e)=>{e.exports={}})),Fe=(0,s.R)(((t,e)=>{var i,r,n,o=Ee(),s=se(),a=me(),l=Se(),c=_e(),u=Oe(),h=Ae(),d=s.WeakMap;if(o){var p=new d,f=p.get,m=p.has,g=p.set;i=function(t,e){return g.call(p,t,e),e},r=function(t){return f.call(p,t)||{}},n=function(t){return m.call(p,t)}}else{var _=u("state");h[_]=!0,i=function(t,e){return l(t,_,e),e},r=function(t){return c(t,_)?t[_]:{}},n=function(t){return c(t,_)}}e.exports={set:i,get:r,has:n,enforce:function(t){return n(t)?r(t):i(t,{})},getterFor:function(t){return function(e){var i;if(!a(e)||(i=r(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}}})),Me=(0,s.R)(((t,e)=>{var i=se(),r=Se(),n=_e(),o=ke(),s=Te(),a=Fe(),l=a.get,c=a.enforce,u=String(String).split("String");(e.exports=function(t,e,s,a){var l=!!a&&!!a.unsafe,h=!!a&&!!a.enumerable,d=!!a&&!!a.noTargetGet;"function"==typeof s&&("string"==typeof e&&!n(s,"name")&&r(s,"name",e),c(s).source=u.join("string"==typeof e?e:"")),t!==i?(l?!d&&t[e]&&(h=!0):delete t[e],h?t[e]=s:r(t,e,s)):h?t[e]=s:o(e,s)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))})),Pe=(0,s.R)(((t,e)=>{var i=se();e.exports=i})),Be=(0,s.R)(((t,e)=>{var i=Pe(),r=se(),n=function(t){return"function"==typeof t?t:void 0};e.exports=function(t,e){return arguments.length<2?n(i[t])||n(r[t]):i[t]&&i[t][e]||r[t]&&r[t][e]}})),ze=(0,s.R)(((t,e)=>{var i=Math.ceil,r=Math.floor;e.exports=function(t){return isNaN(t=+t)?0:(t>0?r:i)(t)}})),Le=(0,s.R)(((t,e)=>{var i=ze(),r=Math.min;e.exports=function(t){return t>0?r(i(t),9007199254740991):0}})),Ne=(0,s.R)(((t,e)=>{var i=ze(),r=Math.max,n=Math.min;e.exports=function(t,e){var o=i(t);return o<0?r(o+e,0):n(o,e)}})),Ue=(0,s.R)(((t,e)=>{var i=fe(),r=Le(),n=Ne(),o=function(t){return function(e,o,s){var a,l=i(e),c=r(l.length),u=n(s,c);if(t&&o!=o){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===o)return t||u||0;return!t&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}})),je=(0,s.R)(((t,e)=>{var i=_e(),r=fe(),n=Ue().indexOf,o=Ae();e.exports=function(t,e){var s,a=r(t),l=0,c=[];for(s in a)!i(o,s)&&i(a,s)&&c.push(s);for(;e.length>l;)i(a,s=e[l++])&&(~n(c,s)||c.push(s));return c}})),He=(0,s.R)(((t,e)=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]})),We=(0,s.R)((t=>{var e=je(),i=He().concat("length","prototype");t.f=Object.getOwnPropertyNames||function(t){return e(t,i)}})),Ge=(0,s.R)((t=>{t.f=Object.getOwnPropertySymbols})),Ve=(0,s.R)(((t,e)=>{var i=Be(),r=We(),n=Ge(),o=xe();e.exports=i("Reflect","ownKeys")||function(t){var e=r.f(o(t)),i=n.f;return i?e.concat(i(t)):e}})),$e=(0,s.R)(((t,e)=>{var i=_e(),r=Ve(),n=be(),o=we();e.exports=function(t,e){for(var s=r(e),a=o.f,l=n.f,c=0;c<s.length;c++){var u=s[c];i(t,u)||a(t,u,l(e,u))}}})),Ze=(0,s.R)(((t,e)=>{var i=ae(),r=/#|\.prototype\./,n=function(t,e){var r=s[o(t)];return r==l||r!=a&&("function"==typeof e?i(e):!!e)},o=n.normalize=function(t){return String(t).replace(r,".").toLowerCase()},s=n.data={},a=n.NATIVE="N",l=n.POLYFILL="P";e.exports=n})),Xe=(0,s.R)(((t,e)=>{var i=se(),r=be().f,n=Se(),o=Me(),s=ke(),a=$e(),l=Ze();e.exports=function(t,e){var c,u,h,d,p,f=t.target,m=t.global,g=t.stat;if(c=m?i:g?i[f]||s(f,{}):(i[f]||{}).prototype)for(u in e){if(d=e[u],t.noTargetGet?h=(p=r(c,u))&&p.value:h=c[u],!l(m?u:f+(g?".":"#")+u,t.forced)&&void 0!==h){if(typeof d==typeof h)continue;a(d,h)}(t.sham||h&&h.sham)&&n(d,"sham",!0),o(c,u,d,t)}}})),Ye=(0,s.R)(((t,e)=>{var i=he();e.exports=Array.isArray||function(t){return"Array"==i(t)}})),qe=(0,s.R)(((t,e)=>{var i=pe();e.exports=function(t){return Object(i(t))}})),Ke=(0,s.R)(((t,e)=>{var i=ge(),r=we(),n=ue();e.exports=function(t,e,o){var s=i(e);s in t?r.f(t,s,n(0,o)):t[s]=o}})),Qe=(0,s.R)(((t,e)=>{var i=ae();e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))})),Je=(0,s.R)(((t,e)=>{var i=Qe();e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator})),ti=(0,s.R)(((t,e)=>{var i=se(),r=De(),n=_e(),o=Ie(),s=Qe(),a=Je(),l=r("wks"),c=i.Symbol,u=a?c:c&&c.withoutSetter||o;e.exports=function(t){return n(l,t)||(s&&n(c,t)?l[t]=c[t]:l[t]=u("Symbol."+t)),l[t]}})),ei=(0,s.R)(((t,e)=>{var i=me(),r=Ye(),n=ti()("species");e.exports=function(t,e){var o;return r(t)&&("function"!=typeof(o=t.constructor)||o!==Array&&!r(o.prototype)?i(o)&&(null===(o=o[n])&&(o=void 0)):o=void 0),new(void 0===o?Array:o)(0===e?0:e)}})),ii=(0,s.R)(((t,e)=>{var i=Be();e.exports=i("navigator","userAgent")||""})),ri=(0,s.R)(((t,e)=>{var i,r,n=se(),o=ii(),s=n.process,a=s&&s.versions,l=a&&a.v8;l?r=(i=l.split("."))[0]+i[1]:o&&((!(i=o.match(/Edge\/(\d+)/))||i[1]>=74)&&((i=o.match(/Chrome\/(\d+)/))&&(r=i[1]))),e.exports=r&&+r})),ni=(0,s.R)(((t,e)=>{var i=ae(),r=ti(),n=ri(),o=r("species");e.exports=function(t){return n>=51||!i((function(){var e=[];return(e.constructor={})[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}})),oi=(0,s.R)((()=>{var t=Xe(),e=ae(),i=Ye(),r=me(),n=qe(),o=Le(),s=Ke(),a=ei(),l=ni(),c=ti(),u=ri(),h=c("isConcatSpreadable"),d=9007199254740991,p="Maximum allowed index exceeded",f=u>=51||!e((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),m=l("concat"),g=function(t){if(!r(t))return!1;var e=t[h];return void 0!==e?!!e:i(t)};t({target:"Array",proto:!0,forced:!f||!m},{concat:function(t){var e,i,r,l,c,u=n(this),h=a(u,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(g(c=-1===e?u:arguments[e])){if(f+(l=o(c.length))>d)throw TypeError(p);for(i=0;i<l;i++,f++)i in c&&s(h,f,c[i])}else{if(f>=d)throw TypeError(p);s(h,f++,c)}return h.length=f,h}})})),si=(0,s.R)(((t,e)=>{var i={};i[ti()("toStringTag")]="z",e.exports="[object z]"===String(i)})),ai=(0,s.R)(((t,e)=>{var i=si(),r=he(),n=ti()("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=i?r:function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),n))?i:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}})),li=(0,s.R)(((t,e)=>{var i=si(),r=ai();e.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}})),ci=(0,s.R)((()=>{var t=si(),e=Me(),i=li();t||e(Object.prototype,"toString",i,{unsafe:!0})})),ui=(0,s.R)(((t,e)=>{var i=je(),r=He();e.exports=Object.keys||function(t){return i(t,r)}})),hi=(0,s.R)(((t,e)=>{var i=le(),r=we(),n=xe(),o=ui();e.exports=i?Object.defineProperties:function(t,e){n(t);for(var i,s=o(e),a=s.length,l=0;a>l;)r.f(t,i=s[l++],e[i]);return t}})),di=(0,s.R)(((t,e)=>{var i=Be();e.exports=i("document","documentElement")})),pi=(0,s.R)(((t,e)=>{var i,r=xe(),n=hi(),o=He(),s=Ae(),a=di(),l=ye(),c=Oe(),u="prototype",h="script",d=c("IE_PROTO"),p=function(){},f=function(t){return"<script>"+t+"</"+h+">"},m=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(t){}m=i?function(t){t.write(f("")),t.close();var e=t.parentWindow.Object;return t=null,e}(i):function(){var t,e=l("iframe");return e.style.display="none",a.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(f("document.F=Object")),t.close(),t.F}();for(var t=o.length;t--;)delete m[u][o[t]];return m()};s[d]=!0,e.exports=Object.create||function(t,e){var i;return null!==t?(p[u]=r(t),i=new p,p[u]=null,i[d]=t):i=m(),void 0===e?i:n(i,e)}})),fi=(0,s.R)(((t,e)=>{var i=fe(),r=We().f,n={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(t){return o&&"[object Window]"==n.call(t)?function(t){try{return r(t)}catch(t){return o.slice()}}(t):r(i(t))}})),mi=(0,s.R)((t=>{var e=ti();t.f=e})),gi=(0,s.R)(((t,e)=>{var i=Pe(),r=_e(),n=mi(),o=we().f;e.exports=function(t){var e=i.Symbol||(i.Symbol={});r(e,t)||o(e,t,{value:n.f(t)})}})),_i=(0,s.R)(((t,e)=>{var i=we().f,r=_e(),n=ti()("toStringTag");e.exports=function(t,e,o){t&&!r(t=o?t:t.prototype,n)&&i(t,n,{configurable:!0,value:e})}})),yi=(0,s.R)(((t,e)=>{e.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}})),vi=(0,s.R)(((t,e)=>{var i=yi();e.exports=function(t,e,r){if(i(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(i){return t.call(e,i)};case 2:return function(i,r){return t.call(e,i,r)};case 3:return function(i,r,n){return t.call(e,i,r,n)}}return function(){return t.apply(e,arguments)}}})),bi=(0,s.R)(((t,e)=>{var i=vi(),r=de(),n=qe(),o=Le(),s=ei(),a=[].push,l=function(t){var e=1==t,l=2==t,c=3==t,u=4==t,h=6==t,d=5==t||h;return function(p,f,m,g){for(var _,y,v=n(p),b=r(v),x=i(f,m,3),w=o(b.length),S=0,k=g||s,C=e?k(p,w):l?k(p,0):void 0;w>S;S++)if((d||S in b)&&(y=x(_=b[S],S,v),t))if(e)C[S]=y;else if(y)switch(t){case 3:return!0;case 5:return _;case 6:return S;case 2:a.call(C,_)}else if(u)return!1;return h?-1:c||u?u:C}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}})),xi=(0,s.R)((()=>{var t=Xe(),e=se(),i=Be(),r=Re(),n=le(),o=Qe(),s=Je(),a=ae(),l=_e(),c=Ye(),u=me(),h=xe(),d=qe(),p=fe(),f=ge(),m=ue(),g=pi(),_=ui(),y=We(),v=fi(),b=Ge(),x=be(),w=we(),S=ce(),k=Se(),C=Me(),T=De(),E=Oe(),R=Ae(),D=Ie(),I=ti(),O=mi(),A=gi(),F=_i(),M=Fe(),P=bi().forEach,B=E("hidden"),z="Symbol",L="prototype",N=I("toPrimitive"),U=M.set,j=M.getterFor(z),H=Object[L],W=e.Symbol,G=i("JSON","stringify"),V=x.f,$=w.f,Z=v.f,X=S.f,Y=T("symbols"),q=T("op-symbols"),K=T("string-to-symbol-registry"),Q=T("symbol-to-string-registry"),J=T("wks"),tt=e.QObject,et=!tt||!tt[L]||!tt[L].findChild,it=n&&a((function(){return 7!=g($({},"a",{get:function(){return $(this,"a",{value:7}).a}})).a}))?function(t,e,i){var r=V(H,e);r&&delete H[e],$(t,e,i),r&&t!==H&&$(H,e,r)}:$,rt=function(t,e){var i=Y[t]=g(W[L]);return U(i,{type:z,tag:t,description:e}),n||(i.description=e),i},nt=s?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof W},ot=function(t,e,i){t===H&&ot(q,e,i),h(t);var r=f(e,!0);return h(i),l(Y,r)?(i.enumerable?(l(t,B)&&t[B][r]&&(t[B][r]=!1),i=g(i,{enumerable:m(0,!1)})):(l(t,B)||$(t,B,m(1,{})),t[B][r]=!0),it(t,r,i)):$(t,r,i)},st=function(t,e){h(t);var i=p(e),r=_(i).concat(ut(i));return P(r,(function(e){(!n||at.call(i,e))&&ot(t,e,i[e])})),t},at=function(t){var e=f(t,!0),i=X.call(this,e);return!(this===H&&l(Y,e)&&!l(q,e))&&(!(i||!l(this,e)||!l(Y,e)||l(this,B)&&this[B][e])||i)},lt=function(t,e){var i=p(t),r=f(e,!0);if(i!==H||!l(Y,r)||l(q,r)){var n=V(i,r);return n&&l(Y,r)&&!(l(i,B)&&i[B][r])&&(n.enumerable=!0),n}},ct=function(t){var e=Z(p(t)),i=[];return P(e,(function(t){!l(Y,t)&&!l(R,t)&&i.push(t)})),i},ut=function(t){var e=t===H,i=Z(e?q:p(t)),r=[];return P(i,(function(t){l(Y,t)&&(!e||l(H,t))&&r.push(Y[t])})),r};(o||(C((W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=D(t),i=function(t){this===H&&i.call(q,t),l(this,B)&&l(this[B],e)&&(this[B][e]=!1),it(this,e,m(1,t))};return n&&et&&it(H,e,{configurable:!0,set:i}),rt(e,t)})[L],"toString",(function(){return j(this).tag})),C(W,"withoutSetter",(function(t){return rt(D(t),t)})),S.f=at,w.f=ot,x.f=lt,y.f=v.f=ct,b.f=ut,O.f=function(t){return rt(I(t),t)},n&&($(W[L],"description",{configurable:!0,get:function(){return j(this).description}}),r||C(H,"propertyIsEnumerable",at,{unsafe:!0}))),t({global:!0,wrap:!0,forced:!o,sham:!o},{Symbol:W}),P(_(J),(function(t){A(t)})),t({target:z,stat:!0,forced:!o},{for:function(t){var e=String(t);if(l(K,e))return K[e];var i=W(e);return K[e]=i,Q[i]=e,i},keyFor:function(t){if(!nt(t))throw TypeError(t+" is not a symbol");if(l(Q,t))return Q[t]},useSetter:function(){et=!0},useSimple:function(){et=!1}}),t({target:"Object",stat:!0,forced:!o,sham:!n},{create:function(t,e){return void 0===e?g(t):st(g(t),e)},defineProperty:ot,defineProperties:st,getOwnPropertyDescriptor:lt}),t({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:ct,getOwnPropertySymbols:ut}),t({target:"Object",stat:!0,forced:a((function(){b.f(1)}))},{getOwnPropertySymbols:function(t){return b.f(d(t))}}),G)&&t({target:"JSON",stat:!0,forced:!o||a((function(){var t=W();return"[null]"!=G([t])||"{}"!=G({a:t})||"{}"!=G(Object(t))}))},{stringify:function(t,e,i){for(var r,n=[t],o=1;arguments.length>o;)n.push(arguments[o++]);return r=e,!u(e)&&void 0===t||nt(t)?void 0:(c(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!nt(e))return e}),n[1]=e,G.apply(null,n))}});W[L][N]||k(W[L],N,W[L].valueOf),F(W,z),R[B]=!0})),wi=(0,s.R)((()=>{gi()("asyncIterator")})),Si=(0,s.R)((()=>{var t=Xe(),e=le(),i=se(),r=_e(),n=me(),o=we().f,s=$e(),a=i.Symbol;if(e&&"function"==typeof a&&(!("description"in a.prototype)||void 0!==a().description)){var l={},c=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof c?new a(t):void 0===t?a():a(t);return""===t&&(l[e]=!0),e};s(c,a);var u=c.prototype=a.prototype;u.constructor=c;var h=u.toString,d="Symbol(test)"==String(a("test")),p=/^Symbol\((.*)\)[^)]+$/;o(u,"description",{configurable:!0,get:function(){var t=n(this)?this.valueOf():this,e=h.call(t);if(r(l,t))return"";var i=d?e.slice(7,-1):e.replace(p,"$1");return""===i?void 0:i}}),t({global:!0,forced:!0},{Symbol:c})}})),ki=(0,s.R)((()=>{gi()("hasInstance")})),Ci=(0,s.R)((()=>{gi()("isConcatSpreadable")})),Ti=(0,s.R)((()=>{gi()("iterator")})),Ei=(0,s.R)((()=>{gi()("match")})),Ri=(0,s.R)((()=>{gi()("matchAll")})),Di=(0,s.R)((()=>{gi()("replace")})),Ii=(0,s.R)((()=>{gi()("search")})),Oi=(0,s.R)((()=>{gi()("species")})),Ai=(0,s.R)((()=>{gi()("split")})),Fi=(0,s.R)((()=>{gi()("toPrimitive")})),Mi=(0,s.R)((()=>{gi()("toStringTag")})),Pi=(0,s.R)((()=>{gi()("unscopables")})),Bi=(0,s.R)((()=>{_i()(Math,"Math",!0)})),zi=(0,s.R)((()=>{var t=se();_i()(t.JSON,"JSON",!0)})),Li=(0,s.R)(((t,e)=>{oi(),ci(),xi(),wi(),Si(),ki(),Ci(),Ti(),Ei(),Ri(),Di(),Ii(),Oi(),Ai(),Fi(),Mi(),Pi(),Bi(),zi();var i=Pe();e.exports=i.Symbol})),Ni=(0,s.R)((()=>{gi()("asyncDispose")})),Ui=(0,s.R)((()=>{gi()("dispose")})),ji=(0,s.R)((()=>{gi()("observable")})),Hi=(0,s.R)((()=>{gi()("patternMatch")})),Wi=(0,s.R)((()=>{gi()("replaceAll")})),Gi=(0,s.R)(((t,e)=>{var i=Li();Ni(),Ui(),ji(),Hi(),Wi(),e.exports=i})),Vi=(0,s.R)(((t,e)=>{var i=ze(),r=pe(),n=function(t){return function(e,n){var o,s,a=String(r(e)),l=i(n),c=a.length;return l<0||l>=c?t?"":void 0:(o=a.charCodeAt(l))<55296||o>56319||l+1===c||(s=a.charCodeAt(l+1))<56320||s>57343?t?a.charAt(l):o:t?a.slice(l,l+2):s-56320+(o-55296<<10)+65536}};e.exports={codeAt:n(!1),charAt:n(!0)}})),$i=(0,s.R)(((t,e)=>{var i=ae();e.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))})),Zi=(0,s.R)(((t,e)=>{var i=_e(),r=qe(),n=Oe(),o=$i(),s=n("IE_PROTO"),a=Object.prototype;e.exports=o?Object.getPrototypeOf:function(t){return t=r(t),i(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}})),Xi=(0,s.R)(((t,e)=>{var i,r,n,o=Zi(),s=Se(),a=_e(),l=ti(),c=Re(),u=l("iterator"),h=!1;[].keys&&("next"in(n=[].keys())?(r=o(o(n)))!==Object.prototype&&(i=r):h=!0),null==i&&(i={}),!c&&!a(i,u)&&s(i,u,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:h}})),Yi=(0,s.R)(((t,e)=>{e.exports={}})),qi=(0,s.R)(((t,e)=>{var i=Xi().IteratorPrototype,r=pi(),n=ue(),o=_i(),s=Yi(),a=function(){return this};e.exports=function(t,e,l){var c=e+" Iterator";return t.prototype=r(i,{next:n(1,l)}),o(t,c,!1,!0),s[c]=a,t}})),Ki=(0,s.R)(((t,e)=>{var i=me();e.exports=function(t){if(!i(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}})),Qi=(0,s.R)(((t,e)=>{var i=xe(),r=Ki();e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return i(n),r(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)})),Ji=(0,s.R)(((t,e)=>{var i=Xe(),r=qi(),n=Zi(),o=Qi(),s=_i(),a=Se(),l=Me(),c=ti(),u=Re(),h=Yi(),d=Xi(),p=d.IteratorPrototype,f=d.BUGGY_SAFARI_ITERATORS,m=c("iterator"),g="keys",_="values",y="entries",v=function(){return this};e.exports=function(t,e,c,d,b,x,w){r(c,e,d);var S,k,C,T=function(t){if(t===b&&O)return O;if(!f&&t in D)return D[t];switch(t){case g:case _:case y:return function(){return new c(this,t)}}return function(){return new c(this)}},E=e+" Iterator",R=!1,D=t.prototype,I=D[m]||D["@@iterator"]||b&&D[b],O=!f&&I||T(b),A="Array"==e&&D.entries||I;if(A&&(S=n(A.call(new t)),p!==Object.prototype&&S.next&&(!u&&n(S)!==p&&(o?o(S,p):"function"!=typeof S[m]&&a(S,m,v)),s(S,E,!0,!0),u&&(h[E]=v))),b==_&&I&&I.name!==_&&(R=!0,O=function(){return I.call(this)}),(!u||w)&&D[m]!==O&&a(D,m,O),h[e]=O,b)if(k={values:T(_),keys:x?O:T(g),entries:T(y)},w)for(C in k)(f||R||!(C in D))&&l(D,C,k[C]);else i({target:e,proto:!0,forced:f||R},k);return k}})),tr=(0,s.R)((()=>{var t=Vi().charAt,e=Fe(),i=Ji(),r="String Iterator",n=e.set,o=e.getterFor(r);i(String,"String",(function(t){n(this,{type:r,string:String(t),index:0})}),(function(){var e,i=o(this),r=i.string,n=i.index;return n>=r.length?{value:void 0,done:!0}:(e=t(r,n),i.index+=e.length,{value:e,done:!1})}))})),er=(0,s.R)(((t,e)=>{var i=xe();e.exports=function(t,e,r,n){try{return n?e(i(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}})),ir=(0,s.R)(((t,e)=>{var i=ti(),r=Yi(),n=i("iterator"),o=Array.prototype;e.exports=function(t){return void 0!==t&&(r.Array===t||o[n]===t)}})),rr=(0,s.R)(((t,e)=>{var i=ai(),r=Yi(),n=ti()("iterator");e.exports=function(t){if(null!=t)return t[n]||t["@@iterator"]||r[i(t)]}})),nr=(0,s.R)(((t,e)=>{var i=vi(),r=qe(),n=er(),o=ir(),s=Le(),a=Ke(),l=rr();e.exports=function(t){var e,c,u,h,d,p,f=r(t),m="function"==typeof this?this:Array,g=arguments.length,_=g>1?arguments[1]:void 0,y=void 0!==_,v=l(f),b=0;if(y&&(_=i(_,g>2?arguments[2]:void 0,2)),null==v||m==Array&&o(v))for(c=new m(e=s(f.length));e>b;b++)p=y?_(f[b],b):f[b],a(c,b,p);else for(d=(h=v.call(f)).next,c=new m;!(u=d.call(h)).done;b++)p=y?n(h,_,[u.value,b],!0):u.value,a(c,b,p);return c.length=b,c}})),or=(0,s.R)(((t,e)=>{var i=ti()("iterator"),r=!1;try{var n=0,o={next:function(){return{done:!!n++}},return:function(){r=!0}};o[i]=function(){return this},Array.from(o,(function(){throw 2}))}catch(t){}e.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o={};o[i]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}})),sr=(0,s.R)((()=>{var t=Xe(),e=nr();t({target:"Array",stat:!0,forced:!or()((function(t){Array.from(t)}))},{from:e})})),ar=(0,s.R)(((t,e)=>{tr(),sr();var i=Pe();e.exports=i.Array.from})),lr=(0,s.R)(((t,e)=>{var i=ar();e.exports=i})),cr=(0,s.R)(((t,e)=>{var i=le(),r=ae(),n=ui(),o=Ge(),s=ce(),a=qe(),l=de(),c=Object.assign,u=Object.defineProperty;e.exports=!c||r((function(){if(i&&1!==c({b:1},c(u({},"a",{enumerable:!0,get:function(){u(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol(),o="abcdefghijklmnopqrst";return t[r]=7,o.split("").forEach((function(t){e[t]=t})),7!=c({},t)[r]||n(c({},e)).join("")!=o}))?function(t,e){for(var r=a(t),c=arguments.length,u=1,h=o.f,d=s.f;c>u;)for(var p,f=l(arguments[u++]),m=h?n(f).concat(h(f)):n(f),g=m.length,_=0;g>_;)p=m[_++],(!i||d.call(f,p))&&(r[p]=f[p]);return r}:c})),ur=(0,s.R)((()=>{var t=Xe(),e=cr();t({target:"Object",stat:!0,forced:Object.assign!==e},{assign:e})})),hr=(0,s.R)((()=>{Xe()({target:"Object",stat:!0,sham:!le()},{create:pi()})})),dr=(0,s.R)((()=>{var t=Xe(),e=le();t({target:"Object",stat:!0,forced:!e,sham:!e},{defineProperty:we().f})})),pr=(0,s.R)((()=>{var t=Xe(),e=le();t({target:"Object",stat:!0,forced:!e,sham:!e},{defineProperties:hi()})})),fr=(0,s.R)(((t,e)=>{var i=le(),r=ui(),n=fe(),o=ce().f,s=function(t){return function(e){for(var s,a=n(e),l=r(a),c=l.length,u=0,h=[];c>u;)s=l[u++],(!i||o.call(a,s))&&h.push(t?[s,a[s]]:a[s]);return h}};e.exports={entries:s(!0),values:s(!1)}})),mr=(0,s.R)((()=>{var t=Xe(),e=fr().entries;t({target:"Object",stat:!0},{entries:function(t){return e(t)}})})),gr=(0,s.R)(((t,e)=>{var i=ae();e.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))})),_r=(0,s.R)(((t,e)=>{var i=Ae(),r=me(),n=_e(),o=we().f,s=Ie(),a=gr(),l=s("meta"),c=0,u=Object.isExtensible||function(){return!0},h=function(t){o(t,l,{value:{objectID:"O"+ ++c,weakData:{}}})},d=e.exports={REQUIRED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!n(t,l)){if(!u(t))return"F";if(!e)return"E";h(t)}return t[l].objectID},getWeakData:function(t,e){if(!n(t,l)){if(!u(t))return!0;if(!e)return!1;h(t)}return t[l].weakData},onFreeze:function(t){return a&&d.REQUIRED&&u(t)&&!n(t,l)&&h(t),t}};i[l]=!0})),yr=(0,s.R)((()=>{var t=Xe(),e=gr(),i=ae(),r=me(),n=_r().onFreeze,o=Object.freeze;t({target:"Object",stat:!0,forced:i((function(){o(1)})),sham:!e},{freeze:function(t){return o&&r(t)?o(n(t)):t}})})),vr=(0,s.R)(((t,e)=>{var i=xe(),r=ir(),n=Le(),o=vi(),s=rr(),a=er(),l=function(t,e){this.stopped=t,this.result=e};(e.exports=function(t,e,c,u,h){var d,p,f,m,g,_,y,v=o(e,c,u?2:1);if(h)d=t;else{if("function"!=typeof(p=s(t)))throw TypeError("Target is not iterable");if(r(p)){for(f=0,m=n(t.length);m>f;f++)if((g=u?v(i(y=t[f])[0],y[1]):v(t[f]))&&g instanceof l)return g;return new l(!1)}d=p.call(t)}for(_=d.next;!(y=_.call(d)).done;)if("object"==typeof(g=a(d,v,y.value,u))&&g&&g instanceof l)return g;return new l(!1)}).stop=function(t){return new l(!0,t)}})),br=(0,s.R)((()=>{var t=Xe(),e=vr(),i=Ke();t({target:"Object",stat:!0},{fromEntries:function(t){var r={};return e(t,(function(t,e){i(r,t,e)}),void 0,!0),r}})})),xr=(0,s.R)((()=>{var t=Xe(),e=ae(),i=fe(),r=be().f,n=le(),o=e((function(){r(1)}));t({target:"Object",stat:!0,forced:!n||o,sham:!n},{getOwnPropertyDescriptor:function(t,e){return r(i(t),e)}})})),wr=(0,s.R)((()=>{var t=Xe(),e=le(),i=Ve(),r=fe(),n=be(),o=Ke();t({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(t){for(var e,s,a=r(t),l=n.f,c=i(a),u={},h=0;c.length>h;)void 0!==(s=l(a,e=c[h++]))&&o(u,e,s);return u}})})),Sr=(0,s.R)((()=>{var t=Xe(),e=ae(),i=fi().f;t({target:"Object",stat:!0,forced:e((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:i})})),kr=(0,s.R)((()=>{var t=Xe(),e=ae(),i=qe(),r=Zi(),n=$i();t({target:"Object",stat:!0,forced:e((function(){r(1)})),sham:!n},{getPrototypeOf:function(t){return r(i(t))}})})),Cr=(0,s.R)(((t,e)=>{e.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}})),Tr=(0,s.R)((()=>{Xe()({target:"Object",stat:!0},{is:Cr()})})),Er=(0,s.R)((()=>{var t=Xe(),e=ae(),i=me(),r=Object.isExtensible;t({target:"Object",stat:!0,forced:e((function(){r(1)}))},{isExtensible:function(t){return!!i(t)&&(!r||r(t))}})})),Rr=(0,s.R)((()=>{var t=Xe(),e=ae(),i=me(),r=Object.isFrozen;t({target:"Object",stat:!0,forced:e((function(){r(1)}))},{isFrozen:function(t){return!i(t)||!!r&&r(t)}})})),Dr=(0,s.R)((()=>{var t=Xe(),e=ae(),i=me(),r=Object.isSealed;t({target:"Object",stat:!0,forced:e((function(){r(1)}))},{isSealed:function(t){return!i(t)||!!r&&r(t)}})})),Ir=(0,s.R)((()=>{var t=Xe(),e=qe(),i=ui();t({target:"Object",stat:!0,forced:ae()((function(){i(1)}))},{keys:function(t){return i(e(t))}})})),Or=(0,s.R)((()=>{var t=Xe(),e=me(),i=_r().onFreeze,r=gr(),n=ae(),o=Object.preventExtensions;t({target:"Object",stat:!0,forced:n((function(){o(1)})),sham:!r},{preventExtensions:function(t){return o&&e(t)?o(i(t)):t}})})),Ar=(0,s.R)((()=>{var t=Xe(),e=me(),i=_r().onFreeze,r=gr(),n=ae(),o=Object.seal;t({target:"Object",stat:!0,forced:n((function(){o(1)})),sham:!r},{seal:function(t){return o&&e(t)?o(i(t)):t}})})),Fr=(0,s.R)((()=>{Xe()({target:"Object",stat:!0},{setPrototypeOf:Qi()})})),Mr=(0,s.R)((()=>{var t=Xe(),e=fr().values;t({target:"Object",stat:!0},{values:function(t){return e(t)}})})),Pr=(0,s.R)(((t,e)=>{var i=Re(),r=se(),n=ae();e.exports=i||!n((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete r[t]}))})),Br=(0,s.R)((()=>{var t=Xe(),e=le(),i=Pr(),r=qe(),n=yi(),o=we();e&&t({target:"Object",proto:!0,forced:i},{__defineGetter__:function(t,e){o.f(r(this),t,{get:n(e),enumerable:!0,configurable:!0})}})})),zr=(0,s.R)((()=>{var t=Xe(),e=le(),i=Pr(),r=qe(),n=yi(),o=we();e&&t({target:"Object",proto:!0,forced:i},{__defineSetter__:function(t,e){o.f(r(this),t,{set:n(e),enumerable:!0,configurable:!0})}})})),Lr=(0,s.R)((()=>{var t=Xe(),e=le(),i=Pr(),r=qe(),n=ge(),o=Zi(),s=be().f;e&&t({target:"Object",proto:!0,forced:i},{__lookupGetter__:function(t){var e,i=r(this),a=n(t,!0);do{if(e=s(i,a))return e.get}while(i=o(i))}})})),Nr=(0,s.R)((()=>{var t=Xe(),e=le(),i=Pr(),r=qe(),n=ge(),o=Zi(),s=be().f;e&&t({target:"Object",proto:!0,forced:i},{__lookupSetter__:function(t){var e,i=r(this),a=n(t,!0);do{if(e=s(i,a))return e.set}while(i=o(i))}})})),Ur=(0,s.R)(((t,e)=>{var i=yi(),r=me(),n=[].slice,o={},s=function(t,e,i){if(!(e in o)){for(var r=[],n=0;n<e;n++)r[n]="a["+n+"]";o[e]=Function("C,a","return new C("+r.join(",")+")")}return o[e](t,i)};e.exports=Function.bind||function(t){var e=i(this),o=n.call(arguments,1),a=function(){var i=o.concat(n.call(arguments));return this instanceof a?s(e,i.length,i):e.apply(t,i)};return r(e.prototype)&&(a.prototype=e.prototype),a}})),jr=(0,s.R)((()=>{Xe()({target:"Function",proto:!0},{bind:Ur()})})),Hr=(0,s.R)((()=>{var t=le(),e=we().f,i=Function.prototype,r=i.toString,n=/^\s*function ([^ (]*)/,o="name";t&&!(o in i)&&e(i,o,{configurable:!0,get:function(){try{return r.call(this).match(n)[1]}catch(t){return""}}})})),Wr=(0,s.R)((()=>{var t=me(),e=we(),i=Zi(),r=ti()("hasInstance"),n=Function.prototype;r in n||e.f(n,r,{value:function(e){if("function"!=typeof this||!t(e))return!1;if(!t(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})})),Gr=(0,s.R)((()=>{Xe()({global:!0},{globalThis:se()})})),Vr=(0,s.R)((()=>{Xe()({target:"Array",stat:!0},{isArray:Ye()})})),$r=(0,s.R)((()=>{var t=Xe(),e=ae(),i=Ke();t({target:"Array",stat:!0,forced:e((function(){function t(){}return!(Array.of.call(t)instanceof t)}))},{of:function(){for(var t=0,e=arguments.length,r=new("function"==typeof this?this:Array)(e);e>t;)i(r,t,arguments[t++]);return r.length=e,r}})})),Zr=(0,s.R)(((t,e)=>{var i=qe(),r=Ne(),n=Le(),o=Math.min;e.exports=[].copyWithin||function(t,e){var s=i(this),a=n(s.length),l=r(t,a),c=r(e,a),u=arguments.length>2?arguments[2]:void 0,h=o((void 0===u?a:r(u,a))-c,a-l),d=1;for(c<l&&l<c+h&&(d=-1,c+=h-1,l+=h-1);h-- >0;)c in s?s[l]=s[c]:delete s[l],l+=d,c+=d;return s}})),Xr=(0,s.R)(((t,e)=>{var i=ti(),r=pi(),n=we(),o=i("unscopables"),s=Array.prototype;null==s[o]&&n.f(s,o,{configurable:!0,value:r(null)}),e.exports=function(t){s[o][t]=!0}})),Yr=(0,s.R)((()=>{var t=Xe(),e=Zr(),i=Xr();t({target:"Array",proto:!0},{copyWithin:e}),i("copyWithin")})),qr=(0,s.R)(((t,e)=>{var i=ae();e.exports=function(t,e){var r=[][t];return!!r&&i((function(){r.call(null,e||function(){throw 1},1)}))}})),Kr=(0,s.R)(((t,e)=>{var i=le(),r=ae(),n=_e(),o=Object.defineProperty,s={},a=function(t){throw t};e.exports=function(t,e){if(n(s,t))return s[t];e||(e={});var l=[][t],c=!!n(e,"ACCESSORS")&&e.ACCESSORS,u=n(e,0)?e[0]:a,h=n(e,1)?e[1]:void 0;return s[t]=!!l&&!r((function(){if(c&&!i)return!0;var t={length:-1};c?o(t,1,{enumerable:!0,get:a}):t[1]=1,l.call(t,u,h)}))}})),Qr=(0,s.R)((()=>{var t=Xe(),e=bi().every,i=qr(),r=Kr(),n=i("every"),o=r("every");t({target:"Array",proto:!0,forced:!n||!o},{every:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})})),Jr=(0,s.R)(((t,e)=>{var i=qe(),r=Ne(),n=Le();e.exports=function(t){for(var e=i(this),o=n(e.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,o),l=s>2?arguments[2]:void 0,c=void 0===l?o:r(l,o);c>a;)e[a++]=t;return e}})),tn=(0,s.R)((()=>{var t=Xe(),e=Jr(),i=Xr();t({target:"Array",proto:!0},{fill:e}),i("fill")})),en=(0,s.R)((()=>{var t=Xe(),e=bi().filter,i=ni(),r=Kr(),n=i("filter"),o=r("filter");t({target:"Array",proto:!0,forced:!n||!o},{filter:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})})),rn=(0,s.R)((()=>{var t=Xe(),e=bi().find,i=Xr(),r=Kr(),n="find",o=!0,s=r(n);n in[]&&Array(1)[n]((function(){o=!1})),t({target:"Array",proto:!0,forced:o||!s},{find:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}}),i(n)})),nn=(0,s.R)((()=>{var t=Xe(),e=bi().findIndex,i=Xr(),r=Kr(),n="findIndex",o=!0,s=r(n);n in[]&&Array(1)[n]((function(){o=!1})),t({target:"Array",proto:!0,forced:o||!s},{findIndex:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}}),i(n)})),on=(0,s.R)(((t,e)=>{var i=Ye(),r=Le(),n=vi(),o=function(t,e,s,a,l,c,u,h){for(var d,p=l,f=0,m=!!u&&n(u,h,3);f<a;){if(f in s){if(d=m?m(s[f],f,e):s[f],c>0&&i(d))p=o(t,e,d,r(d.length),p,c-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[p]=d}p++}f++}return p};e.exports=o})),sn=(0,s.R)((()=>{var t=Xe(),e=on(),i=qe(),r=Le(),n=ze(),o=ei();t({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,s=i(this),a=r(s.length),l=o(s,0);return l.length=e(l,s,s,a,0,void 0===t?1:n(t)),l}})})),an=(0,s.R)((()=>{var t=Xe(),e=on(),i=qe(),r=Le(),n=yi(),o=ei();t({target:"Array",proto:!0},{flatMap:function(t){var s,a=i(this),l=r(a.length);return n(t),(s=o(a,0)).length=e(s,a,a,l,0,1,t,arguments.length>1?arguments[1]:void 0),s}})})),ln=(0,s.R)(((t,e)=>{var i=bi().forEach,r=qr(),n=Kr(),o=r("forEach"),s=n("forEach");e.exports=o&&s?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})),cn=(0,s.R)((()=>{var t=Xe(),e=ln();t({target:"Array",proto:!0,forced:[].forEach!=e},{forEach:e})})),un=(0,s.R)((()=>{var t=Xe(),e=Ue().includes,i=Xr();t({target:"Array",proto:!0,forced:!Kr()("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")})),hn=(0,s.R)((()=>{var t=Xe(),e=Ue().indexOf,i=qr(),r=Kr(),n=[].indexOf,o=!!n&&1/[1].indexOf(1,-0)<0,s=i("indexOf"),a=r("indexOf",{ACCESSORS:!0,1:0});t({target:"Array",proto:!0,forced:o||!s||!a},{indexOf:function(t){return o?n.apply(this,arguments)||0:e(this,t,arguments.length>1?arguments[1]:void 0)}})})),dn=(0,s.R)((()=>{var t=Xe(),e=de(),i=fe(),r=qr(),n=[].join,o=e!=Object,s=r("join",",");t({target:"Array",proto:!0,forced:o||!s},{join:function(t){return n.call(i(this),void 0===t?",":t)}})})),pn=(0,s.R)(((t,e)=>{var i=fe(),r=ze(),n=Le(),o=qr(),s=Kr(),a=Math.min,l=[].lastIndexOf,c=!!l&&1/[1].lastIndexOf(1,-0)<0,u=o("lastIndexOf"),h=s("indexOf",{ACCESSORS:!0,1:0}),d=c||!u||!h;e.exports=d?function(t){if(c)return l.apply(this,arguments)||0;var e=i(this),o=n(e.length),s=o-1;for(arguments.length>1&&(s=a(s,r(arguments[1]))),s<0&&(s=o+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:l})),fn=(0,s.R)((()=>{var t=Xe(),e=pn();t({target:"Array",proto:!0,forced:e!==[].lastIndexOf},{lastIndexOf:e})})),mn=(0,s.R)((()=>{var t=Xe(),e=bi().map,i=ni(),r=Kr(),n=i("map"),o=r("map");t({target:"Array",proto:!0,forced:!n||!o},{map:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})})),gn=(0,s.R)(((t,e)=>{var i=yi(),r=qe(),n=de(),o=Le(),s=function(t){return function(e,s,a,l){i(s);var c=r(e),u=n(c),h=o(c.length),d=t?h-1:0,p=t?-1:1;if(a<2)for(;;){if(d in u){l=u[d],d+=p;break}if(d+=p,t?d<0:h<=d)throw TypeError("Reduce of empty array with no initial value")}for(;t?d>=0:h>d;d+=p)d in u&&(l=s(l,u[d],d,c));return l}};e.exports={left:s(!1),right:s(!0)}})),_n=(0,s.R)((()=>{var t=Xe(),e=gn().left,i=qr(),r=Kr(),n=i("reduce"),o=r("reduce",{1:0});t({target:"Array",proto:!0,forced:!n||!o},{reduce:function(t){return e(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})})),yn=(0,s.R)((()=>{var t=Xe(),e=gn().right,i=qr(),r=Kr(),n=i("reduceRight"),o=r("reduce",{1:0});t({target:"Array",proto:!0,forced:!n||!o},{reduceRight:function(t){return e(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})})),vn=(0,s.R)((()=>{var t=Xe(),e=Ye(),i=[].reverse,r=[1,2];t({target:"Array",proto:!0,forced:String(r)===String(r.reverse())},{reverse:function(){return e(this)&&(this.length=this.length),i.call(this)}})})),bn=(0,s.R)((()=>{var t=Xe(),e=me(),i=Ye(),r=Ne(),n=Le(),o=fe(),s=Ke(),a=ti(),l=ni(),c=Kr(),u=l("slice"),h=c("slice",{ACCESSORS:!0,0:0,1:2}),d=a("species"),p=[].slice,f=Math.max;t({target:"Array",proto:!0,forced:!u||!h},{slice:function(t,a){var l,c,u,h=o(this),m=n(h.length),g=r(t,m),_=r(void 0===a?m:a,m);if(i(h)&&("function"!=typeof(l=h.constructor)||l!==Array&&!i(l.prototype)?e(l)&&(null===(l=l[d])&&(l=void 0)):l=void 0,l===Array||void 0===l))return p.call(h,g,_);for(c=new(void 0===l?Array:l)(f(_-g,0)),u=0;g<_;g++,u++)g in h&&s(c,u,h[g]);return c.length=u,c}})})),xn=(0,s.R)((()=>{var t=Xe(),e=bi().some,i=qr(),r=Kr(),n=i("some"),o=r("some");t({target:"Array",proto:!0,forced:!n||!o},{some:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})})),wn=(0,s.R)((()=>{var t=Xe(),e=yi(),i=qe(),r=ae(),n=qr(),o=[],s=o.sort,a=r((function(){o.sort(void 0)})),l=r((function(){o.sort(null)})),c=n("sort");t({target:"Array",proto:!0,forced:a||!l||!c},{sort:function(t){return void 0===t?s.call(i(this)):s.call(i(this),e(t))}})})),Sn=(0,s.R)((()=>{var t=Xe(),e=Ne(),i=ze(),r=Le(),n=qe(),o=ei(),s=Ke(),a=ni(),l=Kr(),c=a("splice"),u=l("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,d=Math.min,p=9007199254740991,f="Maximum allowed length exceeded";t({target:"Array",proto:!0,forced:!c||!u},{splice:function(t,a){var l,c,u,m,g,_,y=n(this),v=r(y.length),b=e(t,v),x=arguments.length;if(0===x?l=c=0:1===x?(l=0,c=v-b):(l=x-2,c=d(h(i(a),0),v-b)),v+l-c>p)throw TypeError(f);for(u=o(y,c),m=0;m<c;m++)(g=b+m)in y&&s(u,m,y[g]);if(u.length=c,l<c){for(m=b;m<v-c;m++)_=m+l,(g=m+c)in y?y[_]=y[g]:delete y[_];for(m=v;m>v-c+l;m--)delete y[m-1]}else if(l>c)for(m=v-c;m>b;m--)_=m+l-1,(g=m+c-1)in y?y[_]=y[g]:delete y[_];for(m=0;m<l;m++)y[m+b]=arguments[m+2];return y.length=v-c+l,u}})})),kn=(0,s.R)(((t,e)=>{var i=Be(),r=we(),n=ti(),o=le(),s=n("species");e.exports=function(t){var e=i(t),n=r.f;o&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}})),Cn=(0,s.R)((()=>{kn()("Array")})),Tn=(0,s.R)((()=>{Xr()("flat")})),En=(0,s.R)((()=>{Xr()("flatMap")})),Rn=(0,s.R)(((t,e)=>{var i=fe(),r=Xr(),n=Yi(),o=Fe(),s=Ji(),a="Array Iterator",l=o.set,c=o.getterFor(a);e.exports=s(Array,"Array",(function(t,e){l(this,{type:a,target:i(t),index:0,kind:e})}),(function(){var t=c(this),e=t.target,i=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:r,done:!1}:"values"==i?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),n.Arguments=n.Array,r("keys"),r("values"),r("entries")})),Dn=(0,s.R)((()=>{var t=Xe(),e=Ne(),i=String.fromCharCode,r=String.fromCodePoint;t({target:"String",stat:!0,forced:!!r&&1!=r.length},{fromCodePoint:function(t){for(var r,n=[],o=arguments.length,s=0;o>s;){if(r=+arguments[s++],e(r,1114111)!==r)throw RangeError(r+" is not a valid code point");n.push(r<65536?i(r):i(55296+((r-=65536)>>10),r%1024+56320))}return n.join("")}})})),In=(0,s.R)((()=>{var t=Xe(),e=fe(),i=Le();t({target:"String",stat:!0},{raw:function(t){for(var r=e(t.raw),n=i(r.length),o=arguments.length,s=[],a=0;n>a;)s.push(String(r[a++])),a<o&&s.push(String(arguments[a]));return s.join("")}})})),On=(0,s.R)((()=>{var t=Xe(),e=Vi().codeAt;t({target:"String",proto:!0},{codePointAt:function(t){return e(this,t)}})})),An=(0,s.R)(((t,e)=>{var i=me(),r=he(),n=ti()("match");e.exports=function(t){var e;return i(t)&&(void 0!==(e=t[n])?!!e:"RegExp"==r(t))}})),Fn=(0,s.R)(((t,e)=>{var i=An();e.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}})),Mn=(0,s.R)(((t,e)=>{var i=ti()("match");e.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[i]=!1,"/./"[t](e)}catch(t){}}return!1}})),Pn=(0,s.R)((()=>{var t,e=Xe(),i=be().f,r=Le(),n=Fn(),o=pe(),s=Mn(),a=Re(),l="".endsWith,c=Math.min,u=s("endsWith");e({target:"String",proto:!0,forced:!!(a||u||(t=i(String.prototype,"endsWith"),!t||t.writable))&&!u},{endsWith:function(t){var e=String(o(this));n(t);var i=arguments.length>1?arguments[1]:void 0,s=r(e.length),a=void 0===i?s:c(r(i),s),u=String(t);return l?l.call(e,u,a):e.slice(a-u.length,a)===u}})})),Bn=(0,s.R)((()=>{var t=Xe(),e=Fn(),i=pe();t({target:"String",proto:!0,forced:!Mn()("includes")},{includes:function(t){return!!~String(i(this)).indexOf(e(t),arguments.length>1?arguments[1]:void 0)}})})),zn=(0,s.R)(((t,e)=>{var i=xe();e.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}})),Ln=(0,s.R)((t=>{var e=ae();function i(t,e){return RegExp(t,e)}t.UNSUPPORTED_Y=e((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),t.BROKEN_CARET=e((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))})),Nn=(0,s.R)(((t,e)=>{var i=zn(),r=Ln(),n=RegExp.prototype.exec,o=String.prototype.replace,s=n,a=function(){var t=/a/,e=/b*/g;return n.call(t,"a"),n.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=r.UNSUPPORTED_Y||r.BROKEN_CARET,c=void 0!==/()??/.exec("")[1];(a||c||l)&&(s=function(t){var e,r,s,u,h=this,d=l&&h.sticky,p=i.call(h),f=h.source,m=0,g=t;return d&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),g=String(t).slice(h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==t[h.lastIndex-1])&&(f="(?: "+f+")",g=" "+g,m++),r=new RegExp("^(?:"+f+")",p)),c&&(r=new RegExp("^"+f+"$(?!\\s)",p)),a&&(e=h.lastIndex),s=n.call(d?r:h,g),d?s?(s.input=s.input.slice(m),s[0]=s[0].slice(m),s.index=h.lastIndex,h.lastIndex+=s[0].length):h.lastIndex=0:a&&s&&(h.lastIndex=h.global?s.index+s[0].length:e),c&&s&&s.length>1&&o.call(s[0],r,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)})),s}),e.exports=s})),Un=(0,s.R)((()=>{var t=Xe(),e=Nn();t({target:"RegExp",proto:!0,forced:/./.exec!==e},{exec:e})})),jn=(0,s.R)(((t,e)=>{Un();var i=Me(),r=ae(),n=ti(),o=Nn(),s=Se(),a=n("species"),l=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),c="$0"==="a".replace(/./,"$0"),u=n("replace"),h=!!/./[u]&&""===/./[u]("a","$0"),d=!r((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));e.exports=function(t,e,u,p){var f=n(t),m=!r((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),g=m&&!r((function(){var e=!1,i=/a/;return"split"===t&&((i={}).constructor={},i.constructor[a]=function(){return i},i.flags="",i[f]=/./[f]),i.exec=function(){return e=!0,null},i[f](""),!e}));if(!m||!g||"replace"===t&&(!l||!c||h)||"split"===t&&!d){var _=/./[f],y=u(f,""[t],(function(t,e,i,r,n){return e.exec===o?m&&!n?{done:!0,value:_.call(e,i,r)}:{done:!0,value:t.call(i,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:h}),v=y[0],b=y[1];i(String.prototype,t,v),i(RegExp.prototype,f,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}p&&s(RegExp.prototype[f],"sham",!0)}})),Hn=(0,s.R)(((t,e)=>{var i=Vi().charAt;e.exports=function(t,e,r){return e+(r?i(t,e).length:1)}})),Wn=(0,s.R)(((t,e)=>{var i=he(),r=Nn();e.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}})),Gn=(0,s.R)((()=>{var t=jn(),e=xe(),i=Le(),r=pe(),n=Hn(),o=Wn();t("match",1,(function(t,s,a){return[function(e){var i=r(this),n=null==e?void 0:e[t];return void 0!==n?n.call(e,i):new RegExp(e)[t](String(i))},function(t){var r=a(s,t,this);if(r.done)return r.value;var l=e(t),c=String(this);if(!l.global)return o(l,c);var u=l.unicode;l.lastIndex=0;for(var h,d=[],p=0;null!==(h=o(l,c));){var f=String(h[0]);d[p]=f,""===f&&(l.lastIndex=n(c,i(l.lastIndex),u)),p++}return 0===p?null:d}]}))})),Vn=(0,s.R)(((t,e)=>{var i=xe(),r=yi(),n=ti()("species");e.exports=function(t,e){var o,s=i(t).constructor;return void 0===s||null==(o=i(s)[n])?e:r(o)}})),$n=(0,s.R)((()=>{var t=Xe(),e=qi(),i=pe(),r=Le(),n=yi(),o=xe(),s=he(),a=An(),l=zn(),c=Se(),u=ae(),h=ti(),d=Vn(),p=Hn(),f=Fe(),m=Re(),g=h("matchAll"),_="RegExp String",y=_+" Iterator",v=f.set,b=f.getterFor(y),x=RegExp.prototype,w=x.exec,S="".matchAll,k=!!S&&!u((function(){"a".matchAll(/./)})),C=e((function(t,e,i,r){v(this,{type:y,regexp:t,string:e,global:i,unicode:r,done:!1})}),_,(function(){var t=b(this);if(t.done)return{value:void 0,done:!0};var e=t.regexp,i=t.string,n=function(t,e){var i,r=t.exec;if("function"==typeof r){if("object"!=typeof(i=r.call(t,e)))throw TypeError("Incorrect exec result");return i}return w.call(t,e)}(e,i);return null===n?{value:void 0,done:t.done=!0}:t.global?(""==String(n[0])&&(e.lastIndex=p(i,r(e.lastIndex),t.unicode)),{value:n,done:!1}):(t.done=!0,{value:n,done:!1})})),T=function(t){var e,i,n,s,a,c,u=o(this),h=String(t);return e=d(u,RegExp),void 0===(i=u.flags)&&u instanceof RegExp&&!("flags"in x)&&(i=l.call(u)),n=void 0===i?"":String(i),s=new e(e===RegExp?u.source:u,n),a=!!~n.indexOf("g"),c=!!~n.indexOf("u"),s.lastIndex=r(u.lastIndex),new C(s,h,a,c)};t({target:"String",proto:!0,forced:k},{matchAll:function(t){var e,r,o,c=i(this);if(null!=t){if(a(t)&&!~String(i("flags"in x?t.flags:l.call(t))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(k)return S.apply(c,arguments);if(void 0===(r=t[g])&&m&&"RegExp"==s(t)&&(r=T),null!=r)return n(r).call(t,c)}else if(k)return S.apply(c,arguments);return e=String(c),o=new RegExp(t,"g"),m?T.call(o,e):o[g](e)}}),m||g in x||c(x,g,T)})),Zn=(0,s.R)(((t,e)=>{var i=ze(),r=pe();e.exports="".repeat||function(t){var e=String(r(this)),n="",o=i(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}})),Xn=(0,s.R)(((t,e)=>{var i=Le(),r=Zn(),n=pe(),o=Math.ceil,s=function(t){return function(e,s,a){var l,c,u=String(n(e)),h=u.length,d=void 0===a?" ":String(a),p=i(s);return p<=h||""==d?u:(l=p-h,(c=r.call(d,o(l/d.length))).length>l&&(c=c.slice(0,l)),t?u+c:c+u)}};e.exports={start:s(!1),end:s(!0)}})),Yn=(0,s.R)(((t,e)=>{var i=ii();e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i)})),qn=(0,s.R)((()=>{var t=Xe(),e=Xn().end;t({target:"String",proto:!0,forced:Yn()},{padEnd:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})})),Kn=(0,s.R)((()=>{var t=Xe(),e=Xn().start;t({target:"String",proto:!0,forced:Yn()},{padStart:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})})),Qn=(0,s.R)((()=>{Xe()({target:"String",proto:!0},{repeat:Zn()})})),Jn=(0,s.R)((()=>{var t=jn(),e=xe(),i=qe(),r=Le(),n=ze(),o=pe(),s=Hn(),a=Wn(),l=Math.max,c=Math.min,u=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,d=/\$([$&'`]|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};t("replace",2,(function(t,f,m,g){var _=g.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=g.REPLACE_KEEPS_$0,v=_?"$":"$0";return[function(e,i){var r=o(this),n=null==e?void 0:e[t];return void 0!==n?n.call(e,r,i):f.call(String(r),e,i)},function(t,i){if(!_&&y||"string"==typeof i&&-1===i.indexOf(v)){var o=m(f,t,this,i);if(o.done)return o.value}var u=e(t),h=String(this),d="function"==typeof i;d||(i=String(i));var g=u.global;if(g){var x=u.unicode;u.lastIndex=0}for(var w=[];;){var S=a(u,h);if(null===S)break;if(w.push(S),!g)break;""===String(S[0])&&(u.lastIndex=s(h,r(u.lastIndex),x))}for(var k="",C=0,T=0;T<w.length;T++){S=w[T];for(var E=String(S[0]),R=l(c(n(S.index),h.length),0),D=[],I=1;I<S.length;I++)D.push(p(S[I]));var O=S.groups;if(d){var A=[E].concat(D,R,h);void 0!==O&&A.push(O);var F=String(i.apply(void 0,A))}else F=b(E,h,R,D,O,i);R>=C&&(k+=h.slice(C,R)+F,C=R+E.length)}return k+h.slice(C)}];function b(t,e,r,n,o,s){var a=r+t.length,l=n.length,c=d;return void 0!==o&&(o=i(o),c=h),f.call(s,c,(function(i,s){var c;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(a);case"<":c=o[s.slice(1,-1)];break;default:var h=+s;if(0===h)return i;if(h>l){var d=u(h/10);return 0===d?i:d<=l?void 0===n[d-1]?s.charAt(1):n[d-1]+s.charAt(1):i}c=n[h-1]}return void 0===c?"":c}))}}))})),to=(0,s.R)((()=>{var t=jn(),e=xe(),i=pe(),r=Cr(),n=Wn();t("search",1,(function(t,o,s){return[function(e){var r=i(this),n=null==e?void 0:e[t];return void 0!==n?n.call(e,r):new RegExp(e)[t](String(r))},function(t){var i=s(o,t,this);if(i.done)return i.value;var a=e(t),l=String(this),c=a.lastIndex;r(c,0)||(a.lastIndex=0);var u=n(a,l);return r(a.lastIndex,c)||(a.lastIndex=c),null===u?-1:u.index}]}))})),eo=(0,s.R)((()=>{var t=jn(),e=An(),i=xe(),r=pe(),n=Vn(),o=Hn(),s=Le(),a=Wn(),l=Nn(),c=ae(),u=[].push,h=Math.min,d=4294967295,p=!c((function(){return!RegExp(d,"y")}));t("split",2,(function(t,c,f){var m;return m="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var n=String(r(this)),o=void 0===i?d:i>>>0;if(0===o)return[];if(void 0===t)return[n];if(!e(t))return c.call(n,t,o);for(var s,a,h,p=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,g=new RegExp(t.source,f+"g");(s=l.call(g,n))&&!((a=g.lastIndex)>m&&(p.push(n.slice(m,s.index)),s.length>1&&s.index<n.length&&u.apply(p,s.slice(1)),h=s[0].length,m=a,p.length>=o));)g.lastIndex===s.index&&g.lastIndex++;return m===n.length?(h||!g.test(""))&&p.push(""):p.push(n.slice(m)),p.length>o?p.slice(0,o):p}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:c.call(this,t,e)}:c,[function(e,i){var n=r(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,n,i):m.call(String(n),e,i)},function(t,e){var r=f(m,t,this,e,m!==c);if(r.done)return r.value;var l=i(t),u=String(this),g=n(l,RegExp),_=l.unicode,y=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(p?"y":"g"),v=new g(p?l:"^(?:"+l.source+")",y),b=void 0===e?d:e>>>0;if(0===b)return[];if(0===u.length)return null===a(v,u)?[u]:[];for(var x=0,w=0,S=[];w<u.length;){v.lastIndex=p?w:0;var k,C=a(v,p?u:u.slice(w));if(null===C||(k=h(s(v.lastIndex+(p?0:w)),u.length))===x)w=o(u,w,_);else{if(S.push(u.slice(x,w)),S.length===b)return S;for(var T=1;T<=C.length-1;T++)if(S.push(C[T]),S.length===b)return S;w=x=k}}return S.push(u.slice(x)),S}]}),!p)})),io=(0,s.R)((()=>{var t,e=Xe(),i=be().f,r=Le(),n=Fn(),o=pe(),s=Mn(),a=Re(),l="".startsWith,c=Math.min,u=s("startsWith");e({target:"String",proto:!0,forced:!!(a||u||(t=i(String.prototype,"startsWith"),!t||t.writable))&&!u},{startsWith:function(t){var e=String(o(this));n(t);var i=r(c(arguments.length>1?arguments[1]:void 0,e.length)),s=String(t);return l?l.call(e,s,i):e.slice(i,i+s.length)===s}})})),ro=(0,s.R)(((t,e)=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"})),no=(0,s.R)(((t,e)=>{var i=pe(),r="["+ro()+"]",n=RegExp("^"+r+r+"*"),o=RegExp(r+r+"*$"),s=function(t){return function(e){var r=String(i(e));return 1&t&&(r=r.replace(n,"")),2&t&&(r=r.replace(o,"")),r}};e.exports={start:s(1),end:s(2),trim:s(3)}})),oo=(0,s.R)(((t,e)=>{var i=ae(),r=ro();e.exports=function(t){return i((function(){return!!r[t]()||"​᠎"!="​᠎"[t]()||r[t].name!==t}))}})),so=(0,s.R)((()=>{var t=Xe(),e=no().trim;t({target:"String",proto:!0,forced:oo()("trim")},{trim:function(){return e(this)}})})),ao=(0,s.R)((()=>{var t=Xe(),e=no().start,i=oo()("trimStart"),r=i?function(){return e(this)}:"".trimStart;t({target:"String",proto:!0,forced:i},{trimStart:r,trimLeft:r})})),lo=(0,s.R)((()=>{var t=Xe(),e=no().end,i=oo()("trimEnd"),r=i?function(){return e(this)}:"".trimEnd;t({target:"String",proto:!0,forced:i},{trimEnd:r,trimRight:r})})),co=(0,s.R)(((t,e)=>{var i=pe(),r=/"/g;e.exports=function(t,e,n,o){var s=String(i(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(o).replace(r,"&quot;")+'"'),a+">"+s+"</"+e+">"}})),uo=(0,s.R)(((t,e)=>{var i=ae();e.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}})),ho=(0,s.R)((()=>{var t=Xe(),e=co();t({target:"String",proto:!0,forced:uo()("anchor")},{anchor:function(t){return e(this,"a","name",t)}})})),po=(0,s.R)((()=>{var t=Xe(),e=co();t({target:"String",proto:!0,forced:uo()("big")},{big:function(){return e(this,"big","","")}})})),fo=(0,s.R)((()=>{var t=Xe(),e=co();t({target:"String",proto:!0,forced:uo()("blink")},{blink:function(){return e(this,"blink","","")}})})),mo=(0,s.R)((()=>{var t=Xe(),e=co();t({target:"String",proto:!0,forced:uo()("bold")},{bold:function(){return e(this,"b","","")}})})),go=(0,s.R)((()=>{var t=Xe(),e=co();t({target:"String",proto:!0,forced:uo()("fixed")},{fixed:function(){return e(this,"tt","","")}})})),_o=(0,s.R)((()=>{var t=Xe(),e=co();t({target:"String",proto:!0,forced:uo()("fontcolor")},{fontcolor:function(t){return e(this,"font","color",t)}})})),yo=(0,s.R)((()=>{var t=Xe(),e=co();t({target:"String",proto:!0,forced:uo()("fontsize")},{fontsize:function(t){return e(this,"font","size",t)}})})),vo=(0,s.R)((()=>{var t=Xe(),e=co();t({target:"String",proto:!0,forced:uo()("italics")},{italics:function(){return e(this,"i","","")}})})),bo=(0,s.R)((()=>{var t=Xe(),e=co();t({target:"String",proto:!0,forced:uo()("link")},{link:function(t){return e(this,"a","href",t)}})})),xo=(0,s.R)((()=>{var t=Xe(),e=co();t({target:"String",proto:!0,forced:uo()("small")},{small:function(){return e(this,"small","","")}})})),wo=(0,s.R)((()=>{var t=Xe(),e=co();t({target:"String",proto:!0,forced:uo()("strike")},{strike:function(){return e(this,"strike","","")}})})),So=(0,s.R)((()=>{var t=Xe(),e=co();t({target:"String",proto:!0,forced:uo()("sub")},{sub:function(){return e(this,"sub","","")}})})),ko=(0,s.R)((()=>{var t=Xe(),e=co();t({target:"String",proto:!0,forced:uo()("sup")},{sup:function(){return e(this,"sup","","")}})})),Co=(0,s.R)(((t,e)=>{var i=me(),r=Qi();e.exports=function(t,e,n){var o,s;return r&&"function"==typeof(o=e.constructor)&&o!==n&&i(s=o.prototype)&&s!==n.prototype&&r(t,s),t}})),To=(0,s.R)((()=>{var t=le(),e=se(),i=Ze(),r=Co(),n=we().f,o=We().f,s=An(),a=zn(),l=Ln(),c=Me(),u=ae(),h=Fe().set,d=kn(),p=ti()("match"),f=e.RegExp,m=f.prototype,g=/a/g,_=/a/g,y=new f(g)!==g,v=l.UNSUPPORTED_Y;if(t&&i("RegExp",!y||v||u((function(){return _[p]=!1,f(g)!=g||f(_)==_||"/a/i"!=f(g,"i")})))){for(var b=function(t,e){var i,n=this instanceof b,o=s(t),l=void 0===e;if(!n&&o&&t.constructor===b&&l)return t;y?o&&!l&&(t=t.source):t instanceof b&&(l&&(e=a.call(t)),t=t.source),v&&((i=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,"")));var c=r(y?new f(t,e):f(t,e),n?this:m,b);return v&&i&&h(c,{sticky:i}),c},x=function(t){t in b||n(b,t,{configurable:!0,get:function(){return f[t]},set:function(e){f[t]=e}})},w=o(f),S=0;w.length>S;)x(w[S++]);m.constructor=b,b.prototype=m,c(e,"RegExp",b)}d("RegExp")})),Eo=(0,s.R)((()=>{var t=le(),e=we(),i=zn(),r=Ln().UNSUPPORTED_Y;t&&("g"!=/./g.flags||r)&&e.f(RegExp.prototype,"flags",{configurable:!0,get:i})})),Ro=(0,s.R)((()=>{var t=le(),e=Ln().UNSUPPORTED_Y,i=we().f,r=Fe().get,n=RegExp.prototype;t&&e&&i(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==n){if(this instanceof RegExp)return!!r(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})})),Do=(0,s.R)((()=>{Un();var t=Xe(),e=me(),i=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),r=/./.test;t({target:"RegExp",proto:!0,forced:!i},{test:function(t){if("function"!=typeof this.exec)return r.call(this,t);var i=this.exec(t);if(null!==i&&!e(i))throw new Error("RegExp exec method returned something other than an Object or null");return!!i}})})),Io=(0,s.R)((()=>{var t=Me(),e=xe(),i=ae(),r=zn(),n="toString",o=RegExp.prototype,s=o[n],a=i((function(){return"/a/b"!=s.call({source:"a",flags:"b"})})),l=s.name!=n;(a||l)&&t(RegExp.prototype,n,(function(){var t=e(this),i=String(t.source),n=t.flags;return"/"+i+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in o)?r.call(t):n)}),{unsafe:!0})})),Oo=(0,s.R)(((t,e)=>{var i=se(),r=no().trim,n=ro(),o=i.parseInt,s=/^[+-]?0[Xx]/,a=8!==o(n+"08")||22!==o(n+"0x16");e.exports=a?function(t,e){var i=r(String(t));return o(i,e>>>0||(s.test(i)?16:10))}:o})),Ao=(0,s.R)((()=>{var t=Xe(),e=Oo();t({global:!0,forced:parseInt!=e},{parseInt:e})})),Fo=(0,s.R)(((t,e)=>{var i=se(),r=no().trim,n=ro(),o=i.parseFloat,s=1/o(n+"-0")!=-1/0;e.exports=s?function(t){var e=r(String(t)),i=o(e);return 0===i&&"-"==e.charAt(0)?-0:i}:o})),Mo=(0,s.R)((()=>{var t=Xe(),e=Fo();t({global:!0,forced:parseFloat!=e},{parseFloat:e})})),Po=(0,s.R)((()=>{var t=le(),e=se(),i=Ze(),r=Me(),n=_e(),o=he(),s=Co(),a=ge(),l=ae(),c=pi(),u=We().f,h=be().f,d=we().f,p=no().trim,f="Number",m=e[f],g=m.prototype,_=o(c(g))==f,y=function(t){var e,i,r,n,o,s,l,c,u=a(t,!1);if("string"==typeof u&&u.length>2)if(43===(e=(u=p(u)).charCodeAt(0))||45===e){if(88===(i=u.charCodeAt(2))||120===i)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+u}for(s=(o=u.slice(2)).length,l=0;l<s;l++)if((c=o.charCodeAt(l))<48||c>n)return NaN;return parseInt(o,r)}return+u};if(i(f,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var v,b=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof b&&(_?l((function(){g.valueOf.call(i)})):o(i)!=f)?s(new m(y(e)),i,b):y(e)},x=t?u(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)n(m,v=x[w])&&!n(b,v)&&d(b,v,h(m,v));b.prototype=g,g.constructor=b,r(e,f,b)}})),Bo=(0,s.R)((()=>{Xe()({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})})),zo=(0,s.R)(((t,e)=>{var i=se().isFinite;e.exports=Number.isFinite||function(t){return"number"==typeof t&&i(t)}})),Lo=(0,s.R)((()=>{Xe()({target:"Number",stat:!0},{isFinite:zo()})})),No=(0,s.R)(((t,e)=>{var i=me(),r=Math.floor;e.exports=function(t){return!i(t)&&isFinite(t)&&r(t)===t}})),Uo=(0,s.R)((()=>{Xe()({target:"Number",stat:!0},{isInteger:No()})})),jo=(0,s.R)((()=>{Xe()({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})})),Ho=(0,s.R)((()=>{var t=Xe(),e=No(),i=Math.abs;t({target:"Number",stat:!0},{isSafeInteger:function(t){return e(t)&&i(t)<=9007199254740991}})})),Wo=(0,s.R)((()=>{Xe()({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})})),Go=(0,s.R)((()=>{Xe()({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})})),Vo=(0,s.R)((()=>{var t=Xe(),e=Fo();t({target:"Number",stat:!0,forced:Number.parseFloat!=e},{parseFloat:e})})),$o=(0,s.R)((()=>{var t=Xe(),e=Oo();t({target:"Number",stat:!0,forced:Number.parseInt!=e},{parseInt:e})})),Zo=(0,s.R)(((t,e)=>{var i=he();e.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}})),Xo=(0,s.R)((()=>{var t=Xe(),e=ze(),i=Zo(),r=Zn(),n=ae(),o=1..toFixed,s=Math.floor,a=function(t,e,i){return 0===e?i:e%2==1?a(t,e-1,i*t):a(t*t,e/2,i)};t({target:"Number",proto:!0,forced:o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n((function(){o.call({})}))},{toFixed:function(t){var n,o,l,c,u=i(this),h=e(t),d=[0,0,0,0,0,0],p="",f="0",m=function(t,e){for(var i=-1,r=e;++i<6;)r+=t*d[i],d[i]=r%1e7,r=s(r/1e7)},g=function(t){for(var e=6,i=0;--e>=0;)i+=d[e],d[e]=s(i/t),i=i%t*1e7},_=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==d[t]){var i=String(d[t]);e=""===e?i:e+r.call("0",7-i.length)+i}return e};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(p="-",u=-u),u>1e-21)if(o=(n=function(t){for(var e=0,i=t;i>=4096;)e+=12,i/=4096;for(;i>=2;)e+=1,i/=2;return e}(u*a(2,69,1))-69)<0?u*a(2,-n,1):u/a(2,n,1),o*=4503599627370496,(n=52-n)>0){for(m(0,o),l=h;l>=7;)m(1e7,0),l-=7;for(m(a(10,l,1),0),l=n-1;l>=23;)g(1<<23),l-=23;g(1<<l),m(1,1),g(2),f=_()}else m(0,o),m(1<<-n,0),f=_()+r.call("0",h);return h>0?f=p+((c=f.length)<=h?"0."+r.call("0",h-c)+f:f.slice(0,c-h)+"."+f.slice(c-h)):f=p+f,f}})})),Yo=(0,s.R)((()=>{var t=Xe(),e=ae(),i=Zo(),r=1..toPrecision;t({target:"Number",proto:!0,forced:e((function(){return"1"!==r.call(1,void 0)}))||!e((function(){r.call({})}))},{toPrecision:function(t){return void 0===t?r.call(i(this)):r.call(i(this),t)}})})),qo=(0,s.R)(((t,e)=>{var i=Math.log;e.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:i(1+t)}})),Ko=(0,s.R)((()=>{var t=Xe(),e=qo(),i=Math.acosh,r=Math.log,n=Math.sqrt,o=Math.LN2;t({target:"Math",stat:!0,forced:!i||710!=Math.floor(i(Number.MAX_VALUE))||i(1/0)!=1/0},{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?r(t)+o:e(t-1+n(t-1)*n(t+1))}})})),Qo=(0,s.R)((()=>{var t=Xe(),e=Math.asinh,i=Math.log,r=Math.sqrt;t({target:"Math",stat:!0,forced:!(e&&1/e(0)>0)},{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):i(e+r(e*e+1)):e}})})),Jo=(0,s.R)((()=>{var t=Xe(),e=Math.atanh,i=Math.log;t({target:"Math",stat:!0,forced:!(e&&1/e(-0)<0)},{atanh:function(t){return 0==(t=+t)?t:i((1+t)/(1-t))/2}})})),ts=(0,s.R)(((t,e)=>{e.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}})),es=(0,s.R)((()=>{var t=Xe(),e=ts(),i=Math.abs,r=Math.pow;t({target:"Math",stat:!0},{cbrt:function(t){return e(t=+t)*r(i(t),1/3)}})})),is=(0,s.R)((()=>{var t=Xe(),e=Math.floor,i=Math.log,r=Math.LOG2E;t({target:"Math",stat:!0},{clz32:function(t){return(t>>>=0)?31-e(i(t+.5)*r):32}})})),rs=(0,s.R)(((t,e)=>{var i=Math.expm1,r=Math.exp;e.exports=!i||i(10)>22025.465794806718||i(10)<22025.465794806718||-2e-17!=i(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:r(t)-1}:i})),ns=(0,s.R)((()=>{var t=Xe(),e=rs(),i=Math.cosh,r=Math.abs,n=Math.E;t({target:"Math",stat:!0,forced:!i||i(710)===1/0},{cosh:function(t){var i=e(r(t)-1)+1;return(i+1/(i*n*n))*(n/2)}})})),os=(0,s.R)((()=>{var t=Xe(),e=rs();t({target:"Math",stat:!0,forced:e!=Math.expm1},{expm1:e})})),ss=(0,s.R)(((t,e)=>{var i=ts(),r=Math.abs,n=Math.pow,o=n(2,-52),s=n(2,-23),a=n(2,127)*(2-s),l=n(2,-126);e.exports=Math.fround||function(t){var e,n,c=r(t),u=i(t);return c<l?u*(c/l/s+1/o-1/o)*l*s:(n=(e=(1+s/o)*c)-(e-c))>a||n!=n?u*(1/0):u*n}})),as=(0,s.R)((()=>{Xe()({target:"Math",stat:!0},{fround:ss()})})),ls=(0,s.R)((()=>{var t=Xe(),e=Math.hypot,i=Math.abs,r=Math.sqrt;t({target:"Math",stat:!0,forced:!!e&&e(1/0,NaN)!==1/0},{hypot:function(t,e){for(var n,o,s=0,a=0,l=arguments.length,c=0;a<l;)c<(n=i(arguments[a++]))?(s=s*(o=c/n)*o+1,c=n):n>0?s+=(o=n/c)*o:s+=n;return c===1/0?1/0:c*r(s)}})})),cs=(0,s.R)((()=>{var t=Xe(),e=ae(),i=Math.imul;t({target:"Math",stat:!0,forced:e((function(){return-5!=i(4294967295,5)||2!=i.length}))},{imul:function(t,e){var i=65535,r=+t,n=+e,o=i&r,s=i&n;return 0|o*s+((i&r>>>16)*s+o*(i&n>>>16)<<16>>>0)}})})),us=(0,s.R)((()=>{var t=Xe(),e=Math.log,i=Math.LOG10E;t({target:"Math",stat:!0},{log10:function(t){return e(t)*i}})})),hs=(0,s.R)((()=>{Xe()({target:"Math",stat:!0},{log1p:qo()})})),ds=(0,s.R)((()=>{var t=Xe(),e=Math.log,i=Math.LN2;t({target:"Math",stat:!0},{log2:function(t){return e(t)/i}})})),ps=(0,s.R)((()=>{Xe()({target:"Math",stat:!0},{sign:ts()})})),fs=(0,s.R)((()=>{var t=Xe(),e=ae(),i=rs(),r=Math.abs,n=Math.exp,o=Math.E;t({target:"Math",stat:!0,forced:e((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(t){return r(t=+t)<1?(i(t)-i(-t))/2:(n(t-1)-n(-t-1))*(o/2)}})})),ms=(0,s.R)((()=>{var t=Xe(),e=rs(),i=Math.exp;t({target:"Math",stat:!0},{tanh:function(t){var r=e(t=+t),n=e(-t);return r==1/0?1:n==1/0?-1:(r-n)/(i(t)+i(-t))}})})),gs=(0,s.R)((()=>{var t=Xe(),e=Math.ceil,i=Math.floor;t({target:"Math",stat:!0},{trunc:function(t){return(t>0?i:e)(t)}})})),_s=(0,s.R)((()=>{Xe()({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})})),ys=(0,s.R)((()=>{var t=Xe(),e=ae(),i=qe(),r=ge();t({target:"Date",proto:!0,forced:e((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(t){var e=i(this),n=r(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})})),vs=(0,s.R)(((t,e)=>{var i=ae(),r=Xn().start,n=Math.abs,o=Date.prototype,s=o.getTime,a=o.toISOString;e.exports=i((function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-50000000000001))}))||!i((function(){a.call(new Date(NaN))}))?function(){if(!isFinite(s.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),i=t.getUTCMilliseconds(),o=e<0?"-":e>9999?"+":"";return o+r(n(e),o?6:4,0)+"-"+r(t.getUTCMonth()+1,2,0)+"-"+r(t.getUTCDate(),2,0)+"T"+r(t.getUTCHours(),2,0)+":"+r(t.getUTCMinutes(),2,0)+":"+r(t.getUTCSeconds(),2,0)+"."+r(i,3,0)+"Z"}:a})),bs=(0,s.R)((()=>{var t=Xe(),e=vs();t({target:"Date",proto:!0,forced:Date.prototype.toISOString!==e},{toISOString:e})})),xs=(0,s.R)((()=>{var t=Me(),e=Date.prototype,i="Invalid Date",r="toString",n=e[r],o=e.getTime;new Date(NaN)+""!=i&&t(e,r,(function(){var t=o.call(this);return t==t?n.call(this):i}))})),ws=(0,s.R)(((t,e)=>{var i=xe(),r=ge();e.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return r(i(this),"number"!==t)}})),Ss=(0,s.R)((()=>{var t=Se(),e=ws(),i=ti()("toPrimitive"),r=Date.prototype;i in r||t(r,i,e)})),ks=(0,s.R)((()=>{var t=Xe(),e=Be(),i=ae(),r=e("JSON","stringify"),n=/[\uD800-\uDFFF]/g,o=/^[\uD800-\uDBFF]$/,s=/^[\uDC00-\uDFFF]$/,a=function(t,e,i){var r=i.charAt(e-1),n=i.charAt(e+1);return o.test(t)&&!s.test(n)||s.test(t)&&!o.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},l=i((function(){return'"\\udf06\\ud834"'!==r("\udf06\ud834")||'"\\udead"'!==r("\udead")}));r&&t({target:"JSON",stat:!0,forced:l},{stringify:function(t,e,i){var o=r.apply(null,arguments);return"string"==typeof o?o.replace(n,a):o}})})),Cs=(0,s.R)(((t,e)=>{var i=se();e.exports=i.Promise})),Ts=(0,s.R)(((t,e)=>{var i=Me();e.exports=function(t,e,r){for(var n in e)i(t,n,e[n],r);return t}})),Es=(0,s.R)(((t,e)=>{e.exports=function(t,e,i){if(!(t instanceof e))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return t}})),Rs=(0,s.R)(((t,e)=>{var i=ii();e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)})),Ds=(0,s.R)(((t,e)=>{var i,r,n,o=se(),s=ae(),a=he(),l=vi(),c=di(),u=ye(),h=Rs(),d=o.location,p=o.setImmediate,f=o.clearImmediate,m=o.process,g=o.MessageChannel,_=o.Dispatch,y=0,v={},b="onreadystatechange",x=function(t){if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},w=function(t){return function(){x(t)}},S=function(t){x(t.data)},k=function(t){o.postMessage(t+"",d.protocol+"//"+d.host)};(!p||!f)&&(p=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return v[++y]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},i(y),y},f=function(t){delete v[t]},"process"==a(m)?i=function(t){m.nextTick(w(t))}:_&&_.now?i=function(t){_.now(w(t))}:g&&!h?(n=(r=new g).port2,r.port1.onmessage=S,i=l(n.postMessage,n,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||s(k)||"file:"===d.protocol?i=b in u("script")?function(t){c.appendChild(u("script"))[b]=function(){c.removeChild(this),x(t)}}:function(t){setTimeout(w(t),0)}:(i=k,o.addEventListener("message",S,!1))),e.exports={set:p,clear:f}})),Is=(0,s.R)(((t,e)=>{var i,r,n,o,s,a,l,c,u=se(),h=be().f,d=he(),p=Ds().set,f=Rs(),m=u.MutationObserver||u.WebKitMutationObserver,g=u.process,_=u.Promise,y="process"==d(g),v=h(u,"queueMicrotask"),b=v&&v.value;b||(i=function(){var t,e;for(y&&(t=g.domain)&&t.exit();r;){e=r.fn,r=r.next;try{e()}catch(t){throw r?o():n=void 0,t}}n=void 0,t&&t.enter()},y?o=function(){g.nextTick(i)}:m&&!f?(s=!0,a=document.createTextNode(""),new m(i).observe(a,{characterData:!0}),o=function(){a.data=s=!s}):_&&_.resolve?(l=_.resolve(void 0),c=l.then,o=function(){c.call(l,i)}):o=function(){p.call(u,i)}),e.exports=b||function(t){var e={fn:t,next:void 0};n&&(n.next=e),r||(r=e,o()),n=e}})),Os=(0,s.R)(((t,e)=>{var i=yi(),r=function(t){var e,r;this.promise=new t((function(t,i){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=i})),this.resolve=i(e),this.reject=i(r)};e.exports.f=function(t){return new r(t)}})),As=(0,s.R)(((t,e)=>{var i=xe(),r=me(),n=Os();e.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var o=n.f(t);return(0,o.resolve)(e),o.promise}})),Fs=(0,s.R)(((t,e)=>{var i=se();e.exports=function(t,e){var r=i.console;r&&r.error&&(1===arguments.length?r.error(t):r.error(t,e))}})),Ms=(0,s.R)(((t,e)=>{e.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}})),Ps=(0,s.R)((()=>{var t,e,i,r,n=Xe(),o=Re(),s=se(),a=Be(),l=Cs(),c=Me(),u=Ts(),h=_i(),d=kn(),p=me(),f=yi(),m=Es(),g=he(),_=Te(),y=vr(),v=or(),b=Vn(),x=Ds().set,w=Is(),S=As(),k=Fs(),C=Os(),T=Ms(),E=Fe(),R=Ze(),D=ti(),I=ri(),O=D("species"),A="Promise",F=E.get,M=E.set,P=E.getterFor(A),B=l,z=s.TypeError,L=s.document,N=s.process,U=a("fetch"),j=C.f,H=j,W="process"==g(N),G=!!(L&&L.createEvent&&s.dispatchEvent),V="unhandledrejection",$=R(A,(function(){if(!(_(B)!==String(B))){if(66===I)return!0;if(!W&&"function"!=typeof PromiseRejectionEvent)return!0}if(o&&!B.prototype.finally)return!0;if(I>=51&&/native code/.test(B))return!1;var t=B.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[O]=e,!(t.then((function(){}))instanceof e)})),Z=$||!v((function(t){B.all(t).catch((function(){}))})),X=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},Y=function(t,e,i){if(!e.notified){e.notified=!0;var r=e.reactions;w((function(){for(var n=e.value,o=1==e.state,s=0;r.length>s;){var a,l,c,u=r[s++],h=o?u.ok:u.fail,d=u.resolve,p=u.reject,f=u.domain;try{h?(o||(2===e.rejection&&J(t,e),e.rejection=1),!0===h?a=n:(f&&f.enter(),a=h(n),f&&(f.exit(),c=!0)),a===u.promise?p(z("Promise-chain cycle")):(l=X(a))?l.call(a,d,p):d(a)):p(n)}catch(t){f&&!c&&f.exit(),p(t)}}e.reactions=[],e.notified=!1,i&&!e.rejection&&K(t,e)}))}},q=function(t,e,i){var r,n;G?((r=L.createEvent("Event")).promise=e,r.reason=i,r.initEvent(t,!1,!0),s.dispatchEvent(r)):r={promise:e,reason:i},(n=s["on"+t])?n(r):t===V&&k("Unhandled promise rejection",i)},K=function(t,e){x.call(s,(function(){var i,r=e.value;if(Q(e)&&(i=T((function(){W?N.emit("unhandledRejection",r,t):q(V,t,r)})),e.rejection=W||Q(e)?2:1,i.error))throw i.value}))},Q=function(t){return 1!==t.rejection&&!t.parent},J=function(t,e){x.call(s,(function(){W?N.emit("rejectionHandled",t):q("rejectionhandled",t,e.value)}))},tt=function(t,e,i,r){return function(n){t(e,i,n,r)}},et=function(t,e,i,r){e.done||(e.done=!0,r&&(e=r),e.value=i,e.state=2,Y(t,e,!0))},it=function(t,e,i,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===i)throw z("Promise can't be resolved itself");var n=X(i);n?w((function(){var r={done:!1};try{n.call(i,tt(it,t,r,e),tt(et,t,r,e))}catch(i){et(t,r,i,e)}})):(e.value=i,e.state=1,Y(t,e,!1))}catch(i){et(t,{done:!1},i,e)}}};$&&(B=function(e){m(this,B,A),f(e),t.call(this);var i=F(this);try{e(tt(it,this,i),tt(et,this,i))}catch(t){et(this,i,t)}},(t=function(t){M(this,{type:A,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=u(B.prototype,{then:function(t,e){var i=P(this),r=j(b(this,B));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=W?N.domain:void 0,i.parent=!0,i.reactions.push(r),0!=i.state&&Y(this,i,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),e=function(){var e=new t,i=F(e);this.promise=e,this.resolve=tt(it,e,i),this.reject=tt(et,e,i)},C.f=j=function(t){return t===B||t===i?new e(t):H(t)},!o&&"function"==typeof l&&(r=l.prototype.then,c(l.prototype,"then",(function(t,e){var i=this;return new B((function(t,e){r.call(i,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof U&&n({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return S(B,U.apply(s,arguments))}}))),n({global:!0,wrap:!0,forced:$},{Promise:B}),h(B,A,!1,!0),d(A),i=a(A),n({target:A,stat:!0,forced:$},{reject:function(t){var e=j(this);return e.reject.call(void 0,t),e.promise}}),n({target:A,stat:!0,forced:o||$},{resolve:function(t){return S(o&&this===i?B:this,t)}}),n({target:A,stat:!0,forced:Z},{all:function(t){var e=this,i=j(e),r=i.resolve,n=i.reject,o=T((function(){var i=f(e.resolve),o=[],s=0,a=1;y(t,(function(t){var l=s++,c=!1;o.push(void 0),a++,i.call(e,t).then((function(t){c||(c=!0,o[l]=t,--a||r(o))}),n)})),--a||r(o)}));return o.error&&n(o.value),i.promise},race:function(t){var e=this,i=j(e),r=i.reject,n=T((function(){var n=f(e.resolve);y(t,(function(t){n.call(e,t).then(i.resolve,r)}))}));return n.error&&r(n.value),i.promise}})})),Bs=(0,s.R)((()=>{var t=Xe(),e=yi(),i=Os(),r=Ms(),n=vr();t({target:"Promise",stat:!0},{allSettled:function(t){var o=this,s=i.f(o),a=s.resolve,l=s.reject,c=r((function(){var i=e(o.resolve),r=[],s=0,l=1;n(t,(function(t){var e=s++,n=!1;r.push(void 0),l++,i.call(o,t).then((function(t){n||(n=!0,r[e]={status:"fulfilled",value:t},--l||a(r))}),(function(t){n||(n=!0,r[e]={status:"rejected",reason:t},--l||a(r))}))})),--l||a(r)}));return c.error&&l(c.value),s.promise}})})),zs=(0,s.R)((()=>{var t=Xe(),e=Re(),i=Cs(),r=ae(),n=Be(),o=Vn(),s=As(),a=Me();t({target:"Promise",proto:!0,real:!0,forced:!!i&&r((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=o(this,n("Promise")),i="function"==typeof t;return this.then(i?function(i){return s(e,t()).then((function(){return i}))}:t,i?function(i){return s(e,t()).then((function(){throw i}))}:t)}}),!e&&"function"==typeof i&&!i.prototype.finally&&a(i.prototype,"finally",n("Promise").prototype.finally)})),Ls=(0,s.R)(((t,e)=>{var i=Xe(),r=se(),n=Ze(),o=Me(),s=_r(),a=vr(),l=Es(),c=me(),u=ae(),h=or(),d=_i(),p=Co();e.exports=function(t,e,f){var m=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),_=m?"set":"add",y=r[t],v=y&&y.prototype,b=y,x={},w=function(t){var e=v[t];o(v,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!c(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!c(t))&&e.call(this,0===t?0:t)}:function(t,i){return e.call(this,0===t?0:t,i),this})};if(n(t,"function"!=typeof y||!(g||v.forEach&&!u((function(){(new y).entries().next()})))))b=f.getConstructor(e,t,m,_),s.REQUIRED=!0;else if(n(t,!0)){var S=new b,k=S[_](g?{}:-0,1)!=S,C=u((function(){S.has(1)})),T=h((function(t){new y(t)})),E=!g&&u((function(){for(var t=new y,e=5;e--;)t[_](e,e);return!t.has(-0)}));T||((b=e((function(e,i){l(e,b,t);var r=p(new y,e,b);return null!=i&&a(i,r[_],r,m),r}))).prototype=v,v.constructor=b),(C||E)&&(w("delete"),w("has"),m&&w("get")),(E||k)&&w(_),g&&v.clear&&delete v.clear}return x[t]=b,i({global:!0,forced:b!=y},x),d(b,t),g||f.setStrong(b,t,m),b}})),Ns=(0,s.R)(((t,e)=>{var i=we().f,r=pi(),n=Ts(),o=vi(),s=Es(),a=vr(),l=Ji(),c=kn(),u=le(),h=_r().fastKey,d=Fe(),p=d.set,f=d.getterFor;e.exports={getConstructor:function(t,e,l,c){var d=t((function(t,i){s(t,d,e),p(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),u||(t.size=0),null!=i&&a(i,t[c],t,l)})),m=f(e),g=function(t,e,i){var r,n,o=m(t),s=_(t,e);return s?s.value=i:(o.last=s={index:n=h(e,!0),key:e,value:i,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),u?o.size++:t.size++,"F"!==n&&(o.index[n]=s)),t},_=function(t,e){var i,r=m(t),n=h(e);if("F"!==n)return r.index[n];for(i=r.first;i;i=i.next)if(i.key==e)return i};return n(d.prototype,{clear:function(){for(var t=m(this),e=t.index,i=t.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete e[i.index],i=i.next;t.first=t.last=void 0,u?t.size=0:this.size=0},delete:function(t){var e=this,i=m(e),r=_(e,t);if(r){var n=r.next,o=r.previous;delete i.index[r.index],r.removed=!0,o&&(o.next=n),n&&(n.previous=o),i.first==r&&(i.first=n),i.last==r&&(i.last=o),u?i.size--:e.size--}return!!r},forEach:function(t){for(var e,i=m(this),r=o(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:i.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!_(this,t)}}),n(d.prototype,l?{get:function(t){var e=_(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),u&&i(d.prototype,"size",{get:function(){return m(this).size}}),d},setStrong:function(t,e,i){var r=e+" Iterator",n=f(e),o=f(r);l(t,e,(function(t,e){p(this,{type:r,target:t,state:n(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,i=t.last;i&&i.removed;)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?"keys"==e?{value:i.key,done:!1}:"values"==e?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),c(e)}}})),Us=(0,s.R)(((t,e)=>{var i=Ls(),r=Ns();e.exports=i("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)})),js=(0,s.R)(((t,e)=>{var i=Ls(),r=Ns();e.exports=i("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)})),Hs=(0,s.R)(((t,e)=>{var i=Ts(),r=_r().getWeakData,n=xe(),o=me(),s=Es(),a=vr(),l=bi(),c=_e(),u=Fe(),h=u.set,d=u.getterFor,p=l.find,f=l.findIndex,m=0,g=function(t){return t.frozen||(t.frozen=new _)},_=function(){this.entries=[]},y=function(t,e){return p(t.entries,(function(t){return t[0]===e}))};_.prototype={get:function(t){var e=y(this,t);if(e)return e[1]},has:function(t){return!!y(this,t)},set:function(t,e){var i=y(this,t);i?i[1]=e:this.entries.push([t,e])},delete:function(t){var e=f(this.entries,(function(e){return e[0]===t}));return~e&&this.entries.splice(e,1),!!~e}},e.exports={getConstructor:function(t,e,l,u){var p=t((function(t,i){s(t,p,e),h(t,{type:e,id:m++,frozen:void 0}),null!=i&&a(i,t[u],t,l)})),f=d(e),_=function(t,e,i){var o=f(t),s=r(n(e),!0);return!0===s?g(o).set(e,i):s[o.id]=i,t};return i(p.prototype,{delete:function(t){var e=f(this);if(!o(t))return!1;var i=r(t);return!0===i?g(e).delete(t):i&&c(i,e.id)&&delete i[e.id]},has:function(t){var e=f(this);if(!o(t))return!1;var i=r(t);return!0===i?g(e).has(t):i&&c(i,e.id)}}),i(p.prototype,l?{get:function(t){var e=f(this);if(o(t)){var i=r(t);return!0===i?g(e).get(t):i?i[e.id]:void 0}},set:function(t,e){return _(this,t,e)}}:{add:function(t){return _(this,t,!0)}}),p}}})),Ws=(0,s.R)(((t,e)=>{var i,r=se(),n=Ts(),o=_r(),s=Ls(),a=Hs(),l=me(),c=Fe().enforce,u=Ee(),h=!r.ActiveXObject&&"ActiveXObject"in r,d=Object.isExtensible,p=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},f=e.exports=s("WeakMap",p,a);if(u&&h){i=a.getConstructor(p,"WeakMap",!0),o.REQUIRED=!0;var m=f.prototype,g=m.delete,_=m.has,y=m.get,v=m.set;n(m,{delete:function(t){if(l(t)&&!d(t)){var e=c(this);return e.frozen||(e.frozen=new i),g.call(this,t)||e.frozen.delete(t)}return g.call(this,t)},has:function(t){if(l(t)&&!d(t)){var e=c(this);return e.frozen||(e.frozen=new i),_.call(this,t)||e.frozen.has(t)}return _.call(this,t)},get:function(t){if(l(t)&&!d(t)){var e=c(this);return e.frozen||(e.frozen=new i),_.call(this,t)?y.call(this,t):e.frozen.get(t)}return y.call(this,t)},set:function(t,e){if(l(t)&&!d(t)){var r=c(this);r.frozen||(r.frozen=new i),_.call(this,t)?v.call(this,t,e):r.frozen.set(t,e)}else v.call(this,t,e);return this}})}})),Gs=(0,s.R)((()=>{Ls()("WeakSet",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Hs())})),Vs=(0,s.R)(((t,e)=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView})),$s=(0,s.R)(((t,e)=>{var i=ze(),r=Le();e.exports=function(t){if(void 0===t)return 0;var e=i(t),n=r(e);if(e!==n)throw RangeError("Wrong length or index");return n}})),Zs=(0,s.R)(((t,e)=>{var i=1/0,r=Math.abs,n=Math.pow,o=Math.floor,s=Math.log,a=Math.LN2;e.exports={pack:function(t,e,l){var c,u,h,d=new Array(l),p=8*l-e-1,f=(1<<p)-1,m=f>>1,g=23===e?n(2,-24)-n(2,-77):0,_=t<0||0===t&&1/t<0?1:0,y=0;for((t=r(t))!=t||t===i?(u=t!=t?1:0,c=f):(c=o(s(t)/a),t*(h=n(2,-c))<1&&(c--,h*=2),(t+=c+m>=1?g/h:g*n(2,1-m))*h>=2&&(c++,h/=2),c+m>=f?(u=0,c=f):c+m>=1?(u=(t*h-1)*n(2,e),c+=m):(u=t*n(2,m-1)*n(2,e),c=0));e>=8;d[y++]=255&u,u/=256,e-=8);for(c=c<<e|u,p+=e;p>0;d[y++]=255&c,c/=256,p-=8);return d[--y]|=128*_,d},unpack:function(t,e){var r,o=t.length,s=8*o-e-1,a=(1<<s)-1,l=a>>1,c=s-7,u=o-1,h=t[u--],d=127&h;for(h>>=7;c>0;d=256*d+t[u],u--,c-=8);for(r=d&(1<<-c)-1,d>>=-c,c+=e;c>0;r=256*r+t[u],u--,c-=8);if(0===d)d=1-l;else{if(d===a)return r?NaN:h?-i:i;r+=n(2,e),d-=l}return(h?-1:1)*r*n(2,d-e)}}})),Xs=(0,s.R)(((t,e)=>{var i=se(),r=le(),n=Vs(),o=Se(),s=Ts(),a=ae(),l=Es(),c=ze(),u=Le(),h=$s(),d=Zs(),p=Zi(),f=Qi(),m=We().f,g=we().f,_=Jr(),y=_i(),v=Fe(),b=v.get,x=v.set,w="ArrayBuffer",S="DataView",k="prototype",C="Wrong index",T=i[w],E=T,R=i[S],D=R&&R[k],I=Object.prototype,O=i.RangeError,A=d.pack,F=d.unpack,M=function(t){return[255&t]},P=function(t){return[255&t,t>>8&255]},B=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},z=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},L=function(t){return A(t,23,4)},N=function(t){return A(t,52,8)},U=function(t,e){g(t[k],e,{get:function(){return b(this)[e]}})},j=function(t,e,i,r){var n=h(i),o=b(t);if(n+e>o.byteLength)throw O(C);var s=b(o.buffer).bytes,a=n+o.byteOffset,l=s.slice(a,a+e);return r?l:l.reverse()},H=function(t,e,i,r,n,o){var s=h(i),a=b(t);if(s+e>a.byteLength)throw O(C);for(var l=b(a.buffer).bytes,c=s+a.byteOffset,u=r(+n),d=0;d<e;d++)l[c+d]=u[o?d:e-d-1]};if(n){if(!a((function(){T(1)}))||!a((function(){new T(-1)}))||a((function(){return new T,new T(1.5),new T(NaN),T.name!=w}))){for(var W,G=(E=function(t){return l(this,E),new T(h(t))})[k]=T[k],V=m(T),$=0;V.length>$;)(W=V[$++])in E||o(E,W,T[W]);G.constructor=E}f&&p(D)!==I&&f(D,I);var Z=new R(new E(2)),X=D.setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),(Z.getInt8(0)||!Z.getInt8(1))&&s(D,{setInt8:function(t,e){X.call(this,t,e<<24>>24)},setUint8:function(t,e){X.call(this,t,e<<24>>24)}},{unsafe:!0})}else E=function(t){l(this,E,w);var e=h(t);x(this,{bytes:_.call(new Array(e),0),byteLength:e}),r||(this.byteLength=e)},R=function(t,e,i){l(this,R,S),l(t,E,S);var n=b(t).byteLength,o=c(e);if(o<0||o>n)throw O("Wrong offset");if(o+(i=void 0===i?n-o:u(i))>n)throw O("Wrong length");x(this,{buffer:t,byteLength:i,byteOffset:o}),r||(this.buffer=t,this.byteLength=i,this.byteOffset=o)},r&&(U(E,"byteLength"),U(R,"buffer"),U(R,"byteLength"),U(R,"byteOffset")),s(R[k],{getInt8:function(t){return j(this,1,t)[0]<<24>>24},getUint8:function(t){return j(this,1,t)[0]},getInt16:function(t){var e=j(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=j(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return z(j(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return z(j(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return F(j(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return F(j(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){H(this,1,t,M,e)},setUint8:function(t,e){H(this,1,t,M,e)},setInt16:function(t,e){H(this,2,t,P,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){H(this,2,t,P,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){H(this,4,t,B,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){H(this,4,t,B,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){H(this,4,t,L,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){H(this,8,t,N,e,arguments.length>2?arguments[2]:void 0)}});y(E,w),y(R,S),e.exports={ArrayBuffer:E,DataView:R}})),Ys=(0,s.R)((()=>{var t=Xe(),e=se(),i=Xs(),r=kn(),n="ArrayBuffer",o=i[n];t({global:!0,forced:e[n]!==o},{ArrayBuffer:o}),r(n)})),qs=(0,s.R)(((t,e)=>{var i,r=Vs(),n=le(),o=se(),s=me(),a=_e(),l=ai(),c=Se(),u=Me(),h=we().f,d=Zi(),p=Qi(),f=ti(),m=Ie(),g=o.Int8Array,_=g&&g.prototype,y=o.Uint8ClampedArray,v=y&&y.prototype,b=g&&d(g),x=_&&d(_),w=Object.prototype,S=w.isPrototypeOf,k=f("toStringTag"),C=m("TYPED_ARRAY_TAG"),T=r&&!!p&&"Opera"!==l(o.opera),E=!1,R={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},D=function(t){return s(t)&&a(R,l(t))};for(i in R)o[i]||(T=!1);if((!T||"function"!=typeof b||b===Function.prototype)&&(b=function(){throw TypeError("Incorrect invocation")},T))for(i in R)o[i]&&p(o[i],b);if((!T||!x||x===w)&&(x=b.prototype,T))for(i in R)o[i]&&p(o[i].prototype,x);if(T&&d(v)!==x&&p(v,x),n&&!a(x,k))for(i in E=!0,h(x,k,{get:function(){return s(this)?this[C]:void 0}}),R)o[i]&&c(o[i],C,i);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:E&&C,aTypedArray:function(t){if(D(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(p){if(S.call(b,t))return t}else for(var e in R)if(a(R,i)){var r=o[e];if(r&&(t===r||S.call(r,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,i){if(n){if(i)for(var r in R){var s=o[r];s&&a(s.prototype,t)&&delete s.prototype[t]}(!x[t]||i)&&u(x,t,i?e:T&&_[t]||e)}},exportTypedArrayStaticMethod:function(t,e,i){var r,s;if(n){if(p){if(i)for(r in R)(s=o[r])&&a(s,t)&&delete s[t];if(b[t]&&!i)return;try{return u(b,t,i?e:T&&g[t]||e)}catch(t){}}for(r in R)(s=o[r])&&(!s[t]||i)&&u(s,t,e)}},isView:function(t){var e=l(t);return"DataView"===e||a(R,e)},isTypedArray:D,TypedArray:b,TypedArrayPrototype:x}})),Ks=(0,s.R)((()=>{var t=Xe(),e=qs();t({target:"ArrayBuffer",stat:!0,forced:!e.NATIVE_ARRAY_BUFFER_VIEWS},{isView:e.isView})})),Qs=(0,s.R)((()=>{var t=Xe(),e=ae(),i=Xs(),r=xe(),n=Ne(),o=Le(),s=Vn(),a=i.ArrayBuffer,l=i.DataView,c=a.prototype.slice;t({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:e((function(){return!new a(2).slice(1,void 0).byteLength}))},{slice:function(t,e){if(void 0!==c&&void 0===e)return c.call(r(this),t);for(var i=r(this).byteLength,u=n(t,i),h=n(void 0===e?i:e,i),d=new(s(this,a))(o(h-u)),p=new l(this),f=new l(d),m=0;u<h;)f.setUint8(m++,p.getUint8(u++));return d}})})),Js=(0,s.R)((()=>{var t=Xe(),e=Xs();t({global:!0,forced:!Vs()},{DataView:e.DataView})})),ta=(0,s.R)(((t,e)=>{var i=se(),r=ae(),n=or(),o=qs().NATIVE_ARRAY_BUFFER_VIEWS,s=i.ArrayBuffer,a=i.Int8Array;e.exports=!o||!r((function(){a(1)}))||!r((function(){new a(-1)}))||!n((function(t){new a,new a(null),new a(1.5),new a(t)}),!0)||r((function(){return 1!==new a(new s(2),1,void 0).length}))})),ea=(0,s.R)(((t,e)=>{var i=ze();e.exports=function(t){var e=i(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}})),ia=(0,s.R)(((t,e)=>{var i=ea();e.exports=function(t,e){var r=i(t);if(r%e)throw RangeError("Wrong offset");return r}})),ra=(0,s.R)(((t,e)=>{var i=qe(),r=Le(),n=rr(),o=ir(),s=vi(),a=qs().aTypedArrayConstructor;e.exports=function(t){var e,l,c,u,h,d,p=i(t),f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,_=n(p);if(null!=_&&!o(_))for(d=(h=_.call(p)).next,p=[];!(u=d.call(h)).done;)p.push(u.value);for(g&&f>2&&(m=s(m,arguments[2],2)),l=r(p.length),c=new(a(this))(l),e=0;l>e;e++)c[e]=g?m(p[e],e):p[e];return c}})),na=(0,s.R)(((t,e)=>{var i=Xe(),r=se(),n=le(),o=ta(),s=qs(),a=Xs(),l=Es(),c=ue(),u=Se(),h=Le(),d=$s(),p=ia(),f=ge(),m=_e(),g=ai(),_=me(),y=pi(),v=Qi(),b=We().f,x=ra(),w=bi().forEach,S=kn(),k=we(),C=be(),T=Fe(),E=Co(),R=T.get,D=T.set,I=k.f,O=C.f,A=Math.round,F=r.RangeError,M=a.ArrayBuffer,P=a.DataView,B=s.NATIVE_ARRAY_BUFFER_VIEWS,z=s.TYPED_ARRAY_TAG,L=s.TypedArray,N=s.TypedArrayPrototype,U=s.aTypedArrayConstructor,j=s.isTypedArray,H="BYTES_PER_ELEMENT",W="Wrong length",G=function(t,e){for(var i=0,r=e.length,n=new(U(t))(r);r>i;)n[i]=e[i++];return n},V=function(t,e){I(t,e,{get:function(){return R(this)[e]}})},$=function(t){var e;return t instanceof M||"ArrayBuffer"==(e=g(t))||"SharedArrayBuffer"==e},Z=function(t,e){return j(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},X=function(t,e){return Z(t,e=f(e,!0))?c(2,t[e]):O(t,e)},Y=function(t,e,i){return!(Z(t,e=f(e,!0))&&_(i)&&m(i,"value"))||m(i,"get")||m(i,"set")||i.configurable||m(i,"writable")&&!i.writable||m(i,"enumerable")&&!i.enumerable?I(t,e,i):(t[e]=i.value,t)};n?(B||(C.f=X,k.f=Y,V(N,"buffer"),V(N,"byteOffset"),V(N,"byteLength"),V(N,"length")),i({target:"Object",stat:!0,forced:!B},{getOwnPropertyDescriptor:X,defineProperty:Y}),e.exports=function(t,e,n){var s=t.match(/\d+$/)[0]/8,a=t+(n?"Clamped":"")+"Array",c="get"+t,f="set"+t,m=r[a],g=m,k=g&&g.prototype,C={},T=function(t,e){I(t,e,{get:function(){return function(t,e){var i=R(t);return i.view[c](e*s+i.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,i){var r=R(t);n&&(i=(i=A(i))<0?0:i>255?255:255&i),r.view[f](e*s+r.byteOffset,i,!0)}(this,e,t)},enumerable:!0})};B?o&&(g=e((function(t,e,i,r){return l(t,g,a),E(_(e)?$(e)?void 0!==r?new m(e,p(i,s),r):void 0!==i?new m(e,p(i,s)):new m(e):j(e)?G(g,e):x.call(g,e):new m(d(e)),t,g)})),v&&v(g,L),w(b(m),(function(t){t in g||u(g,t,m[t])})),g.prototype=k):(g=e((function(t,e,i,r){l(t,g,a);var n,o,c,u=0,f=0;if(_(e)){if(!$(e))return j(e)?G(g,e):x.call(g,e);n=e,f=p(i,s);var m=e.byteLength;if(void 0===r){if(m%s)throw F(W);if((o=m-f)<0)throw F(W)}else if((o=h(r)*s)+f>m)throw F(W);c=o/s}else c=d(e),n=new M(o=c*s);for(D(t,{buffer:n,byteOffset:f,byteLength:o,length:c,view:new P(n)});u<c;)T(t,u++)})),v&&v(g,L),k=g.prototype=y(N)),k.constructor!==g&&u(k,"constructor",g),z&&u(k,z,a),C[a]=g,i({global:!0,forced:g!=m,sham:!B},C),H in g||u(g,H,s),H in k||u(k,H,s),S(a)}):e.exports=function(){}})),oa=(0,s.R)((()=>{na()("Int8",(function(t){return function(e,i,r){return t(this,e,i,r)}}))})),sa=(0,s.R)((()=>{na()("Uint8",(function(t){return function(e,i,r){return t(this,e,i,r)}}))})),aa=(0,s.R)((()=>{na()("Uint8",(function(t){return function(e,i,r){return t(this,e,i,r)}}),!0)})),la=(0,s.R)((()=>{na()("Int16",(function(t){return function(e,i,r){return t(this,e,i,r)}}))})),ca=(0,s.R)((()=>{na()("Uint16",(function(t){return function(e,i,r){return t(this,e,i,r)}}))})),ua=(0,s.R)((()=>{na()("Int32",(function(t){return function(e,i,r){return t(this,e,i,r)}}))})),ha=(0,s.R)((()=>{na()("Uint32",(function(t){return function(e,i,r){return t(this,e,i,r)}}))})),da=(0,s.R)((()=>{na()("Float32",(function(t){return function(e,i,r){return t(this,e,i,r)}}))})),pa=(0,s.R)((()=>{na()("Float64",(function(t){return function(e,i,r){return t(this,e,i,r)}}))})),fa=(0,s.R)((()=>{var t=ta();(0,qs().exportTypedArrayStaticMethod)("from",ra(),t)})),ma=(0,s.R)((()=>{var t=qs(),e=ta(),i=t.aTypedArrayConstructor;(0,t.exportTypedArrayStaticMethod)("of",(function(){for(var t=0,e=arguments.length,r=new(i(this))(e);e>t;)r[t]=arguments[t++];return r}),e)})),ga=(0,s.R)((()=>{var t=qs(),e=Zr(),i=t.aTypedArray;(0,t.exportTypedArrayMethod)("copyWithin",(function(t,r){return e.call(i(this),t,r,arguments.length>2?arguments[2]:void 0)}))})),_a=(0,s.R)((()=>{var t=qs(),e=bi().every,i=t.aTypedArray;(0,t.exportTypedArrayMethod)("every",(function(t){return e(i(this),t,arguments.length>1?arguments[1]:void 0)}))})),ya=(0,s.R)((()=>{var t=qs(),e=Jr(),i=t.aTypedArray;(0,t.exportTypedArrayMethod)("fill",(function(t){return e.apply(i(this),arguments)}))})),va=(0,s.R)((()=>{var t=qs(),e=bi().filter,i=Vn(),r=t.aTypedArray,n=t.aTypedArrayConstructor;(0,t.exportTypedArrayMethod)("filter",(function(t){for(var o=e(r(this),t,arguments.length>1?arguments[1]:void 0),s=i(this,this.constructor),a=0,l=o.length,c=new(n(s))(l);l>a;)c[a]=o[a++];return c}))})),ba=(0,s.R)((()=>{var t=qs(),e=bi().find,i=t.aTypedArray;(0,t.exportTypedArrayMethod)("find",(function(t){return e(i(this),t,arguments.length>1?arguments[1]:void 0)}))})),xa=(0,s.R)((()=>{var t=qs(),e=bi().findIndex,i=t.aTypedArray;(0,t.exportTypedArrayMethod)("findIndex",(function(t){return e(i(this),t,arguments.length>1?arguments[1]:void 0)}))})),wa=(0,s.R)((()=>{var t=qs(),e=bi().forEach,i=t.aTypedArray;(0,t.exportTypedArrayMethod)("forEach",(function(t){e(i(this),t,arguments.length>1?arguments[1]:void 0)}))})),Sa=(0,s.R)((()=>{var t=qs(),e=Ue().includes,i=t.aTypedArray;(0,t.exportTypedArrayMethod)("includes",(function(t){return e(i(this),t,arguments.length>1?arguments[1]:void 0)}))})),ka=(0,s.R)((()=>{var t=qs(),e=Ue().indexOf,i=t.aTypedArray;(0,t.exportTypedArrayMethod)("indexOf",(function(t){return e(i(this),t,arguments.length>1?arguments[1]:void 0)}))})),Ca=(0,s.R)((()=>{var t=se(),e=qs(),i=Rn(),r=ti()("iterator"),n=t.Uint8Array,o=i.values,s=i.keys,a=i.entries,l=e.aTypedArray,c=e.exportTypedArrayMethod,u=n&&n.prototype[r],h=!!u&&("values"==u.name||null==u.name),d=function(){return o.call(l(this))};c("entries",(function(){return a.call(l(this))})),c("keys",(function(){return s.call(l(this))})),c("values",d,!h),c(r,d,!h)})),Ta=(0,s.R)((()=>{var t=qs(),e=t.aTypedArray,i=t.exportTypedArrayMethod,r=[].join;i("join",(function(t){return r.apply(e(this),arguments)}))})),Ea=(0,s.R)((()=>{var t=qs(),e=pn(),i=t.aTypedArray;(0,t.exportTypedArrayMethod)("lastIndexOf",(function(t){return e.apply(i(this),arguments)}))})),Ra=(0,s.R)((()=>{var t=qs(),e=bi().map,i=Vn(),r=t.aTypedArray,n=t.aTypedArrayConstructor;(0,t.exportTypedArrayMethod)("map",(function(t){return e(r(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(n(i(t,t.constructor)))(e)}))}))})),Da=(0,s.R)((()=>{var t=qs(),e=gn().left,i=t.aTypedArray;(0,t.exportTypedArrayMethod)("reduce",(function(t){return e(i(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))})),Ia=(0,s.R)((()=>{var t=qs(),e=gn().right,i=t.aTypedArray;(0,t.exportTypedArrayMethod)("reduceRight",(function(t){return e(i(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))})),Oa=(0,s.R)((()=>{var t=qs(),e=t.aTypedArray,i=t.exportTypedArrayMethod,r=Math.floor;i("reverse",(function(){for(var t,i=this,n=e(i).length,o=r(n/2),s=0;s<o;)t=i[s],i[s++]=i[--n],i[n]=t;return i}))})),Aa=(0,s.R)((()=>{var t=qs(),e=Le(),i=ia(),r=qe(),n=ae(),o=t.aTypedArray;(0,t.exportTypedArrayMethod)("set",(function(t){o(this);var n=i(arguments.length>1?arguments[1]:void 0,1),s=this.length,a=r(t),l=e(a.length),c=0;if(l+n>s)throw RangeError("Wrong length");for(;c<l;)this[n+c]=a[c++]}),n((function(){new Int8Array(1).set({})})))})),Fa=(0,s.R)((()=>{var t=qs(),e=Vn(),i=ae(),r=t.aTypedArray,n=t.aTypedArrayConstructor,o=t.exportTypedArrayMethod,s=[].slice;o("slice",(function(t,i){for(var o=s.call(r(this),t,i),a=e(this,this.constructor),l=0,c=o.length,u=new(n(a))(c);c>l;)u[l]=o[l++];return u}),i((function(){new Int8Array(1).slice()})))})),Ma=(0,s.R)((()=>{var t=qs(),e=bi().some,i=t.aTypedArray;(0,t.exportTypedArrayMethod)("some",(function(t){return e(i(this),t,arguments.length>1?arguments[1]:void 0)}))})),Pa=(0,s.R)((()=>{var t=qs(),e=t.aTypedArray,i=t.exportTypedArrayMethod,r=[].sort;i("sort",(function(t){return r.call(e(this),t)}))})),Ba=(0,s.R)((()=>{var t=qs(),e=Le(),i=Ne(),r=Vn(),n=t.aTypedArray;(0,t.exportTypedArrayMethod)("subarray",(function(t,o){var s=n(this),a=s.length,l=i(t,a);return new(r(s,s.constructor))(s.buffer,s.byteOffset+l*s.BYTES_PER_ELEMENT,e((void 0===o?a:i(o,a))-l))}))})),za=(0,s.R)((()=>{var t=se(),e=qs(),i=ae(),r=t.Int8Array,n=e.aTypedArray,o=e.exportTypedArrayMethod,s=[].toLocaleString,a=[].slice,l=!!r&&i((function(){s.call(new r(1))}));o("toLocaleString",(function(){return s.apply(l?a.call(n(this)):n(this),arguments)}),i((function(){return[1,2].toLocaleString()!=new r([1,2]).toLocaleString()}))||!i((function(){r.prototype.toLocaleString.call([1,2])})))})),La=(0,s.R)((()=>{var t=qs().exportTypedArrayMethod,e=ae(),i=se().Uint8Array,r=i&&i.prototype||{},n=[].toString,o=[].join;e((function(){n.call({})}))&&(n=function(){return o.call(this)});var s=r.toString!=n;t("toString",n,s)})),Na=(0,s.R)((()=>{var t=Xe(),e=Be(),i=yi(),r=xe(),n=ae(),o=e("Reflect","apply"),s=Function.apply;t({target:"Reflect",stat:!0,forced:!n((function(){o((function(){}))}))},{apply:function(t,e,n){return i(t),r(n),o?o(t,e,n):s.call(t,e,n)}})})),Ua=(0,s.R)((()=>{var t=Xe(),e=Be(),i=yi(),r=xe(),n=me(),o=pi(),s=Ur(),a=ae(),l=e("Reflect","construct"),c=a((function(){function t(){}return!(l((function(){}),[],t)instanceof t)})),u=!a((function(){l((function(){}))})),h=c||u;t({target:"Reflect",stat:!0,forced:h,sham:h},{construct:function(t,e){i(t),r(e);var a=arguments.length<3?t:i(arguments[2]);if(u&&!c)return l(t,e,a);if(t==a){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var h=[null];return h.push.apply(h,e),new(s.apply(t,h))}var d=a.prototype,p=o(n(d)?d:Object.prototype),f=Function.apply.call(t,p,e);return n(f)?f:p}})})),ja=(0,s.R)((()=>{var t=Xe(),e=le(),i=xe(),r=ge(),n=we();t({target:"Reflect",stat:!0,forced:ae()((function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})})),sham:!e},{defineProperty:function(t,e,o){i(t);var s=r(e,!0);i(o);try{return n.f(t,s,o),!0}catch(t){return!1}}})})),Ha=(0,s.R)((()=>{var t=Xe(),e=xe(),i=be().f;t({target:"Reflect",stat:!0},{deleteProperty:function(t,r){var n=i(e(t),r);return!(n&&!n.configurable)&&delete t[r]}})})),Wa=(0,s.R)((()=>{var t=Xe(),e=me(),i=xe(),r=_e(),n=be(),o=Zi();t({target:"Reflect",stat:!0},{get:function t(s,a){var l,c,u=arguments.length<3?s:arguments[2];return i(s)===u?s[a]:(l=n.f(s,a))?r(l,"value")?l.value:void 0===l.get?void 0:l.get.call(u):e(c=o(s))?t(c,a,u):void 0}})})),Ga=(0,s.R)((()=>{var t=Xe(),e=le(),i=xe(),r=be();t({target:"Reflect",stat:!0,sham:!e},{getOwnPropertyDescriptor:function(t,e){return r.f(i(t),e)}})})),Va=(0,s.R)((()=>{var t=Xe(),e=xe(),i=Zi();t({target:"Reflect",stat:!0,sham:!$i()},{getPrototypeOf:function(t){return i(e(t))}})})),$a=(0,s.R)((()=>{Xe()({target:"Reflect",stat:!0},{has:function(t,e){return e in t}})})),Za=(0,s.R)((()=>{var t=Xe(),e=xe(),i=Object.isExtensible;t({target:"Reflect",stat:!0},{isExtensible:function(t){return e(t),!i||i(t)}})})),Xa=(0,s.R)((()=>{Xe()({target:"Reflect",stat:!0},{ownKeys:Ve()})})),Ya=(0,s.R)((()=>{var t=Xe(),e=Be(),i=xe();t({target:"Reflect",stat:!0,sham:!gr()},{preventExtensions:function(t){i(t);try{var r=e("Object","preventExtensions");return r&&r(t),!0}catch(t){return!1}}})})),qa=(0,s.R)((()=>{var t=Xe(),e=xe(),i=me(),r=_e(),n=ae(),o=we(),s=be(),a=Zi(),l=ue();t({target:"Reflect",stat:!0,forced:n((function(){var t=o.f({},"a",{configurable:!0});return!1!==Reflect.set(a(t),"a",1,t)}))},{set:function t(n,c,u){var h,d,p=arguments.length<4?n:arguments[3],f=s.f(e(n),c);if(!f){if(i(d=a(n)))return t(d,c,u,p);f=l(0)}if(r(f,"value")){if(!1===f.writable||!i(p))return!1;if(h=s.f(p,c)){if(h.get||h.set||!1===h.writable)return!1;h.value=u,o.f(p,c,h)}else o.f(p,c,l(0,u));return!0}return void 0!==f.set&&(f.set.call(p,u),!0)}})})),Ka=(0,s.R)((()=>{var t=Xe(),e=xe(),i=Ki(),r=Qi();r&&t({target:"Reflect",stat:!0},{setPrototypeOf:function(t,n){e(t),i(n);try{return r(t,n),!0}catch(t){return!1}}})})),Qa=(0,s.R)(((t,e)=>{xi(),wi(),Si(),ki(),Ci(),Ti(),Ei(),Ri(),Di(),Ii(),Oi(),Ai(),Fi(),Mi(),Pi(),ur(),hr(),dr(),pr(),mr(),yr(),br(),xr(),wr(),Sr(),kr(),Tr(),Er(),Rr(),Dr(),Ir(),Or(),Ar(),Fr(),Mr(),ci(),Br(),zr(),Lr(),Nr(),jr(),Hr(),Wr(),Gr(),sr(),Vr(),$r(),oi(),Yr(),Qr(),tn(),en(),rn(),nn(),sn(),an(),cn(),un(),hn(),dn(),fn(),mn(),_n(),yn(),vn(),bn(),xn(),wn(),Sn(),Cn(),Tn(),En(),Rn(),Dn(),In(),On(),Pn(),Bn(),Gn(),$n(),qn(),Kn(),Qn(),Jn(),to(),eo(),io(),so(),ao(),lo(),tr(),ho(),po(),fo(),mo(),go(),_o(),yo(),vo(),bo(),xo(),wo(),So(),ko(),To(),Un(),Eo(),Ro(),Do(),Io(),Ao(),Mo(),Po(),Bo(),Lo(),Uo(),jo(),Ho(),Wo(),Go(),Vo(),$o(),Xo(),Yo(),Ko(),Qo(),Jo(),es(),is(),ns(),os(),as(),ls(),cs(),us(),hs(),ds(),ps(),fs(),ms(),Bi(),gs(),_s(),ys(),bs(),xs(),Ss(),ks(),zi(),Ps(),Bs(),zs(),Us(),js(),Ws(),Gs(),Ys(),Ks(),Qs(),Js(),oa(),sa(),aa(),la(),ca(),ua(),ha(),da(),pa(),fa(),ma(),ga(),_a(),ya(),va(),ba(),xa(),wa(),Sa(),ka(),Ca(),Ta(),Ea(),Ra(),Da(),Ia(),Oa(),Aa(),Fa(),Ma(),Pa(),Ba(),za(),La(),Na(),Ua(),ja(),Ha(),Wa(),Ga(),Va(),$a(),Za(),Xa(),Ya(),qa(),Ka();var i=Pe();e.exports=i})),Ja=(0,s.R)(((t,e)=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}})),tl=(0,s.R)((()=>{var t=se(),e=Ja(),i=ln(),r=Se();for(var n in e){var o=t[n],s=o&&o.prototype;if(s&&s.forEach!==i)try{r(s,"forEach",i)}catch(t){s.forEach=i}}})),el=(0,s.R)((()=>{var t=se(),e=Ja(),i=Rn(),r=Se(),n=ti(),o=n("iterator"),s=n("toStringTag"),a=i.values;for(var l in e){var c=t[l],u=c&&c.prototype;if(u){if(u[o]!==a)try{r(u,o,a)}catch(t){u[o]=a}if(u[s]||r(u,s,l),e[l])for(var h in i)if(u[h]!==i[h])try{r(u,h,i[h])}catch(t){u[h]=i[h]}}}})),il=(0,s.R)((()=>{var t=Xe(),e=se(),i=Ds();t({global:!0,bind:!0,enumerable:!0,forced:!e.setImmediate||!e.clearImmediate},{setImmediate:i.set,clearImmediate:i.clear})})),rl=(0,s.R)((()=>{var t=Xe(),e=se(),i=Is(),r=he(),n=e.process,o="process"==r(n);t({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(t){var e=o&&n.domain;i(e?e.bind(t):t)}})})),nl=(0,s.R)((()=>{var t=Xe(),e=se(),i=ii(),r=[].slice,n=function(t){return function(e,i){var n=arguments.length>2,o=n?r.call(arguments,2):void 0;return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,o)}:e,i)}};t({global:!0,bind:!0,forced:/MSIE .\./.test(i)},{setTimeout:n(e.setTimeout),setInterval:n(e.setInterval)})})),ol=(0,s.R)(((t,e)=>{var i=ae(),r=ti(),n=Re(),o=r("iterator");e.exports=!i((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,i="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),i+=r+t})),n&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host}))})),sl=(0,s.R)(((t,e)=>{var i=2147483647,r=/[^\0-\u007E]/,n=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",s=Math.floor,a=String.fromCharCode,l=function(t){return t+22+75*(t<26)},c=function(t,e,i){var r=0;for(t=i?s(t/700):t>>1,t+=s(t/e);t>455;r+=36)t=s(t/35);return s(r+36*t/(t+38))},u=function(t){var e,r,n=[],u=(t=function(t){for(var e=[],i=0,r=t.length;i<r;){var n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<r){var o=t.charCodeAt(i++);56320==(64512&o)?e.push(((1023&n)<<10)+(1023&o)+65536):(e.push(n),i--)}else e.push(n)}return e}(t)).length,h=128,d=0,p=72;for(e=0;e<t.length;e++)(r=t[e])<128&&n.push(a(r));var f=n.length,m=f;for(f&&n.push("-");m<u;){var g=i;for(e=0;e<t.length;e++)(r=t[e])>=h&&r<g&&(g=r);var _=m+1;if(g-h>s((i-d)/_))throw RangeError(o);for(d+=(g-h)*_,h=g,e=0;e<t.length;e++){if((r=t[e])<h&&++d>i)throw RangeError(o);if(r==h){for(var y=d,v=36;;v+=36){var b=v<=p?1:v>=p+26?26:v-p;if(y<b)break;var x=y-b,w=36-b;n.push(a(l(b+x%w))),y=s(x/w)}n.push(a(l(y))),p=c(d,_,m==f),d=0,++m}}++d,++h}return n.join("")};e.exports=function(t){var e,i,o=[],s=t.toLowerCase().replace(n,".").split(".");for(e=0;e<s.length;e++)i=s[e],o.push(r.test(i)?"xn--"+u(i):i);return o.join(".")}})),al=(0,s.R)(((t,e)=>{var i=xe(),r=rr();e.exports=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return i(e.call(t))}})),ll=(0,s.R)(((t,e)=>{Rn();var i=Xe(),r=Be(),n=ol(),o=Me(),s=Ts(),a=_i(),l=qi(),c=Fe(),u=Es(),h=_e(),d=vi(),p=ai(),f=xe(),m=me(),g=pi(),_=ue(),y=al(),v=rr(),b=ti(),x=r("fetch"),w=r("Headers"),S=b("iterator"),k="URLSearchParams",C=k+"Iterator",T=c.set,E=c.getterFor(k),R=c.getterFor(C),D=/\+/g,I=Array(4),O=function(t){return I[t-1]||(I[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},A=function(t){try{return decodeURIComponent(t)}catch(e){return t}},F=function(t){var e=t.replace(D," "),i=4;try{return decodeURIComponent(e)}catch(t){for(;i;)e=e.replace(O(i--),A);return e}},M=/[!'()~]|%20/g,P={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},B=function(t){return P[t]},z=function(t){return encodeURIComponent(t).replace(M,B)},L=function(t,e){if(e)for(var i,r,n=e.split("&"),o=0;o<n.length;)(i=n[o++]).length&&(r=i.split("="),t.push({key:F(r.shift()),value:F(r.join("="))}))},N=function(t){this.entries.length=0,L(this.entries,t)},U=function(t,e){if(t<e)throw TypeError("Not enough arguments")},j=l((function(t,e){T(this,{type:C,iterator:y(E(t).entries),kind:e})}),"Iterator",(function(){var t=R(this),e=t.kind,i=t.iterator.next(),r=i.value;return i.done||(i.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),i})),H=function(){u(this,H,k);var t,e,i,r,n,o,s,a,l,c=arguments.length>0?arguments[0]:void 0,d=this,p=[];if(T(d,{type:k,entries:p,updateURL:function(){},updateSearchParams:N}),void 0!==c)if(m(c))if("function"==typeof(t=v(c)))for(i=(e=t.call(c)).next;!(r=i.call(e)).done;){if((s=(o=(n=y(f(r.value))).next).call(n)).done||(a=o.call(n)).done||!o.call(n).done)throw TypeError("Expected sequence with length 2");p.push({key:s.value+"",value:a.value+""})}else for(l in c)h(c,l)&&p.push({key:l,value:c[l]+""});else L(p,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},W=H.prototype;s(W,{append:function(t,e){U(arguments.length,2);var i=E(this);i.entries.push({key:t+"",value:e+""}),i.updateURL()},delete:function(t){U(arguments.length,1);for(var e=E(this),i=e.entries,r=t+"",n=0;n<i.length;)i[n].key===r?i.splice(n,1):n++;e.updateURL()},get:function(t){U(arguments.length,1);for(var e=E(this).entries,i=t+"",r=0;r<e.length;r++)if(e[r].key===i)return e[r].value;return null},getAll:function(t){U(arguments.length,1);for(var e=E(this).entries,i=t+"",r=[],n=0;n<e.length;n++)e[n].key===i&&r.push(e[n].value);return r},has:function(t){U(arguments.length,1);for(var e=E(this).entries,i=t+"",r=0;r<e.length;)if(e[r++].key===i)return!0;return!1},set:function(t,e){U(arguments.length,1);for(var i,r=E(this),n=r.entries,o=!1,s=t+"",a=e+"",l=0;l<n.length;l++)(i=n[l]).key===s&&(o?n.splice(l--,1):(o=!0,i.value=a));o||n.push({key:s,value:a}),r.updateURL()},sort:function(){var t,e,i,r=E(this),n=r.entries,o=n.slice();for(n.length=0,i=0;i<o.length;i++){for(t=o[i],e=0;e<i;e++)if(n[e].key>t.key){n.splice(e,0,t);break}e===i&&n.push(t)}r.updateURL()},forEach:function(t){for(var e,i=E(this).entries,r=d(t,arguments.length>1?arguments[1]:void 0,3),n=0;n<i.length;)r((e=i[n++]).value,e.key,this)},keys:function(){return new j(this,"keys")},values:function(){return new j(this,"values")},entries:function(){return new j(this,"entries")}},{enumerable:!0}),o(W,S,W.entries),o(W,"toString",(function(){for(var t,e=E(this).entries,i=[],r=0;r<e.length;)t=e[r++],i.push(z(t.key)+"="+z(t.value));return i.join("&")}),{enumerable:!0}),a(H,k),i({global:!0,forced:!n},{URLSearchParams:H}),!n&&"function"==typeof x&&"function"==typeof w&&i({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,i,r,n=[t];return arguments.length>1&&(m(e=arguments[1])&&(i=e.body,p(i)===k&&((r=e.headers?new w(e.headers):new w).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=g(e,{body:_(0,String(i)),headers:_(0,r)}))),n.push(e)),x.apply(this,n)}}),e.exports={URLSearchParams:H,getState:E}})),cl=(0,s.R)((()=>{tr();var t,e=Xe(),i=le(),r=ol(),n=se(),o=hi(),s=Me(),a=Es(),l=_e(),c=cr(),u=nr(),h=Vi().codeAt,d=sl(),p=_i(),f=ll(),m=Fe(),g=n.URL,_=f.URLSearchParams,y=f.getState,v=m.set,b=m.getterFor("URL"),x=Math.floor,w=Math.pow,S="Invalid scheme",k="Invalid host",C="Invalid port",T=/[A-Za-z]/,E=/[\d+-.A-Za-z]/,R=/\d/,D=/^(0x|0X)/,I=/^[0-7]+$/,O=/^\d+$/,A=/^[\dA-Fa-f]+$/,F=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,M=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,P=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,B=/[\u0009\u000A\u000D]/g,z=function(t,e){var i,r,n;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return k;if(!(i=N(e.slice(1,-1))))return k;t.host=i}else if(Z(t)){if(e=d(e),F.test(e))return k;if(null===(i=L(e)))return k;t.host=i}else{if(M.test(e))return k;for(i="",r=u(e),n=0;n<r.length;n++)i+=V(r[n],j);t.host=i}},L=function(t){var e,i,r,n,o,s,a,l=t.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(e=l.length)>4)return t;for(i=[],r=0;r<e;r++){if(""==(n=l[r]))return t;if(o=10,n.length>1&&"0"==n.charAt(0)&&(o=D.test(n)?16:8,n=n.slice(8==o?1:2)),""===n)s=0;else{if(!(10==o?O:8==o?I:A).test(n))return t;s=parseInt(n,o)}i.push(s)}for(r=0;r<e;r++)if(s=i[r],r==e-1){if(s>=w(256,5-e))return null}else if(s>255)return null;for(a=i.pop(),r=0;r<i.length;r++)a+=i[r]*w(256,3-r);return a},N=function(t){var e,i,r,n,o,s,a,l=[0,0,0,0,0,0,0,0],c=0,u=null,h=0,d=function(){return t.charAt(h)};if(":"==d()){if(":"!=t.charAt(1))return;h+=2,u=++c}for(;d();){if(8==c)return;if(":"!=d()){for(e=i=0;i<4&&A.test(d());)e=16*e+parseInt(d(),16),h++,i++;if("."==d()){if(0==i)return;if(h-=i,c>6)return;for(r=0;d();){if(n=null,r>0){if(!("."==d()&&r<4))return;h++}if(!R.test(d()))return;for(;R.test(d());){if(o=parseInt(d(),10),null===n)n=o;else{if(0==n)return;n=10*n+o}if(n>255)return;h++}l[c]=256*l[c]+n,(2==++r||4==r)&&c++}if(4!=r)return;break}if(":"==d()){if(h++,!d())return}else if(d())return;l[c++]=e}else{if(null!==u)return;h++,u=++c}}if(null!==u)for(s=c-u,c=7;0!=c&&s>0;)a=l[c],l[c--]=l[u+s-1],l[u+--s]=a;else if(8!=c)return;return l},U=function(t){var e,i,r,n;if("number"==typeof t){for(e=[],i=0;i<4;i++)e.unshift(t%256),t=x(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,i=1,r=null,n=0,o=0;o<8;o++)0!==t[o]?(n>i&&(e=r,i=n),r=null,n=0):(null===r&&(r=o),++n);return n>i&&(e=r,i=n),e}(t),i=0;i<8;i++)n&&0===t[i]||(n&&(n=!1),r===i?(e+=i?":":"::",n=!0):(e+=t[i].toString(16),i<7&&(e+=":")));return"["+e+"]"}return t},j={},H=c({},j,{" ":1,'"':1,"<":1,">":1,"`":1}),W=c({},H,{"#":1,"?":1,"{":1,"}":1}),G=c({},W,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),V=function(t,e){var i=h(t,0);return i>32&&i<127&&!l(e,t)?t:encodeURIComponent(t)},$={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Z=function(t){return l($,t.scheme)},X=function(t){return""!=t.username||""!=t.password},Y=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},q=function(t,e){var i;return 2==t.length&&T.test(t.charAt(0))&&(":"==(i=t.charAt(1))||!e&&"|"==i)},K=function(t){var e;return t.length>1&&q(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},Q=function(t){var e=t.path,i=e.length;i&&("file"!=t.scheme||1!=i||!q(e[0],!0))&&e.pop()},J=function(t){return"."===t||"%2e"===t.toLowerCase()},tt=function(t){return".."===(t=t.toLowerCase())||"%2e."===t||".%2e"===t||"%2e%2e"===t},et={},it={},rt={},nt={},ot={},st={},at={},lt={},ct={},ut={},ht={},dt={},pt={},ft={},mt={},gt={},_t={},yt={},vt={},bt={},xt={},wt=function(e,i,r,n){var o,s,a,c,h=r||et,d=0,p="",f=!1,m=!1,g=!1;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,i=i.replace(P,"")),i=i.replace(B,""),o=u(i);d<=o.length;){switch(s=o[d],h){case et:if(!s||!T.test(s)){if(r)return S;h=rt;continue}p+=s.toLowerCase(),h=it;break;case it:if(s&&(E.test(s)||"+"==s||"-"==s||"."==s))p+=s.toLowerCase();else{if(":"!=s){if(r)return S;p="",h=rt,d=0;continue}if(r&&(Z(e)!=l($,p)||"file"==p&&(X(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=p,r)return void(Z(e)&&$[e.scheme]==e.port&&(e.port=null));p="","file"==e.scheme?h=ft:Z(e)&&n&&n.scheme==e.scheme?h=nt:Z(e)?h=lt:"/"==o[d+1]?(h=ot,d++):(e.cannotBeABaseURL=!0,e.path.push(""),h=vt)}break;case rt:if(!n||n.cannotBeABaseURL&&"#"!=s)return S;if(n.cannotBeABaseURL&&"#"==s){e.scheme=n.scheme,e.path=n.path.slice(),e.query=n.query,e.fragment="",e.cannotBeABaseURL=!0,h=xt;break}h="file"==n.scheme?ft:st;continue;case nt:if("/"!=s||"/"!=o[d+1]){h=st;continue}h=ct,d++;break;case ot:if("/"==s){h=ut;break}h=yt;continue;case st:if(e.scheme=n.scheme,s==t)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query;else if("/"==s||"\\"==s&&Z(e))h=at;else if("?"==s)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query="",h=bt;else{if("#"!=s){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.path.pop(),h=yt;continue}e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=n.path.slice(),e.query=n.query,e.fragment="",h=xt}break;case at:if(!Z(e)||"/"!=s&&"\\"!=s){if("/"!=s){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,h=yt;continue}h=ut}else h=ct;break;case lt:if(h=ct,"/"!=s||"/"!=p.charAt(d+1))continue;d++;break;case ct:if("/"!=s&&"\\"!=s){h=ut;continue}break;case ut:if("@"==s){f&&(p="%40"+p),f=!0,a=u(p);for(var _=0;_<a.length;_++){var y=a[_];if(":"!=y||g){var v=V(y,G);g?e.password+=v:e.username+=v}else g=!0}p=""}else if(s==t||"/"==s||"?"==s||"#"==s||"\\"==s&&Z(e)){if(f&&""==p)return"Invalid authority";d-=u(p).length+1,p="",h=ht}else p+=s;break;case ht:case dt:if(r&&"file"==e.scheme){h=gt;continue}if(":"!=s||m){if(s==t||"/"==s||"?"==s||"#"==s||"\\"==s&&Z(e)){if(Z(e)&&""==p)return k;if(r&&""==p&&(X(e)||null!==e.port))return;if(c=z(e,p))return c;if(p="",h=_t,r)return;continue}"["==s?m=!0:"]"==s&&(m=!1),p+=s}else{if(""==p)return k;if(c=z(e,p))return c;if(p="",h=pt,r==dt)return}break;case pt:if(!R.test(s)){if(s==t||"/"==s||"?"==s||"#"==s||"\\"==s&&Z(e)||r){if(""!=p){var b=parseInt(p,10);if(b>65535)return C;e.port=Z(e)&&b===$[e.scheme]?null:b,p=""}if(r)return;h=_t;continue}return C}p+=s;break;case ft:if(e.scheme="file","/"==s||"\\"==s)h=mt;else{if(!n||"file"!=n.scheme){h=yt;continue}if(s==t)e.host=n.host,e.path=n.path.slice(),e.query=n.query;else if("?"==s)e.host=n.host,e.path=n.path.slice(),e.query="",h=bt;else{if("#"!=s){K(o.slice(d).join(""))||(e.host=n.host,e.path=n.path.slice(),Q(e)),h=yt;continue}e.host=n.host,e.path=n.path.slice(),e.query=n.query,e.fragment="",h=xt}}break;case mt:if("/"==s||"\\"==s){h=gt;break}n&&"file"==n.scheme&&!K(o.slice(d).join(""))&&(q(n.path[0],!0)?e.path.push(n.path[0]):e.host=n.host),h=yt;continue;case gt:if(s==t||"/"==s||"\\"==s||"?"==s||"#"==s){if(!r&&q(p))h=yt;else if(""==p){if(e.host="",r)return;h=_t}else{if(c=z(e,p))return c;if("localhost"==e.host&&(e.host=""),r)return;p="",h=_t}continue}p+=s;break;case _t:if(Z(e)){if(h=yt,"/"!=s&&"\\"!=s)continue}else if(r||"?"!=s)if(r||"#"!=s){if(s!=t&&(h=yt,"/"!=s))continue}else e.fragment="",h=xt;else e.query="",h=bt;break;case yt:if(s==t||"/"==s||"\\"==s&&Z(e)||!r&&("?"==s||"#"==s)){if(tt(p)?(Q(e),"/"!=s&&!("\\"==s&&Z(e))&&e.path.push("")):J(p)?"/"!=s&&!("\\"==s&&Z(e))&&e.path.push(""):("file"==e.scheme&&!e.path.length&&q(p)&&(e.host&&(e.host=""),p=p.charAt(0)+":"),e.path.push(p)),p="","file"==e.scheme&&(s==t||"?"==s||"#"==s))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==s?(e.query="",h=bt):"#"==s&&(e.fragment="",h=xt)}else p+=V(s,W);break;case vt:"?"==s?(e.query="",h=bt):"#"==s?(e.fragment="",h=xt):s!=t&&(e.path[0]+=V(s,j));break;case bt:r||"#"!=s?s!=t&&("'"==s&&Z(e)?e.query+="%27":e.query+="#"==s?"%23":V(s,j)):(e.fragment="",h=xt);break;case xt:s!=t&&(e.fragment+=V(s,H))}d++}},St=function(t){var e,r,n=a(this,St,"URL"),o=arguments.length>1?arguments[1]:void 0,s=String(t),l=v(n,{type:"URL"});if(void 0!==o)if(o instanceof St)e=b(o);else if(r=wt(e={},String(o)))throw TypeError(r);if(r=wt(l,s,null,e))throw TypeError(r);var c=l.searchParams=new _,u=y(c);u.updateSearchParams(l.query),u.updateURL=function(){l.query=String(c)||null},i||(n.href=Ct.call(n),n.origin=Tt.call(n),n.protocol=Et.call(n),n.username=Rt.call(n),n.password=Dt.call(n),n.host=It.call(n),n.hostname=Ot.call(n),n.port=At.call(n),n.pathname=Ft.call(n),n.search=Mt.call(n),n.searchParams=Pt.call(n),n.hash=Bt.call(n))},kt=St.prototype,Ct=function(){var t=b(this),e=t.scheme,i=t.username,r=t.password,n=t.host,o=t.port,s=t.path,a=t.query,l=t.fragment,c=e+":";return null!==n?(c+="//",X(t)&&(c+=i+(r?":"+r:"")+"@"),c+=U(n),null!==o&&(c+=":"+o)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(c+="?"+a),null!==l&&(c+="#"+l),c},Tt=function(){var t=b(this),e=t.scheme,i=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&Z(t)?e+"://"+U(t.host)+(null!==i?":"+i:""):"null"},Et=function(){return b(this).scheme+":"},Rt=function(){return b(this).username},Dt=function(){return b(this).password},It=function(){var t=b(this),e=t.host,i=t.port;return null===e?"":null===i?U(e):U(e)+":"+i},Ot=function(){var t=b(this).host;return null===t?"":U(t)},At=function(){var t=b(this).port;return null===t?"":String(t)},Ft=function(){var t=b(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Mt=function(){var t=b(this).query;return t?"?"+t:""},Pt=function(){return b(this).searchParams},Bt=function(){var t=b(this).fragment;return t?"#"+t:""},zt=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(i&&o(kt,{href:zt(Ct,(function(t){var e=b(this),i=String(t),r=wt(e,i);if(r)throw TypeError(r);y(e.searchParams).updateSearchParams(e.query)})),origin:zt(Tt),protocol:zt(Et,(function(t){var e=b(this);wt(e,String(t)+":",et)})),username:zt(Rt,(function(t){var e=b(this),i=u(String(t));if(!Y(e)){e.username="";for(var r=0;r<i.length;r++)e.username+=V(i[r],G)}})),password:zt(Dt,(function(t){var e=b(this),i=u(String(t));if(!Y(e)){e.password="";for(var r=0;r<i.length;r++)e.password+=V(i[r],G)}})),host:zt(It,(function(t){var e=b(this);e.cannotBeABaseURL||wt(e,String(t),ht)})),hostname:zt(Ot,(function(t){var e=b(this);e.cannotBeABaseURL||wt(e,String(t),dt)})),port:zt(At,(function(t){var e=b(this);Y(e)||(""==(t=String(t))?e.port=null:wt(e,t,pt))})),pathname:zt(Ft,(function(t){var e=b(this);e.cannotBeABaseURL||(e.path=[],wt(e,t+"",_t))})),search:zt(Mt,(function(t){var e=b(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",wt(e,t,bt)),y(e.searchParams).updateSearchParams(e.query)})),searchParams:zt(Pt),hash:zt(Bt,(function(t){var e=b(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",wt(e,t,xt)):e.fragment=null}))}),s(kt,"toJSON",(function(){return Ct.call(this)}),{enumerable:!0}),s(kt,"toString",(function(){return Ct.call(this)}),{enumerable:!0}),g){var Lt=g.createObjectURL,Nt=g.revokeObjectURL;Lt&&s(St,"createObjectURL",(function(t){return Lt.apply(g,arguments)})),Nt&&s(St,"revokeObjectURL",(function(t){return Nt.apply(g,arguments)}))}p(St,"URL"),e({global:!0,forced:!r,sham:!i},{URL:St})})),ul=(0,s.R)((()=>{Xe()({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})})),hl=(0,s.R)(((t,e)=>{tl(),el(),il(),rl(),nl(),cl(),ul(),ll();var i=Pe();e.exports=i})),dl=(0,s.R)(((t,e)=>{Qa(),hl();var i=Pe();e.exports=i})),pl=(0,s.R)(((t,e)=>{var i=function(t){var e,i=Object.prototype,r=i.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,i){return t[e]=i}}function c(t,e,i,r){var n=e&&e.prototype instanceof g?e:g,o=Object.create(n.prototype),s=new R(r||[]);return o._invoke=function(t,e,i){var r=h;return function(n,o){if(r===p)throw new Error("Generator is already running");if(r===f){if("throw"===n)throw o;return I()}for(i.method=n,i.arg=o;;){var s=i.delegate;if(s){var a=C(s,i);if(a){if(a===m)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===h)throw r=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=p;var l=u(t,e,i);if("normal"===l.type){if(r=i.done?f:d,l.arg===m)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(r=f,i.method="throw",i.arg=l.arg)}}}(t,i,s),o}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h="suspendedStart",d="suspendedYield",p="executing",f="completed",m={};function g(){}function _(){}function y(){}var v={};v[o]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(D([])));x&&x!==i&&r.call(x,o)&&(v=x);var w=y.prototype=g.prototype=Object.create(v);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function i(n,o,s,a){var l=u(t[n],t,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,s,a)}),(function(t){i("throw",t,s,a)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return i("throw",t,s,a)}))}a(l.arg)}var n;this._invoke=function(t,r){function o(){return new e((function(e,n){i(t,r,e,n)}))}return n=n?n.then(o,o):o()}}function C(t,i){var r=t.iterator[i.method];if(r===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,C(t,i),"throw"===i.method))return m;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=u(r,t.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,m;var o=n.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,m):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function D(t){if(t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function i(){for(;++n<t.length;)if(r.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=e,i.done=!0,i};return s.next=s}}return{next:I}}function I(){return{value:e,done:!0}}return _.prototype=w.constructor=y,y.constructor=_,_.displayName=l(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,a,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},S(k.prototype),k.prototype[s]=function(){return this},t.AsyncIterator=k,t.async=function(e,i,r,n,o){void 0===o&&(o=Promise);var s=new k(c(e,i,r,n),o);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(w),l(w,a,"Generator"),w[o]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var r=e.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=D,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function n(r,n){return a.type="throw",a.arg=t,i.next=r,n&&(i.method="next",i.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),E(i),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var n=r.arg;E(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:D(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}("object"==typeof e?e.exports:{});try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}})),fl=(0,s.R)(((t,e)=>{var i=se(),r=vi(),n=Function.call;e.exports=function(t,e,o){return r(n,i[t].prototype[e],o)}})),ml=(0,s.R)(((t,e)=>{rn();var i=fl();e.exports=i("Array","find")})),gl=(0,s.R)(((t,e)=>{var i=ml();e.exports=i})),_l=(0,s.R)(((t,e)=>{mn();var i=fl();e.exports=i("Array","map")})),yl=(0,s.R)(((t,e)=>{var i=_l();e.exports=i}));"undefined"==typeof Promise&&(ie().enable(),self.Promise=re()),"undefined"!=typeof window&&ne(),Object.assign=oe(),Gi(),lr(),dl(),pl();(0,s.U)(gl()),(0,s.U)(yl());var vl=r(9669),bl=r.n(vl);Ft({container:"#editor",image:"".concat(i.api_url,"/images/white_list.jpg"),theme:"light",layout:"basic",tools:["textdesign","text","filter","frame"],controlsOrder:["textdesign","text","filter","frame"],download:!1,license:'{"api_token":"OyrvR-LJTLMwfEeXyVx6cA","app_identifiers":["*.ngrok.io","cander-shopify.dev.pfrus.com","candershopifyapp.com"],"available_actions":[],"domains":["https://api.photoeditorsdk.com"],"enterprise_license":false,"expires_at":null,"features":["camera","library","export","customassets","whitelabel","filter","frame","textdesign"],"issued_at":1619451433,"minimum_sdk_version":"1.0","owner":"Cander","platform":"HTML5","products":["pesdk"],"version":"2.4","signature":"HPse/4zh0oEsmtKkl35davAopCQTXb462YrPJRmEInonCLo22QoNuqKVsvoAfYF62BmVWCfUxTkqDu8BjlFPeIRBqJ4hKer1HM7Cda5rjgrbVbrGHgW/XAmvWBhat20IvUf+YOeERz8BeD8N7C8WBBsgoT+on5HJwq56EYD2KbCJy/2swqrMzFPjZgqKn+EeSPZnZ0XCokRpGafe8XvUnsZds0iKUP52s9tyg2oS1tx9RtSvSldslBvZvzKXuU5MhNir968UbwwlBCBktEUcGjmN3ssWQBSsBq5IQdJH0k5kXpY9fhwtwrJVwj/TTeqQfrD9KWcem2Q4z2MAPAoVZ4fPo/TjKjg4Jg0pt3IlvNpB3/Afjz3DkBHS4H1RdHtYvLFT0lwFZd5eGCuG5o3U2HQBebiGVby0xCJWvU187gaTmqc049Y3pOj3kKCaPSPDCIrzs/Ro98xGZ7AGvbQd1CDxFtHfqwgyuQmrOd3brOi5qdeHjDAkq8oRWAGEzaVeT4aH6Ltj0vcZHIHzQtUYtXcqAr9iTbAncOSVY153qd+7UDia/QLxbAkxAWX+zpyTjsZ1BvI1F18cykc7UIzreABcztZZautx38SodK5CL3Jf/Y2VAs5fBhJ58sLGdJLppPLRBB9KgCq4ev1ZWJXCS63xesUJ4A7e3nwk3cgZ3zA="}',enableZoom:!0,assetBaseUrl:"".concat(i.api_url,"/assets"),custom:{languages:{en:{mainCanvasActions:{buttonExport:"Done"}}}},text:{defaultColor:[0,0,0,1],disableAutoScaling:!1,fonts:[{identifier:"imgly_font_aleo_bold"},{identifier:"imgly_font_campton_bold"},{identifier:"imgly_font_carter_one"},{identifier:"imgly_font_galano_grotesque_bold"}]},textdesign:{defaultColor:[0,0,0,1],disableAutoScaling:!1,items:[{identifier:"imgly_text_design_blocks"},{identifier:"imgly_text_design_rotated"},{identifier:"imgly_text_design_blocks_light"},{identifier:"imgly_text_design_equal_width"},{identifier:"imgly_text_design_masked"},{identifier:"imgly_text_design_celebrate"},{identifier:"imgly_text_design_sunshine"},{identifier:"imgly_text_design_masked_badge"},{identifier:"imgly_text_design_blocks_condensed"},{identifier:"imgly_text_design_celebrate_simple"},{identifier:"imgly_text_design_equal_width_fat"},{identifier:"imgly_text_design_watercolor"},{identifier:"imgly_text_design_particles"},{identifier:"imgly_text_design_masked_speech_bubble"},{identifier:"imgly_text_design_masked_speech_bubble_comic"},{identifier:"imgly_text_design_multiline"}]},export:{image:{enableDownload:!1,format:s.e.JPEG,exportType:s.d.DATA_URL}}}).then((function(t){var e=document.querySelectorAll('[data-test="MainBarButtonClose"]'),r=document.querySelectorAll('[data-test="MainCanvasActionBar"]');e[0].style.display="none",r[0].style.width="70%",r[0].style.left="15%";var n=document.querySelectorAll('[data-test="Done"]');n[0].style.background="#38a169",n[0].style.border="1px solid #38a169",n[0].getElementsByTagName("svg")[0].style.display="none";n[0].getElementsByClassName("sc-clsHhM")[0].innerHTML+='\n        <svg width="18" height="14" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M5.99999 11.2L1.79999 6.99998L0.399994 8.39998L5.99999 14L18 1.99998L16.6 0.599976L5.99999 11.2Z" fill="#ffffff"/>\n        </svg>\n    ';t.on(s.h.CLOSE,(function(){})),t.on(s.h.EXPORT,(function(t){var e=new URLSearchParams(window.location.search),r=document.querySelectorAll('[data-test="Done"]');r[0].style.display="flex",r[0].style.alignItems="center",r[0].style.lineHeight="22px",r[0].disabled=!0,r[0].innerHTML+='<img style="height: 22px;" src="'.concat(i.api_url,'/images/preloader.gif"></img>'),e.get("code")&&""!=e.get("code")&&bl().post("photoeditor/add/"+e.get("code"),{data:t}).then((function(t){})).catch((function(t){console.log(t.message),alert("editor ".concat(t.message))}))}))}))})()})();